<div class="aside-pane">

  <button id="close" class="btn btn-sm btn-primary" (click)="closeAsidePane($event)">X</button>

  <div class="form_header">
    <h2 *ngIf="selectedService === 'TAXPRO' || 'VAYANA'">Choose Provider (GSP)</h2>
    <h2 *ngIf="gspSessionOtpAuthorized && !pointsAcceptedSubmitted">Points to note before submitting your GST
      return:</h2>
    <h2 *ngIf="gspSessionOtpAuthorized && pointsAcceptedSubmitted">Submit GST Return:</h2>
    <h2 *ngIf="selectedService === 'RECONCILE'">Gst Reconcile</h2>
  </div>

  <div class="form_body witBg clearfix mrBChldLbl">

    <div class="form_bg clearfix">

      <!-- region before otp verified -->
      <div *ngIf="!gspSessionOtpAuthorized">
        <!-- Choose Provider -->
        <div class="form-group" *ngIf="selectedService === 'TAXPRO' || selectedService === 'VAYANA' ">

          <div class="row">
            <div class="col-xs-6">

              <div class="form-group">

                <label for="tax_pro_otp">Select Platform</label>

                <select class="form-control" (click)="changeProvider()" [(ngModel)]="selectedService"
                        [disabled]="otpSentSuccessFully">
                  <option value="VAYANA">VAYANA Gsp</option>
                  <option value="TAXPRO">TAXPRO Gsp</option>
                </select>

              </div>

            </div>
          </div>

        </div>

        <!-- TAX PRO || VYANA-->
        <form class="form-group" *ngIf="selectedService === 'TAXPRO' || selectedService === 'VAYANA'">

          <div class="row">

            <div class="col-xs-6">

              <div class="form-group">
                <label for="tax_pro_username">Username:</label>
                <input autocomplete="off" type="text" name="username" class="form-control" id="tax_pro_username"
                       [(ngModel)]="taxProForm.userName" required [disabled]="otpSentSuccessFully">
              </div>

            </div>

            <div class="col-xs-6">

              <div class="form-group">
                <label for="tax_pro_gst_number">GSTIN:</label>
                <input autocomplete="off" type="text" name="gstin" class="form-control" id="tax_pro_gst_number"
                       [(ngModel)]="taxProForm.gstin" required [disabled]="otpSentSuccessFully">
              </div>

            </div>

            <div class="col-xs-12" *ngIf="otpSentSuccessFully">

              <div class="d-flex">

                <div>
                  <label for="tax_pro_otp">Enter OTP:</label>
                  <input autocomplete="off" type="text" name="otp" class="form-control" id="tax_pro_otp"
                         [(ngModel)]="taxProForm.otp">
                </div>

                <div style="align-self: flex-end;">
                  <a class="btn btn-link" (click)="resendOtp()" href="javascript:void 0">Resend Otp</a>
                </div>

              </div>
            </div>

          </div>

          <div class="row">

            <div class="col-xs-12 mrT1">
              <button class="btn btn-success" [ladda]="saveGspSessionInProcess || authorizeGspSessionOtpInProcess"
                      (click)="save()"
                      [disabled]="(!taxProForm.gstin || !taxProForm.userName)">{{ !otpSentSuccessFully ? 'Get Otp' : 'Verify Otp'}}
              </button>
              <button class="btn btn-default" (click)="resetTaxPro()">Cancel</button>
            </div>

          </div>

        </form>

        <!--reconcile-->
        <form class="form-group" #reconcileFormVM="ngForm" *ngIf="selectedService === 'RECONCILE'">
          <div class="row">

            <ng-container>

              <ng-container *ngIf="!(reconcileOtpSuccess$ | async)">

                <div class="col-xs-6">

                  <div class="form-group">
                    <label for="tax_pro_username">Username:</label>
                    <input autocomplete="off" type="text" name="username" class="form-control" id="reconcile_username"
                           [(ngModel)]="reconcileForm.uid">
                  </div>

                </div>
              </ng-container>

              <ng-container *ngIf="(reconcileOtpSuccess$ | async)">

                <div class="col-xs-6" *ngIf="(reconcileOtpSuccess$ | async)">
                  <div class="form-group">
                    <label for="reconcile_otp">OTP:</label>
                    <input autocomplete="off" type="text" name="otp" class="form-control" id="reconcile_otp"
                           [(ngModel)]="reconcileForm.otp">
                  </div>
                </div>

              </ng-container>

              <ng-container>

                <div class="col-xs-6" *ngIf="activeCompanyGstNumber">
                  <div class="form-group">
                    <label for="reconcile_otp">GSTN:</label>
                    <input autocomplete="off" type="text" name="otp" class="form-control" id="reconcile_gstn"
                           [value]="(companyGst$ | async)" [disabled]="true">
                  </div>
                </div>

              </ng-container>
            </ng-container>

            <ng-container>

              <div class="col-xs-12">
                            <span>
                Gst No - {{ (companyGst$ | async) }} Verified Successfully
              </span>
              </div>

            </ng-container>
          </div>

          <div class="row">

            <div class="col-xs-12 mrT1">

              <button class="btn btn-success" (click)="generateReconcileOtp(reconcileForm)"
                      *ngIf="!(reconcileOtpSuccess$ | async)" [ladda]="reconcileOtpInProcess$ | async"
                      [disabled]="!reconcileForm.uid">Submit
              </button>

              <button class="btn btn-success" (click)="sendReconcileOtp(reconcileForm)"
                      *ngIf="(reconcileOtpSuccess$ | async)" [ladda]="reconcileOtpVerifyInProcess$ | async"
                      [disabled]="!reconcileForm.otp">Submit
              </button>

              <button class="btn btn-default" (click)="closeAsidePane($event)">Cancel</button>

            </div>

          </div>
        </form>
        <!--reconcile-->
      </div>
      <!-- endregion -->

      <!-- region after otp verified -->

      <div *ngIf="gspSessionOtpAuthorized">

        <!-- region note point before submitting -->
        <div *ngIf="!pointsAcceptedSubmitted">
          <div class="container">

            <div class="row mt-1">

              <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 mb-2">

                <ul>

                  <li> kddagdb lacgda abgd dbdc dabjcfdfdc dvbufdyvda ga m dacdyfcd cgudfcydv cdvd</li>
                  <li style="padding-top: 10px"> kddagdb lacgda abgd dbdc dabjcfdfdc dvbufdyvda ga m dacdyfcd cgudfcydv
                    cdvd
                  </li>
                  <li style="padding-top: 10px"> kddagdb lacgda abgd dbdc dabjcfdfdc dvbufdyvda ga m dacdyfcd cgudfcydv
                    cdvd
                  </li>

                </ul>
              </div>

            </div>

            <hr>

            <div class="row mt-2">

              <div class="col-xs-12 col-md-12 col-lg-12 col-sm-12 d-flex">
                <span class="mr-1"> <input type="checkbox" [(ngModel)]="pointsAccepted"/></span>
                <label> <em>nflwjlfsdfskdfksd skdbfjsdbfksd sbdfgsdghvfsd sdfuisgdfsd dnfisdgfusd fdnuisdgfyusd
                  fnsdifgyusdf
                  djhfgsdu fsdjfghsyudf fsdnfukisdgifsdfksdgfsjdb fskdfgsud fsduifgsd fskdhfisd fskdhfusd </em></label>
              </div>

            </div>
            <hr>

          </div>

          <div>

            <button class="btn btn-default" [disabled]="!pointsAccepted" (click)="pointsAcceptedSubmitted = true">Next
            </button>

          </div>
        </div>
        <!-- endregion -->

        <!-- region submit gst -->
        <div *ngIf="pointsAcceptedSubmitted">

          <div class="gst-body">

            <div class="row">

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">
                <label class="text-muted">
                  GSTN USERNAME
                </label>
              </div>

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">

                <span>{{taxProForm.userName}}</span>
              </div>

            </div>

            <div class="row mt-1">

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">
                <label class="text-muted">
                  GSTN
                </label>
              </div>

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">
                <span>{{taxProForm.gstin}}</span>

              </div>
            </div>

            <div class="row mt-1">

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">
                <label class="text-muted">
                  PERIOD
                </label>
              </div>

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">

                <span>{{ getCurrentPeriod?.from }}</span> - <span>{{ getCurrentPeriod?.to }}</span>

              </div>
            </div>

            <div class="row mt-1">

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">
                <label class="text-muted">
                  RETURN TYPE
                </label>
              </div>

              <div class="col-xs-6 col-lg-6 col-md-6 col-sm-6">
                <span>{{selectedService === 'RECONCILE' ? 'GSTR-2' : 'GSTR-1 '}}</span>

              </div>
            </div>
          </div>

          <div class="">

            <div class="row mt-1">

              <div class="col-lg-6 col-md-6 col-xs-6 col-sm-6">
                <label>
                  Type <strong>SUBMIT</strong> in the textBox<span class="text-danger">*</span>
                </label>
              </div>

              <div class="col-lg-6 col-md-6 col-xs-6 col-sm-6">
                <input type="text" class="form-control" [(ngModel)]="submitGstForm.txtVal">
              </div>

            </div>

            <div class="row mt-2">

              <div class="col-xs-12 col-md-12 col-lg-12 col-sm-12 d-flex">
                <span class="mr-1"> <input type="checkbox" [(ngModel)]="submitGstForm.isAccepted"/></span>
                <label> <em>nflwjlfsdfskdfksd skdbfjsdbfksd sbdfgsdghvfsd sdfuisgdfsd dnfisdgfusd fdnuisdgfyusd
                  fnsdifgyusdf
                  djhfgsdu fsdjfghsyudf fsdnfukisdgifsdfksdgfsjdb fskdfgsud fsduifgsd fskdhfisd fskdhfusd </em></label>
              </div>

            </div>
          </div>

          <div class="mt-1">

            <button class="btn btn-success" (click)="submitGstReturn()" [disabled]="!submitGstForm.isAccepted">Proceed
            </button>
            <button class="btn btn-default" (click)="showCancelModal = true">Cancel</button>

          </div>
        </div>
        <!-- endregion -->

      </div>
      <!-- endregion -->

      <!-- region after gst authorized -->
      <!-- endregion -->

      <!-- region cancel model -->
      <div *ngIf="showCancelModal">

        <div class="row">

          <div class="col">
            Are you sure you want to cancel it?
          </div>

        </div>

        <div class="row">

          <div class="col">
            <button class="btn btn-success" (click)="showCancelModal = false">No
            </button>
            <button class="btn btn-default" (click)="yesCancelModal()">Yes</button>
          </div>

        </div>

      </div>
      <!-- endregion -->

    </div>

  </div>
</div>
