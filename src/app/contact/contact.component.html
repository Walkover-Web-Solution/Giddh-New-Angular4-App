<div class="container-fluid">

  <div class="top_bar clearfix">
    <div class="form-inline">
      <div class="pull-left">
        <button class="btn btn-sm btn-default" (click)="setActiveTab('customer')" [ngClass]="{'isActive': activeTab === 'customer'}">Customers</button>
        <button class="btn btn-sm btn-default" (click)="setActiveTab('vendor')" [ngClass]="{'isActive': activeTab === 'vendor'}">Vendors</button>
      </div>
      <div class="pull-right">
        <div class="form-group mrR1 max250">
          <input type="text" placeholder="Search" class="form-control" (keyup)="search($event)" />
        </div>
        <div class="btn-group" dropdown>
          <button dropdownToggle type="button" class="btn btn-default btn-sm dropdown-toggle">
            Add
            <span class="caret"></span>
          </button>
          <ul *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu">
            <li role="menuitem">
              <a class="dropdown-item cp" (click)="openAddAndManage('customer')">Add Customer</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item cp" (click)="openAddAndManage('vendor')">Add Vendor</a>
            </li>
          </ul>
        </div>

        <div class="btn-group mrL1" dropdown [tooltip]="'Enable / Disable Column'" [placement]="'left'">
          <i dropdownToggle class="icon-options pd cp fs20"></i>
          <!-- <button dropdownToggle type="button" class="btn btn-default btn-sm dropdown-toggle"> <span class="fa fa-filter"></span>
                </button> -->
          <ul *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" [style.width.px]="'200'">
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" disabled name="field_filter.name" [(ngModel)]="showFieldFilter.name" /> Name</a>
            </li>
            <!-- <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> Mobile No.</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> Email Id</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> State</a>
            </li> -->
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" name="field_filter.due_amount" [(ngModel)]="showFieldFilter.due_amount" /> Amt. Due</a>
            </li>
            <!-- <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> Total amt of transactions</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> Frequent transactions</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> Highest transactions</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> GSTIN</a>
            </li>
            <li role="menuitem">
              <a class="dropdown-item">
                <input type="checkbox" /> Description</a>
            </li> -->
          </ul>
        </div>
      </div>
    </div>
  </div>
  <table class="table basic table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <!-- <th>Mobile No.</th>
        <th>Email Id</th>
        <th>State</th> -->
        <th *ngIf="showFieldFilter.due_amount">Amt. Due</th>
        <!-- <th>Total amt of transactions</th>
        <th>Frequent transactions</th>
        <th>Highest transactions</th>
        <th>GSTIN</th>
        <th>Description</th> -->
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngIf="activeTab === 'customer'">
        <tr *ngFor="let account of sundryDebtorsAccounts$ | async">
          <td>{{account.name}}</td>
          <!-- <td>{{account.mobileNo}}</td>
          <td>{{account.email}}</td>
          <td></td> -->
          <td *ngIf="showFieldFilter.due_amount">{{account.closingBalance?.amount}}</td>
          <!-- <td></td>
          <td> 
            Pen, pencil <button class="btn btn-default btn-xs pull-right">Sale</button> -->
          <!-- </td>
          <td> </td>
          <td></td>
          <td></td> -->
          <td>
            <button class="btn btn-small btn-success" (click)="payNow(account)">Pay</button>
          </td>
        </tr>
      </ng-container>

      <ng-container *ngIf="activeTab === 'vendor'">
        <tr *ngFor="let account of sundryCreditorsAccounts$ | async">
          <td>{{account.name}}</td>
          <!-- <td>{{account.mobileNo}}</td>
          <td>{{account.email}}</td>
          <td></td> -->
          <td *ngIf="showFieldFilter.due_amount">{{account.closingBalance?.amount}}</td>
          <!-- <td></td>
          <td> -->
            <!-- Pen, pencil <button class="btn btn-default btn-xs pull-right">Sale</button> -->
          <!-- </td>
          <td> </td>
          <td></td>
          <td></td> -->
          <td>
            <button class="btn btn-small btn-success" (click)="payNow(account)">Pay</button>
          </td>
        </tr>
      </ng-container>


      <!-- <tr>
            <td>Customer 2</td>
            <td>9345223422</td>
            <td>abc@gmail.com</td>
            <td>Madhya Pradesh</td>
            <td>25,000.00</td>
            <td>2,50,000.00</td>
            <td>Pen, pencil <button class="btn btn-default btn-xs pull-right">Sale</button></td>
            <td>45,000.00</td>
            <td>23134567890123456</td>
            <td>Contrary to popular belief, Lorem Ipsum is not simply random text</td>
        </tr> -->
    </tbody>
  </table>
</div>

<aside-menu-account [activeGroupUniqueName]="selectedGroupForCreateAcc" [class]="accountAsideMenuState" [@slideInOut]="accountAsideMenuState" (closeAsideEvent)="toggleAccountAsidePane($event)"></aside-menu-account>

<!-- Pay now modal -->
<div bsModal #payNowModal="bs-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div *ngIf="selectedAccForPayment">
                <div class="modal-header themeBg pdL2 pdR2 clearfix">
                    <h3 class="modal-title bg" id="modal-title">Pay to {{selectedAccForPayment.name}} </h3>
                    <i class="fa fa-times text-right close_modal" aria-hidden="true" (click)="onPaymentModalCancel()"></i>
                </div>
                <div class="modal-body pdL2 pdR2 clearfix" id="export-body">
                    <form name="newRole" novalidate class="" autocomplete="off">
                        <div class="modal_wrap mrB2">
                            <h3>Amount Due Rs: {{selectedAccForPayment.closingBalance?.amount}}</h3>
                            <h3><b>Pay through Cash Free</b></h3>
                            <!-- <h4><small>Balance in account Rs. N.A.</small></h4> -->
                            <input #amountBox type="number" class="form-control">
                        </div>
                        <div>
                            <button [disabled]="!amountBox.value" type="submit" class="btn btn-md btn-success btn-block" (click)="onConfirmation(amountBox.value)">Pay</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>