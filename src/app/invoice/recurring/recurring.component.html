<form #recurringForm="ngForm" novalidate class="form-inline input-grp-dateRangePicker pr"
      (ngSubmit)="submit(recurringForm)">

  <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Invoice Type</label>-->
    <!--<div class="ng-select-wrap">-->
      <!--<sh-select name="invoiceType" [placeholder]="'Select Account'" [(ngModel)]="filter.status"-->
                 <!--[options]="invoiceTypeOptions" [notFoundLink]="false" [multiple]="false" [ItemHeight]="33"-->
                 <!--[useInBuiltFilterForIOptionTypeItems]="true">-->
        <!--<ng-template #optionTemplate let-option="option">-->
          <!--<a href="javascript:void(0)" class="list-item" style="border-bottom: 1px solid #ccc;">-->
            <!--<div class="item">{{ option.label }}</div>-->
          <!--</a>-->
        <!--</ng-template>-->
      <!--</sh-select>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Search Customer</label>-->
    <!--<input type="text" class="form-control" name="customerName" [(ngModel)]="filter.customerName"-->
           <!--placeholder="customer name">-->
  <!--</div>-->

  <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Interval</label>-->
    <!--<div class="ng-select-wrap">-->
      <!--<sh-select name="interval" [placeholder]="'Select Account'" [options]="intervalOptions" [notFoundLink]="false"-->
                 <!--[multiple]="false" [(ngModel)]="filter.duration" [ItemHeight]="33"-->
                 <!--[useInBuiltFilterForIOptionTypeItems]="true">-->
        <!--<ng-template #optionTemplate let-option="option">-->
          <!--<a href="javascript:void(0)" class="list-item" style="border-bottom: 1px solid #ccc;">-->
            <!--<div class="item">{{ option.label }}</div>-->
          <!--</a>-->
        <!--</ng-template>-->
      <!--</sh-select>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Last Invoice Date</label>-->
    <!--<div class="input-group">-->
      <!--<input name="lastInvoiceDate" placeholder="Daterangepicker" [(ngModel)]="filter.lastInvoiceDate" type="text"-->
             <!--[bsConfig]="{dateInputFormat:'DD-MM-YYYY'}" class="form-control" bsDatepicker required>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">&nbsp;</label>-->
    <!--<button class="btn btn-success btn-sm">GO</button>-->
  <!--</div>-->
  <div class="d-flex">
    <div class="form-group mrR1" style="flex: 1 1 auto;">

      <div class="input-group">
        <input type="text" name="dateRange" #dateRangePickerCmp daterangepicker  class="form-control" />
        <!-- <input name="dateRange" placeholder="Daterangepicker" type="text" class="form-control" [ngModel]="invoiceSearchRequest.dateRange" (bsValueChange)="bsValueChange($event)" bsDaterangepicker [bsConfig]="bsConfig" required /> -->
      </div>
      <a href="javascript:void(0);" class="btn btn-link" (click)="advanceSearchPopup()">Advance search</a>
    </div >
    <div class="form-group mrR1">
      <button class="btn btn-orange">Export</button>
      <button class="btn btn-blue">Create New Invoice</button>
    </div>
  </div>

</form>


<div class="no-data mrT2" *ngIf="(recurringData$ | async)?.totalItems === 0">
  <h1>No Recurring Vouchers Found!</h1>
</div>

<table class="table basic table-bordered mrT2" *ngIf="(recurringData$ | async)?.totalItems > 0">
  <thead class="t-h-bg1">
  <tr>
    <th>#</th>
    <th width="20%" class="td_in_searchBox">
      <div *ngIf="!showSearch">
        <span> Invoice Number</span>
        <i class="icon-search" (click)="showSearch = true;"></i>
      </div>

      <div class="input-container" *ngIf="showSearch">
        <input type="text" placeholder="search Invoice No." class="w100"/>
        <i class="icon-search" (click)="showSearch = false;"></i>
      </div>


    </th>
    <th width="20%" class="td_in_searchBox">
      <div *ngIf="!falseSearch">
        <span> Customer Name</span>
        <i class="icon-search" (click)="falseSearch = true;"></i>
      </div>

      <div class="input-container" *ngIf="falseSearch">
        <input type="text" placeholder="search Invoice No." class="w100"/>
        <i class="icon-search" (click)="falseSearch = false;"></i>
      </div>
     </th>
    <th>
      <div class="d-flex">
        <div class="flex-fill">Interval</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
      </th>
    <th>
      <div class="d-flex">
        <div class="flex-fill"> Last Invoice Date</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
     </th>
    <th>
      <div class="d-flex">
        <div class="flex-fill"> Next Invoice Date</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
     </th>
    <th>
      <div class="d-flex">
        <div class="flex-fill">Status</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
      </th>
    <th>
      <div class="d-flex">
        <div class="flex-fill">Invoice Amt</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
      </th>
  </tr>
  </thead>
  <tfoot>
  <tr>
    <td colspan="100%">
      <div class="alC">
        <pagination [maxSize]="5" [totalItems]="(recurringData$ | async)?.totalItems" [itemsPerPage]="10"
                    (pageChanged)="pageChanged($event)" class="pagination-sm" [boundaryLinks]="true"
                    [rotate]="false"></pagination>
      </div>
    </td>
  </tr>
  </tfoot>
  <tbody>
  <tr *ngFor="let col of (recurringData$ | async).recurringVoucherDetails;let i = index">
    <td>{{ ((currentPage-1)* 10)+i + 1 }}</td>
    <td>
      <a (click)="col.status !== 'inactive' && openUpdatePanel(col)">{{ col.voucherNumber }}</a>
    </td>
    <td>{{ col.customerName }}</td>
    <td>{{ col.duration }}</td>
    <td>{{ col.lastInvoiceDate }}</td>
    <td>{{ col.nextCronDate }}</td>
    <td>{{ col.status }}</td>
    <td>{{ col.voucherTotal }}</td>
  </tr>
  </tbody>
</table>
<div class="aside-overlay" *ngIf="asideMenuStateForRecurringEntry === 'in'"></div>
<app-aside-recurring-entry [invoice]="selectedInvoice" [class]="asideMenuStateForRecurringEntry"
                           [@slideInOut]="asideMenuStateForRecurringEntry" [mode]="'update'"
                           (closeAsideEvent)="toggleRecurringAsidePane('out')"></app-aside-recurring-entry>

<div bsModal #advanceSearch="bs-modal" class="modal fade" role="dialog" [config]="modalConfig"
     tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <invoice-advance-search-component (closeModelEvent)="advanceSearchPopupClose($event)"></invoice-advance-search-component>
    </div>
  </div>
</div>
