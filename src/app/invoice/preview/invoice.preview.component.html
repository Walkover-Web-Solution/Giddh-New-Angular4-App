<ng-container>
  <form #invoiceForm="ngForm" (ngSubmit)="getVoucherByFilters(invoiceForm)" novalidate
        class="form-inline input-grp-dateRangePicker pr">

    <!--<div class="form-group mrR1">-->
    <!--<label class="d-block" *ngIf="selectedVoucher === 'sales'">Invoice No.</label>-->
    <!--<label class="d-block" *ngIf="selectedVoucher !== 'sales'">Voucher No.</label>-->
    <!--<input type="text" class="form-control" name="invoiceNumber" placeholder="By Invoice Number" [(ngModel)]="invoiceSearchRequest.invoiceNumber">-->
    <!--</div>-->

    <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Account</label>-->
    <!--<div class="ng-select-wrap">-->
    <!--<sh-select name="accountUniqueName" [options]="accounts$ | async" [(ngModel)]="invoiceSearchRequest.accountUniqueName" [placeholder]="'Select Account'" [notFoundLink]="false" [multiple]="false" [ItemHeight]="67" [useInBuiltFilterForIOptionTypeItems]="true">-->
    <!--<ng-template #optionTemplate let-option="option">-->
    <!--<a href="javascript:void(0)" class="list-item" style="border-bottom: 1px solid #ccc;">-->
    <!--<div class="item">{{ option.label }}</div>-->
    <!--<div class="item_unq">{{ option.value }}</div>-->
    <!--</a>-->
    <!--</ng-template>-->
    <!--</sh-select>-->
    <!--</div>-->
    <!--</div>-->

    <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Description</label>-->
    <!--<input type="text" class="form-control" name="description" placeholder="By description" [(ngModel)]="invoiceSearchRequest.description">-->
    <!--</div>-->
    <!--<div class="form-group mrR1 max100">-->
    <!--<label class="d-block">Count</label>-->
    <!--<sh-select placeholder="Select" name="count" [(ngModel)]="invoiceSearchRequest.count" [options]="counts" [ItemHeight]="33" [width]="'70px'"></sh-select>-->
    <!--</div>-->
    <!--<div class="form-group mrR1">-->
    <!--<label class="d-block">Amount</label>-->
    <!--<div class="custom-select pos-rel">-->
    <!--<sh-select placeholder="Select" name="entryTotalBy" [(ngModel)]="invoiceSearchRequest.entryTotalBy" [options]="filtersForEntryTotal" [ItemHeight]="33"></sh-select>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group mrR1" *ngIf="invoiceSearchRequest.entryTotalBy">-->
    <!--<label class="d-block">&nbsp;</label>-->
    <!--<input type="text" class="form-control col-xs-2 max100" name="entryTotal" [(ngModel)]="invoiceSearchRequest.balanceDue" placeholder="By amount">-->
    <!--</div>-->
    <div class="d-flex">

      <div class="form-group mrR1" style="flex: 1 1 auto;">

        <div class="input-group">
          <input type="text" name="dateRange" #dateRangePickerCmp daterangepicker [options]="datePickerOptions"
                 (applyDaterangepicker)="bsValueChange($event)" class="form-control"/>
          <!-- <input name="dateRange" placeholder="Daterangepicker" type="text" class="form-control" [ngModel]="invoiceSearchRequest.dateRange" (bsValueChange)="bsValueChange($event)" bsDaterangepicker [bsConfig]="bsConfig" required /> -->
        </div>
        <a href="javascript:void(0);" class="btn btn-link" (click)="toggleAdvanceSearchPopup()">Advance search</a>
        <a class="cp" href="javascript: void 0" (click)="resetAdvanceSearch()" *ngIf="showAdvanceSearchIcon">
          <i aria-hidden="true" class="glyphicon glyphicon-refresh"
             tooltip="Reset Filter"></i>
        </a>
      </div>

      <div class="d-flex mrR1">

        <div style="height: 30px;" *ngIf="selectedItems.length > 0">
          <div class="btn-group" dropdown triggers="mouseover" #dp="bs-dropdown"
               (mouseleave)="dp.hide()" style="margin-bottom: 10px">

            <button dropdownToggle type="button" class="btn spcl_dropdown dropdown-toggle"
                    aria-controls="dropdown-basic">
              More
              <span class="caret"></span>
            </button>

            <ul *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">

              <li role="menuitem">
                <a class="dropdown-item cp" href="javascript:void(0)" (click)="toggleBulkUpdatePopup()">Bulk Note</a>
              </li>

              <li role="menuitem">
                <a class="dropdown-item cp" href="javascript:void(0)">Send Email</a>
              </li>

              <li role="menuitem">
                <a class="dropdown-item cp" href="javascript:void(0)">Print</a>
              </li>

              <li role="menuitem">
                <a class="dropdown-item cp" href="javascript:void(0)">Export Pdf</a>
              </li>

              <li role="menuitem">
                <a class="dropdown-item cp" href="javascript:void(0)"
                   *ngIf="selectedVoucher === 'credit note' || selectedVoucher === 'sales'">
                  Generate E-way Bill</a>
              </li>

              <li role="menuitem">
                <a class="dropdown-item cp" href="javascript:void(0)">Delete</a>
              </li>

            </ul>
          </div>
        </div>

        <button class="btn btn-orange">Export</button>
        <button class="btn btn-blue">Create New Invoice</button>

      </div>
    </div>
  </form>

  <table class="table basic table-bordered mrT2">

    <!--sales-->
    <thead class="t-h-bg1" *ngIf="selectedVoucher === 'sales'">
    <tr>

      <th style="width:3%">
        <div class="mh18_img" style="margin-left: 3px;">
          <img src="assets/images/unchecked.png" *ngIf="!allItemsSelected" (click)="toggleAllItems(true)">
          <img src="assets/images/checked.png" *ngIf="allItemsSelected" (click)="toggleAllItems(false)">
        </div>
      </th>

      <th width="20%" class="td_in_searchBox" #searchInvoiceContainer
          (clickOutside)="clickedOutside($event, searchInvoiceContainer, 'invoiceNumber')">

        <div [hidden]="showInvoiceNoSearch">
          <span> Invoice No.</span>
          <i class="icon-search"
             (click)="toggleSearch('invoiceNumber');"></i>
        </div>

        <div class="input-container" [hidden]="!showInvoiceNoSearch">
          <!--<i class="icon-search" (click)="showInvoiceNoSearch = false;"></i>-->
          <input type="text" placeholder="Search Invoice No." class="w100" #invoiceSearch
                 [formControl]="voucherNumberInput"/>
        </div>

      </th>

      <th width="20%" class="td_in_searchBox" #searchCustomerContainer
          (clickOutside)="clickedOutside($event, searchCustomerContainer, 'accountUniqueName')">
        <div [hidden]="showCustomerSearch">
          <span>  Customer</span>
          <i class="icon-search"
             (click)="toggleSearch('accountUniqueName');"></i>
        </div>

        <div class="input-container" [hidden]="!showCustomerSearch">
          <!--<i class="icon-search" (click)="showCustomerSearch = false;"></i>-->
          <input type="text" placeholder="Search Customer" class="w100" #customerSearch
                 [formControl]="accountUniqueNameInput"/>
        </div>

      </th>

      <th>
        <div class="d-flex">
          <div class="flex-fill">Invoice Date</div>
          <div class="icon-pointer">
            <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
            <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
          </div>
        </div>
      </th>
      <th>
        <div class="d-flex">
          <div class="flex-fill"> Total Amt.</div>
          <div class="icon-pointer">
            <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
            <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
          </div>
        </div>

      </th>
      <th>
        <div class="d-flex">
          <div class="flex-fill"> Balance Due</div>
          <div class="icon-pointer">
            <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
            <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
          </div>
        </div>
      </th>
      <th>
        <div class="d-flex">
          <div class="flex-fill">Due Date</div>
          <div class="icon-pointer">
            <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
            <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
          </div>
        </div>
      </th>

      <th width="15%">
        <div class="d-flex">
          <div class="flex-fill">Status</div>
          <div class="icon-pointer">
            <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
            <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
          </div>
        </div>
      </th>

    </tr>
    </thead>

    <!--non sales-->
    <thead class="t-h-bg1" *ngIf="selectedVoucher !== 'sales'">
    <tr>

      <th style="width:3%">
        <div class="mh18_img" style="margin-left: 3px;">
          <img src="assets/images/unchecked.png" *ngIf="!allItemsSelected" (click)="toggleAllItems(true)">
          <img src="assets/images/checked.png" *ngIf="allItemsSelected" (click)="toggleAllItems(false)">
        </div>
      </th>

      <th width="20%" class="td_in_searchBox" #searchInvoiceContainer
          (clickOutside)="clickedOutside($event, searchInvoiceContainer, 'invoiceNumber')">

        <div [hidden]="showInvoiceNoSearch">
          <span> {{ selectedVoucher === 'credit note' ? 'Cr Note No.' : 'Dr Note No.' }}</span>
          <i class="icon-search" (click)="toggleSearch('invoiceNumber');"></i>
        </div>

        <div class="input-container" [hidden]="!showInvoiceNoSearch">
          <input type="text"
                 placeholder="Search {{ selectedVoucher === 'credit note' ? 'Credit Note' : 'Debit Note' }} No."
                 class="w100" [formControl]="voucherNumberInput"
                 #invoiceSearch/>
          <!--<i class="icon-search" (click)="showInvoiceNoSearch = false;"></i>-->
        </div>

      </th>

      <th width="20%" class="td_in_searchBox" #searchCustomerContainer
          (clickOutside)="clickedOutside($event, searchCustomerContainer, 'accountUniqueName')">
        <div [hidden]="showCustomerSearch">
          <span>  Customer</span>
          <i class="icon-search" (click)="toggleSearch('accountUniqueName');"></i>
        </div>

        <div class="input-container" [hidden]="!showCustomerSearch">
          <input type="text" placeholder="Search Customer" class="w100" #customerSearch
                 [formControl]="accountUniqueNameInput"/>
          <!--<i class="icon-search" (click)="showCustomerSearch = false;"></i>-->
        </div>

      </th>

      <th>Date</th>
      <th>Total amount</th>
      <th class="text-center">Delete</th>
    </tr>
    </thead>

    <tfoot *ngIf="voucherData && voucherData?.totalItems > 20">
    <tr>
      <td colspan="100%">
        <div class="alC">
          <pagination [totalItems]="voucherData.totalItems" [(ngModel)]="voucherData.page" [maxSize]="5"
                      class="pagination-sm" [boundaryLinks]="true" [itemsPerPage]="20" [rotate]="false"
                      (pageChanged)="pageChanged($event)"></pagination>
        </div>
      </td>
    </tr>
    </tfoot>

    <!--sales-->
    <tbody
      *ngIf="voucherData && voucherData.items.length > 0 && !(isGetAllRequestInProcess$ | async) && selectedVoucher === 'sales'">
    <tr *ngFor="let item of voucherData.items; let i = index">

      <td class="mh18_img">
        <div class="mh18_img">
          <img *ngIf="!item.isSelected" src="assets/images/unchecked.png" (click)="toggleItem(item, true)"/>
          <img *ngIf="item.isSelected" src="assets/images/checked.png" (click)="toggleItem(item, false)"/>
        </div>
        <!--<div *ngIf="item.hasGenerationErr">-->
        <!--<i class='fa fa-info-circle' placement="right" [tooltip]="item.errMsg"></i>-->
        <!--</div>-->
      </td>

      <td><a href="javascript:void(0);" (click)="onSelectInvoice(item)">{{item.voucherNumber}}</a></td>

      <td (dblclick)="modalUniqueName = item.uniqueName" class="cp no-dbl-click-select"
          (clickOutside)="modalUniqueName = ''">
        {{item.account.name}}
        <div *ngIf="modalUniqueName === item.uniqueName" account-detail-modal-component
             [accountUniqueName]="item.account.uniqueName"
             [from]="this.invoiceSearchRequest.from" [to]="this.invoiceSearchRequest.to"
             [isModalOpen]="modalUniqueName === item.uniqueName">
        </div>
      </td>

      <td>{{item.voucherDate}}</td>
      <td>{{item.grandTotal}}</td>
      <td>{{item.balanceDue}}</td>
      <td>{{item.dueDate ? item.dueDate : '-' }}</td>
      <td>
        <sh-select #invoiceAction placeholder="Select Action" (selected)="onPerformAction(item, $event)"
                   [options]="previewDropdownOptions" [ItemHeight]="33"></sh-select>
      </td>


    </tr>
    </tbody>

    <!--non sales-->
    <tbody
      *ngIf="voucherData && voucherData.items.length > 0 && !(isGetAllRequestInProcess$ | async) && selectedVoucher !== 'sales'">

    <tr *ngFor="let item of voucherData.items; let i = index">

      <td class="mh18_img">
        <div class="mh18_img">
          <img *ngIf="!item.isSelected" src="assets/images/unchecked.png" (click)="toggleItem(item, true)"/>
          <img *ngIf="item.isSelected" src="assets/images/checked.png" (click)="toggleItem(item, false)"/>
        </div>
        <!--<div *ngIf="item.hasGenerationErr">-->
        <!--<i class='fa fa-info-circle' placement="right" [tooltip]="item.errMsg"></i>-->
        <!--</div>-->
      </td>

      <td><a style="cursor: pointer" (click)="onSelectInvoice(item)">
        {{item.voucherNumber }}</a></td>
      <td>{{item.account.name}}</td>
      <td>{{item.voucherDate}}</td>
      <td>{{item.grandTotal}}</td>
      <td class="text-center">
        <i (click)="onDeleteBtnClick(item.uniqueName)" class="glyphicon glyphicon-trash cp"></i>
      </td>

    </tr>

    </tbody>

  </table>

  <!--No Entry-->
  <div class="no-data mrT2" *ngIf="!voucherData && !(isGetAllRequestInProcess$ | async)">
    <h1>No Entry found in sales!</h1>
    <h1>Have to do some sales before creating invoice</h1>
  </div>

  <!--no data-->
  <div class="no-data" *ngIf="voucherData && voucherData.items.length === 0 && !(isGetAllRequestInProcess$ | async)">
    <h1>No entries found within given criteria.</h1>
    <h1>Do search with some other dates</h1>
  </div>

  <!--loading-->
  <div class="no-data mrT2 d-flex" *ngIf="(isGetAllRequestInProcess$ | async)"
       style="justify-content: center;align-items: center">
    <div class="giddh-spinner vertical-center-spinner"></div>
  </div>

  <!-- Delete invoice confirmation model -->
  <div bsModal #invoiceConfirmationModel="bs-modal" class="modal fade" role="dialog"
       [config]="{keyboard:true}" tabindex="-1">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <delete-role-confirmation-model [selectedInvoiceForDelete]="selectedInvoice"
                                        (confirmDeleteEvent)="deleteConfirmedInvoice()"
                                        (closeModelEvent)="closeConfirmationPopup()"></delete-role-confirmation-model>
      </div>
    </div>
  </div>

  <!-- Perform action on invoice model -->
  <div bsModal #performActionOnInvoiceModel="bs-modal" class="modal fade" role="dialog"
       [config]="{keyboard:true}" tabindex="-1">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <perform-action-on-invoice-model
          (closeModelEvent)="closePerformActionPopup($event)"></perform-action-on-invoice-model>
      </div>
    </div>
  </div>

  <!-- Download or Send Invoice on mail -->
  <div bsModal #downloadOrSendMailModel="bs-modal" class="modal fade" role="dialog" [config]="modalConfig"
       tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div element-view-container-ref #downloadOrSendMailComponent=elementviewcontainerref>
        </div>
      </div>
    </div>
  </div>

  <!-- modal dialog -->
  <div bsModal #invoiceGenerateModel="bs-modal" class="modal fade" role="dialog" [config]="modalConfig" tabindex="-1">
    <div class="modal-dialog gray modal-liquid">
      <div class="modal-content">
        <invoice-generate-model (closeEvent)="closeInvoiceModel($event)"></invoice-generate-model>
      </div>
    </div>
  </div>

  <!--advance_seearch Modal-->
  <div bsModal #advanceSearch="bs-modal" class="modal fade" role="dialog" [config]="modalConfig"
       tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <invoice-advance-search-component #advanceSearchComponent
                                          [type]="selectedVoucher === 'debit note' || selectedVoucher === 'credit note' ? 'drcr' : 'invoice'"
                                          [request]="advanceSearchFilter"
                                          (applyFilterEvent)="applyAdvanceSearch($event)"
                                          (closeModelEvent)="toggleAdvanceSearchPopup()">
        </invoice-advance-search-component>
      </div>
    </div>
  </div>

  <!--bulk update modal-->
  <div bsModal #bulkUpdate="bs-modal" class="modal fade" role="dialog" [config]="modalConfig"
       tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <invoice-bulk-update-modal-component
          (closeModelEvent)="toggleBulkUpdatePopup()"
        ></invoice-bulk-update-modal-component>
      </div>
    </div>
  </div>


  <!--total sale & Total Due-->

  <!--<div clas="row" style="display: flex;padding: 40px;background: white;">-->
  <!--<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 d-flex">-->

  <!--<div style="width: 50%">-->
  <!--<h3 class="font-xxlarge text-light-2">Total Invoice Amount</h3>-->
  <!--<h1 class="" style="font-size: 41px;margin-top: 6px;">90,000/-</h1>-->
  <!--</div>-->

  <!--<div style="width: 50%">-->
  <!--<h3 class="color-giddh font-xxlarge">Total Due</h3>-->
  <!--<h1 style="font-size: 41px;margin-top: 6px;">90,000/-</h1>-->
  <!--</div>-->

  <!--</div>-->
  <!--</div>-->


</ng-container>


<!-- <ng-container *ngIf="selectedVoucher !== 'sales'">
    <receipt-cr-dr-preview></receipt-cr-dr-preview>
</ng-container> -->
