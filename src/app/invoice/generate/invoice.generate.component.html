<div style="height: 44px;" *ngIf="selectedVoucher === 'debit note' || selectedVoucher === 'credit note'">
  <div class="btn-group" dropdown triggers="mouseover" #dp="bs-dropdown"
       (mouseleave)="dp.hide()" style="margin-bottom: 10px"
  >
    <button dropdownToggle type="button" class="btn spcl_dropdown dropdown-toggle" aria-controls="dropdown-basic">
      {{ selectedVoucher | titlecase}}
      <span class="caret"></span>
    </button>
    <ul *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">

      <li role="menuitem" (click)="changeDebitOrCredit('debit note')">
        <a class="dropdown-item cp" href="javascript:void(0)">Debit Note</a>
      </li>

      <li role="menuitem" (click)="changeDebitOrCredit('credit note')">
        <a class="dropdown-item cp" href="javascript:void(0)">Credit Note</a>
      </li>
    </ul>
  </div>
</div>


<form #invoiceForm="ngForm" (ngSubmit)="getLedgersByFilters(invoiceForm)" novalidate class="form-inline">
  <!--<div class="form-group mrR1">-->
  <!--<label class="d-block">Account</label>-->
  <!--<div class="ng-select-wrap">-->
  <!--<sh-select name="accountUniqueName" [options]="accounts$ | async" [(ngModel)]="ledgerSearchRequest.accountUniqueName" [placeholder]="'Select Account'" [notFoundLink]="false" [multiple]="false" [ItemHeight]="67" [useInBuiltFilterForIOptionTypeItems]="true">-->
  <!--<ng-template #optionTemplate let-option="option">-->
  <!--<a href="javascript:void(0)" class="list-item" style="border-bottom: 1px solid #ccc;">-->
  <!--<div class="item">{{ option.label }}</div>-->
  <!--<div class="item_unq">{{ option.value }}</div>-->
  <!--</a>-->
  <!--</ng-template>-->
  <!--</sh-select>-->
  <!--</div>-->
  <!--</div>-->
  <!--<div class="form-group mrR1">-->
  <!--<label class="d-block">Description</label>-->
  <!--<input type="text" class="form-control" name="description" placeholder="By description" [(ngModel)]="ledgerSearchRequest.description">-->
  <!--</div>-->
  <!--<div class="form-group mrR1 max100">-->
  <!--<label class="d-block">Count</label>-->
  <!--<sh-select placeholder="Select" name="count" [(ngModel)]="ledgerSearchRequest.count" [options]="counts" [ItemHeight]="33" [width]="'70px'"></sh-select>-->
  <!--</div>-->
  <!--<div class="form-group mrR1">-->
  <!--<label class="d-block">Amount</label>-->
  <!--<sh-select placeholder="Select" name="entryTotalBy" [(ngModel)]="ledgerSearchRequest.entryTotalBy" [options]="filtersForEntryTotal" [ItemHeight]="33"></sh-select>-->
  <!--</div>-->
  <!--<div class="form-group mrR1" *ngIf="ledgerSearchRequest.entryTotalBy">-->
  <!--<label class="d-block">&nbsp;</label>-->
  <!--<input type="text" class="form-control col-xs-2 max100" name="entryTotal" [(ngModel)]="ledgerSearchRequest.entryTotal" placeholder="By amount">-->
  <!--</div>-->
  <!--<div class="form-group mrR1">-->
  <!--<label class="d-block">From - To</label>-->
  <!--<div class="input-group">-->
  <!--<input type="text" name="dateRange" #dateRangePickerCmp daterangepicker [options]="datePickerOptions" (applyDaterangepicker)="bsValueChange($event)" class="form-control" />-->
  <!--&lt;!&ndash; <input name="dateRange" placeholder="Daterangepicker" type="text" class="form-control" [ngModel]="ledgerSearchRequest.dateRange" (bsValueChange)="bsValueChange($event)" bsDaterangepicker required> &ndash;&gt;-->
  <!--</div>-->
  <!--</div>-->
  <!--<div class="form-group mrR1">-->
  <!--<label class="d-block">&nbsp;</label>-->
  <!--<button class="btn btn-success">GO</button>-->
  <!--</div>-->
  <div class="d-flex mb-2">
    <div class="form-group mrR1" style="flex: 1 1 auto;">

      <div class="input-group mr-1">
        <input type="text" name="dateRangeGenerate" id="dateRangeGenerate" daterangepicker [options]="datePickerOptions"
               (applyDaterangepicker)="bsValueChange($event)" class="form-control"/>
        <!-- <input name="dateRange" placeholder="Daterangepicker" type="text" class="form-control" [ngModel]="invoiceSearchRequest.dateRange" (bsValueChange)="bsValueChange($event)" bsDaterangepicker [bsConfig]="bsConfig" required /> -->
      </div>

      <button [disabled]="selectedLedgerItems.length === 0" class="btn btn-add" (click)="generateBulkInvoice(false)">
        Generate Multiple
      </button>

      <button [disabled]="selectedLedgerItems.length === 0" class="btn btn-add" (click)="generateBulkInvoice(true)">
        Generate Compound
      </button>

      <button placement="top" tooltip="Works only for single entry."
              [disabled]="selectedLedgerItems.length === 0 || !togglePrevGenBtn" class="btn btn-add"
              (click)="previewInvoice()">Preview &amp; Generate
      </button>
    </div>
    <div class="form-group mrR1">

      <button class="btn btn-blue">Create New Invoice</button>
    </div>
  </div>

</form>


<!--<div class="clearfix top_bar">-->
<!--<ul class="list-inline pull-left">-->
<!--<li>-->
<!---->
<!--</li>-->
<!--<li>-->
<!---->
<!--</li>-->
<!--<li>-->
<!---->
<!--</li>-->
<!--</ul>-->
<!--</div>-->

<!--list of data  -->

<table class="table basic table-bordered">

  <thead class="t-h-bg1">
  <tr>
    <th style="width:3%">
      <div class="mh18_img">
        <img src="assets/images/unchecked.png" *ngIf="!allItemsSelected" (click)="toggleAllItems(true)">
        <img src="assets/images/checked.png" *ngIf="allItemsSelected" (click)="toggleAllItems(false)">
      </div>
    </th>
    <th style="width:12%">
      <div class="d-flex">
        <div class="flex-fill"> Date</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>

    </th>

    <th style="width:20%" class="td_in_searchBox" #searchParticularContainer
        (clickOutside)="clickedOutside($event, searchParticularContainer, 'particular')">

      <div [hidden]="showParticularSearch">
        <span> Particular</span>
        <i class="icon-search"
           (click)="toggleSearch('particular')"></i>
      </div>

      <div class="input-container" [hidden]="!showParticularSearch">
        <input type="text" placeholder="Search Particular" class="w100"
               [formControl]="particularInput" #particularSearch/>
        <!--<i class="icon-search" (click)="showParticularSearch = false;"></i>-->
      </div>
    </th>

    <th style="width:13%">
      <div class="d-flex">
        <div class="flex-fill"> Amount</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
    </th>

    <th style="width:20%" class="td_in_searchBox" #searchAccountContainer
        (clickOutside)="clickedOutside($event, searchAccountContainer, 'accountUniqueName')">

      <div [hidden]="showAccountSearch">
        <span> Account</span>
        <i class="icon-search"
           (click)="toggleSearch('accountUniqueName')"></i>
      </div>

      <div class="input-container" [hidden]="!showAccountSearch">
        <input type="text" placeholder="Search Account" class="w100"
               [formControl]="accountUniqueNameInput" #accountUniqueNameSearch/>
        <!--<i class="icon-search" (click)="showAccountSearch = false;"></i>-->
      </div>

    </th>

    <th style="width:13%">
      <div class="d-flex">
        <div class="flex-fill"> Total</div>
        <div class="icon-pointer">

          <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"></div>
          <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"></div>
        </div>
      </div>
    </th>

    <th style="width:20%" class="td_in_searchBox" #searchDescContainer
        (clickOutside)="clickedOutside($event, searchDescContainer, 'description')">

      <div [hidden]="showDescSearch">
        <span> Description</span>
        <i class="icon-search"
           (click)="showDescSearch = true;showParticularSearch = false;showAccountSearch = false"></i>
      </div>

      <div class="input-container" [hidden]="!showDescSearch">
        <input type="text" placeholder="Search Description" class="w100"/>
        <i class="icon-search" (click)="showDescSearch = false;"></i>
      </div>

    </th>


  </tr>
  </thead>

  <tfoot *ngIf="ledgersData?.totalItems > 20">

  <tr>
    <td colspan="100%">
      <div class="alC">
        <pagination [totalItems]="ledgersData.totalItems" [(ngModel)]="ledgersData.page" [maxSize]="5"
                    class="pagination-sm" [boundaryLinks]="true" [itemsPerPage]="20" [rotate]="false"
                    (pageChanged)="pageChanged($event)"></pagination>
      </div>
    </td>
  </tr>

  </tfoot>

  <tbody>
  <tr *ngFor="let item of ledgersData?.results" [ngClass]="{'danger': item.hasGenerationErr}">
    <td class="mh18_img">
      <div class="mh18_img">
        <img *ngIf="!item.isSelected" src="assets/images/unchecked.png" (click)="toggleItem(item, true)"/>
        <img *ngIf="item.isSelected" src="assets/images/checked.png" (click)="toggleItem(item, false)"/>
      </div>
      <div *ngIf="item.hasGenerationErr">
        <i class='fa fa-info-circle' placement="right" [tooltip]="item.errMsg"></i>
      </div>
    </td>
    <td>{{item.entryDate}}</td>
    <td>
      <table class="table nested_table">
        <tr *ngFor="let transaction of item.transactions">
          <td>
            {{transaction.particular.name}}
            <span *ngIf="transaction.inventory && transaction.inventory.stock">({{transaction.inventory.stock.name}}
              )</span>
          </td>

        </tr>
      </table>
    </td>
    <td>
      <table class="table nested_table">
        <tr *ngFor="let transaction of item.transactions">
          <td>
            {{transaction.amount}}
          </td>
        </tr>
      </table>

    </td>

    <td (dblclick)="modalUniqueName = item.uniqueName" class="cp no-dbl-click-select"
        (clickOutside)="modalUniqueName = ''">
      {{item.account.name}}
      <div *ngIf="modalUniqueName === item.uniqueName" account-detail-modal-component
           [accountUniqueName]="item.account.uniqueName"
           [from]="this.ledgerSearchRequest.from" [to]="this.ledgerSearchRequest.to"
           [isModalOpen]="modalUniqueName === item.uniqueName">
      </div>
    </td>

    <td>{{item.total.amount}}</td>
    <td><textarea type="text" placeholder="Enter Description"
                  style="width: 100%;border-color: gainsboro;border-radius:2px;padding: 7px;"></textarea></td>


  </tbody>

</table>

<div class="no-data" *ngIf="!ledgersData">
  <h1>No Entry found in sales!</h1>
  <h1>Have to do some sales before creating invoice</h1>
</div>

<div class="no-data" *ngIf="ledgersData && ledgersData.results.length === 0">
  <h1>No entries found within given criteria.</h1>
  <h1>Do search with some other dates</h1>
</div>

<!--modal dialog  -->
<div bsModal #invoiceGenerateModel="bs-modal" class="modal fade" role="dialog" [config]="modalConfig">
  <div class="modal-dialog gray modal-liquid">
    <div class="modal-content">
      <invoice-generate-model [isGenerateInvoice]="isGenerateInvoice"
                              (closeEvent)="closeInvoiceModel($event)"></invoice-generate-model>
    </div>
  </div>
</div>
