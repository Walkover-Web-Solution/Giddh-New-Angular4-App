<div>

  <div class="" id="Updateaccount">

    <form class="horizontal-form" name="addAccountForm" [formGroup]="updateAccountForm" novalidate autocomplete="off">
      <div class="form_bg pd2">
        <div class="form-group clearfix">
          <div class="col-xs-6">
            <div class="row">
              <label>A/c Name</label>
              <input type="text" name="accName" maxlength="100" class="form-control" formControlName="name">
            </div>
          </div>
        </div>
        <div class="form-group clearfix mrB">
          <div class="col-xs-5">
            <div class="row">
              <label>Unique Name</label>
              <input type="text" class="form-control" name="accUnq" formControlName="uniqueName" UniqueNameDirective>
            </div>
          </div>
          <div class="col-xs-6">
            <label class="col-xs-12 row">Opening Balance</label>

            <div class="col-xs-8">
              <div class="row">
                <input type="text" class="form-control" name="openingBalance" formControlName="openingBalance"/>
              </div>
            </div>

            <div class="col-xs-4">
              <div class="row">
                <select class="form-control" name="openingBalanceType" formControlName="openingBalanceType">-->
                  <option value="">&#45;&#45;Please select&#45;&#45;</option>
                  <option value="CREDIT" label="Credit">Credit</option>
                  <option value="DEBIT" label="Debit">Debit</option>
                </select>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="pd2 detailed clearfix">

        <div *ngIf="column[1]?.uniqueName === 'revenuefromoperations' || column[1]?.uniqueName === 'operatingcost'
          || column[1]?.uniqueName === 'indirectexpenses'" id="serviceCode">
          <div class="form-group col-xs-4">
            <div class="row">
              <label class="w100 mrL3">HSN</label>
              <div class="input-group">
            <span class="input-group-addon pdL0">
              <input type="radio" formControlName="hsnOrSac" value='hsn' name="hsnOrSac"/>
            </span>
                <input type="text" formControlName="hsnNumber" class="form-control" name="hsnNumber"
                       maxLength="10">
              </div>
            </div>
          </div>
          <div class="form-group col-xs-4 mrL2">
            <div class="row">
              <label class="w100 mrL3">SAC</label>
              <div class="input-group">
            <span class="input-group-addon pdL0">
              <input type="radio" formControlName="hsnOrSac" value='sac' name="hsnOrSac"/>
            </span>
                <input type="text" class="form-control" name="sacNumber"
                       maxLength="6" formControlName="sacNumber">
              </div>
            </div>
          </div>
        </div>

        <div class="clearfix"></div>

        <div class="form-group col-xs-3">
          <div class="row">
            <label>Mobile Number</label>
            <input type="text" formControlName="mobileNo" digitsOnlyDirective class="form-control" placeholder="9198XXXXXXXX">
          </div>
        </div>

        <div class="form-group col-xs-5">
          <label>Email</label>
          <input type="email" placeholder="Email" class="form-control" name="email" formControlName="email">
        </div>
        <div class="clearfix"></div>

        <div class="form-group col-xs-5">
          <div class="row">
            <label>Company</label>
            <input type="text" placeholder="Company Name" class="form-control" name="companyName"
                   formControlName="companyName" ng-disabled="isFixedAcc">
          </div>
        </div>
        <div class="form-group col-xs-7">
          <label>Attention to (will be used in invoice)</label>
          <input type="text" placeholder="Attention To (Name will be used in invoice)" class="form-control"
                 name="attnTo" formControlName="attentionTo">
        </div>
        <div class="clearfix"></div>
        <div class="form-group mrB col-xs-7 pd0">
          <label>Address</label>
          <input type="text" placeholder="address" class="form-control" name="address" formControlName="address">
        </div>
        <div class="form-group mrB col-xs-5">
          <label>State</label>
          <select2 [data]="statesSource$ | async" [options]="{ width:'100%', multiple: false, placeholder: 'Select' }"
                   (valueChanged)="stateSelected($event)"
                   formControlName="state"></select2>

          <input type="text" class="form-control mrT1" name="stateCode" formControlName="stateCode"
                 placeholder="State Code" readonly="readonly">
        </div>
      </div>
      <div class="clearfix"></div>

      <!--gst details-->
      <hr
        *ngIf="column[2].uniqueName == 'sundrycreditors' || column[2].uniqueName == 'sundrydebtors'"/>

      <div class="pd2 clearfix gst_row"
           *ngIf="column[2].uniqueName == 'sundrycreditors' || column[2].uniqueName == 'sundrydebtors'">

        <div class="clearfix pdB1"
             *ngIf="column[2].uniqueName == 'sundrycreditors' || column[2].uniqueName == 'sundrydebtors'">
          <span class="pull-right">
            <i class="fa fa-plus cursor-pointer" aria-hidden="true" (click)="addGstDetailsForm()"></i>
            <i class="glyphicon glyphicon-triangle-right cursor-pointer" aria-hidden="true" (click)="toggleGstList()"
               *ngIf="!showGstList && updateAccountForm.get('gstDetails')['controls'].length > 2"></i>
            <i class="glyphicon glyphicon-triangle-bottom cursor-pointer" aria-hidden="true" (click)="toggleGstList()"
               *ngIf="showGstList && updateAccountForm.get('gstDetails')['controls'].length > 2"></i>
          </span>
        </div>

        <ul class="gstList" formArrayName="gstDetails">
          <li
            *ngFor="let gst of updateAccountForm.get('gstDetails')['controls'] | slice: 0:showDefaultGstListLength;let i = index"
            class="pos-rel gst"
            [formGroupName]="i">
            <div class="col-xs-5 pd0">
              <span class="col-xs-12 pd0 pdB1">
                <label class="w100">GST No.</label>
                <input type="text" class="form-control" formControlName="gstNumber" maxlength="15" name="gstNumber"/>
              </span>

              <span class="col-xs-12 pd0" formGroupName="addressList">
              <label class="w100">State</label>
                <select2 [data]="statesSource$ | async"
                         [options]="{ width:'100%', multiple: false, placeholder: 'Select' }"
                         formControlName="stateCode"></select2>
              </span>
            </div>
            <div class="col-xs-7 pd0">
              <span class="col-xs-12" formGroupName="addressList">
                <label class="w100">Address</label>
                <textarea formControlName="address" class="form-control" rows="4"
                          name="gstAddress"></textarea>
              </span>
            </div>
            <i class="fa fa-times cursor-pointer" aria-hidden="true" (click)="removeGstDetailsForm(i)"></i>
          </li>
        </ul>

      </div>
      <!--gst details-->

      <div class="form_bg pd2">
        <div class="form-group col-xs-12">
          <div class="row">
            <div class="col-xs-12">
              <div class="row">
                <label>Description</label>
              </div>
            </div>
            <div class="col-xs-12">
              <div class="row">
                <textarea placeholder="description" class="form-control" name="description"
                          formControlName="description"></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>

      <div class="pd2 clearfix pdB1">

        <!--delete account  -->
        <a class="btn isActive" *ngIf="(activeAccount$ | async) && !(activeAccount$ | async)?.isFixed"
           (click)="showDeleteAccountModal()">Delete {{ (activeAccount$ | async)?.name }} Account
        </a>

        <button class="btn btn-success pull-right" *ngIf="(activeAccount$ | async)"
                [ladda]="updateAccountInProcess$ | async" (click)="updateAccount()"
                [disabled]="updateAccountForm.invalid">Update
        </button>
      </div>

    </form>

    <div class="clearfix"></div>
  </div>
</div>

<!--delete Account modal  -->
<div bsModal #deleteAccountModal="bs-modal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <confirm-modal [title]="'Delete Account'" [body]="'Are you sure you want to delete this Account?'"
                     (cancelCallBack)="hideDeleteAccountModal()"
                     (successCallBack)="deleteAccount()">
      </confirm-modal>
    </div>
  </div>
</div>
