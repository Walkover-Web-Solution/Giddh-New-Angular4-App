<form class="horizontal-form ng-pristine ng-valid ng-valid-required" id="groupDetailForm" name="groupDetailForm" novalidate [formGroup]="groupDetailForm" (submit)="updateGroup()">
    <div class="container-fluid mrT1">
        <div class="row">
            <div class="form-group col-xs-6">
                <label>Group Name</label>
                <input type="text" class="form-control" placeholder="Enter Group Name" formControlName="name">
            </div>
            <div class="form-group col-xs-6">
                <label>Unique Name</label>
                <input type="text" class="form-control" UniqueNameDirective placeholder="Enter Unique Name" formControlName="uniqueName">
            </div>
        </div>


        <div class="form-group clearfix">
            <label>Description</label>
            <textarea maxlength="200" rows="5" cols="10" class="form-control" placeholder="Enter description" formControlName="description"></textarea>
        </div>

        <div class="form-group">
            <a href="javascript:void(0);" class="btn btn-danger" *ngIf="(showEditGroup$ | async) && !(activeGroup$ | async)?.fixed" (click)="showDeleteGroupModal()">DELETE {{
                (activeGroup$ | async)?.name }}</a>

            <button class="btn btn-primary pull-right" type="submit" *ngIf="(showEditGroup$ | async)" [ladda]="isUpdateGroupInProcess$ | async" [disabled]="(activeGroup$ | async)?.fixed || groupDetailForm.invalid">Update</button>

        </div>

    </div>

</form>


<!--move group-->
<div class="col-xs-12 form-group m" *ngIf="(activeGroup$ | async)">
    <form name="moveGroupForm" class="horizontal-form" novalidate (submit)="moveGroup()" [formGroup]="moveGroupForm">
        <label class="d-block">Move to group</label>
        <span>
        <sh-select formControlName="moveto" [placeholder]="'Group name'" [options]="groupsList" [customFilter]="customMoveGroupFilter" class="pull-left" style="width: calc(100% - 92px);">
            <!--template for move group typeahead-->
            <ng-template #optionTemplate let-option="option">
                <a href="javascript:void(0)" class="list-item" style="border-bottom:1px solid #e0e0e0;">
                    <div class="item">{{ option.label }}</div>
                    <div class="item_unq">{{ option.value }}</div>
                </a>
            </ng-template>
        </sh-select>
      </span>
        <span class="pull-right"><button type="submit" class="btn btn-primary" [disabled]="moveGroupForm.invalid">Move</button></span>

    </form>
</div>
<!--move group-->


<!--taxes  -->

<!-- Taxes collapse -->
<div class="clearfix tax-operation horizontal-form" *ngIf="isTaxableGroup$ | async">
    <div class="col-xs-12">
        <div class="form-group toggle-btn mrB">
            <label class="cp" (click)="showTaxes = !showTaxes; taxHierarchy()">
            <i class="fa cp" aria-hidden="true" [ngClass]="{'fa-minus-square-o': showTaxes, 'fa-plus-square-o': !showTaxes}"></i>Taxes
          </label>
        </div>
    </div>
    <!-- taxes container -->
    <ng-container *ngIf="showTaxes">
        <div class="col-xs-12">

            <form name="taxGroupForm" novalidate [formGroup]="taxGroupForm" (submit)="applyTax()">
                <div class="tax-label">
                    <label>All Applicable Taxes</label>
                </div>
                <div class="form-group">
                    <div class="input-group">
                        <sh-select formControlName="taxes" [placeholder]="'Select Tax'" [options]="companyTaxDropDown | async" [multiple]="true" style="width: calc(100% - 12px);">
                        </sh-select>
                        <span class="input-group-btn pdL2"> <button type="submit" class="btn btn-success">Save</button></span>
                    </div>
                </div>
            </form>
            <!-- *ngIf="showEditTaxSection" -->
            <div class="edit-tax-section">
                <div class="form-group">
                    <div class="tax-label">
                        <label>All Inherited Taxes</label>
                    </div>
                    <div *ngFor="let inTax of (activeGroupTaxHierarchy$ | async)?.inheritedTaxes">
                        <ng-template #popTemplate>
                            <div [innerHtml]="taxPopOverTemplate.replace('@inTax.name', inTax.name)"></div>
                        </ng-template>
                        <span class="tax-bullet" *ngFor="let inAppTax of inTax.applicableTaxes" [popover]="popTemplate" placement="right" triggers="mouseenter:mouseleave">{{ inAppTax.name }}
                </span>
                    </div>
                    <p *ngIf="!(activeGroupTaxHierarchy$ | async)?.inheritedTaxes.length">No Inherited Taxes</p>
                </div>
            </div>
        </div>
    </ng-container>
    <!-- taxes container -->
</div>



<!-- <div class="clearfix bdrB" *ngIf="isTaxableGroup$ | async">
    <div class="mrT1">
        <div class="dGryHead">
            Taxes
        </div>
        <div class="pd2 clearfix">
            <div class="tax-list-wrap">
                <div class="tax-label"><label>All Applied Taxes</label></div>

          <span class="tax-bullet" *ngFor="let tax of (activeGroup$ | async)?.applicableTaxes">{{ tax.name }}</span>

          <p *ngIf="!(activeGroup$ | async)?.applicableTaxes.length" class="ng-scope">No taxes Applied</p>
          <button id="editTax" class="btn btn-sm btn-default edit-tax-btn" (click)="taxHierarchy()">
            <i class="glyphicon glyphicon-edit"></i>
          </button>
            </div>

            <div class="edit-tax-section" *ngIf="showEditTaxSection">
                <div class="tax-list-wrap mrB1">
                    <div class="tax-label"><label>All Inherited Taxes</label></div>
                    <div *ngFor="let inTax of (activeGroupTaxHierarchy$ | async)?.inheritedTaxes">
                        <ng-template #popTemplate>
                            <div [innerHtml]="taxPopOverTemplate.replace('@inTax.name', inTax.name)"></div>
                        </ng-template>
                        <span class="tax-bullet" *ngFor="let inAppTax of inTax.applicableTaxes" [popover]="popTemplate" placement="right" triggers="mouseenter:mouseleave">{{ inAppTax.name }}
                  </span>
                    </div>
                    <p *ngIf="!(activeGroupTaxHierarchy$ | async)?.inheritedTaxes.length">No Inherited Taxes</p>
                </div>
                <div class="tax-list-wrap">
                    <div class="tax-label"><label>All Applicable Taxes</label></div>
                    <form name="taxGroupForm" novalidate [formGroup]="taxGroupForm" (submit)="applyTax()">
                        <div class="clearfix max350 mrT1">
                            <sh-select formControlName="taxes" [placeholder]="'Select Taxes'" [options]="companyTaxDropDown | async" [multiple]="true">
                            </sh-select>
                        </div>
                        <button type="submit" class="btn btn-success mrT1"> Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div> -->

<!--delete Group modal  -->
<div bsModal #deleteGroupModal="bs-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <confirm-modal [title]="'Delete Group'" [body]="'Are you sure you want to delete this group? All child groups will also be deleted.'" (cancelCallBack)="hideDeleteGroupModal()" (successCallBack)="deleteGroup()">
            </confirm-modal>
        </div>
    </div>
</div>
