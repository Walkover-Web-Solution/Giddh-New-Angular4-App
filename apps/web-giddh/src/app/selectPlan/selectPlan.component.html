<div id="main" class="welcome_outer">
    <layout-main>
        <div class="welcome-header">
            <h2>Welcome To Giddh! </h2>
        </div>
        <hr />
        <div class="welcome-msg">
            <p>Hi {{logedInUser?.name}} !</p>
            <p>You belong to the following plan. Please select the plan in which you wish to create new company "{{createNewCompanyPreObj?.name}}".</p>

            <div *ngIf="!isCreateAndSwitchCompanyInProcess" class="choose-ur-plan">
                <div class="row">
                    <div class="col-sm-9">
                        <div class="row">
                            <ng-container *ngFor="let item of SubscriptionPlans; let i=index">
                                <!-- Free plans -->
                                <ng-container *ngIf="!item?.planDetails?.amount && !item.subscriptionId">
                                    <div class="col-sm-4">
                                        <div class="select-plan-block">
                                            {{item?.planDetails?.name}}
                                            <div class="your-account">

                                                <!-- <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription ID
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            -
                                                        </p>
                                                    </div>
                                                </div> -->

                                                <!--  -->
                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription Price
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p *ngIf="item?.planDetails?.amount">
                                                            {{item?.planDetails?.amount | number}}
                                                        </p>
                                                        <p *ngIf="!item?.planDetails?.amount">
                                                            FREE
                                                        </p>
                                                    </div>
                                                </div>
                                                <!--  -->

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Total Companies
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p class="">
                                                            {{item?.planDetails?.companiesLimit | number}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Transactions Limit
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{item?.planDetails?.transactionLimit | number}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription Renewal
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{item?.planDetails?.duration }} {{item?.planDetails?.durationUnit}}(s)
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <button class="btn btn-primary mrT1 mrB2" (click)="createCompany(item);" [ladda]="isCompanyCreationInProcess$ | async">Select Plan</button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </ng-container>
                                <!-- new plan after free -->
                                <ng-container *ngIf="item?.planDetails?.amount">
                                    <div class="col-sm-4">
                                        <div class="select-plan-block">
                                            {{item?.planDetails?.name}}
                                            <div class="your-account">

                                                <!-- <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription ID
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            -
                                                        </p>
                                                    </div>
                                                </div> -->

                                                <!--  -->
                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription Price
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{item?.planDetails?.amount | number}}
                                                        </p>
                                                    </div>
                                                </div>
                                                <!--  -->

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Total Companies
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p class="">
                                                            {{item?.planDetails?.companiesLimit | number}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Transactions Limit
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{item?.planDetails?.transactionLimit | number}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription Renewal
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{item?.planDetails?.duration}} {{item?.planDetails?.durationUnit}}(s)
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <button class="btn btn-success mrT1 mrB2" (click)="buyPlanClicked(item)">Buy Plan</button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
                        <div class="row">
                            <ng-container *ngFor="let paidItem of SubscriptionPlans">
                                <ng-container *ngIf="paidItem?.subscriptionId && paidItem?.totalCompanies!==paidItem?.planDetails?.companiesLimit">

                                    <div class="col-sm-4">
                                        <div class="select-plan-block">
                                            {{paidItem?.planDetails?.name}}
                                            <div class="your-account">

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription ID
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{paidItem.subscriptionId}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <!--  -->
                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription Price
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{paidItem?.planDetails?.amount | number}}
                                                        </p>
                                                    </div>
                                                </div>
                                                <!--  -->

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Total Companies
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p class="">
                                                            {{ paidItem?.totalCompanies | number}} out of {{ paidItem?.planDetails?.companiesLimit | number}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Transactions Limit
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{paidItem?.planDetails?.transactionLimit | number}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-6">
                                                        <span>
                      Subscription Renewal
                    </span>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <p>
                                                            {{paidItem?.expiry}}
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <button class="btn btn-primary mrT1 mrB2" [ladda]="isCompanyCreationInProcess$ | async" (click)="createCompany(paidItem)">Select Plan</button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="activation-key">
                            <label>Activation Key</label>
                            <input type="text" name="licenceKey" class="form-control mrT1" placeholder="Enter activation key">
                        </div>
                        <div class="activation-btn">
                            <button class="btn btn-green mrT1" disabled> Activate</button>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="isCreateAndSwitchCompanyInProcess">
                <div class="no-data mrT2 d-flex" style="justify-content: center;align-items: center;margin-top:125px;margin-bottom: 105px;">
                    <div class="giddh-spinner vertical-center-spinner"></div>
                </div>
            </div>
            <div class="note-wrap">
                <p>Note:</p>
                <p>* revenue more than 12 and less than 20 lacs</p>
            </div>

        </div>
    </layout-main>
</div>