<div class="container-fluid">


  <div class="contact-main agingPage">
    <div class=" pdB2 mrB1">
      <perfect-scrollbar>

        <table style="min-height: 210px" class="table basic table-bordered aging-table table-aging-report">
          <thead>
          <tr class="aging-table-top">
            <td></td>
            <td></td>
            <td></td>
            <td colspan="4" class="text-center top-aging-table-top">
              <p><strong>Due as on </strong> <span class="italic underline">
              <input type="text" name="daterangeInputs" daterangepicker [options]="datePickerOptions"
                     (hideDaterangepicker)="selectedDate($event)" (applyDaterangepicker)="selectedDate($event)"
                     class="form-control date-range-picker"/>
          </span></p>

              <aging-dropdown *ngIf="setDueRangeOpen$|async" [options]="agingDropDownoptions"
                              (closeEvent)="closeAgingDropDownop($event)"></aging-dropdown>


            </td>
            <td></td>
          </tr>


          <tr>

            <th>Customer Name
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('name', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'name' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('name', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'name' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="text-right pr-3">Total Due
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('totalDueAmount', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'totalDueAmount' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('totalDueAmount', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'totalDueAmount' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="text-right pr-3">Future Due
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('futureDueAmount', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'futureDueAmount' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('futureDueAmount', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'futureDueAmount' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic unbold underline pr-3 text-right"><span
              (click)="openAgingDropDown()">0-{{(agingDropDownoptions$| async)?.fourth}} Days</span>
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic text-right pr-3 unbold underline"><span
              (click)="openAgingDropDown()">{{(agingDropDownoptions$| async)?.fourth + 1}}
              -{{((agingDropDownoptions$| async)?.fifth)}} Days </span>
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount1', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount1' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount1', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount1' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic text-right pr-3 unbold underline"><span
              (click)="openAgingDropDown()">{{((agingDropDownoptions$| async)?.fifth + 1)}}
              -{{((agingDropDownoptions$| async)?.sixth)}} Days </span>
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount2', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount2' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount2', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount2' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic text-right pr-3 unbold underline"><span
              (click)="openAgingDropDown()">{{(agingDropDownoptions$| async)?.sixth + 1 }}+ Days  </span>
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount3', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount3' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('dueAmount3', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'dueAmount3' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="text-right pr-3">Total Due
              <div class="icon-pointer">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('totalDueAmount', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'totalDueAmount' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('totalDueAmount', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'totalDueAmount' && order === 'desc'}"
                ></div>
              </div>
            </th>

          </tr>

          </thead>

          <tbody>

          <ng-container
            *ngFor="let entry of (dueAmountReportData$ | async)?.results | ghSortBy: key : order | filter:filter;">

            <tr *ngIf="(dueAmountReportData$ | async)?.results?.length">

              <td>{{ entry.name }}</td>
              <td class="text-right"> {{ entry.totalDueAmount |giddhCurrency }}</td>
              <td class="text-right">{{ entry.futureDueAmount |giddhCurrency}}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[0].dueAmount |giddhCurrency }}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[1].dueAmount |giddhCurrency}}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[2].dueAmount |giddhCurrency}}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[3].dueAmount |giddhCurrency}}</td>
              <td class="text-right"> {{ entry.totalDueAmount |giddhCurrency}}</td>
            </tr>

          </ng-container>

          <ng-container *ngIf="!(dueAmountReportData$ | async)?.results?.length">
            <tr>
              <td colspan="8" class="text-center empty_table">
                <h1>No Record Found !!</h1>
              </td>
            </tr>
          </ng-container>

          </tbody>

          <tfoot *ngIf="(dueAmountReportData$ | async)?.totalItems>=20">

          <tr>
            <td colspan="100%">
              <div class="alC mt-4 mb-4" style="text-align: center;">
                <div id="pagination" element-view-container-ref #paginationChild=elementviewcontainerref></div>
              </div>
            </td>
          </tr>

          </tfoot>
        </table>

      </perfect-scrollbar>

    </div>
  </div>
</div>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <div class="customer-footer-box">

      </div>
    </div>

    <div class="col-md-6">
      <div class="custumerRightWrap">
        <div class="text-right">
          <h4 class="mb-1">Result Total </h4>
        </div>
        <div class="bg-white customer-right">
          <table>
            <tr>
              <td>
                <p>Upcoming</p>
                <h3>{{getFutureTotalDue()| giddhCurrency }}</h3>
              </td>

              <td>
                <p>Due</p>
                <h3>{{getTotalDue()| giddhCurrency}}</h3>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
