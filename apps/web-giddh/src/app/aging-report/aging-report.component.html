<div class="container-fluid">

  <div class="top_bar clearfix">

    <div class="form-inline">

      <div class="pull-left header-left">


        <div class="form-group max250">
          <input type="text" placeholder="Name/amount" class="form-control" [(ngModel)]="searchStr"
                 (ngModelChange)="searchStr$.next($event)" style="width:210px"/>
        </div>

      </div>

      <div class="btn-group plus-btn pull-right">

        <button class="btn btn-blue" style="margin-right: 5px">
          + New Customer
        </button>

      </div>

      <div class="customer-footer-box pull-right ">

        <div class="clearfix">

          <div class="btn-group moreBtn" dropdown>

            <button id="button-basic" dropdownToggle type="button" class="btn btn-default dropdown-toggle"
                    aria-controls="dropdown-basic">
              More <span class="caret"></span>
            </button>

            <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu"
                role="menu" aria-labelledby="button-basic">
              <li role="menuitem">Email</li>
              <li role="menuitem">SMS</li>
              <li role="menuitem">Download CSV</li>
            </ul>

          </div>

        </div>

      </div>

    </div>
  </div>

  <div class="contact-main agingPage">
    <div class=" pdB2 mrB1">
      <perfect-scrollbar>

        <table style="min-height: 210px" class="table basic table-bordered aging-table table-aging-report">
          <thead>
          <tr class="aging-table-top">
            <td></td>
            <td></td>
            <td></td>
            <td colspan="4" class="text-center top-aging-table-top">
              <p><strong>Due as on </strong> <span class="italic underline">
              <input type="text" name="daterangeInputs" daterangepicker [options]="datePickerOptions"
                     (hideDaterangepicker)="selectedDate($event)" (applyDaterangepicker)="selectedDate($event)"
                     class="form-control date-range-picker"/>
          </span></p>

              <aging-dropdown *ngIf="setDueRangeOpen$|async" [options]="agingDropDownoptions"
                              (closeEvent)="closeAgingDropDownop($event)"></aging-dropdown>


            </td>
            <td></td>
          </tr>


          <tr>

            <th>Customer Name
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('name', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'name' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('name', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'name' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th>Parent Group
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('group', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'group' && order === 'asc'}"></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('group', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'group' && order === 'desc'}"></div>
              </div>
            </th>

            <th>Upcoming Due
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('futureDueAmount', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'futureDueAmount' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('futureDueAmount', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'futureDueAmount' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic unbold underline pr-3 text-right">
              <span
                (click)="openAgingDropDown()">0-{{(agingDropDownoptions$| async)?.fourth}} Days</span>
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('range0', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'range0' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('range0', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'range0' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic text-right pr-3 unbold underline">
              <span
                (click)="openAgingDropDown()">{{(agingDropDownoptions$| async)?.fourth + 1}}
                -{{((agingDropDownoptions$| async)?.fifth)}} Days </span>
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('range1', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'range1' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('range1', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'range1' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic text-right pr-3 unbold underline">
              <span
                (click)="openAgingDropDown()">{{((agingDropDownoptions$| async)?.fifth + 1)}}
                -{{((agingDropDownoptions$| async)?.sixth)}} Days </span>
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('range2', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'range2' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('range2', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'range2' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th class="italic text-right pr-3 unbold underline">
              <span
                (click)="openAgingDropDown()">{{(agingDropDownoptions$| async)?.sixth + 1 }}+ Days  </span>
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('range3', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'range3' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('range3', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'range3' && order === 'desc'}"
                ></div>
              </div>
            </th>

            <th>Total Due
              <div class="icon-pointer cp">
                <div class="glyphicon glyphicon-triangle-top text-light-2 d-block font-xxs"
                     (click)="sort('totalDueAmount', 'asc')"
                     [ngClass]="{'activeTextColor': key === 'totalDueAmount' && order === 'asc'}"
                ></div>
                <div class="glyphicon glyphicon-triangle-bottom text-light-2 d-block font-xxs"
                     (click)="sort('totalDueAmount', 'desc')"
                     [ngClass]="{'activeTextColor': key === 'totalDueAmount' && order === 'desc'}"
                ></div>
              </div>
            </th>

          </tr>

          </thead>

          <tbody>

          <ng-container
            *ngFor="let entry of (dueAmountReportData$ | async)?.results">

            <tr *ngIf="(dueAmountReportData$ | async)?.results?.length">

              <td>{{ entry.name }}</td>
              <td>{{ entry.groupName }}</td>
              <td class="text-right">{{ entry.futureDueAmount |giddhCurrency}}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[0].dueAmount |giddhCurrency }}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[1].dueAmount |giddhCurrency}}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[2].dueAmount |giddhCurrency}}</td>
              <td class="text-right">{{ entry.currentAndPastDueAmount[3].dueAmount |giddhCurrency}}</td>
              <td class="text-right"> {{ entry.totalDueAmount |giddhCurrency}}</td>
            </tr>

          </ng-container>

          <ng-container *ngIf="!(dueAmountReportData$ | async)?.results?.length">
            <tr>
              <td colspan="8" class="text-center empty_table">
                <h1>No Record Found !!</h1>
              </td>
            </tr>
          </ng-container>

          </tbody>

          <tfoot *ngIf="(dueAmountReportData$ | async)?.totalItems>=20">

          <tr>
            <td colspan="100%">
              <div class="alC mt-4 mb-4" style="text-align: center;">
                <div id="pagination" element-view-container-ref #paginationChild=elementviewcontainerref></div>
              </div>
            </td>
          </tr>

          </tfoot>
        </table>

      </perfect-scrollbar>

    </div>
  </div>
</div>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <div class="customer-footer-box">

      </div>
    </div>

    <div class="col-md-6">
      <div class="custumerRightWrap">
        <div class="text-right">
          <h4 class="mb-1">Result Total </h4>
        </div>
        <div class="bg-white customer-right">
          <table>
            <tr>
              <td>
                <p>Upcoming</p>
                <h3>{{getFutureTotalDue()| giddhCurrency }}</h3>
              </td>

              <td>
                <p>Due</p>
                <h3>{{getTotalDue()| giddhCurrency}}</h3>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
