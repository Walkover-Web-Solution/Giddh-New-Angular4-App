<hamburger-menu [pageHeading]="'Permissions'"></hamburger-menu>
<div class="container-fluid clearfix" *ngIf="allRoles.length > 0">
    <a href="javascript:void(0)" *ngIf="showBackButton" class="btn btn-sky-blue pull-right mt-1" [routerLink]="['/pages/settings/permission']">Back</a>
    <div class="col-sm-12 mt-15 pd0 role clearfix" *ngFor="let role of allRoles">
        <div class="row mr-0 ml-0">
        <div class="col-md-3 col-sm-3 col-12 pd0 role-head cp">
            <span class="vcenter">
                <h1>{{role.name}}</h1>
                <div class="text-center mr-t2 onHover">
                    <button *ngIf="!role.isFixed" class="btn btn-sm btn-primary"
                        (click)="updateRole(role);">Edit</button>
                    <button *ngIf="!role.isFixed" class="btn btn-sm btn-danger"
                        (click)="deleteRole(role);">Delete</button>
                    <button *ngIf="role.isFixed" class="btn btn-sm btn-primary"
                        (click)="updateRole(role);">View</button>
                </div>
            </span>
        </div>
        <div class="col-md-9 col-sm-9 col-12">
            <ul>
                <li *ngFor="let item of role.scopes">{{ item.name | capitalize }}</li>
            </ul>
        </div>
    </div>
    </div>

    <div class="col-sm-12 mr-t2 mr-b2 role text-center clearfix pd4 new-box">
        <h1 class="inline-block cursor-pointer" (click)="openPermissionModal()">+ Add New Role</h1>
    </div>

</div>

<!--add and manage role model -->
<div bsModal #permissionModel="bs-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <permission-model (closeEvent)="closePopupEvent($event)"></permission-model>
        </div>
    </div>
</div>

<!--delete role confirmation model -->
<div bsModal #permissionConfirmationModel="bs-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-md">
        <!-- modal-liq-90 class is removed for now-->
        <div class="modal-content">
            <delete-role-confirmation-model [selectedRoleForDelete]="selectedRoleForDelete"
                (confirmDeleteEvent)="deleteConfirmedRole()" (closeModelEvent)="closeConfirmationPopup()">
            </delete-role-confirmation-model>
        </div>
    </div>
</div>
