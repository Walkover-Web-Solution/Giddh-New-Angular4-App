<ng-container
    appTranslate
    [file]="'settings/integration'"
    (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event"
>
    <div class="clearfix">
        <mat-tab-group
            mat-stretch-tabs="false"
            [ngClass]="{ 'tab-integration': true }"
            id="tab-integration"
            animationDuration="0ms"
            [selectedIndex]="selectedTabParent"
            (selectedTabChange)="tabChanged($event)"
            [disableRipple]="true"
        >
            <!-- <tab (selectTab)="loadSmsData($event); tabChanged('sms');">
                <ng-template tabHeading>
                    <span class="icon-chat2"></span> {{localeData?.sms?.tab_heading}}
                </ng-template>

                <div class="box clearfix">
                    <h3 class="font-20 bold mb-2">{{localeData?.sms?.form_heading}}</h3>
                    <form #msgform="ngForm" (ngSubmit)="onSubmitMsgform(msgform)" class="smsForm">
                        <section ngModelGroup="smsFormObj" #smsFormObjCtrl="ngModelGroup">
                            <div class="row">
                                <div class="form-group col-md-5 col-lg-3">

                                    <label>{{localeData?.sms?.auth_key_label}}</label>
                                    <br>
                                    <input type="text" [placeholder]="localeData?.sms?.auth_key_placeholder"
                                        class="form-control" [ngModel]="smsFormObj.authKey" name="authKey" required />

                                </div>
                                <div class="form-group col-md-5 col-lg-3">
                                    <label>{{localeData?.sms?.sender_id_label}}</label>
                                    <br>
                                    <input type="text" [placeholder]="localeData?.sms?.sender_id_placeholder"
                                        class="form-control" [ngModel]="smsFormObj.senderId" name="senderId" required />
                                </div>
                                <div class="form-group col-md-2 col-lg-3">
                                    <div class="empty-label">
                                        <label>&nbsp;</label>
                                        <br>
                                        <button type="submit" class="btn btn-success mr-r1"
                                            [disabled]="smsFormObjCtrl.invalid">{{commonLocaleData?.app_save}}</button>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </form>
                </div>
            </tab> -->

            <mat-tab [label]="localeData?.communication?.tab_heading" *ngIf="voucherApiVersion === 2">
                <app-setting-campaign></app-setting-campaign>
            </mat-tab>

            <mat-tab [label]="localeData?.email?.tab_heading">
                <ng-template> <span class="icon-mail"></span> {{ localeData?.email?.tab_heading }} </ng-template>
                <div class="box clearfix mb-2">
                    <h3 class="section-head">{{ localeData?.email?.gmail_integration }}</h3>
                    <div class="d-flex gmail-integration-message">
                        <ng-container *ngIf="!(isGmailIntegrated$ | async)">
                            <a
                                *ngIf="!isElectron"
                                mat-stroked-button
                                color="primary"
                                [href]="gmailAuthCodeUrl$ | async"
                            >
                                {{ localeData?.email?.connect_gmail }}
                            </a>

                            <a
                                *ngIf="isElectron"
                                mat-stroked-button
                                color="primary"
                                (click)="gmailIntegration('google')"
                            >
                                {{ localeData?.email?.connect_gmail }}
                            </a>
                        </ng-container>
                        <ng-container *ngIf="isGmailIntegrated$ | async">
                            <h4 class="text-success align-self-center">
                                {{ localeData?.email?.gmail_connected }}
                            </h4>
                            <button
                                mat-stroked-button
                                color="warn"
                                aria-label="remove account"
                                class="btn mr-l2"
                                (click)="openRemoveGmailIntegrationDialog()"
                            >
                                {{ localeData?.email?.remove_account }}
                            </button>
                        </ng-container>
                    </div>
                </div>

                <div class="box clearfix">
                    <h3 class="font-16 bold mb-2">{{ localeData?.email?.form_heading }}</h3>
                    <form #emailform="ngForm" (ngSubmit)="onSubmitEmailform(emailform)">
                        <div class="row align-items-center">
                            <div class="form-group col-md-5 col-lg-3 pd-r05">
                                <input-field
                                    [label]="localeData?.email?.auth_key_label"
                                    [type]="'text'"
                                    [placeholder]="localeData?.email?.auth_key_placeholder"
                                    [ngModel]="emailFormObj.authKey"
                                    [name]="'authKey'"
                                    [required]="true"
                                ></input-field>
                            </div>
                            <div class="form-group col-md-5 col-lg-3 pd-l05 pd-r05">
                                <input-field
                                    [type]="'text'"
                                    [placeholder]="localeData?.email?.email_subject_placeholder"
                                    [ngModel]="emailFormObj.subject"
                                    [name]="'subject'"
                                    [required]="true"
                                ></input-field>
                            </div>
                            <div class="form-group col-md-2 col-lg-3 empty-label pd-l05">
                                <button
                                    aria-label="save"
                                    mat-stroked-button
                                    color="primary"
                                    type="submit"
                                    [disabled]="emailform.invalid"
                                >
                                    {{ commonLocaleData?.app_save }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </mat-tab>

            <mat-tab [label]="localeData?.collection?.tab_heading">
                <ng-template> <span class="icon-card"></span> {{ localeData?.collection?.tab_heading }} </ng-template>
                <div class="clearfix petty-cash collection-integration">
                    <mat-tab-group mat-stretch-tabs="false" animationDuration="0ms" [disableRipple]="true">
                        <mat-tab [label]="localeData?.collection?.razorpay_tab_heading">
                            <div class="box clearfix mb-2">
                                <h3 class="font-16 bold mb-3">{{ localeData?.collection?.razorpay_form_heading }}</h3>
                                <form #razorPayform="ngForm" novalidate>
                                    <div class="row">
                                        <div class="form-group col-lg-4 col-md-6 col-xs-12">
                                            <input-field
                                                [type]="'text'"
                                                [label]="localeData?.collection?.key_id_label"
                                                [placeholder]="localeData?.collection?.key_id_placeholder"
                                                [(ngModel)]="razorPayObj.userName"
                                                [name]="'username'"
                                                [required]="true"
                                            ></input-field>
                                        </div>
                                        <div class="form-group col-lg-4 col-md-6 col-xs-12">
                                            <input-field
                                                [type]="'password'"
                                                [label]="localeData?.collection?.secret_key_label"
                                                [placeholder]="localeData?.collection?.secret_key_placeholder"
                                                [(ngModel)]="razorPayObj.password"
                                                [name]="'password'"
                                                [required]="true"
                                            ></input-field>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="row">
                                            <div class="form-group col-lg-4 col-md-6 col-xs-12">
                                                <div class="input-group align-items-center column-gap1 flex-nowrap">
                                                    <dropdown-field
                                                        class="linked-account"
                                                        [name]="'account'"
                                                        [scrollableElementId]="'linkedAccount'"
                                                        [label]="localeData?.collection?.link_account_label"
                                                        [placeholder]="localeData?.collection?.link_account_placeholder"
                                                        [options]="accounts"
                                                        (selectedOption)="selectAccount($event)"
                                                        [defaultValue]="razorPayObj?.account?.name"
                                                        [enableDynamicSearch]="true"
                                                        [isPaginationEnabled]="true"
                                                        (scrollEnd)="handleScrollEnd()"
                                                        (dynamicSearchedQuery)="onAccountSearchQueryChanged($event)"
                                                        [allowValueReset]="true"
                                                        (onClear)="
                                                            razorPayObj.account.name = null;
                                                            razorPayObj.account.uniqueName = null
                                                        "
                                                    >
                                                    </dropdown-field>
                                                    <div
                                                        class="input-group-addon cursor-pointer"
                                                        *ngIf="
                                                            razorPayObj?.account?.uniqueName &&
                                                            razorPayObj?.account?.name
                                                        "
                                                    >
                                                        <span
                                                            (click)="unlinkAccountFromRazorPay()"
                                                            class="icon-trash"
                                                        ></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div
                                                class="form-group col-lg-4 col-md-6 col-xs-12 mr-t1 empty-label"
                                                id="inlnImg"
                                            >
                                                <mat-slide-toggle
                                                    [(ngModel)]="razorPayObj.autoCapturePayment"
                                                    name="autoCapturePayment"
                                                    color="primary"
                                                    aria-label="payment"
                                                >
                                                </mat-slide-toggle>
                                                <label class="mat-autocapture-payment">{{
                                                    localeData?.collection?.automatic_capture_on_payment
                                                }}</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-12 form-group">
                                            <div class="d-flex column-gap1">
                                                <button
                                                    mat-stroked-button
                                                    color="primary"
                                                    aria-label="save"
                                                    *ngIf="!updateRazor"
                                                    [disabled]="razorPayform.invalid"
                                                    (click)="saveRazorPayDetails()"
                                                >
                                                    {{ commonLocaleData?.app_save }}
                                                </button>
                                                <button
                                                    mat-stroked-button
                                                    color="primary"
                                                    aria-label="update"
                                                    *ngIf="updateRazor"
                                                    [disabled]="razorPayform.invalid"
                                                    (click)="updateRazorPayDetails()"
                                                >
                                                    {{ commonLocaleData?.app_update }}
                                                </button>
                                                <button
                                                    mat-stroked-button
                                                    aria-label="delete"
                                                    *ngIf="updateRazor"
                                                    (click)="deleteRazorPayDetails()"
                                                >
                                                    {{ commonLocaleData?.app_delete }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </mat-tab>
                        <mat-tab [label]="localeData?.collection?.paypal_tab_heading">
                            <div class="box clearfix mb-2">
                                <h3 class="font-16 bold mb-3">{{ localeData?.collection?.paypal_form_heading }}</h3>
                                <form #paypalForm="ngForm" novalidate>
                                    <div class="row">
                                        <div class="form-group col-lg-4 col-md-6 col-xs-12">
                                            <input-field
                                                [type]="'text'"
                                                [label]="localeData?.collection?.email_id_label"
                                                [placeholder]="localeData?.collection?.email_id_placeholder"
                                                [(ngModel)]="paypalObj.email"
                                                [name]="'collection_email'"
                                                [required]="true"
                                            ></input-field>
                                        </div>
                                        <div class="form-group col-lg-4 col-md-6 col-xs-12">
                                            <div class="d-flex align-items-center column-gap15">
                                                <dropdown-field
                                                    class="linked-account"
                                                    [name]="'account'"
                                                    [scrollableElementId]="'linkedAccount'"
                                                    [label]="localeData?.collection?.link_account_label"
                                                    [placeholder]="localeData?.collection?.link_account_placeholder"
                                                    [options]="paypalAccounts"
                                                    (selectedOption)="selectLinkedAccount($event)"
                                                    [defaultValue]="linkedAccountLabel"
                                                    [enableDynamicSearch]="true"
                                                    [isPaginationEnabled]="true"
                                                    (scrollEnd)="paypalHandleScrollEnd()"
                                                    (dynamicSearchedQuery)="paypalOnAccountSearchQueryChanged($event)"
                                                    [allowValueReset]="true"
                                                    (onClear)="
                                                        paypalObj.account.name = null;
                                                        paypalObj.account.uniqueName = null
                                                    "
                                                >
                                                </dropdown-field>
                                                <button
                                                    mat-stroked-button
                                                    class="min-width-unset"
                                                    (click)="unlinkAccountFromPaypal()"
                                                    *ngIf="paypalObj?.account?.uniqueName && paypalObj?.account?.name"
                                                >
                                                    <i class="icon-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div></div>

                                    <div class="row">
                                        <div class="col-sm-12 form-group">
                                            <div class="d-flex column-gap1">
                                                <button
                                                    aria-label="save"
                                                    type="button"
                                                    *ngIf="!updatePaypal"
                                                    mat-stroked-button
                                                    color="primary"
                                                    [disabled]="paypalForm.invalid"
                                                    (click)="savePaypalDetails()"
                                                >
                                                    {{ commonLocaleData?.app_save }}
                                                </button>
                                                <button
                                                    aria-label="update"
                                                    *ngIf="updatePaypal"
                                                    type="button"
                                                    mat-stroked-button
                                                    color="primary"
                                                    [disabled]="paypalForm.invalid"
                                                    (click)="updatePaypalDetails()"
                                                >
                                                    {{ commonLocaleData?.app_update }}
                                                </button>
                                                <button
                                                    aria-label="delete"
                                                    *ngIf="updatePaypal"
                                                    mat-stroked-button
                                                    color="warn"
                                                    type="button"
                                                    (click)="deletePaypalDetails()"
                                                >
                                                    {{ commonLocaleData?.app_delete }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </mat-tab>

            <mat-tab [label]="localeData?.ecommerce?.tab_heading">
                <ng-template> <span class="icon-ecomm"></span> {{ localeData?.ecommerce?.tab_heading }} </ng-template>
                <div class="mr-t2 box clearfix">
                    <h3 class="section-head mb-2">{{ localeData?.ecommerce?.shopify_form_heading }}</h3>
                    <span *ngIf="isEcommerceShopifyUserVerified">{{
                        localeData?.ecommerce?.shopify_connected_message
                    }}</span>
                    <a
                        href="https://apps.shopify.com/giddh-accounting"
                        target="_blank"
                        *ngIf="!isEcommerceShopifyUserVerified"
                        class="link-color"
                    >
                        <span>{{ localeData?.ecommerce?.connect_shopify }}</span></a
                    >
                </div>
            </mat-tab>

            <mat-tab
                [label]="localeData?.payment?.tab_heading"
                *ngIf="
                    iciciAllowedCompanies.includes(activeCompany?.uniqueName) ||
                    isPlaidSupportedCountry ||
                    isGocardlessSupportedCountry
                "
            >
                <div class="clearfix box mat-tab-bottom-spacing">
                    <ng-container *ngIf="isIciciBankSupportedCountry">
                        <ng-template>
                            <span class="icon-payment"></span> {{ localeData?.payment?.tab_heading }}
                        </ng-template>
                        <div class="mb-2 bank-logo">
                            <img src="{{ imgPath }}ICICI-logo.png" />
                        </div>
                        <div class="row">
                            <div class="form-group mr-l2">
                                <button
                                    type="button"
                                    mat-stroked-button
                                    color="primary"
                                    class="mr-r2"
                                    (click)="openCreateNewAccountModal()"
                                >
                                    {{ localeData?.payment?.connect_new_account }}
                                </button>
                                <span class="button-separator">|</span> <br />
                                <a
                                    href="https://giddh.com/help/how-to-integrate-icici-bank-account-with-giddh"
                                    target="_blank"
                                    class="font-12"
                                    >{{ localeData?.payment?.learn_connect }}</a
                                >
                            </div>
                            <div class="form-group mr-l1">
                                <p class="mb-4 mr-l05 font-12">
                                    <a
                                        class="btn icici-button"
                                        href="https://cadigital.icicibank.com/SmartFormWeb/apps/services/www/SmartFormWeb/desktopbrowser/default/index.html?source=BC-application-Giddh#/"
                                        target="_blank"
                                        ><span class="icon-icici-logo"
                                            ><span class="path1"></span><span class="path2"></span
                                            ><span class="path3"></span
                                        ></span>
                                        {{ localeData?.payment?.open_new_current_account }}</a
                                    >
                                </p>
                            </div>
                        </div>
                    </ng-container>
                      <!-- This is not using no due to gocardless -->
                    <!-- <ng-container *ngIf="isPlaidSupportedCountry">
                        <div class="form-group">
                            <button aria-label="connect bank" mat-stroked-button class="mr-r2" color="primary" (click)="getPlaidLinkToken()">
                                {{ localeData?.payment?.connect_bank }}
                            </button>
                        </div>
                    </ng-container> -->
                    <ng-container *ngIf="isGocardlessSupportedCountry">
                        <div class="form-group">
                            <button
                                aria-label="connect bank"
                                mat-stroked-button
                                class="mr-r2"
                                color="primary"
                                (click)="openInstitutionsDialog()"
                            >
                                {{ localeData?.payment?.connect_bank }}
                            </button>
                        </div>
                    </ng-container>
                    <div class="connected-accounts">
                        <b class="font-15" *ngIf="!isLoading && connectedBankAccounts?.length > 0">{{
                            localeData?.payment?.connected_accounts
                        }}</b
                        ><br />
                        <giddh-page-loader [cssClass]="'mt-0 mb-0'" *ngIf="isLoading"></giddh-page-loader>
                        <ng-container *ngIf="!isLoading && connectedBankAccounts?.length > 0">
                            <div
                                class="account-wrapper"
                                *ngFor="let bankAccount of connectedBankAccounts; trackBy: trackByAccountUniqueName"
                            >
                                <div class="account-info-background width-100 font-15 row align-items-end">
                                    <div class="col-md-4">
                                        <span class="field-label">{{ bankAccount?.bankName }}</span
                                        ><br />
                                        <span class="account-number mt-2 font-15 inline"
                                            ><b
                                                ><span *ngIf="!isIciciBankSupportedCountry"
                                                    >{{ commonLocaleData?.app_ac }} #</span
                                                >
                                                {{ bankAccount?.bankResource?.accountNumber | accountNumberMask }}</b
                                            ></span
                                        >
                                    </div>
                                    <div class="col-md-4">
                                        <span
                                            *ngIf="isIciciBankSupportedCountry"
                                            class="width-100 view-only-field inline"
                                            >{{ bankAccount?.account?.name }}</span
                                        >
                                        <dropdown-field
                                            [label]="localeData?.payment?.linked_account"
                                            *ngIf="!isIciciBankSupportedCountry"
                                            [cssClass]="'input-background'"
                                            [name]="'bankAccountUniqueName'"
                                            [placeholder]="localeData?.payment?.link_account_placeholder"
                                            [options]="bankAccounts$ | async"
                                            (selectedOption)="
                                                bankAccount?.account.uniqueName = $event.value;
                                                selectBankAccount($event, bankAccount)
                                            "
                                        ></dropdown-field>
                                    </div>
                                    <span class="mr-l1 action-div" *ngIf="!isIciciBankSupportedCountry">
                                        <a
                                            href="javascript:;"
                                            class="icon-edit-pencil"
                                            (click)="openEditAccountModal(bankAccount)"
                                        ></a>
                                        <i
                                            *ngIf="isGocardlessSupportedCountry"
                                            (click)="deleteBankAccount(bankAccount)"
                                            class="icon-trash ml-1 mr-r2 cursor-pointer"
                                        ></i>
                                        <ng-container *ngIf="bankAccount.reLoginRequired">
                                            <button
                                                aria-label="dots"
                                                mat-icon-button
                                                [matMenuTriggerFor]="menu"
                                                class="company-name bank-menu"
                                            >
                                                <span class="icon-dots-three-vertical"></span>
                                            </button>
                                            <mat-menu #menu="matMenu">
                                                <button
                                                    aria-label="renew bank connection"
                                                    mat-menu-item
                                                    (click)="getPlaidLinkToken(bankAccount?.itemId)"
                                                >
                                                    <span>{{ commonLocaleData?.app_renew_bank_connection }}</span>
                                                </button>
                                            </mat-menu>
                                        </ng-container>
                                    </span>
                                    <div class="col-md-4 d-flex flex-column" *ngIf="isIciciBankSupportedCountry">
                                        <span class="field-label"
                                            >{{ localeData?.payment?.payment_updates }}<br
                                        /></span>
                                        <span
                                            class="payment-updates view-only-field inline"
                                            *ngIf="bankAccount?.bankResource?.paymentAlerts?.length > 0"
                                        >
                                            <ng-container
                                                *ngFor="
                                                    let alert of bankAccount?.bankResource?.paymentAlerts;
                                                    let i = index;
                                                    trackBy: trackByAlertUniqueName
                                                "
                                                >{{ alert?.name
                                                }}{{
                                                    i < bankAccount?.bankResource?.paymentAlerts?.length - 1 ? ", " : ""
                                                }}</ng-container
                                            >
                                        </span>
                                        <span class="mr-l1 action-div">
                                            <a
                                                href="javascript:;"
                                                class="icon-edit-pencil"
                                                (click)="openEditAccountModal(bankAccount)"
                                            ></a>
                                        </span>
                                    </div>
                                </div>
                                <div class="font-15">
                                    <ng-container *ngIf="bankAccount?.bankResource?.payor?.length > 0">
                                        <div
                                            class="mt-2"
                                            *ngFor="
                                                let payor of bankAccount?.bankResource?.payor;
                                                trackBy: trackByPayorUniqueName
                                            "
                                        >
                                            <div class="width-100">
                                                <div class="col-md-4 v-align-top inline">
                                                    <span class="field-label">{{
                                                        localeData?.payment?.login_id_label
                                                    }}</span
                                                    ><br />
                                                    <span class="width-100 disabled-field inline">{{
                                                        payor?.loginId
                                                    }}</span
                                                    ><br />
                                                    <span class="font-12 field-label">{{ payor?.user?.name }}</span>
                                                </div>
                                                <div class="col-md-4 v-align-top inline">
                                                    <span class="limit-upto field-label">{{
                                                        localeData?.payment?.limit_upto
                                                    }}</span
                                                    ><br />
                                                    <span class="width-100 disabled-field inline limit-upto"
                                                        >{{
                                                            payor?.duration === unlimitedLimit
                                                                ? commonLocaleData?.app_amount_limit?.unlimited
                                                                : activeCompany?.baseCurrencySymbol +
                                                                  " " +
                                                                  (payor?.maxAmount | giddhCurrency)
                                                        }}
                                                        <span
                                                            class="pull-right payor-duration font-12"
                                                            *ngIf="payor?.duration !== unlimitedLimit"
                                                            >/ {{ payor?.duration | titlecase }}</span
                                                        ></span
                                                    ><br />
                                                    <span class="limit-upto font-12 field-label"
                                                        >{{ localeData?.payment?.used }}
                                                        {{ payor?.usedAmount | giddhCurrency }}</span
                                                    >
                                                </div>
                                                <div class="col-md-4 v-align-top inline mt-2">
                                                    <br />
                                                    <span
                                                        class="account-approval-status pending-approval"
                                                        *ngIf="!payor?.isConnected"
                                                        ><i class="icon-alert-2"></i>
                                                        {{ localeData?.payment?.pending_self_approval }}</span
                                                    >
                                                    <span
                                                        class="account-approval-status approved"
                                                        *ngIf="payor?.isConnected"
                                                        ><i class="icon-success"></i>
                                                        {{ localeData?.payment?.connected }}</span
                                                    >
                                                    <span class="mr-l15 user-action-div">
                                                        <a
                                                            *ngIf="payor?.isConnected"
                                                            href="javascript:;"
                                                            class="icon-edit-pencil"
                                                            (click)="openEditAccountUserModal(bankAccount, payor)"
                                                        ></a>
                                                        <a
                                                            href="javascript:;"
                                                            class="fa fa-trash mr-l2"
                                                            (click)="
                                                                showDeleteBankAccountLoginConfirmationModal(
                                                                    bankAccount,
                                                                    payor
                                                                )
                                                            "
                                                        ></a>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="inline mt-2 mb-2" *ngIf="!payor?.isConnected">
                                                <div class="col-md-12">
                                                    <p
                                                        class="font-12"
                                                        [innerHTML]="localeData?.payment?.approval_request_sent"
                                                    ></p>
                                                    <p class="font-9">
                                                        {{ localeData?.payment?.approval_request_accepted }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <button
                                            aria-label="users"
                                            type="button"
                                            mat-stroked-button
                                            color="primary"
                                            class="bold font-15 mt-2 mr-l15"
                                            (click)="openCreateNewAccountUserModal(bankAccount)"
                                        >
                                            {{ localeData?.payment?.add_more_users }}
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </mat-tab>

            <mat-tab [label]="localeData?.tally?.heading" *ngIf="voucherApiVersion === 2">
                <ng-template> <span class="icon-card"></span>{{ localeData?.tally?.heading }}</ng-template>
                <div class="box clearfix mb-2">
                    <div class="form-group magic-link-container col-md-9 col-lg-7 d-flex align-items-center">
                        <label class="bold">{{ localeData?.tally?.api_url }}</label>
                        <mat-form-field appearance="fill">
                            <input
                                #apiUrlInput
                                matInput
                                class="dashed tally-url"
                                [readonly]="true"
                                type="text"
                                [(ngModel)]="apiUrl"
                            />
                        </mat-form-field>
                        <span class="input-group-btn">
                            <i
                                class="icon-copy-file"
                                (click)="copyUrl()"
                                [ngxClipboard]="apiUrlInput"
                                [matTooltip]="commonLocaleData?.app_copy"
                                [matTooltipPosition]="'above'"
                            ></i>
                        </span>
                        <span class="success copied-url" *ngIf="isCopied">{{ localeData?.tally?.copied }}</span>
                    </div>
                    <div class="form-group clearfix mb-0 doc-link mr-l15">
                        <ul>
                            <li>
                                <a
                                    target="_blank"
                                    class="btn link-color"
                                    [routerLink]="['/pages/user-details/auth-key']"
                                    >{{ localeData?.email?.auth_key_label }}</a
                                >
                            </li>
                            <li>
                                <a
                                    target="_blank"
                                    class="btn link-color"
                                    href="https://giddh.com/help/sync-with-tally-1591360375828781"
                                    >{{ localeData?.tally?.help_documentation }}</a
                                >
                            </li>
                        </ul>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
    <!--remove account integration confirmation modal-->
    <ng-template #removegmailintegration>
        <div class="modal-xl">
            <div class="modal-content">
                <confirm-modal
                    [title]="localeData?.email?.remove_account_title"
                    [body]="localeData?.email?.remove_account_message"
                    (cancelCallBack)="removeGmailIntegrationDialogRef?.close()"
                    (successCallBack)="removeGmailAccount(); removeGmailIntegrationDialogRef?.close()"
                >
                </confirm-modal>
            </div>
        </div>
    </ng-template>

    <ng-template #createNewAccountModal>
        <div class="account-modal">
            <div class="modal-content">
                <icici-account-create-edit
                    [commonLocaleData]="commonLocaleData"
                    (getAllBankAccounts)="getAllBankAccounts()"
                    (closeModalEvent)="createNewAccountDialogRef?.close()"
                >
                </icici-account-create-edit>
            </div>
        </div>
    </ng-template>

    <ng-template #editAccountModal>
        <div class="account-modal">
            <div class="modal-content">
                <icici-account-create-edit
                    [commonLocaleData]="commonLocaleData"
                    [activeBankAccount]="activeBankAccount"
                    (getAllBankAccounts)="getAllBankAccounts()"
                    (closeModalEvent)="editAccountModalRef?.close()"
                    [isIciciBankSupportedCountry]="isIciciBankSupportedCountry"
                >
                </icici-account-create-edit>
            </div>
        </div>
    </ng-template>

    <ng-template #createNewAccountUserModal>
        <div class="user-modal">
            <div class="modal-content">
                <icici-payor-account-create-edit
                    [commonLocaleData]="commonLocaleData"
                    [activeBankAccount]="activeBankAccount"
                    (getAllBankAccounts)="getAllBankAccounts()"
                    (closeModalEvent)="createNewAccountUserModalRef?.close()"
                ></icici-payor-account-create-edit>
            </div>
        </div>
    </ng-template>

    <ng-template #editAccountUserModal>
        <div class="user-modal">
            <div class="modal-content">
                <icici-payor-account-create-edit
                    [commonLocaleData]="commonLocaleData"
                    [activeBankAccount]="activeBankAccount"
                    [activePayorAccount]="activePayorAccount"
                    (getAllBankAccounts)="getAllBankAccounts()"
                    (closeModalEvent)="editAccountUserModalRef?.close()"
                >
                </icici-payor-account-create-edit>
            </div>
        </div>
    </ng-template>

    <ng-template #confirmationModal>
        <div class="modal-md">
            <div class="modal-content">
                <confirm-modal
                    [body]="localeData?.payment?.delete_login | replace : '[LOGIN_ID]' : activeBankAccount?.loginId"
                    (cancelCallBack)="confirmationModalRef?.close()"
                    (successCallBack)="deleteBankAccountLogin(true)"
                >
                </confirm-modal>
            </div>
        </div>
    </ng-template>
</ng-container>
