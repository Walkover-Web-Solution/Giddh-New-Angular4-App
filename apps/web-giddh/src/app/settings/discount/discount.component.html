<div class="box clearfix">
	<div class="row">
		<h1 class="section-head pt-0 col-sm-12">Create Discount</h1>
	</div>

	<form #discountForm="ngForm" novalidate (submit)="submit()" class="discount-form-setting-tab">
		<div class="row">
			<div class="form-group col-xl-2 col-md-6 col-xs-12">
				<div class="discount-type">
                    <label class="d-block">&nbsp;</label>
						<sh-select [options]="discountTypeList" [isFilterEnabled]="false" name="type"
							[(ngModel)]="createRequest.type" [placeholder]="'Select Discount Type'" [ItemHeight]="33"></sh-select>
				</div>
            </div>
            <div class="form-group col-xl-2 col-md-6 col-xs-12" *ngIf="createRequest.type">
                <label>Name</label>
                <input type="text" [(ngModel)]="createRequest.name" name="name" placeholder="Name" class="form-control" />
            </div>

            <div class="form-group col-xl-2 col-md-6 col-xs-12" *ngIf="createRequest.type">
                <label>Value</label>
                <input type="text" [(ngModel)]="createRequest.discountValue" name="value" placeholder="Value"
                    class="form-control" />
            </div>

            <div class="form-group col-xl-2 col-md-6 col-xs-12" *ngIf="createRequest.type">
                <label>Linked Accounts</label>
                <sh-select [isFilterEnabled]="true" [notFoundLink]="true" name="account"
                    [(ngModel)]="createRequest.accountUniqueName" [placeholder]="'Select Discount'"
                    [showNotFoundLinkAsDefault]="true" [options]="accounts" [ItemHeight]="'max-content'"
                    (noResultsClicked)="toggleAccountAsidePane($event)" class="select-linked-accounts">
                </sh-select>
            </div>

            <div class="col-xl-2 col-md-6 col-xs-12 form-group hide-lable-on-mobile" *ngIf="createRequest.type">
                <label class="d-block">&nbsp;</label>
                <button type="submit" class="btn btn-success" *ngIf="!(createRequest.discountUniqueName)"
                    [ladda]="isDiscountCreateInProcess$ | async">Add
                </button>
                <button type="submit" class="btn btn-success" *ngIf="createRequest.discountUniqueName"
                    [ladda]="isDiscountUpdateInProcess$ | async">Update
                </button>
            </div>

		</div>
	</form>

	<div>
		<div class="row">

			<div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">

				<table class="table table-bordered basic mr-b05 on-mobile-view">

					<thead>
						<tr>
							<th [style.width.px]="'50'">#</th>
							<th>Name</th>
							<th class="">Action</th>
						</tr>
					</thead>

					<tbody *ngIf="!(isDiscountListInProcess$ | async)">
						<tr *ngFor="let discount of discountList$ | async; let i = index">
							<td data-title="#">{{ i + 1 }}</td>
							<td data-title="Name"> {{ discount.name }}</td>
							<td data-title="Action" class="icon-btn">
								<span (click)="edit(discount)" class="btn btn-xs">
									<i class="icon-edit-pencil"></i>
								</span>
								<span (click)="showDeleteDiscountModal(discount.uniqueName)" class="btn btn-xs">
									<i class="fa fa-trash"></i>
								</span>
							</td>
						</tr>
					</tbody>

					<tbody *ngIf="!(isDiscountListInProcess$ | async) && !(discountList$ | async).length" class="on-mobile-view no-records">
						<tr>
							<td colspan="3" class="text-center empty-table">
								<h1>No Discount Found !!</h1>
							</td>
						</tr>
					</tbody>

                    <tbody *ngIf="(isDiscountListInProcess$ | async)">
						<tr>
							<td colspan="3" class="text-center empty-table">
								<giddh-page-loader [cssClass]="'mt-0 mb-0'"></giddh-page-loader>
							</td>
						</tr>
                    </tbody>
                    
				</table>

			</div>

		</div>
	</div>

</div>

<!-- open account aside -->
<div class="aside-overlay" *ngIf="accountAsideMenuState === 'in'"></div>
<aside-menu-account *ngIf="accountAsideMenuState === 'in'" [class]="accountAsideMenuState"
	[@slideInOut]="accountAsideMenuState" (closeAsideEvent)="toggleAccountAsidePane($event)"
	[activeGroupUniqueName]="'discount'"></aside-menu-account>


<!--delete discount confirmation model -->
<div bsModal #discountConfirmationModel="bs-modal" class="modal fade" role="dialog">
	<div class="modal-dialog modal-md">
		<!-- modal-liq-90 class is removed for now-->
		<div class="modal-content">
			<confirm-modal [body]="'Do You Really Want to Delete This Discount'" (successCallBack)="delete()"
				(cancelCallBack)="hideDeleteDiscountModal()"></confirm-modal>
			<!--<delete-tax-confirmation-model [message]="confirmationMessage" (userConfirmationEvent)="userConfirmation($event)"></delete-tax-confirmation-model>-->
		</div>
	</div>
</div>
