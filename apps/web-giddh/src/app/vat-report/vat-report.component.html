<section appTranslate [file]="'vat-report'" (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event">
    <nav class="navbar">
        <div class="relative w-100">
            <hamburger-menu></hamburger-menu>
            <div class="help-support-aside setting-sidebar-wrapper gst-sidebar-wrapper"
                *ngIf="asideGstSidebarMenuState === 'in'">
                <tax-sidebar (navigateEvent)="handleNavigation()"
                    (clickOutside)="isMobileScreen ? (asideGstSidebarMenuState = 'out') : ''"
                    [exclude]="'#primary-new-header'" class="gst-sidebar"></tax-sidebar>
            </div>
            <div class="invoice-control w-100">
                <div class="row mr-0 ml-0">
                    <div class="vat-report w-100 pd-l15 pd-r15" id="setting-tab">
                        <div class="row mb-3 mt-3 vat-report-action-wrapper">
                            <div class="col-lg-12">
                                <div class="advance-search-by-date date-advance-search justify-content-center row-gap">
                                    <dropdown-field [options]="financialYears"
                                        (selectedOption)="getYearStartAndEndDate($event)"
                                        [placeholder]="localeData?.select_year_label"
                                        [defaultValue]="selectedYear"></dropdown-field>

                                    <dropdown-field [options]="months" *ngIf="year && selectedYear"
                                        (selectedOption)="getMonthStartAndEndDate($event)"
                                        [placeholder]="localeData?.select_month_label"
                                        [defaultValue]="selectedMonth?.label"></dropdown-field>
                                    <div>
                                        <div class="input-group custom-datepicker custom-new-datepicker"
                                            (click)="showGiddhDatepicker($event)">
                                            <input type="text" name="selectedDateRange"
                                                [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                                class="giddh-datepicker date-range-picker border-radius-2" />
                                        </div>
                                    </div>
                                    <div *ngIf="
                                            currentCompanyBranches?.length > 2 && currentOrganizationType === 'COMPANY'
                                        " class="input-width">
                                        <dropdown-field [label]="commonLocaleData?.app_entity"
                                            [options]="currentCompanyBranches" width="100%" (selectedOption)="
                                                currentBranch.uniqueName = $event.value; handleBranchChange($event)
                                            " [placeholder]="localeData?.select_entity"></dropdown-field>
                                    </div>
                                    <div *ngIf="taxes?.length > 1" class="input-width">
                                        <dropdown-field [label]="isKenyaCompany || isZimbabweCompany ? commonLocaleData?.app_vat : commonLocaleData?.app_trn" [options]="taxes"
                                            (selectedOption)="getVatReport($event)"
                                            [placeholder]="commonLocaleData?.select_trn"
                                            [defaultValue]="taxes[0]?.label"
                                            [required]="true"
                                            >
                                        </dropdown-field>
                                    </div>

                                    <div class="ml-auto d-flex justify-content-center column-gap1 align-items-center">
                                        <div *ngIf="isZimbabweCompany" class="currency-width">
                                            <dropdown-field [label]="commonLocaleData?.app_currency"
                                                [options]="vatReportCurrencyList"
                                                (selectedOption)="onCurrencyChange($event)"
                                                [placeholder]="commonLocaleData?.app_select"
                                                [defaultValue]="vatReportCurrencyCode"
                                                [required]="true"></dropdown-field>
                                        </div>
                                        <div *ngIf="taxNumber && (isZimbabweCompany || isKenyaCompany)"
                                            class="export-btn w100">
                                            <button mat-stroked-button color="primary" (click)="downloadVatReport()">
                                                <i class="icon-download1"></i>
                                                {{ commonLocaleData?.app_export }}
                                            </button>
                                        </div>
                                        <a mat-stroked-button color="primary" class="text-right" *ngIf="isUKCompany"
                                            [href]="connectToHMRCUrl" [disabled]="!connectToHMRCUrl">
                                            <ng-container *ngIf="connectToHMRCUrl">
                                                {{ localeData?.connect_to_hmrc }}
                                            </ng-container>
                                            <ng-container *ngIf="!connectToHMRCUrl">
                                                {{ localeData?.connected_to_hmrc }}
                                            </ng-container>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                   
                        <ng-container *ngIf="!isUKCompany && !isZimbabweCompany && !isLoading">
                            <div *ngFor="let report of vatReport; let i = index" class="pd-l15 pd-r15">
                                <div class="white-box" *ngIf="i < 2">
                                    <p>
                                        <strong class="table-heading">{{ report.section }}</strong>
                                    </p>
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="report.sections" [ngClass]="{'hide-last-row bordered-table': isKenyaCompany}"
                                            class="table basic mr-t2 on-mobile-view vat-report-table">
                                            <ng-container matColumnDef="number">
                                                <th mat-header-cell *matHeaderCellDef>
                                                    <ng-container *ngIf="isKenyaCompany"> {{ localeData?.box }}</ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" width="5%">
                                                    {{ element?.section }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef>
                                                    <ng-container *ngIf="isKenyaCompany">
                                                        {{ vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                            1]?.section }}
                                                    </ng-container>
                                                </td>
                                            </ng-container>
                                            <ng-container [matColumnDef]="!isKenyaCompany ? 'name' : 'description'">
                                                <th mat-header-cell *matHeaderCellDef>
                                                    <ng-container *ngIf="isKenyaCompany && i === 0">{{ localeData?.detailsOfSales }}</ng-container>
                                                    <ng-container *ngIf="isKenyaCompany && i === 1">{{ localeData?.detailsOfPurchases }}</ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" [attr.width]="isKenyaCompany ? null : '40%'">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        <a href="javascript:;"
                                                            (click)="viewVatReportTransactions(element.section)">{{
                                                            element.description }}
                                                        </a>
                                                        <a href="javascript:void(0)" class="text-light invoice-preview ml-1"
                                                            [matTooltip]="element.toolTip" [matTooltipPosition]="'above'">
                                                            <span class="icon-info text-light"></span>
                                                        </a>
                                                    </ng-container>
                                                    <ng-container *ngIf="isKenyaCompany">
                                                        {{ element?.description }}
                                                    </ng-container>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold">
                                                    <ng-container *ngIf="isKenyaCompany">
                                                        {{ vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                            1]?.description }}
                                                    </ng-container>
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        {{ commonLocaleData?.app_total }}
                                                     </ng-container>
                                                </td>
                                            </ng-container>
                                            <ng-container [matColumnDef]="!isKenyaCompany ? 'aed_amt' : 'amount'">
                                                <th mat-header-cell *matHeaderCellDef class="text-right">
                                                    <ng-container *ngIf="isKenyaCompany">
                                                        {{ localeData?.amountExclVat }}
                                                    </ng-container>
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        {{ commonLocaleData?.app_amount }}
                                                        ({{ activeCompany?.baseCurrency }})
                                                    </ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right" [attr.width]="isKenyaCompany ? '12%' : '15%'">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                      <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.amount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-container>
                                                    <ng-container *ngIf="isKenyaCompany && element?.totalAmount !== undefined">
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.totalAmount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-container>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef
                                                    class="text-right font-weight-bold">
                                                    
                                                    <ng-conatiner *ngIf="!isKenyaCompany">
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="report.totalAmount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                        </ng-conatiner>
                                                        <ng-conatiner *ngIf="isKenyaCompany && vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.totalAmount !== undefined">
                                                            <amount-field
                                                                class="d-inline-block"
                                                                [amount]="vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                                1]?.totalAmount"
                                                                [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                                [currencyCode]="false"
                                                            ></amount-field>
                                                        </ng-conatiner>
                                                </td>
                                            </ng-container>
                                            <ng-container [matColumnDef]="!isKenyaCompany ? 'vat_amt' : 'rate'">
                                                <th mat-header-cell *matHeaderCellDef class="text-right">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        {{ localeData?.vat_amount }}
                                                        ({{ activeCompany?.baseCurrency }})
                                                        </ng-container>
                                                        <ng-container *ngIf="isKenyaCompany">
                                                            {{ commonLocaleData?.app_rate }}
                                                        </ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right" [attr.width]="isKenyaCompany ? '5%' : '15%'" [ngClass]="{'bg-grey': isKenyaCompany && vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                2]?.section === element?.section}">
                                                    <ng-conatiner *ngIf="!isKenyaCompany">
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.vatAmount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-conatiner>
                                                    <ng-conatiner *ngIf="isKenyaCompany && vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                    2]?.section !== element?.section">
                                                        {{ element?.rate }}
                                                    </ng-conatiner>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef
                                                    class="text-right font-weight-bold">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        <span *ngIf="i === 0">{{ localeData?.a }}</span>
                                                        <span *ngIf="i === 1">{{ localeData?.c }}</span>
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="report.totalVatAmount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-container>
                                                </td>
                                            </ng-container>
                                            <ng-container [matColumnDef]="!isKenyaCompany ? 'adjustment' : 'ot-amount'">
                                                <th mat-header-cell *matHeaderCellDef class="text-right">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        {{ localeData?.adjustment }}
                                                        ({{ activeCompany?.baseCurrency }})
                                                    </ng-container>
                                                    <ng-container *ngIf="isKenyaCompany">
                                                    <ng-container *ngIf="i === 0">{{ localeData?.amountOfOutputTax }}</ng-container>
                                                    <ng-container *ngIf="i === 1">{{ localeData?.amountOfInputTax }}</ng-container>
                                                        
                                                    </ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right" [attr.width]="isKenyaCompany ? '15%' : '20%'" [ngClass]="{'bg-grey': isKenyaCompany && vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                2]?.section === element?.section}">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.adjustmentAmount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-container>
                                                    <ng-container *ngIf="isKenyaCompany && vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                    2]?.section !== element?.section && element?.totalAmountOfOutputTax">
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.totalAmountOfOutputTax"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-container>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef
                                                    class="text-right font-weight-bold">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        <span *ngIf="i === 0">{{ localeData?.b }}</span><span
                                                            *ngIf="i === 1">{{ localeData?.d }}</span>
                                                            <amount-field
                                                                class="d-inline-block"
                                                                [amount]="report.totalAdjustmentAmount"
                                                                [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                                [currencyCode]="false"
                                                            ></amount-field>
                                                        </ng-container>
                                                        <ng-container *ngIf="isKenyaCompany">
                                                            <amount-field
                                                                 class="d-inline-block"
                                                                 [amount]="vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                                 1]?.totalAmountOfOutputTax"
                                                                 [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                                 [currencyCode]="false"
                                                             ></amount-field>
                                                        </ng-container>
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="isKenyaCompany? kenyaDisplayedColumns :  displayedColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns: isKenyaCompany? kenyaDisplayedColumns :  displayedColumns"></tr>
                                            <tr mat-footer-row *matFooterRowDef="isKenyaCompany? kenyaDisplayedColumns :  displayedColumns"></tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="white-box" *ngIf="i == 2">
                                    <p>
                                        <strong class="table-heading">{{ report.section }}</strong>
                                    </p>
                                    <div class="table-responsive">
                                         <table mat-table [dataSource]="report.sections" [ngClass]="{'hide-last-row bordered-table': isKenyaCompany, 'table-hide-title': !isKenyaCompany}" class="
                                                table
                                                vat-report-table
                                                table-hide-title
                                                basic
                                                table-border-bottom
                                                mr-t2
                                                on-mobile-view
                                            ">
                                            <ng-container matColumnDef="number">
                                                <th mat-header-cell *matHeaderCellDef width="5%">
                                                    <ng-container *ngIf="isKenyaCompany">{{ localeData?.box }}</ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" width="5%">{{ element.section }}</td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold" width="5%">
                                                    {{ vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.section }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="description">
                                                <th mat-header-cell *matHeaderCellDef> 
                                                    <ng-container *ngIf="isKenyaCompany">{{ commonLocaleData?.app_description }}</ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element">{{ element.description }}</td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold">
                                                    {{ vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.description }}
                                                </td>
                                            </ng-container>
                                            <ng-container [matColumnDef]="!isKenyaCompany ? 'tooltip' : 'vat-amount'">
                                                <th mat-header-cell *matHeaderCellDef class="text-right">
                                                    <ng-container *ngIf="isKenyaCompany">{{ localeData?.vat_amount }}</ng-container>
                                                </th>
                                                <td mat-cell *matCellDef="let element" [attr.width]="isKenyaCompany ? '15%' : null" class="text-right">
                                                    <ng-container *ngIf="!isKenyaCompany">
                                                        <span class="pr-1">{{ element.toolTip }}</span>
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.amount"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                            ></amount-field>
                                                    </ng-container>
                                                    <ng-container *ngIf="isKenyaCompany">
                                                        <amount-field
                                                            class="d-inline-block"
                                                            [amount]="element?.totalAmountOfOutputTax"
                                                            [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                            [currencyCode]="false"
                                                        ></amount-field>
                                                    </ng-container>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="text-right font-weight-bold">
                                                    <amount-field
                                                        class="d-inline-block"
                                                        [amount]="vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.totalAmountOfOutputTax ?? 0"
                                                        [currencySymbol]="activeCompany?.baseCurrencySymbol"
                                                        [currencyCode]="false"
                                                    ></amount-field>
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="isKenyaCompany ? kenyaDisplayedColumnsForLastSection : uaeDisplayedColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns: isKenyaCompany?  kenyaDisplayedColumnsForLastSection : uaeDisplayedColumns"></tr>
                                            <ng-container *ngIf="isKenyaCompany">
                                                <tr mat-footer-row *matFooterRowDef="kenyaDisplayedColumnsForLastSection"></tr>
                                            </ng-container>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="!isTaxApiInProgress && !vatReport?.length && !taxes?.length"
                                class="no-data no-report">
                                <h1>{{ isKenyaCompany ? localeData?.no_vat_available : localeData?.no_trn_available }}</h1>
                            </div>
                        </ng-container>
                        <!-- uk-vrn-report -->
                        <ng-container *ngIf="isUKCompany && !isLoading">
                            <div *ngFor="let report of vatReport; let i = index" class="pd-l15 pd-r15">
                                <div class="white-box" *ngIf="i < 2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <p>
                                            <strong class="table-heading">{{ report.section }}</strong>
                                        </p>
                                        <p class="inner-table-heading">
                                            {{ commonLocaleData?.app_amount }}
                                            ({{ activeCompany?.baseCurrency }})
                                        </p>
                                    </div>
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="report.sections"
                                            class="table basic mr-t2 on-mobile-view vat-report-table">
                                            <ng-container matColumnDef="number">
                                                <td mat-cell *matCellDef="let element" width="5%">
                                                    {{ localeData?.box }} {{ element.order }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="name">
                                                <td mat-cell *matCellDef="let element" width="45%">
                                                    {{ element.description }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="aed_amt">
                                                <td mat-cell *matCellDef="let element" class="text-right" width="20%">
                                                    {{ activeCompany?.baseCurrencySymbol }}
                                                    {{ element?.amount | giddhCurrency }}
                                                </td>
                                            </ng-container>
                                            <tr mat-row *matRowDef="let row; columns: ukDisplayedColumns"></tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="white-box" *ngIf="i == 2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <p>
                                            <strong class="table-heading">{{ report.section }}</strong>
                                        </p>
                                        <p class="inner-table-heading">
                                            {{ commonLocaleData?.app_amount }}
                                            ({{ activeCompany?.baseCurrency }})
                                        </p>
                                    </div>
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="report.sections" class="
                                                table-hide-title table
                                                basic
                                                table-border-bottom
                                                mr-t2
                                                on-mobile-view
                                                table-border-top
                                            ">
                                            <ng-container matColumnDef="number">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let element">
                                                    {{ localeData?.box }} {{ element.order }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="name">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let element">{{ element.description }}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="aed_amt">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let element" class="text-right">
                                                    <span class="pr-1">{{ element.toolTip }}</span>
                                                    <strong>{{ activeCompany?.baseCurrencySymbol }}
                                                        {{ element?.amount | giddhCurrency }}</strong>
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="ukDisplayedColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns: ukDisplayedColumns"></tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="!isTaxApiInProgress && !vatReport?.length && !taxes?.length"
                                class="no-data no-report">
                                <h1>{{ localeData?.no_vrn_available }}</h1>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="isZimbabweCompany && !isLoading">
                            <div *ngFor="let report of vatReport; let i = index" class="pd-l15 pd-r15">
                                <div class="white-box" *ngIf="i < 2">
                                    <p class="table-heading">{{ report.section }}</p>
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="report.sections"
                                            class="table basic mr-t2 on-mobile-view vat-report-table zimbabwe-vat-report-table hide-last-row bordered-table">
                                            <ng-container matColumnDef="name">
                                                <th class="d-none" mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let element" [attr.colspan]="(i === 1 && element?.order === 9) ? 6 : 1"
                                                    [ngClass]="{'bg-grey font-weight-bold':(i === 0 && element?.order === 8) || (i === 1 && element?.order === 9)}">
                                                    <span>{{ element?.description }}</span>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold">
                                                        {{ vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.description }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="mat-code">
                                                <th width="10%" mat-header-cell *matHeaderCellDef>
                                                    <p class="inner-table-heading text-center">
                                                        {{ localeData?.mat_code }}
                                                    </p>
                                                </th>
                                                <td width="10%" mat-cell *matCellDef="let element" class="text-center" [ngClass]="{'bg-grey font-weight-bold':(i === 0 && element?.order === 8),'d-none': (i === 1 && element?.order === 9) }"
                                                    [attr.colspan]="(i === 0 && element?.order === 8) ? 5 : 1">
                                                    <ng-container *ngIf="!((i === 0 && element?.order === 8) || (i === 1 && element?.order === 9))">
                                                        {{ element?.matCode }}
                                                    </ng-container>
                                                    <ng-container *ngIf="(i === 0 && element?.order === 8) || (i === 1 && element?.order === 9)">
                                                        {{ element?.value }}
                                                    </ng-container>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef colspan="3" class="text-right font-weight-bold">
                                                    <span *ngIf="i === 0">
                                                        (A)
                                                    </span>
                                                    <span *ngIf="i === 1">
                                                        (B)
                                                    </span>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="vos-amount">
                                                <th mat-header-cell *matHeaderCellDef>
                                                    <p class="inner-table-heading text-right font-weight-bold">
                                                        {{ vatReportCurrencyMap[0] }}
                                                    </p>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right"
                                                    [ngClass]="{'d-none': (i === 0 && element?.order === 8) || (i === 1 && element?.order === 9)}">
                                                    {{ vatReportCurrencySymbol + element?.valueOfSupply?.amount }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="d-none"></td>
                                            </ng-container>
                                            <ng-container matColumnDef="vos-decimal">
                                                <th mat-header-cell *matHeaderCellDef>
                                                    <p class="inner-table-heading text-right font-weight-bold">
                                                        {{ vatReportCurrencyMap[1] }}
                                                    </p>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right"
                                                    [ngClass]="{'d-none': (i === 0 && element?.order === 8) || (i === 1 && element?.order === 9)}">
                                                    {{ vatReportCurrencySymbol + element?.valueOfSupply?.decimal }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="d-none"></td>
                                            </ng-container>
                                            <ng-container matColumnDef="ot-amount">
                                                <th mat-header-cell *matHeaderCellDef>
                                                    <p class="inner-table-heading text-right font-weight-bold">
                                                        {{ vatReportCurrencyMap[0] }}
                                                    </p>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right"
                                                    [ngClass]="{'d-none': (i === 0 && element?.order === 8) || (i === 1 && element?.order === 9)}">
                                                    {{ vatReportCurrencySymbol + element?.outputTax?.amount }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="text-right font-weight-bold">
                                                    <ng-container *ngIf="i === 0">
                                                        {{ vatReportCurrencySymbol + vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.totalAmount?.amount }}
                                                    </ng-container>
                                                    <ng-container *ngIf="i === 1">
                                                        {{ vatReportCurrencySymbol + vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.totalAmount?.amount }}
                                                    </ng-container>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="ot-decimal">
                                                <th mat-header-cell *matHeaderCellDef>
                                                    <p class="inner-table-heading text-right font-weight-bold">
                                                        {{ vatReportCurrencyMap[1] }}
                                                    </p>
                                                </th>
                                                <td mat-cell *matCellDef="let element" class="text-right"
                                                    [ngClass]="{'d-none': (i === 0 && element?.order === 8) || (i === 1 && element?.order === 9)}">
                                                    {{ vatReportCurrencySymbol + element?.outputTax?.decimal }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="text-right font-weight-bold">
                                                    <ng-container *ngIf="i === 0">
                                                        {{ vatReportCurrencySymbol + vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.totalAmount?.decimal }}
                                                    </ng-container>
                                                    <ng-container *ngIf="i === 1">
                                                        {{ vatReportCurrencySymbol + vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                        1]?.totalAmount?.decimal }}
                                                    </ng-container>
                                                </td>
                                            </ng-container>

                                            <!-- Header row 1 column 1 -->
                                            <ng-container matColumnDef="section">
                                                <th width="50%" mat-header-cell *matHeaderCellDef rowspan="2"></th>
                                            </ng-container>
                                            <!-- Header row 1 column 2 -->
                                            <ng-container matColumnDef="office-use">
                                                <th mat-header-cell *matHeaderCellDef> {{ localeData?.for_office_use }} </th>
                                            </ng-container>
                                            <!-- Header row 1 column 3-4 -->
                                            <ng-container matColumnDef="value-of-supply">
                                                <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" class="font-weight-bold"> {{ localeData?.value_of_supply }} </th>
                                            </ng-container>
                                            <!-- Header row 1 column 5-6 -->
                                            <ng-container matColumnDef="output-tax">
                                                <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" class="font-weight-bold">{{ localeData?.output_tax }}</th>
                                            </ng-container>
                                            
                                            <!-- For Header row 1 -->
                                            <tr mat-header-row *matHeaderRowDef="zwDisplayedHeaderColumns"></tr>
                                            <!-- For Header row 2 -->
                                            <tr mat-header-row *matHeaderRowDef="zwDisplayedColumns"></tr>
                                            <!-- For Tbody row -->
                                            <tr mat-row *matRowDef="let row; columns: zwDisplayedColumns"></tr>
                                            <!-- For Tfoot row -->
                                            <tr mat-footer-row *matFooterRowDef="zwDisplayedColumns"></tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="white-box" *ngIf="i == 2">
                                    <p class="table-heading">{{ report.section }}</p>
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="report.sections"
                                            class="table basic mr-t2 on-mobile-view vat-report-table zimbabwe-vat-report-table hide-last-row bordered-table">
                                            <ng-container matColumnDef="name">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let element">
                                                    <span [ngClass]="{'font-weight-bold': showTotalOutputTaxIn?.includes(element?.order)}">{{
                                                        element.description }}</span>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold">
                                                    {{ vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                    1]?.description }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="amount">
                                                <th mat-header-cell *matHeaderCellDef class="text-right font-weight-bold">{{ vatReportCurrencyMap[0] }}</th>
                                                <td mat-cell *matCellDef="let element" class="text-right">
                                                    {{ vatReportCurrencySymbol + element?.totalAmount?.amount }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold text-right">
                                                    {{ vatReportCurrencySymbol + vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                    1]?.totalAmount?.amount }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="decimal">
                                                <th mat-header-cell *matHeaderCellDef class="text-right font-weight-bold">{{ vatReportCurrencyMap[1] }}</th>
                                                <td mat-cell *matCellDef="let element" class="text-right">
                                                    {{ vatReportCurrencySymbol + element?.totalAmount?.decimal }}
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef class="font-weight-bold text-right">
                                                    {{ vatReportCurrencySymbol + vatReport[i]?.sections[vatReport[i]?.sections?.length -
                                                    1]?.totalAmount?.decimal }}
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="zwDisplayedColumnsForLastSection"></tr>
                                            <tr mat-row *matRowDef="let row; columns: zwDisplayedColumnsForLastSection"></tr>
                                            <tr mat-footer-row *matFooterRowDef="zwDisplayedColumnsForLastSection"></tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="!isTaxApiInProgress && !vatReport?.length && !taxes?.length"
                                class="no-data no-report">
                                <h1>{{ localeData?.no_vat_available }}</h1>
                            </div>
                        </ng-container>
                        <div *ngIf="isLoading">
                            <giddh-page-loader></giddh-page-loader>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</section>

<ng-template #datepickerTemplate>
    <div class="datepicker-modal">
        <div class="modal-body">
            <app-datepicker-wrapper [inputStartDate]="selectedDateRange?.startDate"
                [inputEndDate]="selectedDateRange?.endDate" [alwaysShowCalendars]="true" [ranges]="datePickerOption"
                [selectedRangeLabel]="selectedRangeLabel" [showCustomRangeLabel]="true" [showClearButton]="false"
                [showCancel]="true" [linkedCalendars]="true" [showDropdowns]="true"
                (rangeClicked)="dateSelectedCallback($event)" (datesUpdated)="dateSelectedCallback($event)"
                [keepCalendarOpeningWithRange]="false" [showRangeLabelOnInput]="false"
                [dateFieldPosition]="dateFieldPosition"></app-datepicker-wrapper>
        </div>
    </div>
</ng-template>