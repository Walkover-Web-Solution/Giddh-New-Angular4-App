<div class="container-fluid" *ngIf="!isPettyCashRejectedReportLoading">
    <div class="table-responsive">
        <table
            mat-table
            class="w-100 mat-mobile-view"
            [dataSource]="rejectedItems"
            matSort
            (matSortChange)="sortChange($event)"
            [matSortActive]="pettycashRequest.sortBy"
            [matSortDirection]="pettycashRequest.sort"
        >
            <ng-container matColumnDef="s_no">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef>#</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">#</span>
                    {{ rejected.index + 1 }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="entry_date">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef mat-sort-header>{{
                    commonLocaleData?.app_date
                }}</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{
                        commonLocaleData?.app_date
                    }}</span>
                    {{ rejected.entryDate }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="submitted_by">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef
                    >{{ localeData?.submitted_by }}
                </mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{
                        localeData?.submitted_by
                    }}</span>
                    {{ rejected.createdBy.name }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="account">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef>{{
                    commonLocaleData?.app_account
                }}</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{
                        commonLocaleData?.app_account
                    }}</span>
                    <i class="dot-icon dot-warning" *ngIf="rejected.entryType === 'sales'"></i>
                    <i class="dot-icon dot-success" *ngIf="rejected.entryType === 'deposit'"></i>
                    <i class="dot-icon dot-primary" *ngIf="rejected.entryType === 'expense'"></i
                    >{{ rejected.particularAccount.name }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="amount">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef mat-sort-header>{{
                    commonLocaleData?.app_amount
                }}</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{
                        commonLocaleData?.app_amount
                    }}</span>
                    {{ rejected.currencySymbol }}
                    {{ rejected.amount | giddhCurrency }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="receipt">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef>{{
                    localeData?.payment_receipt
                }}</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{
                        localeData?.payment_receipt
                    }}</span>
                    <span *ngIf="rejected.baseAccountCategory === 'OTHER'" class="font-12 text-gray mr-r05">{{
                        commonLocaleData?.app_ac
                    }}</span>
                    <span
                        *ngIf="rejected.baseAccountCategory === 'BANK'"
                        class="font-12 text-gray icon-atm-card mr-r05"
                    ></span>
                    <span
                        *ngIf="rejected.baseAccountCategory === 'CASH'"
                        class="font-12 text-gray icon-cash mr-r05"
                    ></span>
                    {{ rejected.baseAccount.name ? rejected.baseAccount.name : "-" }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="file">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef
                    >{{ localeData?.file }}
                </mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{ localeData?.file }}</span>
                    <i *ngIf="rejected.fileNames" class="icon-image middle text-gray"></i>
                    {{ rejected.fileNames ? rejected.fileNames : "-" }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="reason_rejection">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef>{{
                    localeData?.reason_of_rejection
                }}</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <span class="responsive-label" [hidden]="!rejectedItems?.length">{{
                        localeData?.reason_of_rejection
                    }}</span>
                    {{ rejected.statusMessage ? rejected.statusMessage : "-" }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="action">
                <mat-header-cell [hidden]="!rejectedItems?.length" *matHeaderCellDef>{{
                    commonLocaleData?.app_action
                }}</mat-header-cell>
                <mat-cell *matCellDef="let rejected">
                    <a (click)="revertActionClicked(rejected)" mat-mini-fab color="primary">
                        <i class="icon-Revert"></i>
                    </a>
                    <a
                        class="mr-l1"
                        (click)="deleteActionClicked(rejected, deleteEntryModal)"
                        mat-mini-fab
                        color="warn"
                    >
                        <i class="icon-trash"></i>
                    </a>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="rejectedTableColumns; sticky: true"></mat-header-row>
            <mat-row *matRowDef="let rejected; columns: rejectedTableColumns"></mat-row>
        </table>
    </div>
</div>

<div *ngIf="pettyCashRejectedReportResponse?.totalItems > 20" class="pagination-wrapper">
    <pagination
        [totalItems]="pettyCashRejectedReportResponse?.totalItems"
        [maxSize]="5"
        class="pagination-sm"
        [boundaryLinks]="true"
        [itemsPerPage]="20"
        [rotate]="false"
        (pageChanged)="pageChanged($event)"
        [firstText]="commonLocaleData?.app_first"
        [previousText]="commonLocaleData?.app_previous"
        [nextText]="commonLocaleData?.app_next"
        [lastText]="commonLocaleData?.app_last"
    ></pagination>
</div>

<div *ngIf="isPettyCashRejectedReportLoading">
    <giddh-page-loader></giddh-page-loader>
</div>

<div class="no-data" *ngIf="!rejectedItems?.length && !isPettyCashRejectedReportLoading">
    <no-data></no-data>
</div>

<ng-template #deleteEntryModal>
    <confirm-modal
        [title]="commonLocaleData?.app_delete"
        [body]="localeData?.delete_transaction"
        (cancelCallBack)="deleteEntryModalRef?.close()"
        (successCallBack)="deleteEntry(); deleteEntryModalRef?.close()"
    >
    </confirm-modal>
</ng-template>
