<ng-container
    appTranslate
    [file]="'accounts'"
    (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event"
    (translationComplete)="translationComplete($event)"
>
    <form name="addAccountForm" class="create-acc-form" [formGroup]="addAccountForm" (ngSubmit)="submit()">
        <div>
            <div class="upper-form">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="ng-select-wrap select-list select-group">
                            <label>{{ localeData?.select_group_label }}<span class="red-text">*</span> </label>
                            <ng-select
                                [placeholder]="localeData?.select_group_label"
                                [filterPlaceholder]="localeData?.select_group_placeholder"
                                (selected)="selectGroup($event)"
                                formControlName="activeGroupUniqueName"
                                [options]="flatGroupsOptions"
                                class="w-100"
                                [enableDynamicSearch]="true"
                                [isPaginationEnabled]="true"
                                (scrollEnd)="handleGroupScrollEnd()"
                                (dynamicSearchedQuery)="onGroupSearchQueryChanged($event)"
                            >
                                <ng-template #optionTemplate let-option="option">
                                    <div class="account-list-item">{{ option?.label }}</div>
                                    <div class="account-list-item font-12">{{ option?.value }}</div>
                                </ng-template>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="form-group">
                            <label for="accountName"
                                >{{ localeData?.account_name }} <sup class="text-danger">*</sup>
                            </label>
                            <input
                                type="text"
                                id="accountName"
                                class="form-control"
                                #autoFocus
                                formControlName="name"
                                name="accountName"
                                [placeholder]="localeData?.account_name"
                            />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group" formGroupName="country">
                            <label>{{ commonLocaleData?.app_country }} <sup class="text-danger">*</sup> </label>
                            <sh-select
                                [options]="countrySource"
                                defaultValue="{{ selectedCountry }}"
                                required
                                [isRequired]="true"
                                [isFilterEnabled]="true"
                                formControlName="countryCode"
                                (selected)="selectCountry($event)"
                                [useInBuiltFilterForIOptionTypeItems]="true"
                            >
                            </sh-select>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>{{ localeData?.currency }}</label>
                            <sh-select
                                [options]="currencySource$ | async"
                                formControlName="currency"
                                [isFilterEnabled]="true"
                            ></sh-select>
                        </div>
                    </div>

                    <div class="form-group col-xs-12 col-sm-4">
                        <label for="numbertel">{{ localeData?.opening_balance }}</label>
                        <div [ngClass]="{ 'input-group': addAccountForm.get('openingBalance')?.value > 0 }">
                            <input
                                type="number"
                                id="numbertel"
                                min="0"
                                class="form-control text-right mr-1"
                                digitsOnlyDirective
                                formControlName="openingBalance"
                                [placeholder]="
                                    commonLocaleData?.app_numbers?.zero +
                                    '' +
                                    commonLocaleData?.app_numbers?.zero +
                                    '.' +
                                    commonLocaleData?.app_numbers?.zero +
                                    '' +
                                    commonLocaleData?.app_numbers?.zero
                                "
                            />
                            <div
                                class="input-group-addon"
                                (click)="openingBalanceTypeChnaged('DEBIT')"
                                [ngClass]="{
                                    'active-toggle-btn':
                                        addAccountForm.get('openingBalanceType')?.value === 'DEBIT' &&
                                        addAccountForm.get('openingBalance')?.value > 0,
                                    'cp': addAccountForm.get('openingBalance')?.value > 0
                                }"
                                *ngIf="addAccountForm.get('openingBalance')?.value > 0"
                            >
                                {{ commonLocaleData?.app_dr?.toUpperCase() }}
                            </div>
                            <div
                                class="input-group-addon"
                                (click)="openingBalanceTypeChnaged('CREDIT')"
                                [ngClass]="{
                                    'active-toggle-btn':
                                        addAccountForm.get('openingBalanceType')?.value === 'CREDIT' &&
                                        addAccountForm.get('openingBalance')?.value > 0,
                                    'cp': addAccountForm.get('openingBalance')?.value > 0
                                }"
                                *ngIf="addAccountForm.get('openingBalance')?.value > 0"
                            >
                                {{ commonLocaleData?.app_cr?.toUpperCase() }}
                            </div>
                        </div>
                    </div>
                    <div
                        class="form-group col-xs-12 col-sm-4"
                        *ngIf="addAccountForm.get('currency')?.value !== companyCurrency"
                    >
                        <div>
                            <label for="accountnumber">{{ localeData?.foreign_opening_balance }}</label>
                            <div [ngClass]="{ 'input-group': addAccountForm.get('foreignOpeningBalance')?.value > 0 }">
                                <input
                                    type="tel"
                                    id="accountnumber"
                                    min="0"
                                    class="form-control text-right mr-1"
                                    formControlName="foreignOpeningBalance"
                                    [placeholder]="
                                        commonLocaleData?.app_numbers?.zero +
                                        '' +
                                        commonLocaleData?.app_numbers?.zero +
                                        '.' +
                                        commonLocaleData?.app_numbers?.zero +
                                        '' +
                                        commonLocaleData?.app_numbers?.zero
                                    "
                                    decimalDigitsDirective
                                />
                                <div
                                    class="input-group-addon"
                                    (click)="openingBalanceTypeChnaged('DEBIT')"
                                    [ngClass]="{
                                        'active-toggle-btn':
                                            addAccountForm.get('openingBalanceType')?.value === 'DEBIT',
                                        'cp': addAccountForm.get('openingBalance')?.value > 0
                                    }"
                                    *ngIf="addAccountForm.get('foreignOpeningBalance')?.value > 0"
                                >
                                    {{ commonLocaleData?.app_dr?.toUpperCase() }}
                                </div>
                                <div
                                    class="input-group-addon"
                                    (click)="openingBalanceTypeChnaged('CREDIT')"
                                    [ngClass]="{
                                        'active-toggle-btn':
                                            addAccountForm.get('openingBalanceType')?.value === 'CREDIT',
                                        'cp': addAccountForm.get('openingBalance')?.value > 0
                                    }"
                                    *ngIf="addAccountForm.get('foreignOpeningBalance')?.value > 0"
                                >
                                    {{ commonLocaleData?.app_cr?.toUpperCase() }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <ng-container *ngIf="isHsnSacEnabledAcc">
                    <div class="row">
                        <div class="col-8 col-sm-8 form-group">
                            <div class="input-group d-flex">
                                <div class="d-flex">
                                    <span class="mr-r15">
                                        <input
                                            type="radio"
                                            class="radio-custom radio-theme"
                                            name="hsnOrSac"
                                            id="hsnCodeType"
                                            formControlName="hsnOrSac"
                                            value="hsn"
                                        />
                                        <label for="hsnCodeType" class="radio-custom-label">{{
                                            commonLocaleData?.app_hsn_code
                                        }}</label>
                                    </span>
                                    <span>
                                        <input
                                            type="radio"
                                            class="radio-custom radio-theme"
                                            name="hsnOrSac"
                                            id="sacCodeType"
                                            formControlName="hsnOrSac"
                                            value="sac"
                                        />
                                        <label for="sacCodeType" class="ml-1 radio-custom-label">{{
                                            commonLocaleData?.app_sac_code
                                        }}</label>
                                    </span>
                                </div>

                                <input
                                    type="text"
                                    class="form-control ml-4 bd-rr"
                                    maxlength="10"
                                    decimalDigitsDirective
                                    formControlName="hsnNumber"
                                    *ngIf="addAccountForm.get('hsnOrSac')?.value === 'hsn'"
                                />
                                <input
                                    type="text"
                                    class="form-control ml-4 bd-rr"
                                    maxlength="10"
                                    formControlName="sacNumber"
                                    decimalDigitsDirective
                                    *ngIf="addAccountForm.get('hsnOrSac')?.value === 'sac'"
                                />
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>

        <tabset #staticTabs class="custom-tabs" id="asidePaneFormTabs">
            <ng-container>
                <tab
                    [heading]="localeData?.tabs?.address"
                    [active]="!isHsnSacEnabledAcc"
                    [disabled]="isHsnSacEnabledAcc"
                    [customClass]="isHsnSacEnabledAcc ? 'd-none' : ''"
                    class="gstin-address"
                >
                    <ng-container>
                        <div class="gstin-form" formArrayName="addresses">
                            <ng-container
                                *ngFor="
                                    let gst of addAccountForm.get('addresses')['controls']
                                        | slice : 0 : gstDetailsLength;
                                    let i = index;
                                    let f = first;
                                    let l = last
                                "
                                [formGroupName]="i"
                            >
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="add-address-default">
                                            <h3>{{ commonLocaleData?.app_address }} {{ i + 1 }}</h3>
                                            <div class="remove-radio-btn">
                                                <span class="pull-left">
                                                    <a
                                                        href="javascript:void(0);"
                                                        *ngIf="!f"
                                                        (click)="removeGstDetailsForm(i)"
                                                        class="btn btn-remove"
                                                    >
                                                        <i class="icon-cross"> </i> {{ commonLocaleData?.app_remove }}
                                                    </a>
                                                </span>
                                                <span
                                                    [tooltip]="localeData?.address_tooltip"
                                                    class="pull-right is-default-address"
                                                    placement="left"
                                                >
                                                    <mat-slide-toggle
                                                        aria-label="address"
                                                        formControlName="isDefault"
                                                        name="defaultGst_{{ i }}"
                                                        color="primary"
                                                        (change)="
                                                            isDefaultAddressSelected(gst.get('isDefault')?.value, i)
                                                        "
                                                    >
                                                    </mat-slide-toggle>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="gstAddr">{{ commonLocaleData?.app_street }}</label>
                                            <textarea
                                                id="gstAddr"
                                                name="gstAddr_{{ i }}"
                                                formControlName="address"
                                                rows="4"
                                                cols="5"
                                                maxlength="120"
                                                class="form-control"
                                            ></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group" *ngIf="(statesSource$ | async)?.length">
                                            <label
                                                >{{ commonLocaleData?.app_state }}
                                                <sup class="text-danger" *ngIf="isStateRequired">*</sup>
                                            </label>
                                            <div>
                                                <sh-select
                                                    #states
                                                    [options]="statesSource$ | async"
                                                    [isFilterEnabled]="true"
                                                    (selected)="selectedState(gst, $event)"
                                                    [forceClearReactive]="forceClear$ | async"
                                                    formControlName="stateCode"
                                                    class="w-100"
                                                    [useInBuiltFilterForIOptionTypeItems]="true"
                                                    [attr.required]="isStateRequired"
                                                    [isRequired]="isStateRequired"
                                                >
                                                </sh-select>
                                            </div>
                                        </div>
                                        <div class="form-group" *ngIf="countyList?.length">
                                            <label
                                                >{{ commonLocaleData?.app_region }}
                                                <sup class="text-danger" *ngIf="isStateRequired">*</sup>
                                            </label>
                                            <div>
                                                <sh-select
                                                    #states
                                                    [options]="countyList"
                                                    [isFilterEnabled]="true"
                                                    (selected)="selectedCounty(gst, $event)"
                                                    [forceClearReactive]="forceClear$ | async"
                                                    formControlName="countyCode"
                                                    class="w-100"
                                                    [useInBuiltFilterForIOptionTypeItems]="true"
                                                    [attr.required]="isStateRequired"
                                                    [isRequired]="isStateRequired"
                                                >
                                                </sh-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4" *ngIf="GSTIN_OR_TRN">
                                        <div class="form-group mr-b05">
                                            <label for="gstinNum" class="d-block"
                                                >{{ formFields["taxName"]?.label }}
                                            </label>
                                            <input
                                                type="text"
                                                id="gstinNum"
                                                class="form-control"
                                                autocomplete="false"
                                                #gstNumberField
                                                (keyup)="getStateCode(gst, states, $event); activeIndex = i"
                                                (blur)="checkGstNumValidation(gstNumberField)"
                                                name="gstNumber"
                                                formControlName="gstNumber"
                                                [placeholder]="taxNamePlaceholder"
                                            />
                                        </div>
                                    </div>
                                    <!-- static code added for the pincode -->
                                    <div class="col-sm-4">
                                        <div class="form-group mr-b05">
                                            <label for="pinCodeNum" class="d-block">{{
                                                commonLocaleData?.app_pin_code
                                            }}</label>
                                            <input
                                                type="number"
                                                id="pinCodeNum"
                                                class="form-control"
                                                formControlName="pincode"
                                                autocomplete="false"
                                                name="pinCodeNum"
                                                [placeholder]="commonLocaleData?.app_enter_pin_code"
                                                decimalDigitsDirective
                                                [preventDecimal]="true"
                                            />
                                        </div>
                                    </div>
                                    <!-- end -->
                                    <ng-container
                                        *ngIf="
                                            companyCountry === 'IN' ||
                                            companyCountry === 'ZW' ||
                                            companyCountry === 'KE'
                                        "
                                    >
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label
                                                    >{{ localeData?.party_type }}<span class="red-text">*</span></label
                                                >
                                                <div class="position-relative">
                                                    <sh-select
                                                        [options]="partyTypeSource"
                                                        formControlName="partyType"
                                                        [isFilterEnabled]="true"
                                                        [isRequired]="true"
                                                    ></sh-select>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- <div
                                            class="col-sm-4"
                                            *ngIf="gst.get('gstNumber').value && (isGstValid$ | async)"
                                        >
                                            <div class="form-group">
                                                <label class="d-block">&nbsp;</label>
                                                <label>
                                                    <input type="checkbox" formControlName="isComposite" /><label
                                                        >&nbsp;
                                                        {{ localeData?.is_composite }}
                                                    </label></label
                                                >
                                            </div>
                                        </div> -->
                                    </ng-container>
                                </div>

                                <div
                                    class="row"
                                    *ngIf="
                                        l &&
                                        addAccountForm.get('addresses')['controls']?.length > 3 &&
                                        !moreGstDetailsVisible
                                    "
                                >
                                    <a
                                        href="javascript:void(0);"
                                        class="text-left col-6 cursor-pointer"
                                        (click)="showMoreGst()"
                                        >{{ commonLocaleData?.app_show_all }} ({{
                                            addAccountForm.get("addresses")["controls"]?.length
                                        }})</a
                                    >
                                    <a
                                        href="javascript:void(0);"
                                        class="text-left col-6 cursor-pointer"
                                        (click)="showLessGst()"
                                        >{{ commonLocaleData?.app_show_less }}
                                    </a>
                                </div>
                                <div class="clearfix" *ngIf="l">
                                    <a
                                        class="text-right btn btn-primary add-address-btn"
                                        href="javascript:void(0);"
                                        (click)="addGstDetailsForm(gst.get('gstNumber')?.value)"
                                    >
                                        <i class="icon-plus"></i> {{ localeData?.add_address }}
                                    </a>
                                </div>
                            </ng-container>
                        </div>
                    </ng-container>
                </tab>
            </ng-container>
            <tab [heading]="localeData?.tabs?.contact" [active]="isHsnSacEnabledAcc" class="contact-form-wrap">
                <div class="contact-form">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="attention">{{ localeData?.attention_to }}</label>
                                <input
                                    type="text"
                                    id="attention"
                                    class="form-control"
                                    formControlName="attentionTo"
                                    name="attention"
                                />
                            </div>
                        </div>
                        <div class="col-sm-6 mobile-number-wrapper">
                            <div class="form-group">
                                <label for="accountDetails">{{ commonLocaleData?.app_mobile_number }}</label>
                                <div class="d-flex">
                                    <input
                                        name="accountDetails.mobileNumber"
                                        id="accountDetails"
                                        type="tel"
                                        #initContactAdd
                                        class="flag-input"
                                        id="init-contact-add"
                                        formControlName="mobileNo"
                                        [placeholder]="localeData?.mobile_no_placeholder"
                                    />
                                </div>
                                <span id="init-contact-add-valid-msg" class="d-none"></span>
                                <span id="init-contact-add-error-msg" class="d-none"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="email">{{ commonLocaleData?.app_email_id }}</label>
                            <input
                                id="email"
                                type="email"
                                class="form-control"
                                formControlName="email"
                                name="emailId"
                            />
                            <span
                                class="error-msg"
                                *ngIf="addAccountForm.get('email').dirty && addAccountForm.get('email').errors"
                                >{{ localeData?.email_id_error }}</span
                            >
                        </div>
                    </div>
                </div>
            </tab>
            <tab
                [heading]="localeData?.tabs?.portal"
                class="contact-form-wrap"
                *ngIf="voucherApiVersion === 2 && isDebtorCreditor"
            >
                <div formArrayName="portalDomain">
                    <div
                        class="row align-items-center"
                        *ngFor="let domain of addAccountForm?.get('portalDomain')['controls']; let i = index"
                        [formGroupName]="i"
                    >
                        <div class="col-xl-3 col-lg-5 col-md-5 col-sm-6 unit-equal">
                            <div class="form-group portal-height">
                                <label for="name">{{ localeData?.portal_attention_to }} </label>
                                <input
                                    type="text"
                                    id="name"
                                    (input)="portalIndex = i"
                                    class="form-control"
                                    formControlName="name"
                                    name="name_{{ i }}"
                                />
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-3 col-md-3 col-sm-2 pr-0">
                            <div class="form-group portal-height">
                                <label for="emailid"
                                    >{{ commonLocaleData?.app_email_id }} <span class="red-text">*</span></label
                                >
                                <input
                                    type="email"
                                    id="emailid"
                                    class="form-control"
                                    (input)="portalIndex = i"
                                    formControlName="email"
                                    name="email_{{ i }}"
                                />
                                <span
                                    class="error-msg"
                                    *ngIf="
                                        domain.get('email').dirty &&
                                        (domain.get('email').hasError('required') || domain.get('email').invalid) &&
                                        !domain.get('email').hasError('duplicate')
                                    "
                                    id="emailError_{{ i }}"
                                    >{{ localeData?.email_id_error }}
                                </span>
                                <span
                                    class="error-msg"
                                    *ngIf="domain.get('email').hasError('duplicate') && i === lastDuplicateEmailIndex"
                                    id="emailValidationError_{{ i }}"
                                    >{{ localeData?.duplicate_email }}
                                </span>
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-3 col-md-3 col-sm-3 pr-0 mobile-number-portal-wrapper">
                            <div class="form-group portal-height">
                                <label for="contact">{{ commonLocaleData?.app_mobile_number }} </label>
                                <div class="d-flex">
                                    <input
                                        id="contact"
                                        name="contactNo_{{ i }}"
                                        (input)="portalIndex = i"
                                        type="tel"
                                        #initContactAdd2
                                        class="flag-input"
                                        id="init-contact-portal_{{ i }}"
                                        formControlName="contactNo"
                                        [placeholder]="localeData?.mobile_no_placeholder"
                                    />
                                </div>
                                <span id="init-contact-portal_{{ i }}-valid-msg" class="d-none"> </span>
                                <span id="init-contact-portal_{{ i }}-error-msg" class="d-none"> </span>
                            </div>
                        </div>
                        <div class="col-xl-1 col-lg-1 col-md-2 col-sm-12 pl-0 remove-user">
                            <div class="inc-dec">
                                <div class="plus-minus w-100">
                                    <button aria-label="delete icon" class="btn mr-0" (click)="removePortalUser(i)">
                                        <i class="icon-trash delete"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <a class="mr-0 add-new" href="javascript:void(0);" (click)="addNewPortalUser()">
                                <i class="icon-plus"></i> {{ localeData?.portal_add_user }}
                            </a>
                        </div>
                    </div>
                </div>
            </tab>
            <!-- bank details visible when sundry credtiors selected , right now is hide -->
            <tab [heading]="localeData?.tabs?.bank_details" class="bank-details-form" *ngIf="showBankDetail">
                <div *ngIf="showBankDetail">
                    <div formArrayName="accountBankDetails">
                        <div
                            class="row"
                            *ngFor="
                                let bank of addAccountForm.get('accountBankDetails')['controls'];
                                let i = index;
                                let f = first;
                                let l = last
                            "
                            [formGroupName]="i"
                        >
                            <div class="form-group col-sm-6" *ngIf="selectedCountryCode === 'AE'">
                                <label for="beneficiaryName">{{ localeData?.beneficiary_name_label }}</label>
                                <input
                                    type="text"
                                    id="beneficiaryName"
                                    class="form-control"
                                    [placeholder]="localeData?.beneficiary_name_placeholder"
                                    name="beneficiaryName_{{ i }}"
                                    formControlName="beneficiaryName"
                                />
                            </div>
                            <div
                                class="form-group"
                                [ngClass]="{
                                    'col-sm-5': selectedCountryCode !== 'AE',
                                    'col-sm-6': selectedCountryCode === 'AE'
                                }"
                            >
                                <label for="bankName">{{ localeData?.bank_name_label }}</label>
                                <input
                                    type="text"
                                    id="bankName"
                                    class="form-control"
                                    [placeholder]="localeData?.bank_name_placeholder"
                                    name="bankName_{{ i }}"
                                    formControlName="bankName"
                                />
                            </div>
                            <div class="form-group col-sm-4" *ngIf="selectedCountryCode === 'AE'">
                                <div>
                                    <label for="branchName">{{ localeData?.branch_name_label }}</label>
                                    <input
                                        type="text"
                                        id="branchName"
                                        class="form-control"
                                        [placeholder]="localeData?.branch_name_placeholder"
                                        name="branchName_{{ i }}"
                                        formControlName="branchName"
                                    />
                                </div>
                            </div>
                            <div class="form-group col-sm-4">
                                <div>
                                    <label *ngIf="selectedCountryCode === 'IN'" for="accountNum">{{
                                        commonLocaleData?.app_account_number
                                    }}</label>
                                    <label *ngIf="selectedCountryCode !== 'IN'" for="accountNum">{{
                                        commonLocaleData?.app_iban
                                    }}</label>
                                    <input
                                        type="text"
                                        id="accountNum"
                                        class="form-control"
                                        [placeholder]="commonLocaleData?.app_account_number_placeholder"
                                        [maxlength]="bankIbanNumberMaxLength"
                                        [minlength]="bankIbanNumberMinLength"
                                        #bankaccount
                                        (blur)="showBankDetailsValidation(bankaccount, 'bankAccountNo')"
                                        (keyup)="bankDetailsValidator(bankaccount, 'bankAccountNo')"
                                        name="accountNum_{{ i }} "
                                        formControlName="bankAccountNo"
                                    />
                                </div>
                            </div>
                            <div class="form-group col-sm-4" *ngIf="selectedCountryCode === 'AE'">
                                <label for="swiftCode">{{ commonLocaleData?.app_swift_code_label }}</label>
                                <input
                                    type="text"
                                    id="swiftCode"
                                    class="form-control"
                                    maxlength="11"
                                    minlength="8"
                                    [placeholder]="commonLocaleData?.app_swift_code_placeholder"
                                    #swiftcode
                                    name="swiftCode_{{ i }}"
                                    (blur)="showBankDetailsValidation(swiftcode, 'swiftCode')"
                                    (keyup)="bankDetailsValidator(swiftcode, 'swiftCode')"
                                    formControlName="swiftCode"
                                />
                            </div>
                            <div *ngIf="selectedCountryCode !== 'AE'" class="form-group col-sm-3">
                                <label for="ifsc">{{ commonLocaleData?.app_ifsc_code_label }}</label>
                                <input
                                    type="text"
                                    id="ifsc"
                                    class="form-control"
                                    [placeholder]="commonLocaleData?.app_ifsc_code_placeholder"
                                    name="ifsc_{{ i }}"
                                    formControlName="ifsc"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </tab>

            <tab [heading]="localeData?.tabs?.others" class="other-form-wrap">
                <div class="other-form">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="accUnqname">{{ localeData?.account_uniquename }}</label>
                                <input
                                    type="text"
                                    id="accUnqname"
                                    class="form-control"
                                    textCaseChangeDirective
                                    UniqueNameDirective
                                    formControlName="uniqueName"
                                    name="accUnqname"
                                />
                            </div>
                        </div>

                        <div class="form-group col-sm-6">
                            <label for="number">{{ localeData?.balance_for_trigger }}</label>
                            <div
                                class="input-group"
                                [ngClass]="{
                                    'input-group': addAccountForm.get('closingBalanceTriggerAmount')?.value > 0
                                }"
                            >
                                <input
                                    type="tel"
                                    id="number"
                                    min="0"
                                    class="form-control text-right"
                                    formControlName="closingBalanceTriggerAmount"
                                    [placeholder]="
                                        commonLocaleData?.app_numbers?.zero +
                                        '' +
                                        commonLocaleData?.app_numbers?.zero +
                                        '.' +
                                        commonLocaleData?.app_numbers?.zero +
                                        '' +
                                        commonLocaleData?.app_numbers?.zero
                                    "
                                />
                                <div
                                    class="input-group-addon"
                                    (click)="closingBalanceTypeChanged('DEBIT')"
                                    [ngClass]="{
                                        'active-toggle-btn':
                                            addAccountForm.get('closingBalanceTriggerAmountType')?.value === 'DEBIT',
                                        'cp': addAccountForm.get('closingBalanceTriggerAmount')?.value > 0
                                    }"
                                    *ngIf="addAccountForm.get('closingBalanceTriggerAmount')?.value > 0"
                                >
                                    {{ commonLocaleData?.app_dr?.toUpperCase() }}
                                </div>
                                <div
                                    class="input-group-addon"
                                    (click)="closingBalanceTypeChanged('CREDIT')"
                                    [ngClass]="{
                                        'active-toggle-btn':
                                            addAccountForm.get('closingBalanceTriggerAmountType')?.value === 'CREDIT',
                                        'cp': addAccountForm.get('closingBalanceTriggerAmount')?.value > 0
                                    }"
                                    *ngIf="addAccountForm.get('closingBalanceTriggerAmount')?.value > 0"
                                >
                                    {{ commonLocaleData?.app_cr?.toUpperCase() }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="description">{{ localeData?.description_label }}</label>
                                <textarea
                                    id="description"
                                    rows="3 "
                                    cols="4"
                                    name="description"
                                    formControlName="description"
                                    class="form-control"
                                ></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>

            <tab [heading]="localeData?.tabs?.custom">
                <giddh-page-loader [cssClass]="'mt-0 mb-0'" *ngIf="isCustomFieldLoading"></giddh-page-loader>
                <ng-container formArrayName="customFields">
                    <ng-container
                        *ngFor="let item of companyCustomFields; let index = index; let first = first; let last = last"
                        [formGroupName]="index"
                    >
                        <ng-container
                            *ngFor="
                                let customFieldsItem of addAccountForm.get('customFields')['controls'];
                                let index = index
                            "
                        >
                            <div
                                class="row mr-b15"
                                *ngIf="item?.uniqueName === customFieldsItem.get('uniqueName')?.value"
                            >
                                <div class="col-lg-8">
                                    <div class="name-of-field">
                                        <label for="values"
                                            >{{ item.fieldName }}
                                            <span class="red-text" *ngIf="item.isMandatory">*</span>
                                        </label>
                                        <input
                                            *ngIf="
                                                item.fieldType?.type === availableFieldTypes.String ||
                                                item.fieldType?.type === availableFieldTypes.Barcode
                                            "
                                            type="text"
                                            id="values"
                                            name="values{{ index }}"
                                            formControlName="value"
                                            class="form-control custom-field"
                                            [maxLength]="item.dataRange?.max"
                                            [pattern]="item.regex"
                                            [required]="item.isMandatory"
                                            [placeholder]="item.fieldInfo ? item.fieldInfo : ''"
                                        />
                                        <input
                                            *ngIf="item.fieldType?.type === availableFieldTypes.Number"
                                            type="number"
                                            id="values"
                                            name="values{{ index }}"
                                            formControlName="value"
                                            class="form-control custom-field"
                                            [min]="item.dataRange?.min"
                                            [max]="item.dataRange?.max"
                                            decimalDigitsDirective
                                            [attr.pattern]="item.regex"
                                            [required]="item.isMandatory"
                                            [placeholder]="item.fieldInfo ? item.fieldInfo : ''"
                                        />
                                        <div
                                            *ngIf="item.fieldType?.type === availableFieldTypes.Boolean"
                                            class="clearfix"
                                        >
                                            <span class="d-inline-block">
                                                <input
                                                    id="yes{{ index }}"
                                                    class="radio-custom cp ml-0"
                                                    type="radio"
                                                    [checked]="customFieldsItem.get('value')?.value === 'true'"
                                                    (change)="selectedBooleanCustomField('true', index)"
                                                    name="booleanType{{ index }}"
                                                />
                                                <label for="yes{{ index }}" class="radio-custom-label">{{
                                                    commonLocaleData?.app_true?.toUpperCase()
                                                }}</label>
                                            </span>

                                            <span class="d-inline-block">
                                                <input
                                                    id="no{{ index }}"
                                                    class="radio-custom cp ml-0"
                                                    type="radio"
                                                    [checked]="customFieldsItem.get('value')?.value === 'false'"
                                                    (change)="selectedBooleanCustomField('false', index)"
                                                    name="booleanType{{ index }}"
                                                />
                                                <label for="no{{ index }}" class="radio-custom-label">{{
                                                    commonLocaleData?.app_false?.toUpperCase()
                                                }}</label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                </ng-container>
                <a
                    href="javascript:;"
                    class="btn-link"
                    [routerLink]="'/pages/custom-fields/list'"
                    *ngIf="!companyCustomFields?.length"
                    (click)="closeMaster()"
                    >{{ commonLocaleData?.app_create_custom_field }}</a
                >
            </tab>

            <div class="row">
                <div class="col-sm-12 mt-5">
                    <div class="button-group">
                        <button
                            aria-label="save"
                            type="submit"
                            class="btn btn-success"
                            [ladda]="createAccountInProcess$ | async"
                            [disabled]="addAccountForm.invalid || !(isGstValid$ | async) || isMobileNumberInvalid"
                        >
                            {{ commonLocaleData?.app_save }}
                        </button>
                    </div>
                </div>
            </div>
        </tabset>
    </form>
</ng-container>
