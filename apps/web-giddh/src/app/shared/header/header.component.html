<div class="paddingTopFixed">
    <!--  *ngIf="pageUrl != '/new-user'" -->
    <div class="primary-header">
        <div>
            <!-- hide div for future use of design if shubhndra wants to change deisgn as per preious one -->
            <div class="col-sm-5" *ngIf="hideAsDesignChanges">
                <ul class="main-company-name">
                    <!-- [attachOutsideOnClick]="true" [isOpen]="companyMenu.isopen"  [attachOutsideOnClick]="true" (clickOutside)="closeUserMenu(dropdown)"-->
                    <li class="company-name pos-rel" dropdown #companyDetailsDropDownWeb="bs-dropdown" [autoClose]="false" [attachOutsideOnClick]="true" (clickOutside)="companyDetailsDropDownWeb.hide()" [exclude]="'.company-name'">
                        <a id="cmpWrp" href="javascript:void(0)" class="clearfix z1" dropdownToggle>
                            <ng-template #companyBranchNameAlias> {{ (selectedCompany | async)?.name }}<span *ngIf="(selectedCompany | async)?.nameAlias"> (
                                    {{  (selectedCompany | async)?.nameAlias }} )</span>
                            </ng-template>
                            <!-- <span class="icon-dots-three-vertical"></span> -->
                            <div class="cText">
                                <span class="cName ellp pdR1">{{ ((selectedCompany | async)?.name) | slice: 0 : 1}}
                                </span>

                                <div class="company-name-finance-year" placement="bottom">
                                    <span class=" ellp pdR1">{{ ((selectedCompany | async)?.name)}}
                                    </span>

                                    <div class="unique-name-financial-year"> <span *ngIf="(selectedCompany | async)?.nameAlias" style="font-size:12px;color:#01A9F4;">
                                            ({{ (selectedCompany | async)?.nameAlias }})
                                        </span>
                                        <span class="fyear">{{ (selectedCompany | async)?.activeFinancialYear?.uniqueName }}
                                        </span>
                                    </div>
                                </div>


                            </div>
                        </a>

                        <ul class="dropdown-menu user_dropdown" role="menu" *dropdownMenu>

                            <li>
                                <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/settings/taxes', {tab: 'taxes', tabIndex: 0})">Settings</a>
                            </li>
                            <li *ngIf="!isMobileSite">
                                <!-- [routerLink]="['/settings']" [queryParams]="" -->
                                <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/settings/permission', { tab: 'permission', tabIndex: 5 })">Manage
                                    Users (Permission)</a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/company-import-export')">Back up
                                    Data</a>
                            </li>
                            <!-- #dropdown="bs-dropdown" -->
                            <!--  -->
                            <li dropdown class="pos-rel" #subdropdown="bs-dropdown" [autoClose]="false" [attachOutsideOnClick]="true" (clickOutside)="subdropdown.isOpen = false" (onShown)="switchCompanyMenuShown()">
                                <a href="javascript:void(0)" class="clearfix" dropdownToggle>
                                    Switch company
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                </a>

                                <ul id="companyList" class="company-list dropdown-menu sub_menu_nav" dropdown>

                                    <div class="input-group" container="body">

                                        <input type="text" class="form-control" placeholder="Search Company here" [(ngModel)]="searchCmp" #searchCmpTextBox name="searchCompany" (ngModelChange)="filterCompanyList($event)" autocomplete="off" />

                                        <span tooltip="Refresh" class="input-group-addon" id="" (click)="refreshCompanies($event)">
                                            <i class="glyphicon glyphicon-refresh cp"
                                                [ngClass]="{'glyphicon-spin': (isCompanyRefreshInProcess$ | async)}"></i>
                                        </span>
                                    </div>

                                    <li style="padding:0px;">



                                        <perfect-scrollbar class="" [scrollIndicators]="true">
                                            <ul class="sub-list" *ngIf="companyListForFilter && companyListForFilter.length">

                                                <li class="cmp posrelative headerTooltip" *ngFor="let cmp of companyListForFilter; let i = index" [ngClass]="{'selected-company': cmp.uniqueName === (selectedCompany | async)?.uniqueName}" (keydown.enter)="changeCompany(cmp.uniqueName)" (click)="changeCompany(cmp.uniqueName)">

                                                    <a vr-item href="javascript:void(0);" class="ellp" (mouseenter)="mouseEnteredOnCompanyName(i)">

                                                        <ng-template #CompanyBranchname> {{ cmp.name }}
                                                            <span *ngIf="cmp.nameAlias">({{(cmp.nameAlias)}})</span>
                                                        </ng-template>

                                                        <span container="body" [tooltip]="CompanyBranchname" placement="top">
                                                            {{ cmp.name }} <span
                                                                *ngIf="cmp.nameAlias">({{(cmp.nameAlias)}})</span>
                                                        </span>

                                                        <img class="pull-right permission_icon" *ngIf="hoveredIndx !== i && cmp.createdBy.email !== (user$ | async)?.email" src="assets/images/users.svg">

                                                        <img class="pull-right permission_icon" *ngIf="hoveredIndx === i && cmp.createdBy.email !== (user$ | async)?.email" src="assets/images/users-white.svg">

                                                    </a>
                                                    <!-- commented by meghna
          <i class="deleteCmp" *ngIf="cmp.createdBy.email === (user$ | async)?.email && cmp.uniqueName !== (selectedCompany | async)?.uniqueName" class="glyphicon glyphicon-trash" (click)="showDeleteCompanyModal(cmp, $event)"></i>
          -->
                                                </li>

                                            </ul>
                                        </perfect-scrollbar>


                                    </li>

                                    <li>
                                        <button href="javascript:void(0)" (click)="removeCompanySessionData(); showAddCompanyModal();" class="btn-link pd0">Create
                                            Company
                                        </button>
                                    </li>

                                </ul>
                            </li>

                            <li role="separator" class="divider" style="width:100%"></li>

                            <li class="mrB1" *ngIf="!isMobileSite">
                                <a [tooltip]="userEmail" placement="top" href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/user-details', { tab: 'profile', tabIndex: 1 })" class="oh">
                                    <span class="user_circle pull-left" *ngIf="!userAvatar">
                                        <span>{{userName | uppercase}}</span>
                                    </span>
                                    <span class="user_circle pull-left" *ngIf="userAvatar" [style.background]="'transparent'">
                                        <img src="{{userAvatar}}" alt="" />
                                    </span>
                                    <div class="pull-left userName_wrap ellp">{{ userFullName }}
                                        <small class="grey_clr">Profile</small>
                                    </div>
                                </a>
                            </li>
                            <li *ngIf="!isMobileSite">
                                <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/user-details', { tab: 'api', tabIndex: 0 })">API</a>
                            </li>
                            <li>
                                <a href="https://trello.com/b/1cPr6Mkc/giddh-roadmap" target="_blank">Upcoming</a>
                            </li>
                            <li>
                                <!-- <a href="https://giddh.canny.io/" target="_blank">Feature Request</a> -->
                                <a href="https://giddh.canny.io/feature-requests" target="_blank">Feature Request</a>
                            </li>
                            <li>
                                <a href="https://changelog.giddh.com" target="_blank">Changelog</a>
                            </li>
                            <!-- <li>
          <a href="http://faq.giddh.com" target="_blank">Help</a>
          </li> -->
                            <li role="separator" class="divider" style="width:100%"></li>
                            <li>
                                <a href="javascript:void(0)" (click)="logout()">Logout</a>
                            </li>
                            <li role="separator" class="divider" style="width:100%"></li>
                            <li class="app_list ">
                                <ul>
                                    <h6>Downloads</h6>
                                    <li>
                                        <a href="https://play.google.com/store/apps/details?id=com.giddh.app" target="_blank" title="android app">
                                            <i class="fa fa-android"></i> Android</a>
                                    </li>
                                    <li>
                                        <a href="https://itunes.apple.com/in/app/giddh-tb/id999743672?mt=8" target="_blank" title="ios app">
                                            <i class="fa fa-apple"></i> IOS</a>
                                    </li>
                                    <li>
                                        <a href="https://s3-ap-south-1.amazonaws.com/giddh-app-builds/giddh-{{apkVersion}}.dmg" target="_blank" title="macOS app">
                                            <i class="fa fa-apple"></i> MacOS</a>
                                    </li>
                                    <li>
                                        <a href="https://s3-ap-south-1.amazonaws.com/giddh-app-builds/giddh%20Setup%20{{apkVersion}}.exe" target="_blank" title="windows app">
                                            <i class="fa fa-windows"></i> Windows</a>
                                    </li>
                                </ul>
                            </li>

                        </ul>
                    </li>


                </ul>

            </div>
            <div class="col-sm-6">
                <div class="giddh-logo" (click)="forceOpenNavigation = true;">

                    <!-- [attachOutsideOnClick]="true" [isOpen]="companyMenu.isopen"  [attachOutsideOnClick]="true" (clickOutside)="closeUserMenu(dropdown)"-->
            <li class="company-name pos-rel" [autoClose]="false" dropdown #dropdown="bs-dropdown" [attachOutsideOnClick]="true" (clickOutside)="dropdown.isOpen = false">
                <a id="cmpWrp" href="javascript:void(0)" class="clearfix z1 " dropdownToggle>
                    <ng-template #companyBranchNameAlias> {{ (selectedCompany | async)?.name }}<span *ngIf="(selectedCompany | async)?.nameAlias"> ( {{  (selectedCompany | async)?.nameAlias }}
                            )</span>
                    </ng-template>
                    <!-- <span class="icon-dots-three-vertical"></span> -->
                    <div class="cText no-padding">

                        <span class="cName ellp pdR1 alice">{{companyInitials}}</span>

                        <img src="assets/images/giddh-white-logo.svg" class="giddh-logo">
                    </div>
                </a>
                <ul class="dropdown-menu user_dropdown" role="menu" *dropdownMenu>
                <ng-container *ngTemplateOutlet="headDropdownMenu"></ng-container>
                </ul>

            </li>


                </div>

            </div>
            <div class="col-sm-6">
                <div class="pull-right right-details">
                    <ul class="nav universal_date mr-2" *ngIf="(selectedCompany | async)">
                        <li [hidden]="isTodaysDateSelected">
                            <button class="btn btn-link" (click)="jumpToToday();">Today</button>
                        </li>
                        <li [hidden]="isTodaysDateSelected" class="notToday">
                            <span class="icon-calender calender-addone"></span>
                            <input type="text" class="" name="daterangeInput" #dateRangePickerCmp daterangepicker [options]="datePickerOptions" (applyDaterangepicker)="setApplicationDate($event)" class="form-control date-range-picker" />
                        </li>
                        <li [hidden]="!isTodaysDateSelected" class="cp" (click)="openDateRangePicker();">
                            <!-- <label class="btn btn-link"></label> -->
                            <span class="icon-calender calender-addone"></span>
                            <label class="header-date">
                                {{moment(datePickerOptions.endDate).format('DD-MM-YYYY')}}</label>
                        </li>
                    </ul>


                    <button id="AddManage" type="button" class="btn btn-gray btn-sm" [checkPermission]="['MENU', 'MANAGE']" (click)="showManageGroupsModal()"> <span
                            class="icon-edit-ico"></span>Accounts
                    </button>
                    <div class="btn-group cp mrL1 d-inline-block" dropdown>
                        <span class="icon-support dropdown-toggle" dropdownToggle></span>

                        <!-- <img src="{{imgPath}}support.svg" dropdownToggle class="dropdown-toggle" [style.max-width.px]="24" /> -->
                        <ul *dropdownMenu class="dropdown-menu dropdown-menu-right mrT1 pd1" role="menu" aria-labelledby="button-basic" [style.min-width.px]="230">
                            <li>
                                <button class="btn btn-block btn-gray">
                                    <img src="{{imgPath}}support-white.svg" [style.max-width.px]="24" />
                                    Support
                                </button>
                            </li>
                            <li class="mrT2 text-center mrB2">
                                <!-- <span><a href="tel:02268210057" target="_blank" class="grey_clr">022-68210057</a></span>  openScheduleModal() -->
                                <p><a href="mailto:support@giddh.com" target="_blank" class="grey_clr">support@giddh.com</a></p>
                            </li>
                            <li class="row text-center">
                                <button class="btn btn-link tdUndr" (click)="openScheduleCalendlyModel();">Talk to Sales</button> |
                                <span class="text-center"><a href="http://faq.giddh.com/" target="_blank"
                                        class="btn btn-link tdUndr">FAQs</a></span>
                            </li>
                            <!-- <h3 class="mrT2 mrB2 fs20 text-center grey_clr">FAQs?</h3> -->

                        </ul>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<div class="nav-left-bar" [ngClass]="{'open': sideMenu.isopen, 'unvisible': companyList.length===0 }" (clickOutside)="closeSidebarMobile($event)">

    <div class="menu_wrapper">

        <ul class="main-company-name">

            <!-- [attachOutsideOnClick]="true" [isOpen]="companyMenu.isopen"  [attachOutsideOnClick]="true" (clickOutside)="closeUserMenu(dropdown)"-->
            <li *ngIf="isMobileSite" [autoClose]="false" class="company-name pos-rel hidden-lg hidden-md hidden-sm" dropdown #dropdown="bs-dropdown" [attachOutsideOnClick]="true" (clickOutside)="dropdown.isOpen = false">

                <a href="javascript:void(0)" class="clearfix z1 d-block" dropdownToggle>
                    <ng-template #companyBranchNameAlias> {{ (selectedCompany | async)?.name }}<span *ngIf="(selectedCompany | async)?.nameAlias"> ( {{  (selectedCompany | async)?.nameAlias }}
                            )</span>
                    </ng-template>
                    <!-- <span class="icon-dots-three-vertical"></span> -->
                    <div class="cText d-flex">
                        <span class="cName ellp pdR1 alice">{{companyInitials}}</span>

                        <div class="company-name-finance-year" placement="bottom">
                            <span class=" ellp pdR1">{{ ((selectedCompany | async)?.name)}}
                            </span>

                            <div class="unique-name-financial-year"> <span *ngIf="(selectedCompany | async)?.nameAlias" class="branch-unique-name">
                                    ({{ (selectedCompany | async)?.nameAlias }})
                                </span>
                                <span class="fyear">{{ (selectedCompany | async)?.activeFinancialYear?.uniqueName }}
                                </span>
                            </div>
                        </div>
                    </div>
                </a>


                <ul class="dropdown-menu user_dropdown" role="menu" *dropdownMenu>
                    <ng-container *ngTemplateOutlet="headDropdownMenu"></ng-container>
                </ul>
            </li>

            <div class="input-group account-search" (click)="showNavigationModal()">
                <span class="input-group-addon" id="">
                    <i class="icon-search"></i>
                </span>
                <input type="text" class="form-control jumpToAccount" placeholder="Jump to Account" aria-describedby="">
            </div>

        </ul>

        <div class="nav-wrapper">

            <perfect-scrollbar class="scrClass" wheel-propagation="true" wheel-speed="1" min-scrollbar-length="0" auto-height [scrollIndicators]="false">

                <!-- Accounts menu -->
                <ul class="left_fixed_header mrT1" [ngClass]="{'open':sideMenu.isopen}" *ngIf="(selectedCompany | async)">
                    <h6 class="mrB1">ACCOUNTS <i *ngIf="!isMobileSite" tooltip="Create account" placement="bottom" container="body" class="fa fa-plus cp" (click)="showManageGroupsModal()"></i>
                    </h6>
                    <!-- [checkPermission]="['MENU', 'DASHBOARD']" -->
                    <li *ngFor="let acc of accountItemsFromIndexDB">
                        <a [tooltip]="acc.name" placement="right" routerLink="ledger/{{acc.uniqueName}}" (click)="analyzeAccounts($event, acc)" [class.active]="isLedgerAccSelected && selectedLedgerName === acc.uniqueName">
                            <span class="icon-dashboard"></span>
                            <span class="label">{{acc.name}}
                                <span class="txtUpc">A/</span>
                            <span class="txtLwc">c</span>
                            </span>
                        </a>
                    </li>
                    <li *ngIf="!isMobileSite" class="mrT cp  showMoreOpt" (click)="showNavigationModal()">
                        <span container="body" tooltip="Search accounts" placement="bottom"> Show more...</span></li>
                </ul>

                <!-- Main menu -->
                <ul class="left_fixed_header mrT4" [ngClass]="{'open':sideMenu.isopen}" *ngIf="(selectedCompany | async)">
                    <h6 class="mrB1">MENU
                        <!-- <i *ngIf="!isMobileSite" tooltip="Menu" placement="bottom" container="body"
              class="fa fa-plus cp"></i>  -->
                    </h6>
                    <li *ngFor="let menu of menuItemsFromIndexDB">
                        <a *ngIf="menu.uniqueName == '/pages/gstfiling' && activeCompany && activeCompany.countryV2 && activeCompany.countryV2.alpha2CountryCode == 'IN'" routerLink="{{menu.uniqueName}}" [ngClass]="{'active': selectedPage && selectedPage.toLowerCase() == menu.name.toLowerCase()}"
                            (click)="analyzeMenus($event, menu.uniqueName, menu.additional)">
                            <span class="icon-dashboard"></span>
                            <span class="label">{{menu.name}}</span>
                        </a>
                        <a *ngIf="menu.uniqueName == '/pages/vat-report' && activeCompany && activeCompany.countryV2 && activeCompany.countryV2.alpha2CountryCode != 'IN'" routerLink="{{menu.uniqueName}}" [ngClass]="{'active': selectedPage && selectedPage.toLowerCase() == menu.name.toLowerCase()}"
                            (click)="analyzeMenus($event, menu.uniqueName, menu.additional)">
                            <span class="icon-dashboard"></span>
                            <span class="label">{{menu.name}}</span>
                        </a>
                        <a *ngIf="menu.uniqueName != '/pages/gstfiling' && menu.uniqueName != '/pages/vat-report'" routerLink="{{menu.uniqueName}}" [ngClass]="{'active': selectedPage && selectedPage.toLowerCase() == menu.name.toLowerCase()}" (click)="analyzeMenus($event, menu.uniqueName, menu.additional)">
                            <span class="icon-dashboard"></span>
                            <span class="label">{{menu.name}}</span>
                        </a>
                    </li>

                    <!-- <li class="other">
                        <a [routerLink]="['/pages/all-modules']">All Modules
                        </a>
                    </li> -->

                    <li class="other" *ngIf="!isMobileSite" (mouseenter)="allModulesPopover.show()" (mouseleave)="handleAllModulesLeaveEvent($event)">
                        <a #allModulesPopover="bs-popover" [popover]="allModules" placement="right" containerClass="all-modules-popover"
                            (mouseenter)="allModulesPopover.show()" container="body">All
                            Modules <i *ngIf="!isMobileSite" tooltip="All Modules" placement="bottom" container="body"
                                class="fa fa-angle-right cp"></i></a>
                    </li>
                    <!-- All Modules list -->
                    <ng-template #allModules>
                        <ul class="left-sub-menu left_fixed_header open" id="other_sub_menu" (mouseenter)="allModulesPopover.show()"
                            (mouseleave)="allModulesPopover.hide()" style="height: fit-content">
                            <li>
                                <div class="clearfix">
                                    <ul>
                                        <li><a href="javascript:void(0)"><strong>General</strong></a></li>
                                        <li><a (click)="analyzeOtherMenus('contact/customer', {tab: 'customer', tabIndex: 0})">Customer</a>
                                        </li>
                                        <li><a (click)="analyzeOtherMenus('contact/vendor', {tab: 'vendor', tabIndex: 0})">Vendor</a>
                                        </li>
                                        <li><a (click)="analyzeOtherMenus('accounting-voucher')">Journal Voucher</a>
                                        </li>
                                        <li><a (click)="analyzeOtherMenus('daybook')">Daybook</a></li>
                                        <li><a
                                                (click)="analyzeOtherMenus('trial-balance-and-profit-loss', { tab: 'trial-balance', tabIndex: 0 })">
                                                Trial Balance</a></li>
                                        <li><a
                                                (click)="analyzeOtherMenus('trial-balance-and-profit-loss', { tab: 'trial-balance', tabIndex: 1 })">P&L,
                                                B/S</a></li>
                                    </ul>

                                    <ul>
                                        <li><a href="javascript:void(0)"><strong>Invoice</strong></a></li>
                                        <li><a (click)="analyzeOtherMenus('proforma-invoice/invoice/sales')">Sales</a></li>
                                        <li><a (click)="analyzeOtherMenus('proforma-invoice/invoice/purchase')">Purchase</a></li>
                                        <li><a (click)="analyzeOtherMenus('proforma-invoice/invoice/cash')">Cash</a></li>
                                        <li><a
                                                (click)="analyzeOtherMenus('invoice/preview/credit note', {tab: 'credit note', tabIndex: 1})">Dr/Cr
                                                Note</a></li>
                                        <li><a
                                                (click)="analyzeOtherMenus('invoice/preview/sales', {tab: 'templates', tabIndex: 3})">Template</a>
                                        </li>
                                        <li><a (click)="analyzeOtherMenus('invoice/preview/sales', {tab: 'invoice', tabIndex: 0})">Invoice
                                                Management</a></li>
                                    </ul>

                                    <ul>
                                        <li><a href="javascript:void(0)"><strong>Inventory</strong></a></li>
                                        <li><a (click)="analyzeOtherMenus('inventory')">Inventory</a></li>
                                        <li><a (click)="analyzeOtherMenus('manufacturing/report')">Manufacturing</a></li>
                                        <!-- <li><a (click)="analyzeOtherMenus('inventory/jobwork')">Job Work</a></li> -->
                                        <li><a (click)="analyzeOtherMenus('inventory/report')">Branch Transfer</a></li>
                                        <li><a (click)="analyzeOtherMenus('settings/warehouse')">Warehouse</a></li>
                                    </ul>

                                    <ul>
                                        <li><a href="javascript:void(0)"><strong>Settings</strong></a></li>
                                        <li><a (click)="analyzeOtherMenus('permissions')">Permission</a></li>
                                        <li><a (click)="analyzeOtherMenus('import/select-type')">Import Data</a></li>
                                        <li>
                                            <a (click)="analyzeOtherMenus('settings/integration', { tab: 'integration', tabIndex: 1 })">Integration
                                            </a>
                                        </li>
                                        <li>
                                            <a (click)="analyzeOtherMenus('settings/taxes', { tab: 'taxes', tabIndex: 0 })">Settings
                                            </a>
                                        </li>
                                    </ul>

                                    <ul>
                                        <li><a href="#"><strong>Others</strong></a></li>
                                        <li><a (click)="analyzeOtherMenus('audit-logs')">Audit Log</a></li>
                                        <li><a (click)="analyzeOtherMenus('search')">Search</a></li>
                                        <li><a (click)="analyzeOtherMenus('gstfiling')"
                                                *ngIf="activeCompany && activeCompany.countryV2 && activeCompany.countryV2.alpha2CountryCode == 'IN'">GSTR</a>
                                        </li>
                                        <li><a (click)="analyzeOtherMenus('vat-report')"
                                                *ngIf="activeCompany && activeCompany.countryV2 && activeCompany.countryV2.alpha2CountryCode != 'IN'">Vat
                                                Report</a></li>
                                        <li><a (click)="analyzeOtherMenus('home')">Dashboard</a></li>
                                        <li><a (click)="analyzeOtherMenus('reports/reports-dashboard')">Reports</a></li>
                                    </ul>

                                </div>
                            </li>

                        </ul>
                    </ng-template>
                </ul>
                <!-- <app-fixed-footer></app-fixed-footer> -->

            </perfect-scrollbar>

        </div>



    </div>

    <div class="mobile_menu_icon" (click)="sideBarStateChange(sideMenu.isopen = !sideMenu.isopen)">
        <span class="icon-bar" [tooltip]="sideMenu.isopen ? 'Collapse' : 'Expand'" placement="right"></span>
    </div>

</div>

<header class="clearfix header-container desktop-header " [ngClass]="{'unvisible': companyList.length===0 , 'menu_open':sideMenu.isopen , 'ledger-page': isLedgerAccSelected }">
    <nav class="navbar ">
        <div class="container-fluid pdT1 pdB1">
            <div class="navbar_header">
                <ul class="nav navbar-nav">
                    <!-- (isOpenChange)="sideBarStateChange($event)" -->
                    <li class="hamburger_menu cp" (click)="sideBarStateChange(sideMenu.isopen = !sideMenu.isopen)">

                        <button class="btn mrR0" [tooltip]="sideMenu.isopen ? 'Collapse' : 'Expand'" placement="right">
                            <i class="icon-bar"></i>
                        </button>

                        <h4 class="inline text-capitalize" *ngIf="navigationEnd && !navigateToUser">{{selectedPage}}
                            <span *ngIf="isLedgerAccSelected">A/</span><span *ngIf="isLedgerAccSelected" class="txtLwc">c</span></h4>

                        <h4 class="inline text-capitalize" *ngIf="!navigationEnd && !navigateToUser">{{oldSelectedPage}}
                            <span *ngIf="isLedgerAccSelected">A/</span><span *ngIf="isLedgerAccSelected" class="txtLwc">c</span></h4>

                    </li>

                    <!-- books search -->
                    <!-- <li [attachOutsideOnClick]="true" (clickOutside)="forceCloseSidebar($event)">
<div class="ledger_search form-inline">
<div class="form-group">
<div class="input-group">
<input [hidden]="userIsCompanyUser" #accountSearch id="accountSearch" type="text" name="searchGroup" placeholder="Search accounts" (focus)="flyAccounts.next(true)" [formControl]="accountSearchControl" [value]="accountSearchValue">
<div *ngIf="flyAccounts | async" (click)="noGroups = !noGroups" id="expandAllGroups" class="input-group-addon cp" placement="right">
    <span (click)="flyAccounts.next(true)" [ngClass]="{'icon-plus':!noGroups,'icon-minus': noGroups }" aria-hidden="false"></span>
</div>
</div>
</div>
</div>
</li> -->
                    <li>

                    </li>
                </ul>

                <div class="giddh_logo">

                </div>

                <div class="pull-right">


                </div>
            </div>
        </div>
    </nav>
    <!-- <accounts-side-bar [isRouter]="true" (clickOutside)="closeSidebar($event.target.id)" [noGroups]="noGroups" [search]='accountSearchValue' [flyAccounts]="flyAccounts | async" (openAddAndManage)="showManageGroupsModal()"></accounts-side-bar> -->
</header>


<div class="paddingTopFixed-mobile">
    <header class="clearfix header-container mobileHeader">
        <nav class="navbar " [ngClass]="{'menu_open':sideMenu.isopen}">
            <div class="container-fluid  mrB1 ">
                <div class="upperLayerHeader">
                    <ul class="nav navbar-nav">
                        <!-- (isOpenChange)="sideBarStateChange($event)" -->
                        <li class="hamburger_menu cp pull-left" (click)="sideBarStateChange(sideMenu.isopen = !sideMenu.isopen)">

                            <button class="btn mrR0" [tooltip]="sideMenu.isopen ? 'Collapse' : 'Expand'" placement="right">
                                <i class="icon-bar"></i>
                            </button>

                            <h4 class="inline text-capitalize" *ngIf="navigationEnd && !navigateToUser">{{selectedPage}}
                                <span *ngIf="isLedgerAccSelected">A/</span><span *ngIf="isLedgerAccSelected" class="txtLwc">c</span></h4>

                            <h4 class="inline text-capitalize" *ngIf="!navigationEnd && !navigateToUser">
                                {{oldSelectedPage}} <span *ngIf="isLedgerAccSelected">A/</span><span *ngIf="isLedgerAccSelected" class="txtLwc">c</span></h4>

                        </li>
                        <li class="pull-right">
                            <div class="btn-group cp mrL1 d-inline-block" dropdown *ngIf="!isMobileSite">
                                <span class="icon-support dropdown-toggle" dropdownToggle></span>
                                <ul *dropdownMenu class="dropdown-menu dropdown-menu-right mrT1 pd1" role="menu" aria-labelledby="button-basic" [style.min-width.px]="230">
                                    <li>
                                        <button class="btn btn-block btn-gray">
                                            <img src="{{imgPath}}support-white.svg" [style.max-width.px]="24" />
                                            Support
                                        </button>
                                    </li>
                                    <li class="mrT2 text-center mrB2">
                                        <!-- <span><a href="tel:02268210057" target="_blank" class="grey_clr">022-68210057</a></span> -->
                                        <p><a href="mailto:support@giddh.com" target="_blank" class="grey_clr">support@giddh.com</a></p>
                                    </li>
                                    <li class="row text-center">
                                        <button class="btn btn-link tdUndr" (click)="openScheduleCalendlyModel()">Talk to
                                            Sales</button> |
                                        <span class="text-center"><a href="http://faq.giddh.com/" target="_blank"
                                                class="btn btn-link tdUndr">FAQs</a></span>
                                    </li>
                                    <!-- <h3 class="mrT2 mrB2 fs20 text-center grey_clr">FAQs?</h3> -->

                                </ul>
                            </div>
                        </li>


                    </ul>
                </div>

                <div class="lowerLayerHeader clearfix">
                    <ul class="nav universal_date  pull-left" *ngIf="(selectedCompany | async)">
                        <li [hidden]="isTodaysDateSelected">
                            <button class="btn btn-link" (click)="jumpToToday();">Today</button>
                        </li>
                        <li [hidden]="isTodaysDateSelected" class="dateRangPicker">
                            <span class="icon-calender calender-addone pos-abs" (click)="jumpToToday();"></span>
                            <input type="text" class="" name="daterangeInput" #dateRangePickerCmp daterangepicker [options]="datePickerOptions" (applyDaterangepicker)="setApplicationDate($event)" class="form-control date-range-picker" />
                        </li>
                        <li [hidden]="!isTodaysDateSelected" class="cp" (click)="openDateRangePicker();">
                            <label class="btn btn-link">&nbsp;</label>
                            <span class="icon-calender calender-addone "></span>
                            <label class="header-date">{{moment(datePickerOptions.endDate).format('DD-MM-YYYY')}}</label>
                        </li>
                    </ul>
                    <button id="AddManage" type="button" class="btn btn-gray btn-xs btn-sm pull-right mrR0 " [checkPermission]="['MENU', 'MANAGE']" (click)="showManageGroupsModal()"><span
                            class="icon-edit-ico"></span>
                        Accounts
                    </button>
                </div>
            </div>
        </nav>
    </header>
</div>
<!--add and manage group account modal -->
<div bsModal #manageGroupsAccountsModal="bs-modal" [config]="{ keyboard: true }" class="modal fade fullScreenMy mangeAccountPopup addManageGroupAcc" role="dialog" (onShown)="onShown()">
    <div class="modal-dialog modal-lg modal-liq90 mr0 width100" style="height: 100%;">
        <div class="modal-content fullScreenMy">
            <ng-template element-view-container-ref #addmanage=elementviewcontainerref>
            </ng-template>
        </div>
    </div>
</div>

<!--add company modal  -->
<div bsModal #addCompanyModal="bs-modal" [config]="{backdrop: 'static', keyboard: false}" class="modal fade" role="dialog" (onHidden)="onHide()">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <ng-template element-view-container-ref #companyadd=elementviewcontainerref>
            </ng-template>
        </div>
    </div>
</div>

<!--add company new modal  -->
<div bsModal #addCompanyNewModal="bs-modal" [config]="{backdrop: 'static', keyboard: false}" class="modal fade" role="dialog" (onHidden)="onHide()">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <ng-template element-view-container-ref #companynewadd=elementviewcontainerref>
            </ng-template>
        </div>
    </div>
</div>

<!--delete company modal  -->
<div bsModal #deleteCompanyModal="bs-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <confirm-modal [title]="'Delete Company'" [body]="deleteCompanyBody" (cancelCallBack)="hideDeleteCompanyModal($event)" (successCallBack)="deleteCompany($event)">
            </confirm-modal>
        </div>
    </div>
</div>

<!--CMD + G modal  -->
<ng-template #navigationModal>

    <div class="modal-body" #mdl>
        <!-- <universal-data-list (noResultFoundEmitter)="handleNoResultFoundEmitter($event)"
            (newTeamCreationEmitter)="handleNewTeamCreationEmitter($event)" [forceSetAutoFocus]="true"
            [isFlying]="false" (groupEmitter)="makeGroupEntryInDB($event)"
            (selectedItemEmitter)="onItemSelected($event)" [parentEle]="mdl" [isOpen]="true" [setParentWidth]="true"
            [searchBoxPlaceholder]="'Search'" [isMultiple]="false" (closeEmitter)="modelRef.hide()">
        </universal-data-list> -->
        <command-k (noResultFoundEmitter)="handleNoResultFoundEmitter($event)" (newTeamCreationEmitter)="handleNewTeamCreationEmitter($event)" (groupEmitter)="makeGroupEntryInDB($event)" (selectedItemEmitter)="onItemSelected($event)" [parentEle]="mdl" [isOpen]="true"
            [setParentWidth]="true" (closeEmitter)="modelRef.hide()"></command-k>

        <div class="shortcuts">
            <strong>↑</strong> <strong>↓</strong>&nbsp; to navigate <strong class="mrL1" aria-label="Return">↵</strong>&nbsp; to select <strong class="mrL1" aria-label="Escape">esc</strong>&nbsp; to dismiss
        </div>

    </div>

</ng-template>
<!-- TODO : It is commented due to we have implement calendly and its under discussion to remove   -->
<!-- <div bsModal #talkSalesModal="bs-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="left">Talk to Sales</h3>
                <span aria-hidden="true" class="close" data-dismiss="modal" (click)="closeModal()">×</span>
            </div>

            <div class="modal-body custom-body mrB3" [style.padding-top.px]="0" [style.padding-bottom.px]="0">
                <div class="" id="setting-tab">
                    <tabset #supportTab>
                        <tab heading="Arrange a Demo">
                            <div class="argdemo mrT2">
                                <p>Choose your preferred time to schedule a demo with an expert. </p>
                                <button class="btn btn-primary mrT1" (click)="scheduleNow()">Click Here</button>
                            </div>
                        </tab>
                        <tab heading="Drop us Mail">
                            <div id="Jkvq" class="talktosale-superform mrT2"></div>
                        </tab>
                    </tabset>
                </div>
            </div>
        </div>
    </div>
</div> -->


<!--  -->

<ng-template #expiredPlanModel>
    <div class="modal-header">
        <h3 class="modal-title pull-left">Ready to upgrade subscription</h3>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modelRefExpirePlan.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body pd-2 font-14">
        <div class="clearfix mb-3">
            <p>Your {{subscribedPlan.planDetails.duration}} {{subscribedPlan.planDetails.durationUnit | lowercase }}s <strong>FREE</strong> {{subscribedPlan.planDetails.name}} ended on {{subscribedPlan.expiry}}. We hope you enjoyed using Giddh Accounting
                Software as much as we loved building it for you. To continue your subscription buy any plan or contact us for more assistance.</p>
        </div>
        <div class="clearfix">
            <ul class="list-inline upgradePlan">
                <!-- [routerLink]="['select-plan']" -->
                <li>
                    <button class="btn btn-green" *ngIf="currentCompanyPlanAmount" (click)="goToSelectPlan();">Renew
                        Plan</button>
                </li>
                <li>
                    <button class="btn btn-green" (click)="goToSelectPlan();">Change Plan</button>
                </li>
                <li><span class="d-inline-block pr-1">Or</span> <a class="cursor-pointer" (click)="openScheduleCalendlyModel();modelRefExpirePlan.hide();">
                        Contact
                        Us</a></li>
            </ul>
        </div>
    </div>
</ng-template>
<!-- modal second -->
<ng-template #crossedTxLimitModel>
    <div class="modal-header">
        <h3 class="modal-title pull-left">Ready to upgrade subscription</h3>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modelRefCrossLimit.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body pd-2 font-14">
        <div class="clearfix mb-3">
            <p class="mb-2">You have crossed the transactions limit of your assigned plan
                <strong>{{subscribedPlan.planDetails.name}}</strong> subscribed on {{subscribedPlan.startedAt}}.</p>
            <p>To continue your accounting with Giddh, Please renew your current plan or switch to another one. Contact us for more assistance.</p>
        </div>
        <div class="clearfix">
            <ul class="list-inline">
                <li>
                    <button class="btn btn-pink" (click)="goToSelectPlan();">Buy Plan</button>
                </li>
                <li><span class="d-inline-block pr-1">Or</span> <a class="cursor-pointer" (click)="openScheduleCalendlyModel();modelRefCrossLimit.hide();">
                        Contact
                        Us</a></li>
            </ul>
        </div>
    </div>
</ng-template>
<div class="overlay-cal" *ngIf="isCalendlyModelActivate">
    <button id="close" class="close-2" (click)="hideScheduleCalendlyModel()"><i class="icon-cross" ></i></button>
    <div id="scheduleCall" class="tab-pane active vertical-center modal-body">
        <div class="calendly-box" #reder>
            <div class="calendly-inline-widget">
                <object data="https://calendly.com/sales-accounting-software/talk-to-sale"></object>
            </div>
        </div>
    </div>
</div>


<ng-template #headDropdownMenu>

        <li>
            <div class="cText head-nav">
                <div class="company-name-finance-year" placement="bottom">
                    <span class=" ellp pdR1">{{ ((selectedCompany | async)?.name)}}
                    </span>

                    <div class="unique-name-financial-year"> <span *ngIf="(selectedCompany | async)?.nameAlias" class="branch-unique-name">
                            ({{ (selectedCompany | async)?.nameAlias }})
                        </span>
                        <span class="fyear">{{ (selectedCompany | async)?.activeFinancialYear?.uniqueName }}
                        </span>
                    </div>
                </div>


            </div>
        </li>

        <li>
            <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/settings/taxes', {tab: 'taxes', tabIndex: 0})">Settings</a>
        </li>
        <li *ngIf="!isMobileSite">
            <!-- [routerLink]="['/settings']" [queryParams]="" -->
            <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/settings/permission', { tab: 'permission', tabIndex: 5 })">Manage
                Users (Permission)</a>
        </li>
        <li>
            <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/company-import-export')">Back
                up
                Data</a>
        </li>
        <!-- #dropdown="bs-dropdown" -->
        <!--  -->
        <li dropdown class="pos-rel" #subdropdown="bs-dropdown" [autoClose]="false" [attachOutsideOnClick]="true" (clickOutside)="subdropdown.isOpen = false" (onShown)="switchCompanyMenuShown()">
            <a href="javascript:void(0)" class="clearfix" dropdownToggle>
                Switch company
                <span class="glyphicon glyphicon-menu-right"></span>
            </a>

            <ul id="companyList" class="company-list dropdown-menu sub_menu_nav" dropdown>

                <div class="input-group" container="body">

                    <input type="text" class="form-control" placeholder="Search Company here" [(ngModel)]="searchCmp" #searchCmpTextBox name="searchCompany" (ngModelChange)="filterCompanyList($event)" autocomplete="off" />

                    <span tooltip="Refresh" class="input-group-addon" id="" (click)="refreshCompanies($event)">
                        <i class="glyphicon glyphicon-refresh cp"
                            [ngClass]="{'glyphicon-spin': (isCompanyRefreshInProcess$ | async)}"></i>
                    </span>
                </div>

                <li style="padding:0px;">

                    <perfect-scrollbar class="" [scrollIndicators]="true">

                        <ul class="sub-list" *ngIf="companyListForFilter && companyListForFilter.length">

                            <li class="cmp posrelative headerTooltip" *ngFor="let cmp of companyListForFilter; let i = index" [ngClass]="{'selected-company': cmp.uniqueName === (selectedCompany | async)?.uniqueName}" (keydown.enter)="changeCompany(cmp.uniqueName)" (click)="changeCompany(cmp.uniqueName)">

                                <a vr-item href="javascript:void(0);" class="ellp" (mouseenter)="mouseEnteredOnCompanyName(i)">

                                    <ng-template #CompanyBranchname> {{ cmp.name }}
                                        <span *ngIf="cmp.nameAlias">({{(cmp.nameAlias)}})</span>
                                    </ng-template>

                                    <span container="body" [tooltip]="CompanyBranchname" placement="top">
                                        {{ cmp.name }} <span
                                            *ngIf="cmp.nameAlias">({{(cmp.nameAlias)}})</span> </span>

                                    <img class="pull-right permission_icon" *ngIf="hoveredIndx !== i && cmp.createdBy.email !== (user$ | async)?.email" src="assets/images/users.svg">

                                    <img class="pull-right permission_icon" *ngIf="hoveredIndx === i && cmp.createdBy.email !== (user$ | async)?.email" src="assets/images/users-white.svg">

                                </a>
                                <!-- commented by meghna
<i class="deleteCmp" *ngIf="cmp.createdBy.email === (user$ | async)?.email && cmp.uniqueName !== (selectedCompany | async)?.uniqueName" class="glyphicon glyphicon-trash" (click)="showDeleteCompanyModal(cmp, $event)"></i>
-->
                            </li>

                        </ul>

                    </perfect-scrollbar>

                </li>

                <li>
                    <button href="javascript:void(0)" (click)="showAddCompanyModal()" class="btn-link pd0">Create
                        Company
                    </button>
                </li>

            </ul>
        </li>

        <li role="separator" class="divider" style="width:100%"></li>

        <li class="mrB1" *ngIf="!isMobileSite">
            <a [tooltip]="userEmail" placement="top" href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/user-details', { tab: 'profile', tabIndex: 1 })" class="oh">
                <span class="user_circle pull-left" *ngIf="!userAvatar">
                    <span>{{userName | uppercase}}</span>
                </span>
                <span class="user_circle pull-left" *ngIf="userAvatar" [style.background]="'transparent'">
                    <img src="{{userAvatar}}" alt="" />
                </span>
                <div class="pull-left userName_wrap ellp">{{ userFullName }}
                    <small class="grey_clr">Profile</small>
                </div>
            </a>
        </li>
        <li *ngIf="!isMobileSite">
            <a href="javascript:void(0)" (click)="analyzeMenus($event, '/pages/user-details', { tab: 'api', tabIndex: 0 })">API</a>
        </li>
        <li>
            <a href="https://trello.com/b/1cPr6Mkc/giddh-roadmap" target="_blank">Upcoming</a>
        </li>
        <li>
            <!-- <a href="https://giddh.canny.io/" target="_blank">Feature Request</a> -->
            <a href="https://giddh.canny.io/feature-requests" target="_blank">Feature Request</a>
        </li>
        <li>
            <a href="https://changelog.giddh.com" target="_blank">Changelog</a>
        </li>
        <!-- <li>
<a href="http://faq.giddh.com" target="_blank">Help</a>
</li> -->
        <li role="separator" class="divider" style="width:100%"></li>
        <li>
            <a href="javascript:void(0)" (click)="logout()">Logout</a>
        </li>
        <li role="separator" class="divider" style="width:100%"></li>
        <li class="app_list ">
            <ul>
                <h6>Downloads</h6>
                <li>
                    <a href="https://play.google.com/store/apps/details?id=com.giddh.app" target="_blank" title="android app">
                        <i class="fa fa-android"></i> Android</a>
                </li>
                <li>
                    <a href="https://itunes.apple.com/in/app/giddh-tb/id999743672?mt=8" target="_blank" title="ios app">
                        <i class="fa fa-apple"></i> IOS</a>
                </li>
                <li>
                    <a href="https://s3-ap-south-1.amazonaws.com/giddh-app-builds/giddh-{{apkVersion}}.dmg" target="_blank" title="macOS app">
                        <i class="fa fa-apple"></i> MacOS</a>
                </li>
                <li>
                    <a href="https://s3-ap-south-1.amazonaws.com/giddh-app-builds/giddh%20Setup%20{{apkVersion}}.exe" target="_blank" title="windows app">
                        <i class="fa fa-windows"></i> Windows</a>
                </li>
            </ul>
        </li>

</ng-template>
