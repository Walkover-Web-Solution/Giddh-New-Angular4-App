<div class="btn-group ledger-ellipse" dropdown dropdown placement="left" *ngIf="isMobileScreen">
    <button id="button-basic" dropdownToggle type="button" class="dropdown-toggle btn mr-0" aria-controls="dropdown-basic">
        <i class="icon-dots-three-vertical"></i>
    </button>
    <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
        <!-- <li role="menuitem"><a class="dropdown-item" href="javascript:void(0)" (click)="onOpenAdvanceSearch()">Advance Search</a></li> -->
        <li role="menuitem"><a class="dropdown-item" id="share-ledger" href="javascript:void(0)" (click)="showShareLedgerModal()">Share
                ledger</a></li>
        <li role="menuitem"><a class="dropdown-item" id="export-ledger-mobile-view" href="javascript:void(0)"
                (click)="showExportLedgerModal()">Export</a></li>
    </ul>
</div>
<hamburger-menu [pageHeading]="(lc?.activeAccount?.name) ? lc?.activeAccount?.name + ' A/c' : ''"></hamburger-menu>
<section class="container ledger-section" [hidden]="isShowLedgerColumnarReportTable">
    <!-- region ledger table-->
    <div class="ledg-head transactions-page mt-15 pos-rel">
        <!-- region ledger header -->
        <div class="clearfix row mb-15">
            <!-- region currency toggle -->
            <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 search-ledger-wrapper">
                <div class="d-flex search-ledger-field">
                    <!-- please remove hidden attribute after functionality works -->
                    <div class="select-all-icons" *ngIf="checkedTrxWhileHovering.length > 0 && isMobileScreen">
                        <div *ngIf="visibleTransactionTypeMobile && checkedTrxWhileHovering.length > 0">
                            <input id="select-all-entries" type="checkbox" [(ngModel)]="debitCreditSelectAll"
                                (click)="selectAllEntries($event, visibleTransactionTypeMobile)"> Select All
                        </div>
                        <div class="d-flex ml-15">
                            <button class="btn btn-danger" id="delete-ledger-mobile-view" (click)="performBulkAction('delete')" container="body"
                                tooltip="Delete" [placement]="'top'"><i class="fa fa-trash-o"></i>
                            </button>

                            <button class="btn btn-warning" id="generate-invoice-mobile-view" (click)="performBulkAction('generate')" container="body"
                                tooltip="Generate Voucher" [placement]="'top'"><i class="icon-generate-invoice"></i>
                            </button>

                            <button class="btn btn-success mr-0" id="attach-file-mobile-view"
                                (click)="performBulkAction('upload', BulkUploadfileInput)" container="body"
                                tooltip="Attach File" [placement]="'top'"><i class="icon-file-path"></i>
                            </button>
                            <input type="file" #BulkUploadfileInput style="display: none;" name="BulkUploadfileInput"
                                id="BulkUploadfileInput" [options]="fileUploadOptions" ngFileSelect
                                [uploadInput]="uploadInput" (uploadOutput)="onUploadOutput($event)">
                        </div>
                    </div>
                    <!-- [ngClass]="{'class-1':condition1==condition2, 'class-2': condition3==condition4}" -->
                    <div class="single-search-box d-flex" *ngIf="checkedTrxWhileHovering.length === 0">
                        <span
                            [ngClass]="{'default-width-input': (searchText || isAdvanceSearchImplemented) && isMobileScreen,
                                         'full-width-input': (searchText || !isAdvanceSearchImplemented) && isMobileScreen }">
                            <input type="search" id="ledger-search" [(ngModel)]="searchText" name="searchText" class="form-control"
                                (keyup)="search(searchText)" placeholder="Search ledger" #ledgerSearchTerms>
                            <i class="icon-search1 pos-abs"></i>
                        </span>
                        <a class="cp mr-l1 clear-filter-btn"
                            *ngIf="(searchText || isAdvanceSearchImplemented) && isMobileScreen" href="javascript:;"
                            (click)="resetAdvanceSearch()" tooltip="Reset Advance Search">
                            <i aria-hidden="true" class="icon-refresh"></i> Clear Filter
                        </a>
                    </div>

                    <!-- Functionality not working -->
                    <div class="ledger-datepicker" id="giddh-datepicker-mobile-view"  container="body" *ngIf="isMobileScreen">
                        <img (click)="showGiddhDatepicker($event)" src="{{imgPath}}calender-icon.svg">
                    </div>
                    <span class="input-wrapper ipad-view-datepicker">
                        <!-- <input type="text" class="form-control daterange_picker_ledger" daterangepicker
                            [options]="datePickerOptions" (applyDaterangepicker)="selectedDate($event)"
                            name="daterangeInput" /> -->
                        <input id="giddh-datepicker-ipad-view" type="text" name="selectedDateRange" (click)="showGiddhDatepicker($event)"
                            [value]="(selectedDateRangeUi) ? selectedDateRangeUi : ''"
                            class="giddh-datepicker date-range-picker" />
                    </span>
                    <span id="advance-filter" (click)="onOpenAdvanceSearch()" class="advance-icon d-flex advance-search-filter pointer"
                        [tooltip]="'Advance Search'" [placement]="'top'"
                        [ngStyle]="{'margin-left': checkedTrxWhileHovering.length === 0 ? '7px': '0px'}">
                        <span class="icon-advance-filter"></span>
                    </span>
                    <a class="cp mr-l1 clear-filter-btn" id="clear-filter" *ngIf="isAdvanceSearchImplemented && !isMobileScreen"
                        href="javascript:;" (click)="resetAdvanceSearch()" tooltip="Reset Advance Search">
                        <i aria-hidden="true" class="icon-refresh"></i> Clear Filter
                    </a>
                    <div class="d-flex xs-mb-1" *ngIf="checkedTrxWhileHovering.length > 0 && !isMobileScreen">

                        <button class="btn btn-danger" id="delete-ledger" (click)="performBulkAction('delete')" container="body"
                            tooltip="Delete" [placement]="'top'"><i class="fa fa-trash-o"></i>
                        </button>

                        <button class="btn btn-warning" id="generate-invoice" (click)="performBulkAction('generate')" container="body"
                            tooltip="Generate Voucher" [placement]="'top'"><i class="icon-generate-invoice"></i>
                        </button>

                        <button class="btn btn-success mr-0" id="attach-file" (click)="performBulkAction('upload', BulkUploadfileInput)"
                            container="body" tooltip="Attach File" [placement]="'top'"><i class="icon-file-path"></i>
                        </button>
                        <input type="file" #BulkUploadfileInput style="display: none;" name="BulkUploadfileInput"
                            id="BulkUploadfileInput" [options]="fileUploadOptions" ngFileSelect
                            [uploadInput]="uploadInput" (uploadOutput)="onUploadOutput($event)">
                    </div>

                </div>
            </div>

            <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 text-center daterngoption" *ngIf="!isMobileScreen">
                <!-- (hideDaterangepicker)="selectedDate($event)"  -->
                <div class="advanceSearchByDate date-advance-search">
                    <!-- <span class="icon-calender "></span> -->
                    <span class="input-wrapper">
                        <!-- <input type="text" class="form-control daterange_picker_ledger" daterangepicker
                            [options]="datePickerOptions" (applyDaterangepicker)="selectedDate($event)"
                            name="daterangeInput" /> -->
                        <input id="giddh-datepicker" type="text" name="selectedDateRange" (click)="showGiddhDatepicker($event)"
                            [value]="(selectedDateRangeUi) ? selectedDateRangeUi : ''"
                            class="giddh-datepicker date-range-picker" />
                    </span>
                </div>
                <!--<input date-range-picker="" id="daterange3" name="daterange3"-->
                <!--class="form-control date-picker date-range-picker ng-pristine ng-untouched ng-valid ng-isolate-scope ng-valid-required"-->
                <!--type="text" ng-model="cDate" options="opts" required="">-->
            </div>
            <!-- endregion -->
            <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 text-right C-flex-end search-options" *ngIf="!isMobileScreen">
                <div class="d-flex xs-width-100 ledger-head-top">

                    <div *ngIf="isLedgerAccountAllowsMultiCurrency" class="advanc-search-block">
                        <span class="mr-15 d-inilne-block font-14">{{ baseCurrencyDetails?.code }}</span>

                        <div class="toggle d-inline-block currencyToggler" data-key="disabled">

                            <input type="checkbox" class="toggle-checkbox" id="disabled"
                                [(ngModel)]="currencyTogglerModel" (click)="toggleCurrency($event)">

                            <label class="toggle-label" for="disabled">
                                <span class="toggle-inner"></span>
                                <span class="toggle-switch"></span>
                            </label>

                        </div>

                        <span class="ml-15 d-inline-block font-14">{{ foreignCurrencyDetails?.code }}</span>
                    </div>

                    <div class="d-flex">

                        <a href="javascript:void(0)" id="share" class="icomoon_ico d-flex align-items-center"
                            [tooltip]="'Share Ledger'" [placement]="'top'" (click)="showShareLedgerModal()">
                            <i class="fa icon-ledger-path" style="line-height: 0px"></i>
                        </a>
                        <a class="icomoon_ico d-flex align-items-center mr-0" id="export-ledger" href="javascript:void(0)" title=""
                            [tooltip]="'Export'" [placement]="'top'" (click)="showExportLedgerModal()">
                            <i class="icon-ledger-union-5" style="line-height: 0px"></i>
                        </a>

                    </div>

                </div>
            </div>
        </div>
        <div *ngIf="isLedgerAccountAllowsMultiCurrency && isMobileScreen" class="advanc-search-block
            mt-05">
            <span class="mr-15 d-inilne-block font-14">{{ baseCurrencyDetails?.code }}</span>

            <div class="toggle d-inline-block currencyToggler" data-key="disabled">

                <input type="checkbox" class="toggle-checkbox" id="disabled-mobile-view" [(ngModel)]="currencyTogglerModel"
                    (click)="toggleCurrency($event)">

                <label id="toggle" class="toggle-label" for="disabled-mobile-view">
                    <span class="toggle-inner"></span>
                    <span class="toggle-switch"></span>
                </label>

            </div>

            <span class="ml-15 d-inline-block font-14">{{ foreignCurrencyDetails?.code }}</span>
        </div>
        <!-- endregion -->
        <div class="custom-tabs mt-2 mb-2">
            <tabset>
                <ul class="nav nav-tabs pt-0">
                    <li [ngClass]="{'active': visibleTransactionTypeMobile === 'all'}">
                        <a href="javascript:void(0)" id="ledger-all-tab" (click)="toggleMobileTransactionType('all');">All</a>
                    </li>
                    <li role="presentation" [ngClass]="{'active': visibleTransactionTypeMobile === 'debit'}">
                        <a href="javascript:void(0)" id="ledger-debit-tab" (click)="toggleMobileTransactionType('debit')">Debit</a>
                    </li>
                    <li role="presentation" [ngClass]="{'active': visibleTransactionTypeMobile === 'credit'}">
                        <a href="javascript:void(0)" id="ledger-credit-tab" (click)="toggleMobileTransactionType('credit')">Credit</a>
                    </li>
                </ul>
            </tabset>
        </div>

        <!-- region bank ledgers-->
        <div class="clearfix"></div>
        <h1 class="mr-t2 primary_clr" *ngIf="isBankTransactionLoading">Loading Transactions...</h1>
        <section id="eledgerwrap" class="mr-t2" *ngIf="lc.showEledger">
            <div class="alert alert-danger ledger-book fade in pr" style="padding-right:15px">
                <button type="button" class="close">
                    <span style="font-size:12px;font-weight:normal"
                        (click)="lc.showEledger = !lc.showEledger">Close</span>
                </button>

                <table class="table ledgerTable transaction-mapped-table" style="margin-bottom:0">
                    <thead>
                        <th class="nopad top-head-table" colspan="6">
                            <div class="clearfix ldgTheadL">
                                <h3 class="ledgerHead">
                                    <span>Transactions from mapped account</span>
                                </h3>
                            </div>
                        </th>
                    </thead>
                    <tbody>
                        <tr>
                            <td width="100%" colspan="100%" class="ledger-head transaction-mapped">
                                <table class="table" width="100%">
                                    <tr>
                                        <th colspan="6">Debit <span class="pull-right text-gray">Dr</span></th>
                                        <th colspan="6">Credit <span class="pull-right text-gray">Cr</span></th>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class="nopad bdrL bdrR hidden-xs transaction-mapped-head" style="width:50%" colspan="3">
                                <table class="table">
                                    <thead>
                                        <tr class="dgreyBg row">
                                            <th class="col-3 col-md-3 col-lg-3">Date
                                            </th>
                                            <th class="col-5 col-md-6 col-lg-6">Particular</th>
                                            <th class="col-4 col-md-3 col-lg-3 alR">Amount</th>
                                        </tr>
                                    </thead>
                                </table>
                            </td>
                            <!-- main left td end here -->
                            <td class="nopad bdrL bdrR hidden-xs transaction-mapped-head" style="width:50%" colspan="3">
                                <table class="table">
                                    <thead>
                                        <tr class="row">
                                            <th class="col-3 col-md-3 col-lg-3">Date
                                            </th>
                                            <th class="col-5 col-md-6 col-lg-6">Particular</th>
                                            <th class="col-4 col-md-3 col-lg-3 alR">Amount</th>
                                        </tr>
                                    </thead>
                                </table>
                            </td>
                            <!-- main right td end here -->
                        </tr>
                        <tr class="transaction-table-row">
                            <td class="nopad bdrL bdrR" colspan="3">
                                <ng-container *ngFor="let item of lc.bankTransactionsData; let i = index">
                                <table class="width100"
                                    (clickOutside)="hideBankLedgerPopup(true)" (click)="$event.stopPropagation()">
                                    <tbody>
                                    <ng-container *ngFor="let txn of item.transactions;">
                                        <ng-container *ngIf="txn.type === 'DEBIT'">
                                        <tr>
                                            <td class="width100 pos-rel upper-td">
                                                <table class="width100">
                                                    <tbody class="ledger-main">
                                                        <tr class="ledger-row row"
                                                            [ngClass]="{compoundEntry: txn.id === lc.selectedBankTxnUniqueName}">
                                                            <td class="col-3 col-md-3 col-lg-3">
                                                                <div class="d-flex align-items-center"
                                                                     >
                                                                    <span class="pl-05">
                                                                        <input type="checkbox" id="{{'transaction-mapped-select-entry-dr-' + i}}" (click)="selectEntryForBulkAction($event, item)" /></span>
                                                                    <span class="ml-05">
                                                                        <input class="form-control" [maxlength]="10"
                                                                            autocomplete="off" name="bsdateledger"
                                                                            type="text" [(ngModel)]="item.entryDate"
                                                                            bsDatepicker
                                                                            [bsConfig]="{ dateInputFormat: giddhDateFormat }"
                                                                            [outsideClick]="true"></span>
                                                                </div>
                                                            </td>
                                                            <td
                                                                class="col-5 col-md-6 col-lg-6 select2-parent select2-ledger">
                                                                <div class="w-100" *ngIf="txn.type === 'DEBIT'"
                                                                    (click)="showBankLedgerPopup(txn, item);">
                                                                    <sh-select [options]="searchResults"
                                                                        [(ngModel)]="txn.particular"
                                                                        [isPaginationEnabled]="true" (scrollEnd)="handleScrollEnd()"
                                                                        (dynamicSearchedQuery)="onSearchQueryChanged($event)"
                                                                        [notFoundMsg]="noResultsFoundLabel"
                                                                        [enableDynamicSearch]="true"
                                                                        (selected)="selectAccount($event,txn)"
                                                                        [placeholder]="'Select Accounts'"
                                                                        [notFoundLink]="true"
                                                                        (noResultsClicked)="showQuickAccountModal()"
                                                                        [showClear]="false" [multiple]="false"
                                                                        [ItemHeight]="67"
                                                                        [useInBuiltFilterForFlattenAc]="true">
                                                                        <ng-template #optionTemplate
                                                                            let-option="option">
                                                                            <ng-container
                                                                                *ngIf="!option.additional?.stock">
                                                                                <a href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                    style="border-bottom: 1px solid #ccc;">
                                                                                    <div class="item">{{ option.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{ option.additional?.uniqueName }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="option.additional?.stock">
                                                                                <a href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                    style="border-bottom: 1px solid #ccc;">
                                                                                    <div class="item">{{ option.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{ option.additional?.uniqueName }}
                                                                                    </div>
                                                                                    <div class="item-stock">Stock:
                                                                                        {{ option.additional?.stock.name }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                        </ng-template>
                                                                    </sh-select>
                                                                    <ul class="no-result-template"
                                                                        *ngIf="lc.noAccountChosenForNewEntry">
                                                                        <li>Create New Account</li>
                                                                    </ul>
                                                                </div>
                                                            </td>

                                                            <td class="col-4 col-md-3 col-lg-3  pos-rel">
                                                                <input class="form-control alR" type="text" id="{{'enter-amount-dr-' + i}}"
                                                                    decimalDigitsDirective [DecimalPlaces]="2"
                                                                    [(ngModel)]="txn.amount"
                                                                    (input)="needToReCalculate.next(true)"
                                                                    (click)="blankLedgerAmountClick()"
                                                                    *ngIf="txn.type === 'DEBIT'"
                                                                    (click)="showBankLedgerPopup(txn, item);">
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <!--new ledge popup-->
                                                <div class="pos-abs entry-modal"
                                                    *ngIf="lc.showBankLedgerPanel && lc.currentBlankTxn?.id === txn.id && txn.type === 'DEBIT'">
                                                    <new-ledger-entry-panel #newLedPanel
                                                        [trxRequest]="advanceSearchRequest" [isBankTransaction]="true"
                                                        [blankLedger]="item" [currentTxn]="lc.currentBlankTxn"
                                                        [needToReCalculate]="needToReCalculate"
                                                        (changeTransactionType)="toggleTransactionType($event)"
                                                        [showTaxationDiscountBox]="lc.currentBlankTxn.showTaxationDiscountBox"
                                                        (saveBlankLedger)="saveBankTransaction()"
                                                        (clickedOutsideEvent)="hideBankLedgerPopup($event)"
                                                        (clickUnpaidInvoiceList)="clickUnpaidInvoiceList($event)"
                                                        [invoiceList]="invoiceList"
                                                        (getInvoiceListsForCreditNote)="getInvoiceListsForCreditNote($event)"
                                                        [isTouristSchemeApplicable]="isTouristSchemeApplicable">
                                                    </new-ledger-entry-panel>
                                                </div>
                                                <!-- end  -->
                                            </td>
                                        </tr>
                                        </ng-container>
                                    </ng-container>
                                    </tbody>
                                </table>
                                </ng-container>
                            </td>
                            <td colspan="3" class="nopad bdrL bdrR">
                                <ng-container *ngFor="let item of lc.bankTransactionsData; let i = index">
                                <table class="width100"
                                    (clickOutside)="hideBankLedgerPopup(true)" (click)="$event.stopPropagation()">
                                    <tbody>
                                    <ng-container *ngFor="let txn of item.transactions;" >
                                        <ng-container *ngIf="txn.type === 'CREDIT'">
                                        <tr >
                                            <td class="width100 pos-rel upper-td">
                                                <table class="width100">
                                                    <tbody class="ledger-main">
                                                        <tr class="ledger-row row">
                                                            <td class="col-3 col-md-3 col-lg-3">
                                                                <div class="d-flex align-items-center"
                                                                    >
                                                                    <span class="pl-05">
                                                                        <input type="checkbox" id="{{'transaction-mapped-select-entry-cr-' + i}}"[(ngModel)]="txn.isChecked"
                                                                            (click)="selectEntryForBulkAction($event, item)" />
                                                                    </span>
                                                                    <span class="ml-05">
                                                                        <input class="form-control" [maxlength]="10"
                                                                            name="bsDates" autocomplete="off"
                                                                            type="text" #cbs='bsDatepicker'
                                                                            [(ngModel)]="item.entryDate" bsDatepicker
                                                                            [bsConfig]="{ dateInputFormat: giddhDateFormat }"
                                                                            [outsideClick]="true">

                                                                    </span>
                                                                </div>
                                                            </td>
                                                            <td
                                                                class="col-5 col-md-6 col-lg-6 select2-parent select2-ledger ">
                                                                <div class="w-100" *ngIf="txn.type === 'CREDIT'"
                                                                    (click)="showBankLedgerPopup(txn, item);">
                                                                    <sh-select [options]="searchResults"
                                                                        [(ngModel)]="txn.particular"
                                                                        (selected)="selectAccount($event,txn)"
                                                                        [isPaginationEnabled]="true" (scrollEnd)="handleScrollEnd()"
                                                                        (dynamicSearchedQuery)="onSearchQueryChanged($event)"
                                                                        [notFoundMsg]="noResultsFoundLabel"
                                                                        [enableDynamicSearch]="true"
                                                                        [placeholder]="'Select Accounts'"
                                                                        [notFoundLink]="true"
                                                                        (noResultsClicked)="showQuickAccountModal()"
                                                                        [multiple]="false" [ItemHeight]="67"
                                                                        [showClear]="false"
                                                                        [useInBuiltFilterForFlattenAc]="true">
                                                                        <ng-template #optionTemplate
                                                                            let-option="option">
                                                                            <ng-container
                                                                                *ngIf="!option.additional?.stock">
                                                                                <a href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                    style="border-bottom: 1px solid #ccc;">
                                                                                    <div class="item">{{ option.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{ option.additional?.uniqueName }}
                                                                                    </div>
                                                                                    <!-- <span class="list-item" style="visibility: hidden;font-size:11px">&nbsp;</span> -->
                                                                                </a>
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="option.additional?.stock">
                                                                                <a href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                    style="border-bottom: 1px solid #ccc;">
                                                                                    <div class="item">{{ option.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{ option.additional?.uniqueName }}
                                                                                    </div>
                                                                                    <div class="item-stock">Stock:
                                                                                        {{ option.additional?.stock.name }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                        </ng-template>
                                                                    </sh-select>
                                                                    <ul class="no-result-template"
                                                                        *ngIf="lc.noAccountChosenForNewEntry">
                                                                        <li>Create New Account</li>
                                                                    </ul>
                                                                </div>
                                                            </td>

                                                            <td class="col-4 col-md-3 col-lg-3 pos-rel">
                                                                <input class="form-control alR" type="text"  id="{{'enter-amount-cr-' + i}}"
                                                                    decimalDigitsDirective [DecimalPlaces]="2"
                                                                    [(ngModel)]="txn.amount"
                                                                    (input)="needToReCalculate.next(true)"
                                                                    (click)="blankLedgerAmountClick()"
                                                                    *ngIf="txn.type === 'CREDIT'"
                                                                    (click)="showBankLedgerPopup(txn, item);">
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <!--new ledge popup-->
                                                <div class="pos-abs entry-modal"
                                                    *ngIf="lc.showBankLedgerPanel && lc.currentBlankTxn?.id === txn.id && txn.type === 'CREDIT'">
                                                    <new-ledger-entry-panel #newLedPanel
                                                        [trxRequest]="advanceSearchRequest" [isBankTransaction]="true"
                                                        [blankLedger]="item" [currentTxn]="lc.currentBlankTxn"
                                                        [needToReCalculate]="needToReCalculate"
                                                        (changeTransactionType)="toggleTransactionType($event)"
                                                        [showTaxationDiscountBox]="lc.currentBlankTxn.showTaxationDiscountBox"
                                                        (saveBlankLedger)="saveBankTransaction()"
                                                        (clickedOutsideEvent)="hideBankLedgerPopup($event)"
                                                        (clickUnpaidInvoiceList)="clickUnpaidInvoiceList($event)"
                                                        (getInvoiceListsForCreditNote)="getInvoiceListsForCreditNote($event)"
                                                        [invoiceList]="invoiceList">
                                                    </new-ledger-entry-panel>
                                                </div>
                                                <!-- end  -->
                                            </td>
                                        </tr>
                                        </ng-container>
                                    </ng-container>
                                    </tbody>
                                </table>
                                </ng-container>
                            </td>
                        </tr>
                    </tbody>
                    <!-- end main tbody -->
                    <tfoot>
                        <tr class="fw600 dgreyBg">
                            <td colspan="2" class="bdrL" style="width:36%">
                                <div class="pull-right" *ngIf="eLedgType == 'CREDIT'">
                                    C/F Balance
                                </div>
                            </td>
                            <td style="width:14%" class="bdrR alR">
                                <span *ngIf="eLedgType == 'CREDIT'">{{eDrBalAmnt | giddhCurrency}}</span>
                            </td>
                            <td colspan="2" style="width:36%" class="bdrL">
                                <div class="pull-right" *ngIf="eLedgType == 'DEBIT'">
                                    C/F Balance
                                </div>
                            </td>
                            <td style="width:14%" class="bdrR alR">
                                <span *ngIf="eLedgType == 'DEBIT'">{{eCrBalAmnt | giddhCurrency}}</span>
                            </td>
                        </tr>

                    </tfoot>
                    <!-- end main tfoot -->
                </table>
            </div>
        </section>
        <!-- endregion -->
        <!-- region account table-->
        <!-- Need to make this code correctly working -->
        <table class="col-sm-12 ledger-head mr-t1 width-100"
            *ngIf="!isMobileScreen || (isMobileScreen && visibleTransactionTypeMobile !== 'all')">
            <thead>
                <tr class="row">
                    <th [ngClass]="(Shown && !isMobileScreen) || (isMobileScreen && visibleTransactionTypeMobile === 'debit') ? 'active' : ''"
                        class="col-sm-6 hidden-xs sticky-header pr-0">
                        <b> {{lc.ledgerUnderStandingObj.text.dr}}</b>
                        <span class="dr-cr-category pull-right text-gray">Dr</span>
                    </th>
                    <th [ngClass]="(!Shown && !isMobileScreen) || (isMobileScreen && visibleTransactionTypeMobile === 'credit') ? 'active' : ''"
                        class="col-sm-6 hidden-xs sticky-header pl-0">
                        <b> {{lc.ledgerUnderStandingObj.text.cr}}</b>
                        <span class="dr-cr-category pull-right text-gray">Cr</span>
                    </th>
                </tr>
            </thead>
        </table>
        <!-- endregion -->
        <div class="mobile-ledger-view clearfix" *ngIf="isMobileScreen">
            <table *ngIf="allTransactionDates && allTransactionDates.length > 0">
                <tbody>
                <tr *ngFor="let transactionDate of allTransactionDates;">
                    <td class="border-none pt-0 pb-0">
                        <table width="100%">
                            <tr>
                                <td class="transction-date pl-15 pr-15 pt-05" colspan="2">{{transactionDate}}</td>
                            </tr>
                            <tr class="second-row" *ngFor="let transactions of allTransactionsList[transactionDate]; let i = index">
                                <td class="pl-15 pr-15 relative"
                                    [ngClass]="{compoundEntry: transactions.entryUniqueName === lc.selectedTxnUniqueName || transactions.isChecked}"
                                    tooltip="{{transactions.description}}"
                                    (mouseover)="entryHovered(transactions.entryUniqueName)"
                                    (mouseout)="selectedTrxWhileHovering = ''">
                                    <span class="pull-left account-holder-checkbox">
                                        <input type="checkbox" id="{{'mobile-view-select-entry-cr-' + i}}"
                                            [ngClass]="{'d-none': (selectedTrxWhileHovering !== transactions.entryUniqueName && !(transactions.isChecked) && checkedTrxWhileHovering.length === 0)}"
                                            class="d-none" [(ngModel)]="transactions.isChecked"
                                            (click)="entrySelected($event, transactions.entryUniqueName)">
                                    </span>
                                    <span class="account-holder-name">
                                        <span *ngIf="transactions.type === 'CREDIT'" class="text-gray mr-05">By</span>
                                        <span *ngIf="transactions.type === 'DEBIT'" class="text-gray mr-05">To</span>
                                        <span>{{ transactions?.inventory ? transactions?.particular?.name + ' (' + transactions?.inventory?.stock?.name + ')' : transactions?.particular?.name }}</span>
                                        <span class="download-invoice-ledger d-flex"
                                            *ngIf="transactions.attachedFileUniqueName"
                                            (click)="downloadAttachedFile(transactions.attachedFileUniqueName , $event)">
                                            <i class="icon-download-circle pull-left"></i>
                                        </span>
                                        <span class="download-invoice-ledger d-flex"
                                            *ngIf="transactions.voucherGenerated"
                                            (click)="downloadInvoice(transactions.voucherNumber, transactions.voucherGeneratedType, $event)">
                                            <i class="icon-download-circle pull-left"></i>
                                        </span>
                                    </span>
                                </td>
                                <td class="pl-15 pr-15 text-right">
                                    <div class="d-flex justify-content-end">
                                        <div>
                                            {{ transactions.currencySymbol }}{{ transactions.amount | giddhCurrency }}
                                            <p class="mb-0 amnt-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                                {{ transactions.convertedCurrencySymbol }}{{ transactions.convertedAmount | giddhCurrency }}
                                            </p>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                </tbody>
            </table>
            <!-- region pagination -->
            <div class="text-center mr-t2 page-count pa">
                <span class="grey ng-binding">{{ (lc.transactionData$ | async)?.totalItems }} transactions, </span>
                <span class="black ng-binding">{{ (lc.transactionData$ | async)?.totalPages }} pages</span>

                <div id="pagination" element-view-container-ref #paginationChild=elementviewcontainerref>
                    <!-- <pagination [totalItems]="(lc.transactionData$ | async)?.totalPages * (lc.transactionData$ | async)?.count" [itemsPerPage]="(lc.transactionData$ | async)?.count" [maxSize]="5" class="pagination-sm" [(ngModel)]="lc.currentPage" (pageChanged)="pageChanged($event)"
[boundaryLinks]="true">
</pagination> -->
                </div>

            </div>
            <!-- endregion -->
        </div>
        <!-- end mobile view -->
        <!-- region main transactions-->
        <div class="ledger-book" *ngIf="!isMobileScreen"
            [navigationWalker]="{horizontal:'hr-item',vertical:'vr-item', ignore: 'no-tree'}"
            #navigator="navigationWalker" #root (onReset)="initNavigator(navigator,root.children[0])"
            (onLeft)="onLeftArrow(navigator,$event)" (onRight)="onRightArrow(navigator,$event)">

            <!-- region debit transaction-->
            <div [ngClass]="Shown ? 'active' : ''" hr-item
                (ngInit)="initNavigator(navigator,$event.nativeElement); navigator.nextVertical();"
                class="left-col-new"
                [ngClass]="{bdrR: (lc.transactionData$ | async)?.debitTransactions.length >= (lc.transactionData$ | async)?.creditTransactions.length}">

                <!-- region debit transaction header-->
                <table class="width100 h-table table-head hidden-xs">
                    <thead>
                        <tr class="t-h-bg1 row">
                            <th class="col-xs-3 col-md-3 col-lg-3" width="25%">
                                <span class="cp">Date</span>
                            </th>
                            <th class="col-xs-5 col-md-6 col-lg-6" width="50%">Particular</th>
                            <th class="col-xs-4 col-md-3 col-lg-3 text-right" width="25%">Amount</th>
                        </tr>
                    </thead>
                </table>
                <!-- endregion -->


                <table class="width100 h-table">
                    <tbody>
                        <!-- region debit transaction if forwardedBalance -->
                        <tr class="ledger-row row" container="body" vr-item tabindex="-1"
                            *ngIf="ledgerTxnBalance?.forwardedBalance?.amount > 0 && ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT'">

                            <!--<td class="col-xs-1 text-center">-->
                            <!--<input type="checkbox" [(ngModel)]="debitSelectAll" (click)="selectAllEntries($event, 'debit')">-->
                            <!--</td>-->

                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Date">
                                <input type="checkbox" id="select-entries-date-cr" [(ngModel)]="debitSelectAll"
                                    *ngIf="checkedTrxWhileHovering.length > 0"
                                    (click)="selectAllEntries($event, 'debit')">
                            </td>
                            <td data-title="Particular" class="col-xs-5 col-md-6 col-lg-6">
                                <span *ngIf="(lc.transactionData$ | async)?.page === 1">To Balance B/F </span>
                            </td>
                            <td data-title="Amount" class="col-xs-4 col-md-3 col-lg-3 text-right">
                                <ng-container *ngIf="(lc.transactionData$ | async)?.page === 1">
                                <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT'" class="">
                                    {{ ledgerTxnBalance?.currencySymbol }}{{ ledgerTxnBalance?.forwardedBalance?.amount  | giddhCurrency }}
                                </span><br>
                                <span class="amnt-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedForwardedBalance?.amount | giddhCurrency}}
                                </span>
                                <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'CREDIT'" class="">0</span>

                                <!--              <p class="mb-0 amnt-total">$454</p>-->
                                </ng-container>
                            </td>
                        </tr>
                        <!-- endregion -->

                        <!-- region debit transaction if no forwardedBalance -->
                        <tr class="ledger-row row" container="body"
                            *ngIf="(ledgerTxnBalance?.forwardedBalance?.type !== 'DEBIT') || (ledgerTxnBalance?.forwardedBalance?.amount == 0)">

                            <!--<td class="col-xs-1 text-center"><input type="checkbox" [(ngModel)]="debitSelectAll"-->
                            <!--(click)="selectAllEntries($event, 'debit')"></td>-->

                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Select All">
                                <input type="checkbox" [(ngModel)]="debitSelectAll" id="select-entries-all-cr"
                                    *ngIf="checkedTrxWhileHovering.length > 0"
                                    (click)="selectAllEntries($event, 'debit')">
                            </td>
                            <td class="col-xs-5 col-md-6 col-lg-6"></td>
                            <td class="col-xs-4 col-md-3 col-lg-3"></td>
                        </tr>
                        <!-- endregion -->

                        <!-- region debit transaction loop over transactions -->
                        <tr vr-item tabindex="-1" class="ledger-row row"
                            *ngFor="let txn of (lc.transactionData$ | async)?.debitTransactions; let i = index;"
                            (dblclick)="showUpdateLedgerModal(txn)" (keydown.enter)="showUpdateLedgerModal(txn)"
                            [ngClass]="{compoundEntry: txn.entryUniqueName === lc.selectedTxnUniqueName || txn.isChecked}"
                            tooltip="{{txn.description}}" (mouseover)="entryHovered(txn.entryUniqueName)"
                            (mouseout)="selectedTrxWhileHovering = ''">

                            <!--<td class="col-xs-1 text-center">-->
                            <!---->
                            <!--</td>-->

                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Date">

                                <div class="d-flex align-items-center">
                                    <span style="float: left">
                                        <input type="checkbox" id="{{ 'select-entry-dr-' + i}}"
                                            [ngClass]="{'d-none': (selectedTrxWhileHovering !== txn.entryUniqueName && !(txn.isChecked) && checkedTrxWhileHovering.length === 0)}"
                                            class="d-none" [(ngModel)]="txn.isChecked"
                                            (click)="entrySelected($event, txn.entryUniqueName)" />
                                    </span>
                                    <span>{{ txn.entryDate }}</span>
                                </div>

                            </td>

                            <td class="col-xs-5 col-md-6 col-lg-6" data-title="Particular">
                                <div class="d-flex align-items-center justify-content-between w-100">

                                    <div class="ellp">
                                        To
                                        {{ txn.inventory ? txn.particular.name + ' (' + txn.inventory.stock.name + ')' : txn.particular.name }}
                                    </div>

                                    <span class="download-invoice-ledger d-flex" *ngIf="txn.attachedFileUniqueName"
                                        style="position: unset;align-items: center"
                                        (click)="downloadAttachedFile(txn.attachedFileUniqueName , $event)"
                                        tooltip="Download file : {{txn.attachedFileName}}" [placement]="'right'">
                                        <i class="icon-download-circle pull-left"
                                            style="font-size:15px;top: 0 !important;margin-top: 1px !important;"></i>
                                    </span>
                                    <span class="download-invoice-ledger d-flex" *ngIf="txn.voucherGenerated"
                                        style="position: unset;align-items: center"
                                        (click)="downloadInvoice(txn.voucherNumber, txn.voucherGeneratedType, $event)"
                                        tooltip="Download {{txn.voucherGeneratedType === 'sales' ? 'Invoice': 'Voucher'}} : {{txn.voucherNumber}}"
                                        [placement]="'right'">
                                        <i class="icon-download-circle pull-left"
                                            style="font-size:15px;top: 0 !important;margin-top: 1px !important;"></i>
                                    </span>
                                </div>
                            </td>

                            <td  [ngClass]="{'multicurrency-amount':isLedgerAccountAllowsMultiCurrency}"  class="col-xs-4 col-md-3 col-lg-3 pos-rel text-right" data-title="Amount">
                                {{ txn.currencySymbol }}{{ txn.amount | giddhCurrency }}

                                <p class="mb-0 amnt-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ txn.convertedCurrencySymbol }}{{ txn.convertedAmount | giddhCurrency }}</p>
                            </td>
                        </tr>
                        <!-- endregion -->
                    </tbody>
                </table>

                <!-- region blank ledger-->
                <table class="width100 h-table" no-tree (click)="$event.stopPropagation();" id="blank-ledger-container"
                    (clickOutside)="hideNewLedgerEntryPopup($event)">
                    <tbody>

                        <tr *ngFor="let txn of lc.blankLedger.transactions; let i = index">

                            <td class="width100 no-left-border" *ngIf="txn.type === 'DEBIT'">

                                <table class="width100">
                                    <tbody class="ledger-main">
                                        <tr class="ledger-row row" container="body">

                                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Date">
                                                <div class="d-flex align-items-center">
                                                    <span class="ledger-checkbox" style="float: left">
                                                        <!--<input type="checkbox"/>-->
                                                    </span>
                                                    <input type="text" name="ledgDate" [maxlength]="10"
                                                        #bs="bsDatepicker" class="form-control dateStep focusUnset"
                                                        style="padding-left: 7px !important;" bsDatepicker
                                                        [bsConfig]="{ dateInputFormat: giddhDateFormat }"
                                                        [(ngModel)]="lc.blankLedger.entryDate"
                                                        [placeholder]="lc.formatPlaceholder" [outsideClick]="true"
                                                        (ngModelChange)="getInvoiceListsForCreditNote(true)"
                                                        (click)="$event.stopPropagation()" autocomplete="off" />
                                                </div>
                                            </td>

                                            <td data-title="Particular"
                                                class="col-xs-5 col-md-6 col-lg-6 select2-parent select2-ledger"
                                                (click)="bs.hide();" (mousedown)="showNewLedgerEntryPopup(txn);">

                                                <div class="ledger-account-label d-flex">
                                                    <span *ngIf="( (!shDebit.isOpen && txn.particular) ||
                                                                (shDebit.isOpen && shDebit.filter))">To
                                                    </span>
                                                    <sh-select id="{{'select-account-dr-' + i}}" [idEl]="txn.id" #shDebit
                                                        [isPaginationEnabled]="true" (scrollEnd)="handleScrollEnd()"
                                                        (dynamicSearchedQuery)="onSearchQueryChanged($event)"
                                                        [enableDynamicSearch]="true" [notFoundMsg]="noResultsFoundLabel"
                                                        [options]="searchResults"
                                                        [(ngModel)]="txn.particular" vr-item tabindex="-1" #select
                                                        [showClear]="false" (keydown.enter)="onEnter(select,txn)"
                                                        (onShow)="isSelectOpen=true;bs.hide();"
                                                        (onHide)="onSelectHide()" (selected)="selectAccount($event,txn)"
                                                        (keydown)="keydownPressed($event)"
                                                        placeholder="To Select Accounts" [notFoundLink]="true"
                                                        (noResultsClicked)="toggleAsidePane(null, shDebit)"
                                                        [multiple]="false" [ItemHeight]="67"
                                                        [useInBuiltFilterForFlattenAc]="true">
                                                        <ng-template #optionTemplate let-option="option">
                                                            <ng-container *ngIf="!option.additional?.stock">
                                                                <a href="javascript:void(0)" class="list-item"
                                                                    style="border-bottom: 1px solid #ccc;">
                                                                    <div class="item">{{ option.label }}</div>
                                                                    <div class="item-unique">
                                                                        {{ option.additional?.uniqueName }}</div>
                                                                </a>
                                                            </ng-container>
                                                            <ng-container *ngIf="option.additional?.stock">
                                                                <a href="javascript:void(0)" class="list-item"
                                                                    style="border-bottom: 1px solid #ccc;">
                                                                    <div class="item">{{ option.label }}</div>
                                                                    <div class="item-unique">
                                                                        {{ option.additional?.uniqueName }}</div>
                                                                    <div class="item-stock">Stock:
                                                                        {{ option.additional?.stock.name }}</div>
                                                                </a>
                                                            </ng-container>
                                                        </ng-template>
                                                        <ng-template #notFoundLinkTemplate>
                                                            <a [ngClass]="{'active': keydownClassAdded}"
                                                                class="notfound-option" [keyboardShortcut]="'alt+c'"
                                                                (onShortcutPress)="toggleAsidePane(null, shDebit)">
                                                                <span class="pl-0"
                                                                    [ngClass]="{'active': keydownClassAdded}">Create
                                                                    New A/c</span>
                                                                <span>Alt+C</span>
                                                            </a>
                                                        </ng-template>
                                                    </sh-select>
                                                </div>
                                                <ul class="no-result-template" *ngIf="lc.noAccountChosenForNewEntry">
                                                    <li>Create New Account</li>
                                                </ul>


                                            </td>

                                            <td data-title="Amount" class="col-xs-4 col-md-3 col-lg-3 pos-rel">
                                                <input class="form-control alR" type="text"  id="{{'enter-bank-amount-dr-' + i}}"
                                                    [prefix]="selectedPrefixForCurrency"
                                                    [suffix]="selectedSuffixForCurrency" [mask]="inputMaskFormat"
                                                    [(ngModel)]="txn.amount" (input)="handleAmountInput(txn);"
                                                    (click)="showNewLedgerEntryPopup(txn);blankLedgerAmountClick()">
                                            </td>

                                        </tr>

                                    </tbody>
                                </table>

                                <!--new ledge popup-->
                                <div class="pos-abs entry-modal" (click)="shDebit?.hide()"
                                    *ngIf="lc.showNewLedgerPanel && lc.currentBlankTxn?.type === 'DEBIT' && lc.currentBlankTxn?.id === txn.id ">
                                    <new-ledger-entry-panel #newLedPanel class="" [blankLedger]="lc.blankLedger"
                                        [currentTxn]="lc.currentBlankTxn" [needToReCalculate]="needToReCalculate"
                                        [tcsOrTds]="tcsOrTds" [baseCurrencyDetails]="baseCurrencyDetails"
                                        [foreignCurrencyDetails]="foreignCurrencyDetails"
                                        [giddhBalanceDecimalPlaces]="giddhBalanceDecimalPlaces"
                                        [selectedCurrency]="selectedCurrency"
                                        [selectedPrefixForCurrency]="selectedPrefixForCurrency"
                                        [selectedSuffixForCurrency]="selectedSuffixForCurrency"
                                        [isLedgerAccountAllowsMultiCurrency]="isLedgerAccountAllowsMultiCurrency"
                                        [inputMaskFormat]="inputMaskFormat"
                                        (changeTransactionType)="toggleTransactionType($event)"
                                        [showTaxationDiscountBox]="lc.currentBlankTxn.showTaxationDiscountBox"
                                        (resetBlankLedger)="resetBlankTransaction()"
                                        (saveBlankLedger)="saveBlankTransaction()"
                                        (clickedOutsideEvent)="hideNewLedgerEntryPopup()"
                                        (getInvoiceListsForCreditNote)="getInvoiceListsForCreditNote($event)"
                                        (clickUnpaidInvoiceList)="clickUnpaidInvoiceList($event)"
                                        [invoiceList]="invoiceList"
                                        [shouldShowRcmTaxableAmount]="shouldShowRcmTaxableAmount"
                                        [shouldShowItcSection]="shouldShowItcSection"
                                        [isTouristSchemeApplicable]="isTouristSchemeApplicable">
                                    </new-ledger-entry-panel>
                                </div>

                            </td>
                        </tr>

                    </tbody>
                </table>
                <!-- endregion -->
            </div>
            <!-- endregion -->

            <!-- region credit transaction-->
            <div [ngClass]="isHide ? 'active' : 'right-col-new'" class="right-col-new" hr-item
                (ngInit)="initNavigator(navigator,$event.nativeElement); navigator.nextVertical();"
                [ngClass]="{bdrL: (lc.transactionData$ | async)?.debitTransactions.length < (lc.transactionData$ | async)?.creditTransactions.length}">
                <!-- region credit transaction header-->
                <table class="width100 h-table hidden-xs">
                    <thead>
                        <tr class="t-h-bg1 row">
                            <th class="col-xs-3 col-md-3 col-lg-3" width="25%">
                                <span class="cp">Date</span>
                            </th>
                            <th class="col-xs-5 col-md-6 col-lg-6" width="50%">Particular</th>
                            <th class="col-xs-4 col-md-3 col-lg-3 text-right" width="25%">Amount</th>
                        </tr>
                    </thead>
                </table>
                <!-- endregion -->

                <table class="width100 h-table">
                    <tbody>

                        <!-- region credit transaction if forwardedBalance -->
                        <tr class="ledger-row row" vr-item tabindex="-1"
                            *ngIf="ledgerTxnBalance?.forwardedBalance?.amount > 0 && ledgerTxnBalance?.forwardedBalance?.type === 'CREDIT'">

                            <!--<td class="col-xs-1 text-center">-->
                            <!--<input type="checkbox" [(ngModel)]="creditSelectAll" (click)="selectAllEntries($event,'credit')">-->
                            <!--</td>-->

                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Date">
                                <input type="checkbox" id="select-all-entries-dr" [(ngModel)]="creditSelectAll"
                                    *ngIf="checkedTrxWhileHovering.length > 0"
                                    (click)="selectAllEntries($event,'credit')">
                            </td>
                            <td data-title="B/F Balance" class="col-xs-5 col-md-6 col-lg-6">
                                <span *ngIf="(lc.transactionData$ | async)?.page === 1"> By Balance B/F </span>
                            </td>
                            <td data-title="Amount" class="col-xs-4 col-md-3 col-lg-3 text-right">
                                <ng-container *ngIf="(lc.transactionData$ | async)?.page === 1">
                                <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'CREDIT'">
                                    {{ ledgerTxnBalance?.currencySymbol }}{{ ledgerTxnBalance?.forwardedBalance?.amount | giddhCurrency}}
                                </span><br>
                                <span class="amnt-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol }}{{ledgerTxnBalance?.convertedForwardedBalance?.amount | giddhCurrency }}
                                </span>
                                <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT'">0</span>
                                <!--              <p class="mb-0 amnt-total">$454</p>-->
                                </ng-container>
                            </td>
                        </tr>
                        <!-- endregion -->

                        <!-- region credit transaction no forwardedBalance -->
                        <tr class="ledger-row row"
                            *ngIf="ledgerTxnBalance?.forwardedBalance?.type !== 'CREDIT' || (ledgerTxnBalance?.forwardedBalance?.amount == 0)">

                            <!--<td class="col-xs-1 text-center"><input type="checkbox" [(ngModel)]="creditSelectAll"-->
                            <!--(click)="selectAllEntries($event,'credit')"></td>-->

                            <td class="col-xs-3 col-md-3 col-lg-3">
                                <input type="checkbox"  id="select-all-entries-credit" [(ngModel)]="creditSelectAll"
                                    *ngIf="checkedTrxWhileHovering.length > 0"
                                    (click)="selectAllEntries($event,'credit')">
                            </td>
                            <td class="col-xs-5 col-md-6 col-lg-6"></td>
                            <td class="col-xs-4 col-md-3 col-lg-3">
                            </td>
                        </tr>
                        <!-- endregion -->

                        <!-- region credit transaction loop over transactions -->
                        <tr class="ledger-row row" *ngFor="let txn of (lc.transactionData$ | async)?.creditTransactions; let i = index"
                            (dblclick)="showUpdateLedgerModal(txn)" vr-item tabindex="-1"
                            (keydown.enter)="showUpdateLedgerModal(txn)"
                            [ngClass]="{compoundEntry: txn.entryUniqueName === lc.selectedTxnUniqueName || txn.isChecked}"
                            tooltip="{{txn.description}}" data-toggle="tooltip"
                            (mouseover)="entryHovered(txn.entryUniqueName)" (mouseout)="selectedTrxWhileHovering = ''">

                            <!--<td class="col-xs-1 text-center">-->
                            <!---->
                            <!--</td>-->

                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Date">

                                <div class="d-flex align-items-center">
                                    <span class="ledger-checkbox" style="float: left">

                                        <input type="checkbox" id="{{'select-entry-cr-' + i }}"
                                            [ngClass]="{'d-none': (selectedTrxWhileHovering !== txn.entryUniqueName && !(txn.isChecked) && checkedTrxWhileHovering.length === 0)}"
                                            class="d-none" [(ngModel)]="txn.isChecked"
                                            (click)="entrySelected($event, txn.entryUniqueName)" />

                                    </span>
                                    <span>{{ txn.entryDate }}</span>
                                </div>

                            </td>

                            <td class="col-xs-5 col-md-6 col-lg-6" data-title="Particular">

                                <div class="d-flex align-items-center justify-content-between w-100">
                                    <div class="ellp">
                                        By
                                        {{ txn.inventory ? txn.particular.name + ' (' + txn.inventory.stock.name + ')' : txn.particular.name }}
                                    </div>

                                    <span class="download-invoice-ledger d-flex" *ngIf="txn.attachedFileUniqueName"
                                        style="position: unset;align-items: center"
                                        (click)="downloadAttachedFile(txn.attachedFileUniqueName , $event)"
                                        tooltip="Download file : {{txn.attachedFileName}}" [placement]="'right'">
                                        <i class="icon-download-circle pull-left"
                                            style="font-size:15px;top: 0 !important;margin-top: 1px !important;"></i>
                                    </span>
                                    <span class="download-invoice-ledger d-flex" *ngIf="txn.voucherGenerated"
                                        style="position: unset;align-items: center"
                                        (click)="downloadInvoice(txn.voucherNumber, txn.voucherGeneratedType, $event)"
                                        tooltip="Download {{txn.voucherGeneratedType === 'sales' ? 'Invoice': 'Voucher'}} : {{txn.voucherNumber}}"
                                        [placement]="'right'">
                                        <i class="icon-download-circle pull-left"
                                            style="font-size:15px;top: 0 !important;margin-top: 1px !important;"></i>
                                    </span>
                                </div>
                            </td>

                            <td  [ngClass]="{'multicurrency-amount':isLedgerAccountAllowsMultiCurrency}"  data-title="Amount" class="col-xs-4 col-md-3 col-lg-3 pos-rel text-right">
                                {{ txn.currencySymbol }} {{txn.amount | giddhCurrency}}
                                <p class="mb-0 amnt-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ txn.convertedCurrencySymbol }}{{ txn.convertedAmount | giddhCurrency}}
                                </p>

                            </td>
                        </tr>
                        <!-- endregion -->
                    </tbody>
                </table>

                <!-- region blank ledger-->
                <table class="width100 " no-tree (clickOutside)="hideNewLedgerEntryPopup($event)"
                    (click)="$event.stopPropagation()">
                    <tbody>

                        <tr *ngFor="let txn of lc.blankLedger.transactions; let i = index">

                            <td class="width100" *ngIf="txn.type === 'CREDIT'">

                                <table class="width100 h-table">
                                    <tbody class="ledger-main">
                                        <tr class="ledger-row row" container="body">

                                            <!--<td class="col-xs-1 text-center">-->
                                            <!---->
                                            <!--</td>-->

                                            <td class="col-xs-3 col-md-3 col-lg-3" data-title="Date">

                                                <div class="d-flex align-items-center">
                                                    <span class="ledger-checkbox" style="float: left">
                                                        <!--<input type="checkbox"/>-->
                                                    </span>
                                                    <input type="text" name="bsdateledger" [maxlength]="10"
                                                        #bsd='bsDatepicker' class="form-control dateStep focusUnset"
                                                        [outsideClick]="true" style="padding-left: 7px !important;"
                                                        bsDatepicker [bsConfig]="{ dateInputFormat: giddhDateFormat }"
                                                        [(ngModel)]="lc.blankLedger.entryDate"
                                                        [placeholder]="lc.formatPlaceholder" autocomplete="off" />
                                                </div>

                                            </td>
                                            <td class="col-xs-5 col-md-6 col-lg-6 select2-parent select2-ledger "
                                                data-title="Particular" (click)="bsd.hide()"
                                                (mousedown)="showNewLedgerEntryPopup(txn);">

                                                <div class="ledger-account-label d-flex">
                                                    <span *ngIf="(
                                                        (!shCredit.isOpen && txn.particular) ||
                                                        (shCredit.isOpen && shCredit.filter))">By </span>

                                                    <sh-select id="{{'select-account-cr-' + i}}" [idEl]="txn.id" #shCredit
                                                        [options]="searchResults" vr-item tabindex="-1"
                                                        [isPaginationEnabled]="true" (scrollEnd)="handleScrollEnd()"
                                                        (dynamicSearchedQuery)="onSearchQueryChanged($event)"
                                                        [enableDynamicSearch]="true" [notFoundMsg]="noResultsFoundLabel"
                                                        #select (keydown.enter)="onEnter(shCredit,txn)"
                                                        (onShow)="isSelectOpen=true;bsd.hide()"
                                                        (onHide)="onSelectHide()" [(ngModel)]="txn.particular"
                                                        (selected)="selectAccount($event,txn)" [showClear]="false"
                                                        placeholder="By Select Accounts"
                                                        (keydown)="keydownPressed($event)" [notFoundLink]="true"
                                                        (noResultsClicked)="toggleAsidePane(null, shCredit)"
                                                        [multiple]="false" [ItemHeight]="67"
                                                        [useInBuiltFilterForFlattenAc]="true">
                                                        <ng-template #optionTemplate let-option="option">
                                                            <ng-container *ngIf="!option.additional?.stock">
                                                                <a href="javascript:void(0)" class="list-item"
                                                                    style="border-bottom: 1px solid #ccc;">
                                                                    <div class="item">{{ option.label }}</div>
                                                                    <div class="item-unique">
                                                                        {{ option.additional?.uniqueName }}</div>
                                                                </a>
                                                            </ng-container>
                                                            <ng-container *ngIf="option.additional?.stock">
                                                                <a href="javascript:void(0)" class="list-item"
                                                                    style="border-bottom: 1px solid #ccc;">
                                                                    <div class="item">{{ option.label }}</div>
                                                                    <div class="item-unique">
                                                                        {{ option.additional?.uniqueName }}</div>
                                                                    <div class="item-stock">Stock:
                                                                        {{ option.additional?.stock.name }}</div>
                                                                </a>
                                                            </ng-container>
                                                        </ng-template>
                                                        <ng-template #notFoundLinkTemplate>
                                                            <a [ngClass]="{'active': keydownClassAdded}"
                                                                class="notfound-option" [keyboardShortcut]="'alt+c'"
                                                                (onShortcutPress)="toggleAsidePane(null, shCredit)">
                                                                <span class="pl-0"
                                                                    [ngClass]="{'active': keydownClassAdded}">Create
                                                                    New A/c</span>
                                                                <span>Alt+C</span>
                                                            </a>
                                                        </ng-template>
                                                    </sh-select>

                                                </div>


                                                <ul class="no-result-template" *ngIf="lc.noAccountChosenForNewEntry">
                                                    <li>Create New Account</li>
                                                </ul>
                                            </td>

                                            <td class="col-xs-4 col-md-3 col-lg-3 pos-rel" data-title="Amount">
                                                <input class="form-control alR" type="text"  id="enter-bank-amount-cr"
                                                    [prefix]="selectedPrefixForCurrency"
                                                    [suffix]="selectedSuffixForCurrency" [mask]="inputMaskFormat"
                                                    [(ngModel)]="txn.amount" (input)="handleAmountInput(txn);"
                                                    (click)="showNewLedgerEntryPopup(txn);blankLedgerAmountClick()">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <!--new ledge popup-->
                                <div class="pos-abs entry-modal" (click)="shCredit?.hide()"
                                    (keydown)="$event.stopPropagation()"
                                    *ngIf="lc.showNewLedgerPanel && lc.currentBlankTxn?.type === 'CREDIT' && lc.currentBlankTxn?.id === txn.id ">
                                    <new-ledger-entry-panel #newLedPanel class="" [blankLedger]="lc.blankLedger"
                                        [currentTxn]="lc.currentBlankTxn" [needToReCalculate]="needToReCalculate"
                                        [tcsOrTds]="tcsOrTds" [baseCurrencyDetails]="baseCurrencyDetails"
                                        [foreignCurrencyDetails]="foreignCurrencyDetails"
                                        [selectedCurrency]="selectedCurrency"
                                        [giddhBalanceDecimalPlaces]="giddhBalanceDecimalPlaces"
                                        [selectedPrefixForCurrency]="selectedPrefixForCurrency"
                                        [selectedSuffixForCurrency]="selectedSuffixForCurrency"
                                        [inputMaskFormat]="inputMaskFormat"
                                        [isLedgerAccountAllowsMultiCurrency]="isLedgerAccountAllowsMultiCurrency"
                                        (changeTransactionType)="toggleTransactionType($event)"
                                        [showTaxationDiscountBox]="lc.currentBlankTxn.showTaxationDiscountBox"
                                        (resetBlankLedger)="resetBlankTransaction()"
                                        (saveBlankLedger)="saveBlankTransaction()"
                                        (clickedOutsideEvent)="hideNewLedgerEntryPopup()"
                                        (clickUnpaidInvoiceList)="clickUnpaidInvoiceList($event)"
                                        (getInvoiceListsForCreditNote)="getInvoiceListsForCreditNote($event)"
                                        [invoiceList]="invoiceList"
                                        [shouldShowRcmTaxableAmount]="shouldShowRcmTaxableAmount"
                                        [shouldShowItcSection]="shouldShowItcSection"
                                        [isTouristSchemeApplicable]="isTouristSchemeApplicable">
                                    </new-ledger-entry-panel>
                                </div>

                            </td>
                        </tr>

                    </tbody>
                </table>
                <!-- endregion -->

            </div>
            <!--endregion-->

            <!-- region footer-->
            <div style="width: 100%">
                <table class="ledger-footer-1" style="width:50%;left:0;bottom:0;float: left;">
                    <tbody>

                        <tr class="total-col">

                            <td colspan="12" class="col-xs-12 text-right white h32"
                                style="padding-right:10px !important">

                                <span *ngIf="ledgerTxnBalance?.closingBalance?.type === 'CREDIT'"
                                    [tooltip]="lc.ledgerUnderStandingObj.balanceText.cr" [placement]="'left'">
                                    <!-- To  -->

                                    To Balance C/F:
                                    <span class="digit-blue">
                                        {{ ledgerTxnBalance?.currencySymbol }}{{ ledgerTxnBalance?.closingBalance?.amount  | giddhCurrency }}
                                    </span>

                                </span>

                            </td>

                        </tr>

                        <tr class="total-col">

                            <td colspan="12" class="col-xs-12 text-right white h32 border-top"
                                style="padding-right:10px !important;">

                                <div class="d-flex" style="flex-direction: column;">

                                    <span class="bdrT ng-binding" style="padding: 1px 0;">
                                        {{ ledgerTxnBalance?.currencySymbol }}{{lc.reckoningDebitTotal  | giddhCurrency }}
                                    </span>

                                    <span class="bdrT ng-binding text-gray" style="padding: 1px 0;"
                                        *ngIf="isLedgerAccountAllowsMultiCurrency">
                                        {{ ledgerTxnBalance?.convertedCurrencySymbol }}{{lc.convertedReckoningDebitTotal  | giddhCurrency }}
                                    </span>
                                </div>

                            </td>

                        </tr>
                    </tbody>
                </table>

                <table class=" ledger-footer-1 " style="width:50%;right:0;bottom:0;">
                    <tbody>

                        <tr class="total-col">

                            <td colspan="12" class="col-xs-12 text-right white h32"
                                style="padding-right:10px !important">
                                <span *ngIf="ledgerTxnBalance?.closingBalance?.type === 'DEBIT'"
                                    [tooltip]="lc.ledgerUnderStandingObj.balanceText.dr" [placement]="'left'">
                                    <!-- By -->
                                    By Balance C/F:
                                    <span class="digit-blue">
                                        {{ ledgerTxnBalance?.currencySymbol }}{{ledgerTxnBalance?.closingBalance?.amount  | giddhCurrency}}
                                    </span>
                                </span>
                            </td>

                        </tr>

                        <tr class="total-col">
                            <td colspan="12" class="col-xs-12 text-right white h32 border-top"
                                style="padding-right:10px !important;">

                                <div class="d-flex" style="flex-direction: column;">
                                    <span class="bdrT" style="padding: 1px 0;">
                                        {{ ledgerTxnBalance?.currencySymbol }}{{lc.reckoningCreditTotal | giddhCurrency }}
                                    </span>

                                    <span class="bdrT text-gray" *ngIf="isLedgerAccountAllowsMultiCurrency"
                                        style="padding: 1px 0;">
                                        {{ ledgerTxnBalance?.convertedCurrencySymbol }}{{lc.convertedReckoningCreditTotal | giddhCurrency }}
                                    </span>
                                </div>

                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- endregion -->

            <!-- region pagination -->
            <div class="text-center mr-t2 page-count pa">
                <span class="grey ng-binding">{{ (lc.transactionData$ | async)?.totalItems }} transactions, </span>
                <span class="black ng-binding">{{ (lc.transactionData$ | async)?.totalPages }} pages</span>
                <div id="pagination" element-view-container-ref #paginationChild=elementviewcontainerref>
                    <!-- <pagination [totalItems]="(lc.transactionData$ | async)?.totalPages * (lc.transactionData$ | async)?.count" [itemsPerPage]="(lc.transactionData$ | async)?.count" [maxSize]="5" class="pagination-sm" [(ngModel)]="lc.currentPage" (pageChanged)="pageChanged($event)"
[boundaryLinks]="true">
</pagination> -->
                </div>

            </div>
            <!-- endregion -->
        </div>
        <!--endregion-->
    </div>
    <!-- endregion -->

</section>

<div class="container" *ngIf="!isShowLedgerColumnarReportTable">
    <div>
        <div class="text-right mr-t1" [hidden]="!isBankOrCashAccount">
            <button [hidden]="!closingBalanceBeforeReconcile || showLoader" class="btn btn-primary btn-sm mr-0"
                (click)="getReconciledBack();">Back
            </button>
            <div *ngIf="closingBalanceBeforeReconcile  showLoader" class="box balance-detail mr-t2 mr-b2 clearfix text-center">
                <div class="row">
                    <div class="col-md-6 col-sm-6 col-12 text-right">Balance as per bank
                        <h3 class="fs20 primary_clr">{{reconcileClosingBalanceForBank?.amount}}
                            {{reconcileClosingBalanceForBank?.type}}
                        </h3>
                    </div>
                    <div class="col-md-6 col-sm-6 col-12 text-left">Pending cheque
                        <h3 class="fs20 primary_clr">{{closingBalanceBeforeReconcile?.amount}}
                            {{closingBalanceBeforeReconcile?.type}}
                        </h3>
                    </div>
                </div>
            </div>
            <button [hidden]="closingBalanceBeforeReconcile || showLoader" class="btn btn-primary btn-sm mr-0"
                (click)="getReconciliation();">Reconciliation
            </button>
        </div>
    </div>
</div>

<!-- region total section -->
<!-- commented due to API  -->
<div class="transaction-in-short" *ngIf="!isShowLedgerColumnarReportTable">
    <div class="container">
        <section class="ledger-stat mrT3"
            *ngIf="!(showLoader) && (lc.transactionData$ | async)?.debitTransactions.length > 0 || (lc.transactionData$ | async)?.creditTransactions.length > 0">

            <div class="row">
                <div class="col-sm-3 col-xs-12 stat-block">
                    <div class="ledger-state-box">
                        <h1>Total Transactions
                            <span class="digit-blue">{{(lc.transactionData$ | async)?.debitTransactionsCount + (lc.transactionData$ |
                async)?.creditTransactionsCount}}</span>
                        </h1>
                        <span class=" mrR2 greyTextClr">Debit <span
                                class="digit-blue">{{(lc.transactionData$ | async)?.debitTransactionsCount}}</span></span><br>
                        <span class=" mrR2 greyTextClr">Credit <span class="digit-blue">
                                {{(lc.transactionData$ | async)?.creditTransactionsCount}}</span></span>
                    </div>
                </div>
                <div class="col-sm-3 col-xs-12 stat-block">
                    <div class="ledger-state-box">
                        <h1>Opening Balance</h1>

                        <h3 class="digit-blue">
                            {{ ledgerTxnBalance?.currencySymbol}}{{ledgerTxnBalance?.forwardedBalance?.amount | giddhCurrency}}
                            {{ ledgerTxnBalance?.forwardedBalance?.amount > 0 ? (ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT' ? 'Dr' : 'Cr') : '' }}
                        </h3>

                        <h3 class="digit-blue font-12 subTotal" *ngIf="isLedgerAccountAllowsMultiCurrency">
                            {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedForwardedBalance?.amount | giddhCurrency}}
                            {{ ledgerTxnBalance?.convertedForwardedBalance?.amount > 0 ? (ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT' ? 'Dr' : 'Cr') : '' }}
                        </h3>

                    </div>
                </div>

                <div class="col-sm-3 col-xs-12 stat-block">
                    <div class="ledger-state-box">

                        <h1 class="">Net Total</h1>

                        <div class="d-flex" style="justify-content: space-between">

                            <div *ngIf="ledgerTxnBalance?.creditTotal > ledgerTxnBalance?.debitTotal">
                                <h3 class="digit-blue">
                                    {{ ledgerTxnBalance?.currencySymbol}}{{ledgerTxnBalance?.creditTotal - ledgerTxnBalance?.debitTotal | giddhCurrency}}
                                    Cr.
                                </h3>

                                <h3 class="digit-blue subTotal font-12" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedCreditTotal - ledgerTxnBalance?.convertedDebitTotal | giddhCurrency}}
                                    Cr.
                                </h3>
                            </div>

                        </div>

                        <div class="d-flex" style="justify-content: space-between">

                            <div *ngIf="ledgerTxnBalance?.creditTotal < ledgerTxnBalance?.debitTotal">
                                <h3 class="digit-blue">
                                    {{ ledgerTxnBalance?.currencySymbol}}{{ledgerTxnBalance?.debitTotal - ledgerTxnBalance?.creditTotal | giddhCurrency}}
                                    Dr.
                                </h3>

                                <h3 class="digit-blue subTotal font-12" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedDebitTotal - ledgerTxnBalance?.convertedCreditTotal | giddhCurrency}}
                                    Dr.
                                </h3>
                            </div>
                        </div>

                        <br>

                        <div class="d-flex debit-credit-amount">

                            <h1 class="mr-t font16 greyTextClr d-flex" style="flex-direction: column">Debit
                                <span class="digit-blue mt-1">
                                    {{ ledgerTxnBalance?.currencySymbol}}{{ledgerTxnBalance?.debitTotal | giddhCurrency}}
                                </span>
                                <span class="digit-blue font-12 subTotal" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedDebitTotal | giddhCurrency}}
                                </span>
                            </h1>

                            <h1 class="mr-t font16 greyTextClr d-flex" style="flex-direction: column">Credit
                                <span class="digit-blue mt-1">
                                    {{ ledgerTxnBalance?.currencySymbol}}{{ledgerTxnBalance?.creditTotal | giddhCurrency}}
                                </span>
                                <span class="digit-blue font-12 subTotal" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedCreditTotal | giddhCurrency}}
                                </span>
                            </h1>

                        </div>

                    </div>
                </div>

                <div class="col-sm-3 col-xs-12 stat-block">

                    <div class="ledger-state-box">
                        <h1>Closing Balance</h1>
                        <div class="d-flex" style="justify-content: space-between;flex-direction: column">
                            <h3 class="digit-blue" container="body">
                                <span
                                    [tooltip]="(ledgerTxnBalance?.closingBalance?.type === 'DEBIT' ? lc.ledgerUnderStandingObj.balanceText.dr : lc.ledgerUnderStandingObj.balanceText.cr)">{{ ledgerTxnBalance?.currencySymbol}}{{ledgerTxnBalance?.closingBalance?.amount | giddhCurrency}}
                                    {{ ledgerTxnBalance?.closingBalance?.amount > 0 ? (ledgerTxnBalance?.closingBalance?.type === 'DEBIT' ? 'Dr' : 'Cr') : '' }}</span>
                            </h3>
                            <h3 class="digit-blue" container="body" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                <span
                                    [tooltip]="(ledgerTxnBalance?.closingBalance?.type === 'DEBIT' ? lc.ledgerUnderStandingObj.balanceText.dr : lc.ledgerUnderStandingObj.balanceText.cr)">
                                    {{ ledgerTxnBalance?.convertedCurrencySymbol}}{{ledgerTxnBalance?.convertedClosingBalance?.amount | giddhCurrency}}
                                    {{ ledgerTxnBalance?.convertedClosingBalance?.amount > 0 ? (ledgerTxnBalance?.convertedClosingBalance?.type === 'DEBIT' ? 'Dr' : 'Cr') : '' }}
                                </span>
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<!-- modal sections -->

<div *ngIf="isShowLedgerColumnarReportTable">
    <div class="back-btn text-right pr-1 mt-1 mb-1">
        <button class="btn btn-default" (click)="isShowLedgerColumnarReportTable=false">Back</button>
    </div>
    <ledger-columnar-report-table [columnarReportExportRequest]="columnarReportExportRequest"
        [accountUniquename]="accountUniquename" (backClick)="isShowLedgerColumnarReportTable=false">
    </ledger-columnar-report-table>
</div>


<!-- aside menu section -->
<div class="aside-overlay" *ngIf="asideMenuState === 'in'"></div>
<ledger-aside-pane [class]="asideMenuState" *ngIf="asideMenuState === 'in'" [@slideInOut]="asideMenuState"
    (closeAsideEvent)="toggleAsidePane()">
</ledger-aside-pane>
<!-- aside menu section -->

<!-- update ladger entry popup -->
<div bsModal #updateLedgerModal="bs-modal" class="modal fade" role="dialog" [config]="{keyboard: true}" tabindex="-1">
    <div class="modal-dialog modal-xl modal-ledger">
        <div class="modal-content">
            <div element-view-container-ref #updateledgercomponent=elementviewcontainerref>
            </div>
        </div>
    </div>
</div>
<!-- update ladger entry popup -->

<!-- export ladger popup -->
<div bsModal #exportLedgerModal="bs-modal" tabindex="-1" class="modal fade" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- [from]="advanceSearchRequest?.from" [to]="advanceSearchRequest?.to"  -->
            <export-ledger [advanceSearchRequest]="advanceSearchRequest" [accountUniqueName]="lc.accountUnq"
                (closeExportLedgerModal)="hideExportLedgerModal()"
                (showColumnarTable)="onShowColumnarReportTable($event)"></export-ledger>
        </div>
    </div>
</div>

<!-- share ladger popup -->
<div bsModal #shareLedgerModal="bs-modal" class="modal fade" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- [from]="advanceSearchRequest?.from" [to]="advanceSearchRequest?.to" -->
            <share-ledger #sharLedger [from]="shareLedgerDates?.from" [to]="shareLedgerDates?.to"
                [accountUniqueName]="lc.accountUnq" [advanceSearchRequest]="advanceSearchRequest"
                (closeShareLedgerModal)="hideShareLedgerModal()"></share-ledger>
        </div>
    </div>
</div>

<!--quick account popup -->
<div bsModal #quickAccountModal="bs-modal" class="modal fade" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div element-view-container-ref #quickAccountComponent="elementviewcontainerref"></div>
        </div>
    </div>
</div>
<!-- modal sections -->

<!-- Advance search popup -->
<div bsModal #advanceSearchModel="bs-modal" tabindex="-1" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl advanceSearchModal">
        <div class="modal-content">
            <advance-search-model #advanceSearchComp [advanceSearchRequest]="advanceSearchRequest"
                (closeModelEvent)="closeAdvanceSearchPopup($event)"></advance-search-model>
        </div>
    </div>
</div>
<!-- Advance  search popup -->

<!-- Bulk action confirmation popup -->
<div bsModal #bulkActionConfirmationModal="bs-modal" tabindex="-1" class="modal fade" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div id="" class="">
                <div class="modal-header themeBg pdL2 pdR2 clearfix">
                    <h3 class="modal-title bg" id="modal-title">Confirmation </h3>
                    <i class="icon-cross text-right close-modal" aria-hidden="true"
                        (click)="onCancelBulkActionConfirmation()"></i>
                </div>
                <div class="modal-body pdL2 pdR2 clearfix" id="export-body">
                    <form name="newRole" novalidate class="" autocomplete="off">
                        <div class="modal_wrap mr-b2">
                            <h3>Do you want to delete the selected entrie(s)? </h3>
                            <p class="text-gray font-14 mt-05">All their corresponding vouchers and invoices will be
                                deleted permanently and will no longer be accessible from other modules.</p>
                        </div>
                        <div class="pull-right">
                            <button type="submit" class="btn btn-md btn-success mrR1"
                                (click)="onConfirmationBulkActionConfirmation()">Yes
                            </button>
                            <button type="submit" class="btn btn-md btn-primary"
                                (click)="onCancelBulkActionConfirmation()">No
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Bulk action confirmation popup -->

<!-- Bulk action generate voucher popup -->
<div bsModal #bulkActionGenerateVoucherModal="bs-modal" tabindex="-1" class="modal fade" role="dialog"
    performBulkAction>
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div>
                <div class="modal-header themeBg pdL2 pdR2 clearfix">
                    <h3 class="modal-title bg" id="modal-title">Confirmation</h3>
                    <i class="icon-cross text-right close-modal" aria-hidden="true"
                        (click)="onCancelSelectInvoiceModal()"></i>
                </div>
                <div class="modal-body pdL2 pdR2 clearfix" id="export-body">
                    <form name="newRole" novalidate class="" autocomplete="off">
                        <div class="modal_wrap mr-b2 text-center">
                            <h2>Select voucher generate option</h2>
                        </div>
                        <div class="row mr-t2 ledger-btn">
                            <div class="col-xs-6 col-sm-6 pr-1 pl-1">
                                <button type="submit" class="btn btn-block btn-success"
                                    (click)="onSelectInvoiceGenerateOption(false)">
                                    Generate Multiple
                                </button>
                            </div>
                            <div class="col-xs-6 col-sm-6 pr-1 pl-1">
                                <button type="submit" class="btn btn-block btn-success"
                                    (click)="onSelectInvoiceGenerateOption(true)">
                                    Generate Compound
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Bulk action generate voucher popup -->

<!-- aside menu section -->
<div class="aside-overlay" *ngIf="asideMenuStateForOtherTaxes === 'in'"></div>
<!--<ng-template #otherTaxSidePane let-entry>-->
<app-aside-menu-sales-other-taxes *ngIf="asideMenuStateForOtherTaxes === 'in' && updateLedgerComponentInstance"
    [class]="asideMenuStateForOtherTaxes" [taxes]="companyTaxesList"
    [otherTaxesModal]="updateLedgerComponentInstance.vm.selectedLedger.otherTaxModal"
    [@slideInOut]="asideMenuStateForOtherTaxes" (closeModal)="toggleOtherTaxesAsidePane(null)"
    (applyTaxes)="calculateOtherTaxes($event);toggleOtherTaxesAsidePane(null);">
</app-aside-menu-sales-other-taxes>
<!--</ng-template>-->

<!-- endregion -->
<ng-template #datepickerTemplate>
    <div class="datepicker-modal">
        <div class="modal-body">
            <app-datepicker-wrapper [inputStartDate]="selectedDateRange?.startDate"
                [inputEndDate]="selectedDateRange?.endDate" [alwaysShowCalendars]="true"
                [ranges]="datePickerRanges" [selectedRangeLabel]="selectedRangeLabel"
                [showCustomRangeLabel]="true" [showClearButton]="false" [showCancel]="true" [linkedCalendars]="true"
                [showDropdowns]="true" [locale]="{applyLabel: 'Done'}" (rangeClicked)="dateSelectedCallback($event)"
                (datesUpdated)="dateSelectedCallback($event)" [keepCalendarOpeningWithRange]="false"
                [showRangeLabelOnInput]="false" [dateFieldPosition]="dateFieldPosition"></app-datepicker-wrapper>
        </div>
    </div>
</ng-template>
