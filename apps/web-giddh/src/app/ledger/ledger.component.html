<ng-container
    appTranslate
    [file]="'ledger'"
    (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event"
    (translationComplete)="translationComplete($event)"
>
    <div validateSectionPermission [hasPermission]="hasLedgerPermission">
        <ng-container *ngIf="localeData?.page_heading && commonLocaleData?.app_ac">
            <div class="btn-group ledger-ellipse" *ngIf="isMobileScreen">
                <button
                    mat-button
                    id="button-basic"
                    [matMenuTriggerFor]="menu"
                    type="button"
                    class="dropdown-toggle btn mr-0"
                >
                    <i class="icon-dots-three-vertical"></i>
                </button>
                <mat-menu #menu="matMenu">
                    <button mat-menu-item>
                        <a
                            class="dropdown-item p-0"
                            id="share-ledger"
                            href="javascript:void(0)"
                            (click)="showShareLedgerModal()"
                            >{{ localeData?.share_ledger }}</a
                        >
                    </button>
                    <button mat-menu-item disabled>
                        <a
                            class="dropdown-item p-0"
                            id="export-ledger-mobile-view"
                            href="javascript:void(0)"
                            (click)="showExportLedgerModal()"
                            >{{ commonLocaleData?.app_export }}</a
                        >
                    </button>
                </mat-menu>
            </div>
            <hamburger-menu
                [pageHeading]="
                    lc?.activeAccount?.name
                        ? (!isMobileScreen ? localeData?.page_heading : '') +
                          lc?.activeAccount?.name +
                          ' ' +
                          commonLocaleData?.app_ac
                        : ''
                "
            >
            </hamburger-menu>
            <section class="container ledger-section" [hidden]="isShowLedgerColumnarReportTable">
                <!-- region ledger table-->
                <div class="ledg-head transactions-page mr-t15 position-relative">
                    <!-- region ledger header -->
                    <div class="clearfix row mr-b15" [ngClass]="{ 'mr-b5': currentCompanyBranches?.length > 2 }">
                        <!-- region currency toggle -->
                        <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 search-ledger-wrapper">
                            <div class="d-flex search-ledger-field">
                                <!-- please remove hidden attribute after functionality works -->
                                <div
                                    class="select-all-icons"
                                    *ngIf="checkedTrxWhileHovering?.length > 0 && isMobileScreen"
                                >
                                    <div *ngIf="visibleTransactionTypeMobile && checkedTrxWhileHovering?.length > 0">
                                        <mat-checkbox
                                            color="primary"
                                            *ngIf="visibleTransactionTypeMobile === 'all'"
                                            id="select-all-entries"
                                            [(ngModel)]="debitCreditSelectAll"
                                            (change)="selectAllEntries($event, visibleTransactionTypeMobile)"
                                        ></mat-checkbox>
                                        <mat-checkbox
                                            color="primary"
                                            *ngIf="visibleTransactionTypeMobile === 'credit'"
                                            id="select-all-entries-cr"
                                            [(ngModel)]="creditSelectAll"
                                            (change)="selectAllEntries($event, visibleTransactionTypeMobile)"
                                        ></mat-checkbox>
                                        <mat-checkbox
                                            color="primary"
                                            *ngIf="visibleTransactionTypeMobile === 'debit'"
                                            id="select-all-entries-dr"
                                            [(ngModel)]="debitSelectAll"
                                            (change)="selectAllEntries($event, visibleTransactionTypeMobile)"
                                        ></mat-checkbox>
                                        {{ commonLocaleData?.app_select_all }}
                                    </div>
                                    <div class="d-flex mr-l15">
                                        <button
                                            mat-stroked-button
                                            color="warn"
                                            [disabled]="
                                                currentOrganizationType === 'COMPANY' &&
                                                currentCompanyBranches?.length > 2
                                            "
                                            id="delete-ledger-mobile-view"
                                            (click)="performBulkAction('delete')"
                                            [matTooltip]="commonLocaleData?.app_delete"
                                            [matTooltipPosition]="'above'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-trash font-15"></i>
                                        </button>

                                        <button
                                            mat-stroked-button
                                            [disabled]="
                                                currentOrganizationType === 'COMPANY' &&
                                                currentCompanyBranches?.length > 2
                                            "
                                            class="btn btn-warning"
                                            id="generate-invoice-mobile-view"
                                            (click)="performBulkAction('generate')"
                                            [matTooltip]="commonLocaleData?.app_generate_voucher"
                                            [matTooltipPosition]="'above'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-generate-invoice font-15"></i>
                                        </button>
                                    </div>
                                    <button
                                        mat-stroked-button
                                        [disabled]="
                                            currentOrganizationType === 'COMPANY' && currentCompanyBranches?.length > 2
                                        "
                                        class="btn btn-success mr-0 font-15"
                                        id="attach-file-mobile-view"
                                        (click)="performBulkAction('upload', BulkUploadfileInput)"
                                        [matTooltip]="localeData?.attach_file"
                                        [matTooltipPosition]="'above'"
                                        matTooltipClass="tooltip-black"
                                    >
                                        <i class="icon-file-path"></i>
                                    </button>
                                    <input
                                        type="file"
                                        #BulkUploadfileInput
                                        class="d-none"
                                        name="BulkUploadfileInput"
                                        id="BulkUploadfileInput"
                                        [options]="fileUploadOptions"
                                        ngFileSelect
                                        [uploadInput]="uploadInput"
                                        (uploadOutput)="onUploadOutput($event)"
                                    />
                                </div>
                                <div class="single-search-box d-flex" *ngIf="checkedTrxWhileHovering?.length === 0">
                                    <span
                                        [ngClass]="{
                                            'default-width-input':
                                                (searchText || isAdvanceSearchImplemented) && isMobileScreen,
                                            'full-width-input':
                                                (searchText || !isAdvanceSearchImplemented) && isMobileScreen
                                        }"
                                    >
                                        <mat-form-field appearance="fill">
                                            <input
                                                matInput
                                                id="ledger-search"
                                                class="form-control"
                                                [(ngModel)]="searchText"
                                                name="searchText"
                                                [placeholder]="localeData?.search_ledger"
                                                (keyup)="search(searchText)"
                                            />
                                            <button
                                                *ngIf="searchText"
                                                matSuffix
                                                mat-icon-button
                                                (click)="searchText = ''; search(searchText)"
                                                class="position-absolute"
                                            >
                                                <i aria-hidden="true" class="icon-cross font-12"></i>
                                            </button>
                                            <span matPrefix><i class="icon-search position-absolute"></i></span>
                                        </mat-form-field>
                                    </span>
                                    <a
                                        class="cp mr-l1 clear-filter-btn"
                                        *ngIf="(searchText || isAdvanceSearchImplemented) && isMobileScreen"
                                        href="javascript:;"
                                        (click)="resetAdvanceSearch()"
                                        [matTooltip]="commonLocaleData?.app_reset_advance_search"
                                        [matTooltipPosition]="'above'"
                                        matTooltipClass="tooltip-black"
                                    >
                                        <i aria-hidden="true" class="icon-refresh"></i>
                                    </a>
                                </div>

                                <!-- Functionality not working -->
                                <div
                                    class="ledger-datepicker"
                                    id="giddh-datepicker-mobile-view mr-r05"
                                    container="body"
                                    *ngIf="isMobileScreen"
                                >
                                    <img (click)="showGiddhDatepicker($event)" src="{{ imgPath }}calender-icon.svg" />
                                </div>
                                <span class="input-wrapper ipad-view-datepicker" (click)="showGiddhDatepicker($event)">
                                    <mat-form-field appearance="fill">
                                        <input
                                            matInput
                                            id="giddh-datepicker-ipad-view"
                                            type="text"
                                            name="selectedDateRange"
                                            [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                            class="giddh-datepicker date-range-picker"
                                        />
                                    </mat-form-field>
                                </span>
                                <button
                                    id="advance-filter"
                                    (click)="onOpenAdvanceSearch()"
                                    class="advance-icon d-flex advance-search-filter pointer"
                                    [matTooltip]="commonLocaleData?.app_advance_search"
                                    [matTooltipPosition]="'below'"
                                    matTooltipClass="tooltip-black"
                                    [ngStyle]="{ 'margin-left': checkedTrxWhileHovering?.length === 0 ? '7px' : '0px' }"
                                >
                                    <span class="icon-advance-filter"></span>
                                </button>
                                <button
                                    class="cp clear-filter-btn"
                                    id="clear-filter"
                                    *ngIf="isAdvanceSearchImplemented && !isMobileScreen"
                                    href="javascript:;"
                                    (click)="resetAdvanceSearch()"
                                    [matTooltip]="commonLocaleData?.app_reset_advance_search"
                                    [matTooltipPosition]="'below'"
                                    matTooltipClass="tooltip-black"
                                >
                                    <i aria-hidden="true" class="icon-refresh"></i>
                                </button>
                                <div
                                    class="d-flex xs-mb-1"
                                    *ngIf="checkedTrxWhileHovering?.length > 0 && !isMobileScreen"
                                >
                                    <button
                                        mat-stroked-button
                                        [disabled]="
                                            currentOrganizationType === 'COMPANY' && currentCompanyBranches?.length > 2
                                        "
                                        class="btn btn-danger d-flex align-items-center justify-content-center"
                                        id="delete-ledger"
                                        (click)="performBulkAction('delete')"
                                        [matTooltip]="commonLocaleData?.app_delete"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                    >
                                        <i class="icon-trash font-15"></i>
                                    </button>

                                    <button
                                        mat-stroked-button
                                        [disabled]="
                                            currentOrganizationType === 'COMPANY' && currentCompanyBranches?.length > 2
                                        "
                                        id="generate-invoice"
                                        class="btn btn-warning d-flex align-items-center justify-content-center"
                                        (click)="performBulkAction('generate')"
                                        [matTooltip]="commonLocaleData?.app_generate_voucher"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                    >
                                        <i class="icon-generate-invoice font-15"></i>
                                    </button>

                                    <button
                                        mat-stroked-button
                                        [disabled]="
                                            currentOrganizationType === 'COMPANY' && currentCompanyBranches?.length > 2
                                        "
                                        class="btn btn-success d-flex align-items-center justify-content-center"
                                        id="attach-file"
                                        (click)="performBulkAction('upload', BulkUploadfileInput)"
                                        [matTooltip]="localeData?.attach_file"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                    >
                                        <i class="icon-file-path font-15"></i>
                                    </button>
                                    <input
                                        type="file"
                                        #BulkUploadfileInput
                                        name="BulkUploadfileInput"
                                        id="BulkUploadfileInput"
                                        [options]="fileUploadOptions"
                                        ngFileSelect
                                        [uploadInput]="uploadInput"
                                        (uploadOutput)="onUploadOutput($event)"
                                        class="d-none"
                                    />
                                </div>
                            </div>
                            <div
                                class="form-group mr-r15 linked-entities"
                                *ngIf="
                                    showBranchSwitcher &&
                                    currentCompanyBranches?.length > 2 &&
                                    currentOrganizationType === 'COMPANY' &&
                                    isMobileScreen
                                "
                            >
                                <div class="form-group">
                                    <sh-select
                                        [options]="currentCompanyBranches"
                                        [(ngModel)]="currentBranch.uniqueName"
                                        [borderConfiguration]="branchDropdownBorderConfiguration"
                                        [showClear]="false"
                                        [ItemHeight]="33"
                                        width="100%"
                                        (selected)="handleBranchChange($event)"
                                        [isFilterEnabled]="true"
                                        [placeholder]="commonLocaleData?.app_select_branch"
                                        [fixedValue]="currentBranch?.alias"
                                    >
                                        <ng-template #optionTemplate let-option="option">
                                            <ng-container>
                                                <a href="javascript:void(0)" class="list-item d-flex">
                                                    <span class="entity-icon">
                                                        <i
                                                            class="icon-branch-icon pull-right"
                                                            *ngIf="!option.isCompany"
                                                            [matTooltip]="commonLocaleData?.app_branch"
                                                            matTooltipClass="tooltip-black"
                                                        ></i>
                                                        <i
                                                            class="icon-company-profile pull-right"
                                                            *ngIf="option.isCompany"
                                                            [matTooltip]="commonLocaleData?.app_company"
                                                            matTooltipClass="tooltip-black"
                                                        ></i>
                                                    </span>
                                                    <span class="entity-details">
                                                        <div class="item giddh-limit single-line-clamp">
                                                            {{ option?.label || "-" }}
                                                        </div>
                                                        <div class="item-unique giddh-limit single-line-clamp">
                                                            {{ option.name || "-" }}
                                                        </div>
                                                    </span>
                                                </a>
                                            </ng-container>
                                        </ng-template>
                                    </sh-select>
                                </div>
                            </div>
                        </div>

                        <div
                            class="col-lg-4 col-md-12 col-sm-12 col-xs-12 text-center date-range-options"
                            *ngIf="!isMobileScreen"
                        >
                            <div
                                class="advance-search-by-date date-advance-search"
                                (click)="showGiddhDatepicker($event)"
                            >
                                <span class="input-wrapper">
                                    <mat-form-field appearance="fill">
                                        <input
                                            matInput
                                            id="giddh-datepicker"
                                            type="text"
                                            name="selectedDateRange"
                                            [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                            class="giddh-datepicker date-range-picker"
                                        />
                                    </mat-form-field>
                                </span>
                            </div>
                        </div>
                        <!-- endregion -->
                        <div
                            class="col-lg-4 col-md-12 col-sm-12 col-xs-12 text-right C-flex-end search-options"
                            *ngIf="!isMobileScreen"
                        >
                            <div class="d-flex xs-width-100 ledger-head-top">
                                <div
                                    class="form-group mr-r15 linked-entities"
                                    *ngIf="
                                        showBranchSwitcher &&
                                        currentCompanyBranches?.length > 2 &&
                                        currentOrganizationType === 'COMPANY'
                                    "
                                >
                                    <div class="form-group">
                                        <sh-select
                                            [options]="currentCompanyBranches"
                                            [(ngModel)]="currentBranch.uniqueName"
                                            [borderConfiguration]="branchDropdownBorderConfiguration"
                                            [showClear]="false"
                                            [ItemHeight]="33"
                                            width="100%"
                                            (selected)="handleBranchChange($event)"
                                            [isFilterEnabled]="true"
                                            [placeholder]="commonLocaleData?.app_select_branch"
                                            [fixedValue]="currentBranch?.alias"
                                        >
                                            <ng-template #optionTemplate let-option="option">
                                                <ng-container>
                                                    <a href="javascript:void(0)" class="list-item d-flex">
                                                        <span class="entity-icon">
                                                            <i
                                                                class="icon-branch-icon pull-right"
                                                                *ngIf="!option.isCompany"
                                                                [matTooltip]="commonLocaleData?.app_branch"
                                                                matTooltipClass="tooltip-black"
                                                            ></i>
                                                            <i
                                                                class="icon-company-profile pull-right"
                                                                *ngIf="option.isCompany"
                                                                [matTooltip]="commonLocaleData?.app_company"
                                                                matTooltipClass="tooltip-black"
                                                            ></i>
                                                        </span>
                                                        <span class="entity-details">
                                                            <div class="item giddh-limit single-line-clamp">
                                                                {{ option?.label || "-" }}
                                                            </div>
                                                            <div class="item-unique giddh-limit single-line-clamp">
                                                                {{ option.name || "-" }}
                                                            </div>
                                                        </span>
                                                    </a>
                                                </ng-container>
                                            </ng-template>
                                        </sh-select>
                                    </div>
                                </div>
                                <div *ngIf="isLedgerAccountAllowsMultiCurrency" class="advance-search-block">
                                    <span class="mr-r15 d-inline-block font-15">{{ baseCurrencyDetails?.code }}</span>
                                    <div class="toggle d-inline-block currency-toggler" data-key="disabled">
                                        <mat-slide-toggle
                                            color="primary"
                                            [(ngModel)]="currencyTogglerModel"
                                            (change)="toggleCurrency($event)"
                                        ></mat-slide-toggle>
                                    </div>
                                    <span class="mr-l15 d-inline-block font-15">{{
                                        foreignCurrencyDetails?.code
                                    }}</span>
                                </div>

                                <div class="d-flex">
                                    <a
                                        mat-button
                                        href="javascript:void(0)"
                                        id="upload"
                                        class="icomoon-ico d-flex align-items-center"
                                        [matTooltip]="localeData?.import_statement"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                        (click)="showUploadBankStatementModal()"
                                    >
                                        <i class="icon-upload lh-0"></i>
                                    </a>
                                    <a
                                        mat-button
                                        href="javascript:void(0)"
                                        id="share"
                                        class="icomoon-ico d-flex align-items-center"
                                        [matTooltip]="localeData?.share_ledger"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                        (click)="showShareLedgerModal()"
                                    >
                                        <i class="icon-ledger-path lh-0"></i>
                                    </a>
                                    <a
                                        mat-button
                                        class="icomoon-ico d-flex align-items-center"
                                        id="export-ledger"
                                        href="javascript:void(0)"
                                        [matTooltip]="commonLocaleData?.app_export"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                        (click)="showExportLedgerModal()"
                                    >
                                        <i class="icon-ledger-union-5 lh-0"></i>
                                    </a>
                                    <a
                                        mat-button
                                        class="icomoon-ico d-flex align-items-center"
                                        id="delete-bank-transaction"
                                        href="javascript:void(0)"
                                        [matTooltip]="localeData?.delete_bank_transactions"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                        (click)="showBulkDeleteBankTransactionsConfirmationModal()"
                                        *ngIf="entryUniqueNamesForBulkAction?.length > 0"
                                    >
                                        <i class="icon-trash lh-0"></i>
                                    </a>
                                    <a
                                        mat-button
                                        class="icomoon-ico d-flex align-items-center mr-0"
                                        id="reload-bank-transaction"
                                        *ngIf="
                                            lc.bankTransactionsDebitData?.length ||
                                            lc.bankTransactionsCreditData?.length
                                        "
                                        href="javascript:void(0)"
                                        [matTooltip]="localeData?.reload_bank_transactions"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                        (click)="getBankTransactions()"
                                    >
                                        <i class="icon-refresh lh-0 font-16"></i>
                                    </a>

                                    <a
                                        *ngIf="voucherApiVersion === 2 && enableAutopaid"
                                        mat-button
                                        class="icomoon-ico d-flex align-items-center"
                                        id="autopaid"
                                        href="javascript:void(0)"
                                        [matTooltip]="this.localeData?.autopaid_title"
                                        [matTooltipPosition]="'below'"
                                        matTooltipClass="tooltip-black"
                                        (click)="showAutopaidModal()"
                                    >
                                        <img class="autopaid-icon" src="{{ imgPath }}autopaid.svg" />
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div
                        *ngIf="isLedgerAccountAllowsMultiCurrency && isMobileScreen"
                        class="advance-search-block mr-t05"
                    >
                        <span class="mr-r15 d-inline-block font-15">{{ baseCurrencyDetails?.code }}</span>
                        <div class="toggle d-inline-block currency-toggler" data-key="disabled">
                            <mat-slide-toggle
                                color="primary"
                                [(ngModel)]="currencyTogglerModel"
                                (change)="toggleCurrency($event)"
                            ></mat-slide-toggle>
                        </div>
                        <span class="mr-l15 d-inline-block font-15">{{ foreignCurrencyDetails?.code }}</span>
                    </div>
                    <!-- endregion -->
                    <div class="custom-tabs mt-2 mb-2">
                        <ul class="nav nav-tabs pt-0">
                            <li [ngClass]="{ 'active': visibleTransactionTypeMobile === 'all' }">
                                <a
                                    href="javascript:void(0)"
                                    id="ledger-all-tab"
                                    (click)="toggleMobileTransactionType('all')"
                                    >{{ commonLocaleData?.app_all }}</a
                                >
                            </li>
                            <li role="presentation" [ngClass]="{ 'active': visibleTransactionTypeMobile === 'debit' }">
                                <a
                                    href="javascript:void(0)"
                                    id="ledger-debit-tab"
                                    (click)="toggleMobileTransactionType('debit')"
                                    >{{ commonLocaleData?.app_debit }}</a
                                >
                            </li>
                            <li role="presentation" [ngClass]="{ 'active': visibleTransactionTypeMobile === 'credit' }">
                                <a
                                    href="javascript:void(0)"
                                    id="ledger-credit-tab"
                                    (click)="toggleMobileTransactionType('credit')"
                                    >{{ commonLocaleData?.app_credit }}</a
                                >
                            </li>
                        </ul>
                    </div>

                    <!-- region bank ledgers-->
                    <div class="clearfix"></div>
                    <div *ngIf="!isMobileScreen">
                        <h1 class="mr-t2 primary-color" [hidden]="!isBankTransactionLoading">
                            {{ localeData?.loading_transactions }}
                        </h1>
                        <section id="eledgerwrap" class="mr-t2" [hidden]="!lc.showEledger || isBankTransactionLoading">
                            <div class="alert alert-danger ledger-book fade in position-relative pd-r15">
                                <button mat-button type="button" class="mat-close">
                                    <span class="font-12 font-weight-normal" (click)="hideEledgerWrap()">{{
                                        commonLocaleData?.app_close
                                    }}</span>
                                </button>
                                <div>
                                    <div class="clearfix ledger-top-header-left">
                                        <h3 class="ledger-main-head">
                                            <span>{{ localeData?.mapped_account_transactions }}</span>
                                        </h3>
                                    </div>
                                </div>
                                <div class="wrap-transaction-map clearfix">
                                    <div class="w-100 ledger-head mt-0">
                                        <mat-grid-list cols="2" rowHeight="37px">
                                            <mat-grid-tile>
                                                {{ commonLocaleData?.app_debit }}
                                                <span class="pull-right text-gray">{{ localeData?.dr }}</span>
                                            </mat-grid-tile>
                                            <mat-grid-tile>
                                                {{ commonLocaleData?.app_credit }}
                                                <span class="pull-right text-gray">{{ localeData?.cr }}</span>
                                            </mat-grid-tile>
                                        </mat-grid-list>
                                    </div>
                                    <div class="row ml-0 mr-0 ledger-book">
                                        <div class="col-6 left-col-new" (click)="$event.stopPropagation()">
                                            <mat-grid-list
                                                cols="4"
                                                rowHeight="43px"
                                                class="ledger-table transaction-mapped-table"
                                            >
                                                <mat-grid-tile class="bold no-right-border" colspan="1">
                                                    {{ commonLocaleData?.app_date }}
                                                </mat-grid-tile>
                                                <mat-grid-tile class="bold no-right-border" colspan="2">
                                                    {{ commonLocaleData?.app_particular }}
                                                </mat-grid-tile>
                                                <mat-grid-tile class="bold text-right no-right-border" colspan="1">
                                                    {{ commonLocaleData?.app_amount }}
                                                </mat-grid-tile>
                                            </mat-grid-list>
                                            <mat-grid-list id="ledger-transaction-left-list" cols="4" rowHeight="50px">
                                                <ng-container
                                                    *ngFor="
                                                        let item of lc.bankTransactionsDebitData;
                                                        trackBy: trackByTransactionId;
                                                        let i = index
                                                    "
                                                >
                                                    <ng-container
                                                        *ngFor="let txn of item.transactions; trackBy: trackById"
                                                    >
                                                        <div
                                                            class="ledger-row"
                                                            [ngClass]="{
                                                                'compound-entry':
                                                                    txn.id === lc.selectedBankTxnUniqueName
                                                            }"
                                                        >
                                                            <mat-grid-tile colspan="1">
                                                                <div class="d-flex align-items-center">
                                                                    <span class="pd-l05 checkbox-span">
                                                                        <mat-checkbox
                                                                            color="primary"
                                                                            [id]="
                                                                                'transaction-mapped-select-entry-dr-' +
                                                                                i
                                                                            "
                                                                            (change)="
                                                                                selectEntryForBulkAction($event, item)
                                                                            "
                                                                            [disabled]="
                                                                                currentOrganizationType === 'COMPANY' &&
                                                                                currentCompanyBranches?.length > 2
                                                                            "
                                                                        ></mat-checkbox>
                                                                    </span>
                                                                    <span class="mr-l05">
                                                                        <giddh-datepicker
                                                                            name="bsdateledger"
                                                                            [(ngModel)]="item.entryDate"
                                                                            (dateSelected)="onChangeEntryDate(item)"
                                                                            (datepickerState)="datepickerState($event)"
                                                                        ></giddh-datepicker>
                                                                    </span>
                                                                </div>
                                                            </mat-grid-tile>
                                                            <mat-grid-tile
                                                                colspan="2"
                                                                class="select2-parent select2-ledger pl-0 pr-0"
                                                            >
                                                                <div
                                                                    *ngIf="!txn.showAccountDropdown"
                                                                    class="w-100"
                                                                    (click)="
                                                                        showBankLedgerPopup(txn, item);
                                                                        txn.showAccountDropdown = true
                                                                    "
                                                                >
                                                                    <span
                                                                        [ngClass]="{
                                                                            'account-placeholder': true,
                                                                            'account-placeholder-text ':
                                                                                txn.selectedAccount &&
                                                                                txn.selectedAccount.name
                                                                        }"
                                                                        >{{
                                                                            txn.selectedAccount
                                                                                ? txn.selectedAccount.name
                                                                                : commonLocaleData?.app_select_accounts
                                                                        }}</span
                                                                    >
                                                                </div>
                                                                <div
                                                                    *ngIf="txn.showAccountDropdown"
                                                                    class="w-100"
                                                                    (click)="
                                                                        txn.showDropdown = true;
                                                                        showBankLedgerPopup(txn, item)
                                                                    "
                                                                >
                                                                    <span
                                                                        [ngClass]="{
                                                                            'account-placeholder': true,
                                                                            'account-placeholder-text':
                                                                                txn.selectedAccount &&
                                                                                txn.selectedAccount.name
                                                                        }"
                                                                        *ngIf="!txn.showDropdown"
                                                                        >{{
                                                                            txn.selectedAccount
                                                                                ? txn.selectedAccount.name
                                                                                : commonLocaleData?.app_select_accounts
                                                                        }}</span
                                                                    >
                                                                    <sh-select
                                                                        *ngIf="txn.showDropdown"
                                                                        class="transaction-list-sh-select"
                                                                        #debitShSelect
                                                                        (viewInitEvent)="debitShSelect?.show()"
                                                                        [options]="searchResults"
                                                                        [(ngModel)]="txn.particular"
                                                                        [disabled]="
                                                                            currentOrganizationType === 'COMPANY' &&
                                                                            currentCompanyBranches?.length > 2
                                                                        "
                                                                        [isPaginationEnabled]="true"
                                                                        (scrollEnd)="handleScrollEnd()"
                                                                        (dynamicSearchedQuery)="
                                                                            onSearchQueryChanged($event)
                                                                        "
                                                                        [notFoundMsg]="noResultsFoundLabel"
                                                                        [showSearchSuggestion]="
                                                                            !(
                                                                                currentOrganizationType === 'COMPANY' &&
                                                                                currentCompanyBranches?.length > 2
                                                                            )
                                                                        "
                                                                        [readonlyInput]="
                                                                            currentOrganizationType === 'COMPANY' &&
                                                                            currentCompanyBranches?.length > 2
                                                                        "
                                                                        [enableDynamicSearch]="true"
                                                                        (selected)="
                                                                            selectAccount($event, txn, false, true)
                                                                        "
                                                                        (onClear)="
                                                                            selectAccount($event, txn, true, true)
                                                                        "
                                                                        [placeholder]="
                                                                            commonLocaleData?.app_select_accounts
                                                                        "
                                                                        [notFoundLink]="true"
                                                                        (noResultsClicked)="toggleAsidePane()"
                                                                        [showClear]="false"
                                                                        [multiple]="false"
                                                                        [ItemHeight]="67"
                                                                        [useInBuiltFilterForFlattenAc]="true"
                                                                        [defaultValue]="txn.particular"
                                                                    >
                                                                        <ng-template
                                                                            #optionTemplate
                                                                            let-option="option"
                                                                        >
                                                                            <ng-container
                                                                                *ngIf="!option.additional?.stock"
                                                                            >
                                                                                <a
                                                                                    href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                >
                                                                                    <div class="item">
                                                                                        {{ option?.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{
                                                                                            option.additional
                                                                                                ?.uniqueName
                                                                                        }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="option.additional?.stock"
                                                                            >
                                                                                <a
                                                                                    href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                >
                                                                                    <div class="item">
                                                                                        {{ option?.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{
                                                                                            option.additional
                                                                                                ?.uniqueName
                                                                                        }}
                                                                                    </div>
                                                                                    <div class="item-stock">
                                                                                        {{
                                                                                            commonLocaleData?.app_stock
                                                                                        }}:
                                                                                        {{
                                                                                            option.additional?.stock
                                                                                                .name
                                                                                        }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                        </ng-template>
                                                                    </sh-select>
                                                                    <ul
                                                                        class="no-result-template"
                                                                        *ngIf="lc.noAccountChosenForNewEntry"
                                                                    >
                                                                        <li>{{ localeData?.create_account }}</li>
                                                                    </ul>
                                                                </div>
                                                            </mat-grid-tile>
                                                            <mat-grid-tile
                                                                class="
                                                                    no-right-border
                                                                    position-relative
                                                                    top-position-fix-{{ i }}
                                                                "
                                                                colspan="1"
                                                            >
                                                                <input
                                                                    matInput
                                                                    class="text-right form-control p-0"
                                                                    type="text"
                                                                    [id]="'enter-amount-dr-' + i"
                                                                    decimalDigitsDirective
                                                                    [DecimalPlaces]="2"
                                                                    [(ngModel)]="txn.amount"
                                                                    (input)="needToReCalculate.next(true)"
                                                                    (click)="blankLedgerAmountClick()"
                                                                    *ngIf="txn.type === 'DEBIT'"
                                                                    (click)="showBankLedgerPopup(txn, item)"
                                                                />
                                                            </mat-grid-tile>
                                                        </div>
                                                        <div class="entry-modal-height">
                                                            <div
                                                                class="position-absolute entry-modal top-position-fix-{{
                                                                    i
                                                                }}"
                                                                *ngIf="
                                                                    lc.showBankLedgerPanel &&
                                                                    lc.selectedBankTxnUniqueName === txn.id &&
                                                                    txn.type === 'DEBIT'
                                                                "
                                                            >
                                                                <new-ledger-entry-panel
                                                                    #newLedPanel
                                                                    [trxRequest]="advanceSearchRequest"
                                                                    [isBankTransaction]="true"
                                                                    [blankLedger]="item"
                                                                    [currentTxn]="lc.currentBlankTxn"
                                                                    [needToReCalculate]="needToReCalculate"
                                                                    [isReadOnly]="
                                                                        currentOrganizationType === 'COMPANY' &&
                                                                        currentCompanyBranches?.length > 2
                                                                    "
                                                                    (moreDetailOpen)="handleOpenMoreDetail($event)"
                                                                    (changeTransactionType)="
                                                                        toggleTransactionType($event)
                                                                    "
                                                                    [showTaxationDiscountBox]="
                                                                        lc.currentBlankTxn?.showTaxationDiscountBox
                                                                    "
                                                                    [showOtherTax]="lc.currentBlankTxn?.showOtherTax"
                                                                    (saveBlankLedger)="saveBankTransaction()"
                                                                    (clickedOutsideEvent)="
                                                                        hideBankLedgerPopup($event);
                                                                        txn.showAccountDropdown = false
                                                                    "
                                                                    (clickUnpaidInvoiceList)="
                                                                        clickUnpaidInvoiceList($event)
                                                                    "
                                                                    [invoiceList]="invoiceList"
                                                                    (getInvoiceListsForCreditNote)="
                                                                        getInvoiceListsForCreditNote($event)
                                                                    "
                                                                    [isTouristSchemeApplicable]="
                                                                        isTouristSchemeApplicable
                                                                    "
                                                                    (saveOtherTax)="saveOtherTax(item, $event)"
                                                                    [localeData]="localeData"
                                                                    [commonLocaleData]="commonLocaleData"
                                                                    [entrySide]="'dr'"
                                                                    (stockVariantSelected)="
                                                                        loadDetails(selectedAccountDetails, txn, $event)
                                                                    "
                                                                    [selectedAccountDetails]="selectedAccountDetails"
                                                                    [(isTotalChanged)]="isTotalChanged"
                                                                >
                                                                </new-ledger-entry-panel>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </ng-container>
                                            </mat-grid-list>
                                        </div>
                                        <div class="col-6 right-col-new" (click)="$event.stopPropagation()">
                                            <mat-grid-list
                                                cols="4"
                                                rowHeight="43px"
                                                class="ledger-table transaction-mapped-table"
                                            >
                                                <mat-grid-tile class="bold no-right-border" colspan="1">
                                                    {{ commonLocaleData?.app_date }}
                                                </mat-grid-tile>
                                                <mat-grid-tile class="bold no-right-border" colspan="2">
                                                    {{ commonLocaleData?.app_particular }}
                                                </mat-grid-tile>
                                                <mat-grid-tile class="bold text-right no-right-border" colspan="1">
                                                    {{ commonLocaleData?.app_amount }}
                                                </mat-grid-tile>
                                            </mat-grid-list>
                                            <mat-grid-list id="ledger-transaction-right-list" cols="4" rowHeight="50px">
                                                <ng-container
                                                    *ngFor="
                                                        let item of lc.bankTransactionsCreditData;
                                                        trackBy: trackByTransactionId;
                                                        let i = index
                                                    "
                                                >
                                                    <ng-container
                                                        *ngFor="let txn of item.transactions; trackBy: trackById"
                                                    >
                                                        <div
                                                            class="ledger-row"
                                                            [ngClass]="{
                                                                'compound-entry':
                                                                    txn.id === lc.selectedBankTxnUniqueName
                                                            }"
                                                        >
                                                            <mat-grid-tile colspan="1">
                                                                <div class="d-flex align-items-center">
                                                                    <span class="pd-l05 checkbox-span">
                                                                        <mat-checkbox
                                                                            color="primary"
                                                                            [id]="
                                                                                'transaction-mapped-select-entry-cr-' +
                                                                                i
                                                                            "
                                                                            [(ngModel)]="txn.isChecked"
                                                                            (change)="
                                                                                selectEntryForBulkAction($event, item)
                                                                            "
                                                                            [disabled]="
                                                                                currentOrganizationType === 'COMPANY' &&
                                                                                currentCompanyBranches?.length > 2
                                                                            "
                                                                        ></mat-checkbox>
                                                                    </span>
                                                                    <span class="mr-l05">
                                                                        <giddh-datepicker
                                                                            name="bsDates"
                                                                            [(ngModel)]="item.entryDate"
                                                                            (dateSelected)="onChangeEntryDate(item)"
                                                                            (datepickerState)="datepickerState($event)"
                                                                        ></giddh-datepicker>
                                                                    </span>
                                                                </div>
                                                            </mat-grid-tile>
                                                            <mat-grid-tile
                                                                colspan="2"
                                                                class="select2-parent select2-ledger pl-0 pr-0"
                                                            >
                                                                <div
                                                                    *ngIf="!txn.showAccountDropdown"
                                                                    class="w-100"
                                                                    (click)="
                                                                        showBankLedgerPopup(txn, item);
                                                                        txn.showAccountDropdown = true
                                                                    "
                                                                >
                                                                    <span
                                                                        [ngClass]="{
                                                                            'account-placeholder': true,
                                                                            'account-placeholder-text ':
                                                                                txn.selectedAccount &&
                                                                                txn.selectedAccount.name
                                                                        }"
                                                                        >{{
                                                                            txn.selectedAccount
                                                                                ? txn.selectedAccount.name
                                                                                : commonLocaleData?.app_select_accounts
                                                                        }}</span
                                                                    >
                                                                </div>
                                                                <div
                                                                    *ngIf="txn.showAccountDropdown"
                                                                    class="w-100"
                                                                    (click)="txn.showDropdown = true"
                                                                >
                                                                    <span
                                                                        [ngClass]="{
                                                                            'account-placeholder': true,
                                                                            'account-placeholder-text ':
                                                                                txn.selectedAccount &&
                                                                                txn.selectedAccount.name
                                                                        }"
                                                                        *ngIf="!txn.showDropdown"
                                                                        >{{
                                                                            txn.selectedAccount
                                                                                ? txn.selectedAccount.name
                                                                                : commonLocaleData?.app_select_accounts
                                                                        }}</span
                                                                    >
                                                                    <sh-select
                                                                        *ngIf="txn.showDropdown"
                                                                        class="transaction-list-sh-select"
                                                                        #creditShSelect
                                                                        (viewInitEvent)="creditShSelect?.show()"
                                                                        [options]="searchResults"
                                                                        [(ngModel)]="txn.particular"
                                                                        [disabled]="
                                                                            currentOrganizationType === 'COMPANY' &&
                                                                            currentCompanyBranches?.length > 2
                                                                        "
                                                                        (selected)="
                                                                            selectAccount($event, txn, false, true)
                                                                        "
                                                                        (onClear)="
                                                                            selectAccount($event, txn, true, true)
                                                                        "
                                                                        [isPaginationEnabled]="true"
                                                                        (scrollEnd)="handleScrollEnd()"
                                                                        (dynamicSearchedQuery)="
                                                                            onSearchQueryChanged($event)
                                                                        "
                                                                        [notFoundMsg]="noResultsFoundLabel"
                                                                        [showSearchSuggestion]="
                                                                            !(
                                                                                currentOrganizationType === 'COMPANY' &&
                                                                                currentCompanyBranches?.length > 2
                                                                            )
                                                                        "
                                                                        [readonlyInput]="
                                                                            currentOrganizationType === 'COMPANY' &&
                                                                            currentCompanyBranches?.length > 2
                                                                        "
                                                                        [enableDynamicSearch]="true"
                                                                        [placeholder]="
                                                                            commonLocaleData?.app_select_accounts
                                                                        "
                                                                        [notFoundLink]="true"
                                                                        (noResultsClicked)="toggleAsidePane()"
                                                                        [multiple]="false"
                                                                        [ItemHeight]="67"
                                                                        [showClear]="false"
                                                                        [useInBuiltFilterForFlattenAc]="true"
                                                                        [defaultValue]="txn.particular"
                                                                    >
                                                                        <ng-template
                                                                            #optionTemplate
                                                                            let-option="option"
                                                                        >
                                                                            <ng-container
                                                                                *ngIf="!option.additional?.stock"
                                                                            >
                                                                                <a
                                                                                    href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                >
                                                                                    <div class="item">
                                                                                        {{ option?.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{
                                                                                            option.additional
                                                                                                ?.uniqueName
                                                                                        }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="option.additional?.stock"
                                                                            >
                                                                                <a
                                                                                    href="javascript:void(0)"
                                                                                    class="list-item"
                                                                                >
                                                                                    <div class="item">
                                                                                        {{ option?.label }}
                                                                                    </div>
                                                                                    <div class="item-unique">
                                                                                        {{
                                                                                            option.additional
                                                                                                ?.uniqueName
                                                                                        }}
                                                                                    </div>
                                                                                    <div class="item-stock">
                                                                                        {{
                                                                                            commonLocaleData?.app_stock
                                                                                        }}:
                                                                                        {{
                                                                                            option.additional?.stock
                                                                                                .name
                                                                                        }}
                                                                                    </div>
                                                                                </a>
                                                                            </ng-container>
                                                                        </ng-template>
                                                                    </sh-select>
                                                                    <ul
                                                                        class="no-result-template"
                                                                        *ngIf="lc.noAccountChosenForNewEntry"
                                                                    >
                                                                        <li>{{ localeData?.create_account }}</li>
                                                                    </ul>
                                                                </div>
                                                            </mat-grid-tile>
                                                            <mat-grid-tile
                                                                class="no-right-border position-relative top-position-fix-{{
                                                                    i
                                                                }}"
                                                                colspan="1"
                                                            >
                                                                <input
                                                                    matInput
                                                                    class="text-right form-control p-0"
                                                                    type="text"
                                                                    [id]="'enter-amount-cr-' + i"
                                                                    decimalDigitsDirective
                                                                    [DecimalPlaces]="2"
                                                                    [(ngModel)]="txn.amount"
                                                                    (input)="needToReCalculate.next(true)"
                                                                    (click)="blankLedgerAmountClick()"
                                                                    *ngIf="txn.type === 'CREDIT'"
                                                                    (click)="showBankLedgerPopup(txn, item)"
                                                                />
                                                            </mat-grid-tile>
                                                        </div>
                                                        <div class="entry-modal-height">
                                                            <div
                                                                class="position-absolute entry-modal top-position-fix-{{
                                                                    i
                                                                }}"
                                                                *ngIf="
                                                                    lc.showBankLedgerPanel &&
                                                                    lc.selectedBankTxnUniqueName === txn.id &&
                                                                    txn.type === 'CREDIT'
                                                                "
                                                            >
                                                                <new-ledger-entry-panel
                                                                    #newLedPanel
                                                                    [trxRequest]="advanceSearchRequest"
                                                                    [isBankTransaction]="true"
                                                                    [blankLedger]="item"
                                                                    [currentTxn]="lc.currentBlankTxn"
                                                                    [needToReCalculate]="needToReCalculate"
                                                                    [isReadOnly]="
                                                                        currentOrganizationType === 'COMPANY' &&
                                                                        currentCompanyBranches?.length > 2
                                                                    "
                                                                    (moreDetailOpen)="handleOpenMoreDetail($event)"
                                                                    (changeTransactionType)="
                                                                        toggleTransactionType($event)
                                                                    "
                                                                    [showTaxationDiscountBox]="
                                                                        lc.currentBlankTxn?.showTaxationDiscountBox
                                                                    "
                                                                    [showOtherTax]="lc.currentBlankTxn?.showOtherTax"
                                                                    (saveBlankLedger)="saveBankTransaction()"
                                                                    (clickedOutsideEvent)="
                                                                        hideBankLedgerPopup($event);
                                                                        txn.showAccountDropdown = false
                                                                    "
                                                                    (clickUnpaidInvoiceList)="
                                                                        clickUnpaidInvoiceList($event)
                                                                    "
                                                                    (getInvoiceListsForCreditNote)="
                                                                        getInvoiceListsForCreditNote($event)
                                                                    "
                                                                    [invoiceList]="invoiceList"
                                                                    (saveOtherTax)="saveOtherTax(item, $event)"
                                                                    [localeData]="localeData"
                                                                    [commonLocaleData]="commonLocaleData"
                                                                    [entrySide]="'cr'"
                                                                    (stockVariantSelected)="
                                                                        loadDetails(selectedAccountDetails, txn, $event)
                                                                    "
                                                                    [selectedAccountDetails]="selectedAccountDetails"
                                                                    [(isTotalChanged)]="isTotalChanged"
                                                                >
                                                                </new-ledger-entry-panel>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </ng-container>
                                            </mat-grid-list>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center mr-t2 page-count position-absolute">
                                    <span class="grey"
                                        >{{ bankTransactionsResponse?.totalItems }} {{ localeData?.transactions }},
                                    </span>
                                    <span class="black"
                                        >{{ bankTransactionsResponse?.totalPages }} {{ localeData?.pages }}</span
                                    >
                                    <pagination
                                        *ngIf="bankTransactionsResponse?.totalPages > 1"
                                        [totalItems]="
                                            bankTransactionsResponse?.countPerPage *
                                            bankTransactionsResponse?.totalPages
                                        "
                                        [itemsPerPage]="bankTransactionsResponse?.countPerPage"
                                        [maxSize]="5"
                                        class="pagination-sm"
                                        [(ngModel)]="bankTransactionsResponse.page"
                                        (pageChanged)="bankTransactionPageChanged($event)"
                                        [boundaryLinks]="true"
                                        [firstText]="commonLocaleData?.app_first"
                                        [previousText]="commonLocaleData?.app_previous"
                                        [nextText]="commonLocaleData?.app_next"
                                        [lastText]="commonLocaleData?.app_last"
                                    >
                                    </pagination>
                                </div>
                                <table class="w-100">
                                    <tr>
                                        <td colspan="12" class="py-2 px-3 font-15">
                                            <div class="pull-right" *ngIf="eLedgType == 'CREDIT'">
                                                {{ localeData?.cf_balance }}
                                                <span
                                                    class="pd-l15 digit-blue d-inline-flex"
                                                    *ngIf="eLedgType == 'CREDIT'"
                                                >
                                                    <amount-field
                                                        [amount]="eDrBalAmnt"
                                                        [currencySymbol]="false"
                                                        [currencyCode]="false"
                                                    >
                                                    </amount-field>
                                                </span>
                                            </div>
                                        </td>
                                        <td colspan="12" class="bd-rl py-2 px-3 font-15" *ngIf="eLedgType == 'DEBIT'">
                                            <div class="pull-right">
                                                {{ localeData?.cf_balance }}
                                                <span
                                                    class="pd-l15 digit-blue d-inline-flex"
                                                    *ngIf="eLedgType == 'DEBIT'"
                                                >
                                                    <amount-field
                                                        [amount]="eCrBalAmnt"
                                                        [currencySymbol]="false"
                                                        [currencyCode]="false"
                                                    >
                                                    </amount-field>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </section>
                    </div>
                    <!-- endregion -->
                    <!-- region account table-->
                    <div class="clearfix"></div>
                    <mat-grid-list
                        cols="2"
                        rowHeight="50px"
                        class="ledger-head"
                        *ngIf="!isMobileScreen || (isMobileScreen && visibleTransactionTypeMobile !== 'all')"
                    >
                        <mat-grid-tile
                            [ngClass]="
                                (Shown && !isMobileScreen) ||
                                (isMobileScreen && visibleTransactionTypeMobile === 'debit')
                                    ? 'active'
                                    : ''
                            "
                            class="hidden-xs sticky-header pr-0 no-right-border"
                        >
                            <b class="blue-heading font-15"> {{ lc.ledgerUnderStandingObj.text.dr }}</b>
                            <span class="dr-cr-category font-15 pull-right text-gray">{{ localeData?.dr }}</span>
                        </mat-grid-tile>
                        <mat-grid-tile
                            [ngClass]="
                                (!Shown && !isMobileScreen) ||
                                (isMobileScreen && visibleTransactionTypeMobile === 'credit')
                                    ? 'active'
                                    : ''
                            "
                            class="hidden-xs sticky-header pl-0 no-right-border"
                        >
                            <b class="blue-heading font-15"> {{ lc.ledgerUnderStandingObj.text.cr }}</b>
                            <span class="dr-cr-category font-15 pull-right text-gray">{{ localeData?.cr }}</span>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <!-- endregion -->
                    <div class="mobile-ledger-view clearfix" *ngIf="isMobileScreen">
                        <ng-container *ngIf="allTransactionDates && allTransactionDates.length > 0">
                            <ng-container *ngFor="let transactionDate of allTransactionDates">
                                <div class="border-none pt-0 pb-0">
                                    <div class="transaction-date pd-l15 pd-r15 pd-t2 bold">
                                        {{ transactionDate }}
                                    </div>
                                    <mat-grid-list cols="2" rowHeight="55px">
                                        <ng-container
                                            *ngFor="
                                                let transactions of allTransactionsList[transactionDate];
                                                let i = index
                                            "
                                        >
                                            <mat-grid-tile>
                                                <div
                                                    class="pd-l15 pd-r15 relative w-100 text-center"
                                                    [ngClass]="{
                                                        'compound-entry':
                                                            transactions.entryUniqueName === lc.selectedTxnUniqueName ||
                                                            transactions.isChecked
                                                    }"
                                                    [matTooltip]="transactions.description"
                                                    (mouseover)="entryHovered(transactions.entryUniqueName)"
                                                    (mouseout)="selectedTrxWhileHovering = ''"
                                                >
                                                    <span class="pull-left account-holder-checkbox">
                                                        <mat-checkbox
                                                            color="primary"
                                                            [id]="'mobile-view-select-entry-cr-' + i"
                                                            [ngClass]="{
                                                                'd-none':
                                                                    selectedTrxWhileHovering !==
                                                                        transactions.entryUniqueName &&
                                                                    !transactions.isChecked &&
                                                                    checkedTrxWhileHovering?.length === 0
                                                            }"
                                                            class="d-none"
                                                            [(ngModel)]="transactions.isChecked"
                                                            (change)="
                                                                entrySelected(
                                                                    $event,
                                                                    transactions.entryUniqueName,
                                                                    visibleTransactionTypeMobile
                                                                )
                                                            "
                                                        ></mat-checkbox>
                                                    </span>
                                                    <span class="account-holder-name">
                                                        <span
                                                            *ngIf="transactions.type === 'CREDIT'"
                                                            class="text-gray mr-r05"
                                                            >{{ localeData?.by }}</span
                                                        >
                                                        <span
                                                            *ngIf="transactions.type === 'DEBIT'"
                                                            class="text-gray mr-r05"
                                                            >{{ localeData?.to }}</span
                                                        >
                                                        <span class="mr-r15">{{
                                                            transactions?.inventory
                                                                ? transactions?.particular?.name +
                                                                  " (" +
                                                                  transactions?.inventory?.stock?.name +
                                                                  ")"
                                                                : transactions?.particular?.name
                                                        }}</span>
                                                        <span
                                                            class="download-invoice-ledger d-flex"
                                                            *ngIf="
                                                                voucherApiVersion !== 2 &&
                                                                transactions.attachedFileUniqueName
                                                            "
                                                            (click)="downloadFiles(transactions, 'ATTACHMENT', $event)"
                                                        >
                                                            <i class="icon-attachment pull-left"></i>
                                                        </span>
                                                        <span
                                                            class="download-invoice-ledger d-flex"
                                                            *ngIf="
                                                                voucherApiVersion !== 2 && transactions.voucherGenerated
                                                            "
                                                            (click)="downloadFiles(transactions, 'VOUCHER', $event)"
                                                        >
                                                            <i class="icon-download-circle pull-left"></i>
                                                        </span>
                                                        <span
                                                            class="download-invoice-ledger d-flex cursor-pointer"
                                                            *ngIf="
                                                                voucherApiVersion === 2 &&
                                                                (transactions.attachedFileUniqueName ||
                                                                    (transactions.voucherGenerated &&
                                                                        !restrictedVouchersForDownload.includes(
                                                                            transactions.voucherGeneratedType
                                                                        )))
                                                            "
                                                            (click)="openAttachmentsDialog(attachments, transactions)"
                                                        >
                                                            <i class="icon-download-circle pull-left"></i>
                                                        </span>
                                                    </span>
                                                </div>
                                            </mat-grid-tile>
                                            <mat-grid-tile>
                                                <div class="pd-l15 pd-r15 text-right">
                                                    <div class="d-flex justify-content-end">
                                                        <div>
                                                            <amount-field
                                                                [amount]="transactions.amount"
                                                                [currencySymbol]="transactions.currencySymbol"
                                                                [currencyCode]="transactions.currencyCode"
                                                            >
                                                            </amount-field>
                                                            <p
                                                                class="mb-0 amount-total"
                                                                *ngIf="isLedgerAccountAllowsMultiCurrency"
                                                            >
                                                                <amount-field
                                                                    [amount]="transactions.convertedAmount"
                                                                    [currencySymbol]="
                                                                        transactions.convertedCurrencySymbol
                                                                    "
                                                                    [currencyCode]="transactions.convertedCurrencyCode"
                                                                >
                                                                </amount-field>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </mat-grid-tile>
                                        </ng-container>
                                    </mat-grid-list>
                                </div>
                            </ng-container>
                        </ng-container>
                        <!-- region pagination -->
                        <div class="text-center mr-t2 page-count position-absolute">
                            <span class="grey"
                                >{{ (lc.transactionData$ | async)?.totalItems }} {{ localeData?.transactions }},
                            </span>
                            <span class="black"
                                >{{ (lc.transactionData$ | async)?.totalPages }} {{ localeData?.pages }}</span
                            >
                            <pagination
                                *ngIf="paginationObject.showPagination"
                                [totalItems]="paginationObject.totalItems"
                                [(ngModel)]="paginationObject.page"
                                [maxSize]="5"
                                class="pagination-sm"
                                [boundaryLinks]="true"
                                [itemsPerPage]="paginationObject.itemsPerPage"
                                (pageChanged)="pageChanged($event)"
                                [firstText]="commonLocaleData?.app_first"
                                [previousText]="commonLocaleData?.app_previous"
                                [nextText]="commonLocaleData?.app_next"
                                [lastText]="commonLocaleData?.app_last"
                            >
                            </pagination>
                        </div>
                        <!-- endregion -->
                    </div>
                    <!-- end mobile view -->
                    <!-- region main transactions-->
                    <div class="ledger-book" *ngIf="!isMobileScreen">
                        <!-- region debit transaction-->
                        <div
                            [ngClass]="Shown ? 'active' : ''"
                            class="left-col-new"
                            [ngClass]="{
                                'bd-rr':
                                    (lc.transactionData$ | async)?.debitTransactions?.length >=
                                    (lc.transactionData$ | async)?.creditTransactions?.length
                            }"
                        >
                            <!-- region debit transaction header-->
                            <mat-grid-list cols="4" rowHeight="50px">
                                <mat-grid-tile class="bold" colspan="1">
                                    <span class="cp">{{ commonLocaleData?.app_date }}</span>
                                </mat-grid-tile>
                                <mat-grid-tile class="bold" colspan="2">
                                    {{ commonLocaleData?.app_particular }}
                                </mat-grid-tile>
                                <mat-grid-tile class="bold text-right no-right-border" colspan="1">
                                    {{ commonLocaleData?.app_amount }}
                                </mat-grid-tile>
                            </mat-grid-list>
                            <!-- endregion -->

                            <mat-grid-list
                                cols="4"
                                rowHeight="50px"
                                tabindex="-1"
                                *ngIf="
                                    ledgerTxnBalance?.forwardedBalance?.amount > 0 &&
                                    ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT'
                                "
                            >
                                <mat-grid-tile [attr.data-title]="commonLocaleData?.app_date" colspan="1">
                                    <mat-checkbox
                                        color="primary"
                                        id="select-entries-date-cr"
                                        [(ngModel)]="debitSelectAll"
                                        *ngIf="checkedTrxWhileHovering?.length > 0"
                                        (change)="selectAllEntries($event, 'debit')"
                                    ></mat-checkbox>
                                </mat-grid-tile>
                                <mat-grid-tile [attr.data-title]="commonLocaleData?.app_particular" colspan="2">
                                    <span *ngIf="(lc.transactionData$ | async)?.page <= 1">{{
                                        localeData?.to_balance_bf
                                    }}</span>
                                </mat-grid-tile>
                                <mat-grid-tile
                                    [attr.data-title]="commonLocaleData?.app_amount"
                                    colspan="1"
                                    class="no-right-border"
                                >
                                    <div class="d-flex flex-column">
                                        <ng-container *ngIf="(lc.transactionData$ | async)?.page <= 1">
                                            <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT'">
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.forwardedBalance?.amount"
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                            <span
                                                class="amount-total text-right"
                                                *ngIf="isLedgerAccountAllowsMultiCurrency"
                                            >
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.convertedForwardedBalance?.amount"
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                            <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'CREDIT'">{{
                                                commonLocaleData?.app_numbers?.zero
                                            }}</span>
                                        </ng-container>
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>

                            <mat-grid-list
                                cols="4"
                                rowHeight="50px"
                                *ngIf="
                                    ledgerTxnBalance?.forwardedBalance?.type !== 'DEBIT' ||
                                    ledgerTxnBalance?.forwardedBalance?.amount == 0
                                "
                            >
                                <mat-grid-tile [attr.data-title]="commonLocaleData?.app_select_all" colspan="1">
                                    <mat-checkbox
                                        color="primary"
                                        [(ngModel)]="debitSelectAll"
                                        id="select-entries-all-cr"
                                        *ngIf="checkedTrxWhileHovering?.length > 0"
                                        (change)="selectAllEntries($event, 'debit')"
                                    ></mat-checkbox>
                                </mat-grid-tile>
                                <mat-grid-tile colspan="2">&nbsp;</mat-grid-tile>
                                <mat-grid-tile class="no-right-border" colspan="1">&nbsp;</mat-grid-tile>
                            </mat-grid-list>
                            <!-- endregion -->

                            <!-- region debit transaction loop over transactions -->
                            <mat-grid-list
                                cols="4"
                                rowHeight="50px"
                                tabindex="-1"
                                class="ledger-row"
                                *ngFor="
                                    let txn of (lc.transactionData$ | async)?.debitTransactions;
                                    let i = index;
                                    trackBy: trackByTransactionUniqueName
                                "
                                (touchend)="showUpdateLedgerModalIpad(txn, 'dr')"
                                (dblclick)="showUpdateLedgerModal(txn, 'dr')"
                                (keydown.enter)="showUpdateLedgerModal(txn, 'dr')"
                                [ngClass]="{
                                    'compound-entry': txn.entryUniqueName === lc.selectedTxnUniqueName || txn.isChecked
                                }"
                                [matTooltip]="txn.description"
                                [matTooltipPosition]="'above'"
                                matTooltipClass="tooltip-black"
                                (mouseover)="entryHovered(txn.entryUniqueName)"
                                (mouseout)="selectedTrxWhileHovering = ''"
                            >
                                <mat-grid-tile [attr.data-title]="commonLocaleData?.app_date" colspan="1">
                                    <div class="d-flex align-items-center">
                                        <span class="float-left">
                                            <mat-checkbox
                                                color="primary"
                                                [id]="'select-entry-dr-' + i"
                                                [ngClass]="{
                                                    'd-none':
                                                        selectedTrxWhileHovering !== txn.entryUniqueName &&
                                                        !txn.isChecked &&
                                                        checkedTrxWhileHovering?.length === 0
                                                }"
                                                [(ngModel)]="txn.isChecked"
                                                (change)="entrySelected($event, txn.entryUniqueName, 'debit')"
                                            ></mat-checkbox>
                                        </span>
                                        <span>{{ txn.entryDate }}</span>
                                    </div>
                                </mat-grid-tile>

                                <mat-grid-tile colspan="2" [attr.data-title]="commonLocaleData?.app_particular">
                                    <div class="d-flex align-items-center justify-content-between w-100">
                                        <div class="text-ellipsis particular-label">
                                            {{
                                                txn
                                                    | particular
                                                        : "to"
                                                        : localeData?.by_particular
                                                        : localeData?.to_particular
                                            }}
                                        </div>

                                        <span
                                            class="download-invoice-ledger d-flex"
                                            *ngIf="voucherApiVersion !== 2 && txn.attachedFileUniqueName"
                                            (click)="downloadFiles(txn, 'ATTACHMENT', $event)"
                                            [matTooltip]="localeData?.download_file + ' : ' + txn.attachedFileName"
                                            [matTooltipPosition]="'right'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-attachment pull-left"></i>
                                        </span>
                                        <span
                                            class="download-invoice-ledger d-flex"
                                            *ngIf="voucherApiVersion !== 2 && txn.voucherGenerated"
                                            (click)="downloadFiles(txn, 'VOUCHER', $event)"
                                            [matTooltip]="
                                                commonLocaleData?.app_download +
                                                ' ' +
                                                (txn.voucherGeneratedType === 'sales'
                                                    ? commonLocaleData?.app_invoice
                                                    : commonLocaleData?.app_voucher) +
                                                ' : ' +
                                                (txn.voucherNumber || commonLocaleData?.app_not_available)
                                            "
                                            [matTooltipPosition]="'right'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-download-circle pull-left"></i>
                                        </span>
                                        <span
                                            class="download-invoice-ledger d-flex cursor-pointer"
                                            *ngIf="
                                                voucherApiVersion === 2 &&
                                                (txn.attachedFileUniqueName ||
                                                    (txn.voucherGenerated &&
                                                        !restrictedVouchersForDownload.includes(
                                                            txn.voucherGeneratedType
                                                        )))
                                            "
                                            (click)="openAttachmentsDialog(attachments, txn)"
                                            [matTooltip]="
                                                txn.attachedFileUniqueName &&
                                                txn.voucherGenerated &&
                                                !restrictedVouchersForDownload.includes(txn.voucherGeneratedType)
                                                    ? (txn.voucherNumber || commonLocaleData?.app_not_available) +
                                                      ', ' +
                                                      txn.attachedFileName
                                                    : txn.attachedFileUniqueName
                                                    ? txn.attachedFileName
                                                    : txn.voucherNumber || commonLocaleData?.app_not_available
                                            "
                                            [matTooltipPosition]="'right'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-download-circle pull-left"></i>
                                        </span>
                                    </div>
                                </mat-grid-tile>

                                <mat-grid-tile
                                    [ngClass]="{ 'multicurrency-amount': isLedgerAccountAllowsMultiCurrency }"
                                    colspan="1"
                                    class="text-right no-right-border flex-column align-items-end"
                                    [attr.data-title]="commonLocaleData?.app_amount"
                                >
                                    <amount-field
                                        [amount]="txn.amount"
                                        [currencySymbol]="txn.currencySymbol"
                                        [currencyCode]="txn.currencyCode"
                                    >
                                    </amount-field>
                                    <p class="mb-0 amount-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                        <amount-field
                                            [amount]="txn.convertedAmount"
                                            [currencySymbol]="txn.convertedCurrencySymbol"
                                            [currencyCode]="txn.convertedCurrencyCode"
                                        >
                                        </amount-field>
                                    </p>
                                </mat-grid-tile>
                            </mat-grid-list>

                            <!-- region blank ledger-->
                            <div
                                class="width-100 h-table"
                                no-tree
                                id="blank-ledger-container"
                                (click)="$event.stopPropagation()"
                            >
                                <ng-container *ngFor="let txn of lc.blankLedger.transactions; let i = index">
                                    <div class="width-100 no-left-border" *ngIf="txn.type === 'DEBIT'">
                                        <div class="width-100 ledger-main">
                                            <mat-grid-list cols="4" rowHeight="50px" class="ledger-row">
                                                <mat-grid-tile
                                                    class="new-entry-date"
                                                    colspan="1"
                                                    [attr.data-title]="commonLocaleData?.app_date"
                                                >
                                                    <div class="d-flex align-items-center">
                                                        <span class="ledger-checkbox pull-left"> </span>
                                                        <giddh-datepicker
                                                            name="ledgDate"
                                                            [(ngModel)]="lc.blankLedger.entryDate"
                                                            [placeholder]="lc.formatPlaceholder"
                                                            (dateSelected)="
                                                                getInvoiceListsForCreditNote([
                                                                    {},
                                                                    lc.blankLedger.voucherType
                                                                ])
                                                            "
                                                            (datepickerState)="datepickerState($event)"
                                                        ></giddh-datepicker>
                                                    </div>
                                                </mat-grid-tile>
                                                <mat-grid-tile
                                                    [attr.data-title]="commonLocaleData?.app_particular"
                                                    colspan="2"
                                                    class="select2-parent select2-ledger new-entry-ledger"
                                                    (mousedown)="showNewLedgerEntryPopup(txn)"
                                                >
                                                    <div class="ledger-account-label d-flex">
                                                        <span
                                                            *ngIf="
                                                                (!shDebit.isOpen && txn.particular) ||
                                                                (shDebit.isOpen && shDebit?.filter)
                                                            "
                                                            >{{ localeData?.to }}
                                                        </span>
                                                        <sh-select
                                                            [id]="'select-account-dr-' + i"
                                                            [idEl]="txn.id"
                                                            #shDebit
                                                            [isPaginationEnabled]="true"
                                                            (scrollEnd)="handleScrollEnd()"
                                                            (dynamicSearchedQuery)="onSearchQueryChanged($event)"
                                                            [enableDynamicSearch]="true"
                                                            [notFoundMsg]="noResultsFoundLabel"
                                                            [options]="searchResults"
                                                            [(ngModel)]="txn.particular"
                                                            tabindex="-1"
                                                            #select
                                                            [showClear]="false"
                                                            (keydown.enter)="onEnter(select, txn)"
                                                            (onShow)="isSelectOpen = true"
                                                            (onHide)="onSelectHide()"
                                                            (selected)="
                                                                selectAccount($event, txn); showNewLedgerEntryPopup(txn)
                                                            "
                                                            (onClear)="selectAccount($event, txn, true)"
                                                            (keydown)="keydownPressed($event)"
                                                            [placeholder]="localeData?.to_select_accounts"
                                                            [notFoundLink]="true"
                                                            (noResultsClicked)="toggleAsidePane(null, shDebit)"
                                                            [multiple]="false"
                                                            [ItemHeight]="67"
                                                            [useInBuiltFilterForFlattenAc]="true"
                                                        >
                                                            <ng-template #optionTemplate let-option="option">
                                                                <ng-container *ngIf="!option.additional?.stock">
                                                                    <a href="javascript:void(0)" class="list-item">
                                                                        <div class="item">{{ option?.label }}</div>
                                                                        <div class="item-unique">
                                                                            {{ option.additional?.uniqueName }}
                                                                        </div>
                                                                    </a>
                                                                </ng-container>
                                                                <ng-container *ngIf="option.additional?.stock">
                                                                    <a href="javascript:void(0)" class="list-item">
                                                                        <div class="item">{{ option?.label }}</div>
                                                                        <div class="item-unique">
                                                                            {{ option.additional?.uniqueName }}
                                                                        </div>
                                                                        <div class="item-stock">
                                                                            {{ commonLocaleData?.app_stock }}:
                                                                            {{ option.additional?.stock?.uniqueName }}
                                                                        </div>
                                                                    </a>
                                                                </ng-container>
                                                            </ng-template>
                                                            <ng-template #notFoundLinkTemplate>
                                                                <a
                                                                    [ngClass]="{ 'active': keydownClassAdded }"
                                                                    class="notfound-option"
                                                                    [keyboardShortcut]="'alt+c'"
                                                                    (onShortcutPress)="toggleAsidePane(null, shDebit)"
                                                                >
                                                                    <span
                                                                        class="pl-0"
                                                                        [ngClass]="{ 'active': keydownClassAdded }"
                                                                        >Create {{ localeData?.new_account }}</span
                                                                    >
                                                                    <span>{{ commonLocaleData?.app_alt_c }}</span>
                                                                </a>
                                                            </ng-template>
                                                        </sh-select>
                                                    </div>
                                                    <ul
                                                        class="no-result-template"
                                                        *ngIf="lc.noAccountChosenForNewEntry"
                                                    >
                                                        <li>{{ localeData?.create_account }}</li>
                                                    </ul>
                                                </mat-grid-tile>
                                                <mat-grid-tile
                                                    [attr.data-title]="commonLocaleData?.app_amount"
                                                    colspan="1"
                                                    class="position-relative no-right-border"
                                                >
                                                    <input
                                                        matInput
                                                        class="text-right form-control"
                                                        type="text"
                                                        [id]="'enter-bank-amount-dr-' + i"
                                                        [prefix]="selectedPrefixForCurrency"
                                                        [suffix]="selectedSuffixForCurrency"
                                                        [mask]="inputMaskFormat"
                                                        [(ngModel)]="txn.total"
                                                        *ngIf="
                                                            txn.selectedAccount?.stock?.variant?.salesTaxInclusive ||
                                                            txn.selectedAccount?.stock?.variant?.purchaseTaxInclusive ||
                                                            txn.selectedAccount?.stock?.variant?.fixedAssetTaxInclusive
                                                        "
                                                        (input)="isTotalChanged = true; handleAmountInput(txn, true)"
                                                        (click)="showNewLedgerEntryPopup(txn); blankLedgerAmountClick()"
                                                    />
                                                    <input
                                                        matInput
                                                        class="text-right form-control"
                                                        type="text"
                                                        [id]="'enter-bank-amount-dr-' + i"
                                                        [prefix]="selectedPrefixForCurrency"
                                                        [suffix]="selectedSuffixForCurrency"
                                                        [mask]="inputMaskFormat"
                                                        [(ngModel)]="txn.amount"
                                                        *ngIf="
                                                            !txn.selectedAccount?.stock?.variant?.salesTaxInclusive &&
                                                            !txn.selectedAccount?.stock?.variant
                                                                ?.purchaseTaxInclusive &&
                                                            !txn.selectedAccount?.stock?.variant?.fixedAssetTaxInclusive
                                                        "
                                                        (input)="handleAmountInput(txn)"
                                                        (click)="showNewLedgerEntryPopup(txn); blankLedgerAmountClick()"
                                                    />
                                                </mat-grid-tile>
                                            </mat-grid-list>
                                        </div>
                                        <!--new ledge popup-->
                                        <div
                                            class="pos-abs entry-modal"
                                            (click)="shDebit?.hide()"
                                            *ngIf="
                                                lc.showNewLedgerPanel &&
                                                lc.currentBlankTxn?.type === 'DEBIT' &&
                                                lc.currentBlankTxn?.id === txn.id
                                            "
                                        >
                                            <new-ledger-entry-panel
                                                #newLedPanel
                                                [blankLedger]="lc.blankLedger"
                                                [currentTxn]="lc.currentBlankTxn"
                                                [needToReCalculate]="needToReCalculate"
                                                [tcsOrTds]="tcsOrTds"
                                                [baseCurrencyDetails]="baseCurrencyDetails"
                                                [foreignCurrencyDetails]="foreignCurrencyDetails"
                                                [giddhBalanceDecimalPlaces]="giddhBalanceDecimalPlaces"
                                                [selectedCurrency]="selectedCurrency"
                                                [selectedPrefixForCurrency]="selectedPrefixForCurrency"
                                                [selectedSuffixForCurrency]="selectedSuffixForCurrency"
                                                [isLedgerAccountAllowsMultiCurrency]="
                                                    isLedgerAccountAllowsMultiCurrency
                                                "
                                                [inputMaskFormat]="inputMaskFormat"
                                                (moreDetailOpen)="handleOpenMoreDetail($event)"
                                                (changeTransactionType)="toggleTransactionType($event)"
                                                [showTaxationDiscountBox]="lc.currentBlankTxn?.showTaxationDiscountBox"
                                                [showOtherTax]="lc.currentBlankTxn?.showOtherTax"
                                                (resetBlankLedger)="resetBlankTransaction()"
                                                (saveBlankLedger)="saveBlankTransaction()"
                                                (clickedOutsideEvent)="hideNewLedgerEntryPopup()"
                                                (getInvoiceListsForCreditNote)="getInvoiceListsForCreditNote($event)"
                                                (clickUnpaidInvoiceList)="clickUnpaidInvoiceList($event)"
                                                [invoiceList]="invoiceList"
                                                [shouldShowRcmTaxableAmount]="shouldShowRcmTaxableAmount"
                                                [shouldShowItcSection]="shouldShowItcSection"
                                                [isTouristSchemeApplicable]="isTouristSchemeApplicable"
                                                (saveOtherTax)="saveOtherTax(lc.blankLedger, $event)"
                                                [localeData]="localeData"
                                                [commonLocaleData]="commonLocaleData"
                                                [entrySide]="'dr'"
                                                (stockVariantSelected)="
                                                    loadDetails(selectedAccountDetails, txn, $event)
                                                "
                                                [selectedAccountDetails]="selectedAccountDetails"
                                                [(isTotalChanged)]="isTotalChanged"
                                            >
                                            </new-ledger-entry-panel>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                            <!-- endregion -->
                        </div>
                        <!-- endregion -->

                        <!-- region credit transaction-->
                        <div
                            [ngClass]="isHide ? 'active' : 'right-col-new'"
                            class="right-col-new"
                            [ngClass]="{
                                'bd-rl':
                                    (lc.transactionData$ | async)?.debitTransactions?.length <
                                    (lc.transactionData$ | async)?.creditTransactions?.length
                            }"
                        >
                            <!-- region credit transaction header-->
                            <mat-grid-list cols="4" rowHeight="50px">
                                <mat-grid-tile class="bold" colspan="1">
                                    <span class="cp">{{ commonLocaleData?.app_date }}</span>
                                </mat-grid-tile>
                                <mat-grid-tile class="bold" colspan="2">
                                    {{ commonLocaleData?.app_particular }}
                                </mat-grid-tile>
                                <mat-grid-tile class="bold text-right no-right-border" colspan="1">
                                    {{ commonLocaleData?.app_amount }}
                                </mat-grid-tile>
                            </mat-grid-list>
                            <!-- endregion -->

                            <!-- region credit transaction if forwardedBalance -->
                            <mat-grid-list
                                cols="4"
                                rowHeight="50px"
                                tabindex="-1"
                                class="ledger-row"
                                tabindex="-1"
                                *ngIf="
                                    ledgerTxnBalance?.forwardedBalance?.amount > 0 &&
                                    ledgerTxnBalance?.forwardedBalance?.type === 'CREDIT'
                                "
                            >
                                <mat-grid-tile colspan="1" [attr.data-title]="commonLocaleData?.app_date">
                                    <mat-checkbox
                                        color="primary"
                                        id="select-all-entries-dr"
                                        [(ngModel)]="creditSelectAll"
                                        *ngIf="checkedTrxWhileHovering?.length > 0"
                                        (change)="selectAllEntries($event, 'credit')"
                                    ></mat-checkbox>
                                </mat-grid-tile>
                                <mat-grid-tile [attr.data-title]="localeData?.bf_balance" colspan="2">
                                    <span *ngIf="(lc.transactionData$ | async)?.page <= 1">
                                        {{ localeData?.by_balance_bf }}
                                    </span>
                                </mat-grid-tile>
                                <mat-grid-tile
                                    [attr.data-title]="commonLocaleData?.app_amount"
                                    colspan="1"
                                    class="text-right no-right-border"
                                >
                                    <div class="d-flex flex-column">
                                        <ng-container *ngIf="(lc.transactionData$ | async)?.page <= 1">
                                            <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'CREDIT'">
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.forwardedBalance?.amount"
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                            <span class="amount-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.convertedForwardedBalance?.amount"
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                            <span *ngIf="ledgerTxnBalance?.forwardedBalance?.type === 'DEBIT'">{{
                                                commonLocaleData?.app_numbers?.zero
                                            }}</span>
                                        </ng-container>
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>
                            <!-- endregion -->

                            <!-- region credit transaction no forwardedBalance -->
                            <mat-grid-list
                                cols="4"
                                rowHeight="50px"
                                class="ledger-row"
                                *ngIf="
                                    ledgerTxnBalance?.forwardedBalance?.type !== 'CREDIT' ||
                                    ledgerTxnBalance?.forwardedBalance?.amount == 0
                                "
                            >
                                <mat-grid-tile colspan="1">
                                    <mat-checkbox
                                        color="primary"
                                        id="select-all-entries-credit"
                                        [(ngModel)]="creditSelectAll"
                                        *ngIf="checkedTrxWhileHovering?.length > 0"
                                        (change)="selectAllEntries($event, 'credit')"
                                    ></mat-checkbox>
                                </mat-grid-tile>
                                <mat-grid-tile colspan="2">&nbsp;</mat-grid-tile>
                                <mat-grid-tile class="no-right-border" colspan="1">&nbsp;</mat-grid-tile>
                            </mat-grid-list>
                            <!-- endregion -->

                            <!-- region credit transaction loop over transactions -->
                            <mat-grid-list
                                cols="4"
                                rowHeight="50px"
                                class="ledger-row"
                                *ngFor="
                                    let txn of (lc.transactionData$ | async)?.creditTransactions;
                                    let i = index;
                                    trackBy: trackByTransactionUniqueName
                                "
                                (touchend)="showUpdateLedgerModalIpad(txn, 'cr')"
                                (dblclick)="showUpdateLedgerModal(txn, 'cr')"
                                tabindex="-1"
                                (keydown.enter)="showUpdateLedgerModal(txn, 'cr')"
                                [ngClass]="{
                                    'compound-entry': txn.entryUniqueName === lc.selectedTxnUniqueName || txn.isChecked
                                }"
                                [matTooltip]="txn.description"
                                [matTooltipPosition]="'above'"
                                matTooltipClass="tooltip-black"
                                (mouseover)="entryHovered(txn.entryUniqueName)"
                                (mouseout)="selectedTrxWhileHovering = ''"
                            >
                                <mat-grid-tile colspan="1" [attr.data-title]="commonLocaleData?.app_date">
                                    <div class="d-flex align-items-center">
                                        <span class="ledger-checkbox pull-left">
                                            <mat-checkbox
                                                color="primary"
                                                [id]="'select-entry-cr-' + i"
                                                [ngClass]="{
                                                    'd-none':
                                                        selectedTrxWhileHovering !== txn.entryUniqueName &&
                                                        !txn.isChecked &&
                                                        checkedTrxWhileHovering?.length === 0
                                                }"
                                                class="d-none"
                                                [(ngModel)]="txn.isChecked"
                                                (change)="entrySelected($event, txn.entryUniqueName, 'credit')"
                                            ></mat-checkbox>
                                        </span>
                                        <span>{{ txn.entryDate }}</span>
                                    </div>
                                </mat-grid-tile>
                                <mat-grid-tile colspan="2" [attr.data-title]="commonLocaleData?.app_particular">
                                    <div class="d-flex align-items-center justify-content-between w-100">
                                        <div class="text-ellipsis particular-label">
                                            {{
                                                txn
                                                    | particular
                                                        : "by"
                                                        : localeData?.by_particular
                                                        : localeData?.to_particular
                                            }}
                                        </div>
                                        <span
                                            class="download-invoice-ledger d-flex"
                                            *ngIf="voucherApiVersion !== 2 && txn.attachedFileUniqueName"
                                            (click)="downloadFiles(txn, 'ATTACHMENT', $event)"
                                            [matTooltip]="localeData?.download_file + ' : ' + txn.attachedFileName"
                                            [matTooltipPosition]="'right'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-attachment pull-left"></i>
                                        </span>
                                        <span
                                            class="download-invoice-ledger d-flex"
                                            *ngIf="voucherApiVersion !== 2 && txn.voucherGenerated"
                                            (click)="downloadFiles(txn, 'VOUCHER', $event)"
                                            [matTooltip]="
                                                commonLocaleData?.app_download +
                                                ' ' +
                                                (txn.voucherGeneratedType === 'sales'
                                                    ? commonLocaleData?.app_invoice
                                                    : commonLocaleData?.app_voucher) +
                                                ' : ' +
                                                (txn.voucherNumber || commonLocaleData?.app_not_available)
                                            "
                                            [matTooltipPosition]="'right'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-download-circle pull-left"></i>
                                        </span>
                                        <span
                                            class="download-invoice-ledger d-flex cursor-pointer"
                                            *ngIf="
                                                voucherApiVersion === 2 &&
                                                (txn.attachedFileUniqueName ||
                                                    (txn.voucherGenerated &&
                                                        !restrictedVouchersForDownload.includes(
                                                            txn.voucherGeneratedType
                                                        )))
                                            "
                                            (click)="openAttachmentsDialog(attachments, txn)"
                                            [matTooltip]="
                                                txn.attachedFileUniqueName &&
                                                txn.voucherGenerated &&
                                                !restrictedVouchersForDownload.includes(txn.voucherGeneratedType)
                                                    ? (txn.voucherNumber || commonLocaleData?.app_not_available) +
                                                      ', ' +
                                                      txn.attachedFileName
                                                    : txn.attachedFileUniqueName
                                                    ? txn.attachedFileName
                                                    : txn.voucherNumber || commonLocaleData?.app_not_available
                                            "
                                            [matTooltipPosition]="'right'"
                                            matTooltipClass="tooltip-black"
                                        >
                                            <i class="icon-download-circle pull-left"></i>
                                        </span>
                                    </div>
                                </mat-grid-tile>
                                <mat-grid-tile
                                    colspan="1"
                                    [ngClass]="{ 'multicurrency-amount': isLedgerAccountAllowsMultiCurrency }"
                                    [attr.data-title]="commonLocaleData?.app_amount"
                                    class="position-relative text-right no-right-border flex-column align-items-end"
                                >
                                    <amount-field
                                        [amount]="txn.amount"
                                        [currencySymbol]="txn.currencySymbol"
                                        [currencyCode]="txn.currencyCode"
                                    >
                                    </amount-field>
                                    <p class="mb-0 amount-total" *ngIf="isLedgerAccountAllowsMultiCurrency">
                                        <amount-field
                                            [amount]="txn.convertedAmount"
                                            [currencySymbol]="txn.convertedCurrencySymbol"
                                            [currencyCode]="txn.convertedCurrencyCode"
                                        >
                                        </amount-field>
                                    </p>
                                </mat-grid-tile>
                            </mat-grid-list>
                            <!-- endregion -->

                            <!-- region blank ledger-->
                            <div class="width-100" no-tree (click)="$event.stopPropagation()">
                                <ng-container *ngFor="let txn of lc.blankLedger.transactions; let i = index">
                                    <div class="width-100" *ngIf="txn.type === 'CREDIT'">
                                        <div class="width-100 h-table ledger-main">
                                            <mat-grid-list cols="4" rowHeight="50px" class="ledger-row">
                                                <mat-grid-tile
                                                    colspan="1"
                                                    class="new-entry-date"
                                                    [attr.data-title]="commonLocaleData?.app_date"
                                                >
                                                    <div class="d-flex align-items-center">
                                                        <span class="ledger-checkbox pull-left"> </span>
                                                        <giddh-datepicker
                                                            name="bsdateledger"
                                                            (datepickerState)="datepickerState($event)"
                                                            [(ngModel)]="lc.blankLedger.entryDate"
                                                            [placeholder]="lc.formatPlaceholder"
                                                        ></giddh-datepicker>
                                                    </div>
                                                </mat-grid-tile>
                                                <mat-grid-tile
                                                    class="select2-parent select2-ledger new-entry-ledger"
                                                    colspan="2"
                                                    [attr.data-title]="commonLocaleData?.app_particular"
                                                    (mousedown)="showNewLedgerEntryPopup(txn)"
                                                >
                                                    <div class="ledger-account-label d-flex">
                                                        <span
                                                            *ngIf="
                                                                (!shCredit.isOpen && txn.particular) ||
                                                                (shCredit.isOpen && shCredit?.filter)
                                                            "
                                                            >{{ localeData?.by }}</span
                                                        >
                                                        <sh-select
                                                            [id]="'select-account-cr-' + i"
                                                            [idEl]="txn.id"
                                                            #shCredit
                                                            [options]="searchResults"
                                                            tabindex="-1"
                                                            [isPaginationEnabled]="true"
                                                            (scrollEnd)="handleScrollEnd()"
                                                            (dynamicSearchedQuery)="onSearchQueryChanged($event)"
                                                            [enableDynamicSearch]="true"
                                                            [notFoundMsg]="noResultsFoundLabel"
                                                            #select
                                                            (keydown.enter)="onEnter(shCredit, txn)"
                                                            (onShow)="isSelectOpen = true"
                                                            (onHide)="onSelectHide()"
                                                            [(ngModel)]="txn.particular"
                                                            (selected)="
                                                                selectAccount($event, txn); showNewLedgerEntryPopup(txn)
                                                            "
                                                            (onClear)="selectAccount($event, txn, true)"
                                                            [showClear]="false"
                                                            [placeholder]="localeData?.by_select_accounts"
                                                            (keydown)="keydownPressed($event)"
                                                            [notFoundLink]="true"
                                                            (noResultsClicked)="toggleAsidePane(null, shCredit)"
                                                            [multiple]="false"
                                                            [ItemHeight]="67"
                                                            [useInBuiltFilterForFlattenAc]="true"
                                                        >
                                                            <ng-template #optionTemplate let-option="option">
                                                                <ng-container *ngIf="!option.additional?.stock">
                                                                    <a href="javascript:void(0)" class="list-item">
                                                                        <div class="item">{{ option?.label }}</div>
                                                                        <div class="item-unique">
                                                                            {{ option.additional?.uniqueName }}
                                                                        </div>
                                                                    </a>
                                                                </ng-container>
                                                                <ng-container *ngIf="option.additional?.stock">
                                                                    <a href="javascript:void(0)" class="list-item">
                                                                        <div class="item">{{ option?.label }}</div>
                                                                        <div class="item-unique">
                                                                            {{ option.additional?.uniqueName }}
                                                                        </div>
                                                                        <div class="item-stock">
                                                                            {{ commonLocaleData?.app_stock }}:
                                                                            {{ option.additional?.stock?.uniqueName }}
                                                                        </div>
                                                                    </a>
                                                                </ng-container>
                                                            </ng-template>
                                                            <ng-template #notFoundLinkTemplate>
                                                                <a
                                                                    [ngClass]="{ 'active': keydownClassAdded }"
                                                                    class="notfound-option"
                                                                    [keyboardShortcut]="'alt+c'"
                                                                    (onShortcutPress)="toggleAsidePane(null, shCredit)"
                                                                >
                                                                    <span
                                                                        class="pl-0"
                                                                        [ngClass]="{ 'active': keydownClassAdded }"
                                                                        >Create {{ localeData?.new_account }}</span
                                                                    >
                                                                    <span>{{ commonLocaleData?.app_alt_c }}</span>
                                                                </a>
                                                            </ng-template>
                                                        </sh-select>
                                                    </div>
                                                    <ul
                                                        class="no-result-template"
                                                        *ngIf="lc.noAccountChosenForNewEntry"
                                                    >
                                                        <li>{{ localeData?.create_account }}</li>
                                                    </ul>
                                                </mat-grid-tile>
                                                <mat-grid-tile
                                                    class="position-relative no-right-border"
                                                    colspan="1"
                                                    [attr.data-title]="commonLocaleData?.app_amount"
                                                >
                                                    <input
                                                        matInput
                                                        class="text-right form-control"
                                                        type="text"
                                                        id="enter-bank-amount-cr"
                                                        [prefix]="selectedPrefixForCurrency"
                                                        [suffix]="selectedSuffixForCurrency"
                                                        [mask]="inputMaskFormat"
                                                        [(ngModel)]="txn.total"
                                                        *ngIf="
                                                            txn.selectedAccount?.stock?.variant?.salesTaxInclusive ||
                                                            txn.selectedAccount?.stock?.variant?.purchaseTaxInclusive ||
                                                            txn.selectedAccount?.stock?.variant?.fixedAssetTaxInclusive
                                                        "
                                                        (input)="isTotalChanged = true; handleAmountInput(txn, true)"
                                                        (click)="showNewLedgerEntryPopup(txn); blankLedgerAmountClick()"
                                                    />
                                                    <input
                                                        matInput
                                                        class="text-right form-control"
                                                        type="text"
                                                        id="enter-bank-amount-cr"
                                                        [prefix]="selectedPrefixForCurrency"
                                                        [suffix]="selectedSuffixForCurrency"
                                                        [mask]="inputMaskFormat"
                                                        [(ngModel)]="txn.amount"
                                                        *ngIf="
                                                            !txn.selectedAccount?.stock?.variant?.salesTaxInclusive &&
                                                            !txn.selectedAccount?.stock?.variant
                                                                ?.purchaseTaxInclusive &&
                                                            !txn.selectedAccount?.stock?.variant?.fixedAssetTaxInclusive
                                                        "
                                                        (input)="handleAmountInput(txn)"
                                                        (click)="showNewLedgerEntryPopup(txn); blankLedgerAmountClick()"
                                                    />
                                                </mat-grid-tile>
                                            </mat-grid-list>
                                        </div>
                                        <!--new ledge popup-->
                                        <div
                                            class="position-absolute entry-modal"
                                            (click)="shCredit?.hide()"
                                            (keydown)="$event.stopPropagation()"
                                            *ngIf="
                                                lc.showNewLedgerPanel &&
                                                lc.currentBlankTxn?.type === 'CREDIT' &&
                                                lc.currentBlankTxn?.id === txn.id
                                            "
                                        >
                                            <new-ledger-entry-panel
                                                #newLedPanel
                                                [blankLedger]="lc.blankLedger"
                                                [currentTxn]="lc.currentBlankTxn"
                                                [needToReCalculate]="needToReCalculate"
                                                [tcsOrTds]="tcsOrTds"
                                                [baseCurrencyDetails]="baseCurrencyDetails"
                                                [foreignCurrencyDetails]="foreignCurrencyDetails"
                                                [selectedCurrency]="selectedCurrency"
                                                [giddhBalanceDecimalPlaces]="giddhBalanceDecimalPlaces"
                                                [selectedPrefixForCurrency]="selectedPrefixForCurrency"
                                                [selectedSuffixForCurrency]="selectedSuffixForCurrency"
                                                [inputMaskFormat]="inputMaskFormat"
                                                [isLedgerAccountAllowsMultiCurrency]="
                                                    isLedgerAccountAllowsMultiCurrency
                                                "
                                                (moreDetailOpen)="handleOpenMoreDetail($event)"
                                                (changeTransactionType)="toggleTransactionType($event)"
                                                [showTaxationDiscountBox]="lc.currentBlankTxn?.showTaxationDiscountBox"
                                                [showOtherTax]="lc.currentBlankTxn?.showOtherTax"
                                                (resetBlankLedger)="resetBlankTransaction()"
                                                (saveBlankLedger)="saveBlankTransaction()"
                                                (clickedOutsideEvent)="hideNewLedgerEntryPopup()"
                                                (clickUnpaidInvoiceList)="clickUnpaidInvoiceList($event)"
                                                (getInvoiceListsForCreditNote)="getInvoiceListsForCreditNote($event)"
                                                [invoiceList]="invoiceList"
                                                [shouldShowRcmTaxableAmount]="shouldShowRcmTaxableAmount"
                                                [shouldShowItcSection]="shouldShowItcSection"
                                                [isTouristSchemeApplicable]="isTouristSchemeApplicable"
                                                (saveOtherTax)="saveOtherTax(lc.blankLedger, $event)"
                                                [localeData]="localeData"
                                                [commonLocaleData]="commonLocaleData"
                                                [entrySide]="'cr'"
                                                (stockVariantSelected)="
                                                    loadDetails(selectedAccountDetails, txn, $event)
                                                "
                                                [selectedAccountDetails]="selectedAccountDetails"
                                                [(isTotalChanged)]="isTotalChanged"
                                            >
                                            </new-ledger-entry-panel>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                            <!-- endregion -->
                        </div>
                        <!--endregion-->

                        <!-- region footer-->
                        <div class="w-100">
                            <table class="ledger-footer-1 left-align">
                                <tbody>
                                    <tr class="total-col">
                                        <td colspan="12" class="col-xs-12 text-right white h32 pd-r1">
                                            <span
                                                *ngIf="ledgerTxnBalance?.closingBalance?.type === 'CREDIT'"
                                                [matTooltip]="lc.ledgerUnderStandingObj.balanceText.cr"
                                                [matTooltipPosition]="'right'"
                                                matTooltipClass="tooltip-black"
                                            >
                                                {{ localeData?.to_balance_cf }}:
                                                <span class="digit-blue">
                                                    <div class="d-inline-flex">
                                                        <amount-field
                                                            [amount]="ledgerTxnBalance?.closingBalance?.amount"
                                                            [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                            [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                        >
                                                        </amount-field>
                                                    </div>
                                                </span>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr class="total-col">
                                        <td colspan="12" class="col-xs-12 text-right white h32 border-top pd-r1">
                                            <div class="d-flex flex-column align-items-end">
                                                <span class="bd-rt padding-ledger">
                                                    <amount-field
                                                        [amount]="lc.reckoningDebitTotal"
                                                        [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                        [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                    >
                                                    </amount-field>
                                                </span>
                                                <span
                                                    class="bd-rt text-gray padding-ledger"
                                                    *ngIf="isLedgerAccountAllowsMultiCurrency"
                                                >
                                                    <amount-field
                                                        [amount]="lc.convertedReckoningDebitTotal"
                                                        [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                        [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                    >
                                                    </amount-field>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="ledger-footer-1 right-align">
                                <tbody>
                                    <tr class="total-col">
                                        <td colspan="12" class="col-xs-12 text-right white h32 pd-r1">
                                            <span
                                                *ngIf="ledgerTxnBalance?.closingBalance?.type === 'DEBIT'"
                                                [matTooltip]="lc.ledgerUnderStandingObj.balanceText.dr"
                                                [matTooltipPosition]="'right'"
                                                matTooltipClass="tooltip-black"
                                            >
                                                <!-- By -->
                                                {{ localeData?.by_balance_cf }}:
                                                <span class="digit-blue d-inline-flex">
                                                    <amount-field
                                                        [amount]="ledgerTxnBalance?.closingBalance?.amount"
                                                        [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                        [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                    >
                                                    </amount-field>
                                                </span>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr class="total-col">
                                        <td colspan="12" class="col-xs-12 text-right white h32 border-top pd-r1">
                                            <div class="d-flex flex-column align-items-end">
                                                <span class="bd-rt padding-ledger">
                                                    <amount-field
                                                        [amount]="lc.reckoningCreditTotal"
                                                        [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                        [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                    >
                                                    </amount-field>
                                                </span>
                                                <span
                                                    class="bd-rt text-gray padding-ledger"
                                                    *ngIf="isLedgerAccountAllowsMultiCurrency"
                                                >
                                                    <amount-field
                                                        [amount]="lc.convertedReckoningCreditTotal"
                                                        [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                        [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                    >
                                                    </amount-field>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- endregion -->

                        <!-- region pagination -->
                        <div class="text-center mr-t2 page-count position-absolute">
                            <span class="grey"
                                >{{ (lc.transactionData$ | async)?.totalItems }} {{ localeData?.transactions }},
                            </span>
                            <span class="black"
                                >{{ (lc.transactionData$ | async)?.totalPages }} {{ localeData?.pages }}</span
                            >
                            <pagination
                                *ngIf="paginationObject.showPagination"
                                [totalItems]="paginationObject.totalItems"
                                [(ngModel)]="paginationObject.page"
                                [maxSize]="5"
                                class="pagination-sm"
                                [boundaryLinks]="true"
                                [itemsPerPage]="paginationObject.itemsPerPage"
                                (pageChanged)="pageChanged($event)"
                                [firstText]="commonLocaleData?.app_first"
                                [previousText]="commonLocaleData?.app_previous"
                                [nextText]="commonLocaleData?.app_next"
                                [lastText]="commonLocaleData?.app_last"
                            >
                            </pagination>
                        </div>
                        <!-- endregion -->
                    </div>
                    <!--endregion-->
                </div>
                <!--endregion-->
            </section>

            <div class="container" *ngIf="!isShowLedgerColumnarReportTable">
                <div>
                    <div class="text-right mr-t1 mr-b1" [hidden]="!isBankOrCashAccount">
                        <button
                            mat-stroked-button
                            color="primary"
                            [hidden]="!closingBalanceBeforeReconcile || showLoader"
                            class="btn-sm mr-0"
                            (click)="getReconciledBack()"
                        >
                            {{ commonLocaleData?.app_back }}
                        </button>
                        <div
                            *ngIf="closingBalanceBeforeReconcile && !showLoader"
                            class="box balance-detail mr-t2 mr-b2 clearfix text-center"
                        >
                            <div class="row">
                                <div class="col-md-6 col-sm-6 col-12 text-right">
                                    {{ localeData?.balance_bank }}
                                    <h3 class="font-16 primary-color">
                                        <span class="d-inline-flex">
                                            <amount-field
                                                [amount]="reconcileClosingBalanceForBank?.amount"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field>
                                            {{ reconcileClosingBalanceForBank?.type }}
                                        </span>
                                    </h3>
                                </div>
                                <div class="col-md-6 col-sm-6 col-12 text-left">
                                    {{ localeData?.pending_cheque }}
                                    <h3 class="font-16 primary-color">
                                        <span class="d-inline-flex">
                                            <amount-field
                                                [amount]="closingBalanceBeforeReconcile?.amount"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field>
                                            {{ closingBalanceBeforeReconcile?.type }}
                                        </span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <button
                            mat-button
                            [hidden]="closingBalanceBeforeReconcile || showLoader"
                            class="btn btn-primary btn-sm mr-0"
                            (click)="getReconciliation()"
                        >
                            {{ localeData?.reconciliation }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- region total section -->
            <!-- commented due to API  -->
            <div class="transaction-in-short" *ngIf="!isShowLedgerColumnarReportTable">
                <div class="container">
                    <section class="ledger-stat mr-t3" *ngIf="!showLoader">
                        <div class="row">
                            <div class="col-sm-3 col-xs-12 stat-block">
                                <div class="ledger-state-box">
                                    <h1>
                                        {{ localeData?.total_transactions }}
                                        <span class="digit-blue d-inline-flex">
                                            <amount-field
                                                [amount]="
                                                    (lc.transactionData$ | async)?.debitTransactionsCount +
                                                    (lc.transactionData$ | async)?.creditTransactionsCount
                                                "
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field>
                                        </span>
                                    </h1>
                                    <span class="mr-r2 grey-text-color"
                                        >{{ commonLocaleData?.app_debit }}
                                        <span class="digit-blue d-inline-flex">
                                            <amount-field
                                                [amount]="(lc.transactionData$ | async)?.debitTransactionsCount"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field>
                                        </span> </span
                                    ><br />
                                    <span class="mr-r2 grey-text-color"
                                        >{{ commonLocaleData?.app_credit }}
                                        <span class="digit-blue d-inline-flex">
                                            <amount-field
                                                [amount]="(lc.transactionData$ | async)?.creditTransactionsCount"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field>
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-3 col-xs-12 stat-block">
                                <div class="ledger-state-box">
                                    <h1>{{ localeData?.opening_balance }}</h1>
                                    <h3 class="digit-blue d-flex">
                                        <amount-field
                                            [amount]="ledgerTxnBalance?.forwardedBalance?.amount"
                                            [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                            [currencyCode]="ledgerTxnBalance?.currencyCode"
                                        >
                                        </amount-field>
                                        &nbsp;
                                        {{
                                            ledgerTxnBalance?.forwardedBalance?.amount > 0
                                                ? ledgerTxnBalance?.forwardedBalance?.type === "DEBIT"
                                                    ? localeData?.dr
                                                    : localeData?.cr
                                                : ""
                                        }}
                                    </h3>

                                    <h3
                                        class="digit-blue font-12 sub-total d-inline-flex"
                                        *ngIf="isLedgerAccountAllowsMultiCurrency"
                                    >
                                        <amount-field
                                            [amount]="ledgerTxnBalance?.convertedForwardedBalance?.amount"
                                            [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                            [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                        >
                                        </amount-field>
                                        &nbsp;
                                        {{
                                            ledgerTxnBalance?.convertedForwardedBalance?.amount > 0
                                                ? ledgerTxnBalance?.forwardedBalance?.type === "DEBIT"
                                                    ? localeData?.dr
                                                    : localeData?.cr
                                                : ""
                                        }}
                                    </h3>
                                </div>
                            </div>
                            <div class="col-sm-3 col-xs-12 stat-block">
                                <div class="ledger-state-box">
                                    <h1>{{ localeData?.net_total }}</h1>
                                    <div class="d-flex justify-content-between">
                                        <div
                                            class="d-flex flex-column justify-content-between"
                                            *ngIf="ledgerTxnBalance?.creditTotal > ledgerTxnBalance?.debitTotal"
                                        >
                                            <h3 class="digit-blue d-flex">
                                                <amount-field
                                                    [amount]="
                                                        ledgerTxnBalance?.creditTotal - ledgerTxnBalance?.debitTotal
                                                    "
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                                <ng-container
                                                    *ngIf="
                                                        ledgerTxnBalance?.creditTotal - ledgerTxnBalance?.debitTotal !==
                                                        0
                                                    "
                                                >
                                                    &nbsp;
                                                    <span class="text-capitalize">{{ commonLocaleData?.app_cr }}</span>
                                                </ng-container>
                                            </h3>
                                            <h3
                                                class="digit-blue sub-total font-12 d-flex"
                                                *ngIf="isLedgerAccountAllowsMultiCurrency"
                                            >
                                                <amount-field
                                                    [amount]="
                                                        ledgerTxnBalance?.convertedCreditTotal -
                                                        ledgerTxnBalance?.convertedDebitTotal
                                                    "
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                                <ng-container
                                                    *ngIf="
                                                        ledgerTxnBalance?.convertedCreditTotal -
                                                            ledgerTxnBalance?.convertedDebitTotal !==
                                                        0
                                                    "
                                                >
                                                    &nbsp;
                                                    <span class="text-capitalize">{{ commonLocaleData?.app_cr }}</span>
                                                </ng-container>
                                            </h3>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <div
                                            class="d-flex flex-column justify-content-between"
                                            *ngIf="ledgerTxnBalance?.creditTotal < ledgerTxnBalance?.debitTotal"
                                        >
                                            <h3 class="digit-blue d-inline-flex">
                                                <amount-field
                                                    [amount]="
                                                        ledgerTxnBalance?.debitTotal - ledgerTxnBalance?.creditTotal
                                                    "
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                                <ng-container
                                                    *ngIf="
                                                        ledgerTxnBalance?.debitTotal - ledgerTxnBalance?.creditTotal !==
                                                        0
                                                    "
                                                >
                                                    &nbsp;
                                                    <span class="text-capitalize">{{ commonLocaleData?.app_dr }}</span>
                                                </ng-container>
                                            </h3>
                                            <h3
                                                class="digit-blue sub-total font-12 d-flex"
                                                *ngIf="isLedgerAccountAllowsMultiCurrency"
                                            >
                                                <amount-field
                                                    [amount]="
                                                        ledgerTxnBalance?.convertedDebitTotal -
                                                        ledgerTxnBalance?.convertedCreditTotal
                                                    "
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                                <ng-container
                                                    *ngIf="
                                                        ledgerTxnBalance?.convertedDebitTotal -
                                                            ledgerTxnBalance?.convertedCreditTotal !==
                                                        0
                                                    "
                                                >
                                                    &nbsp;
                                                    <span class="text-capitalize">{{ commonLocaleData?.app_dr }}</span>
                                                </ng-container>
                                            </h3>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="d-flex debit-credit-amount">
                                        <h1 class="mr-t05 grey-text-color d-flex flex-column mr-r2">
                                            {{ commonLocaleData?.app_debit }}
                                            <span class="digit-blue mt-1 d-inline-flex">
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.debitTotal"
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                            <span
                                                class="digit-blue font-12 sub-total d-inline-flex"
                                                *ngIf="isLedgerAccountAllowsMultiCurrency"
                                            >
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.convertedDebitTotal"
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                        </h1>
                                        <h1 class="mr-t05 grey-text-color d-flex flex-column">
                                            {{ commonLocaleData?.app_credit }}
                                            <span class="digit-blue d-flex mt-1">
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.creditTotal"
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                            <span
                                                class="digit-blue font-12 sub-total d-flex"
                                                *ngIf="isLedgerAccountAllowsMultiCurrency"
                                            >
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.convertedCreditTotal"
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                            </span>
                                        </h1>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3 col-xs-12 stat-block">
                                <div class="ledger-state-box">
                                    <h1>{{ localeData?.closing_balance }}</h1>
                                    <div class="d-flex flex-column justify-content-between">
                                        <h3 class="digit-blue d-inline-flex">
                                            <span
                                                class="d-flex"
                                                [matTooltip]="
                                                    ledgerTxnBalance?.closingBalance?.type === 'DEBIT'
                                                        ? lc.ledgerUnderStandingObj.balanceText.dr
                                                        : lc.ledgerUnderStandingObj.balanceText.cr
                                                "
                                            >
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.closingBalance?.amount"
                                                    [currencySymbol]="ledgerTxnBalance?.currencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.currencyCode"
                                                >
                                                </amount-field>
                                                &nbsp;
                                                {{
                                                    ledgerTxnBalance?.closingBalance?.amount > 0
                                                        ? ledgerTxnBalance?.closingBalance?.type === "DEBIT"
                                                            ? localeData?.dr
                                                            : localeData?.cr
                                                        : ""
                                                }}
                                            </span>
                                        </h3>
                                        <h3
                                            class="digit-blue font-12 d-flex"
                                            *ngIf="isLedgerAccountAllowsMultiCurrency"
                                        >
                                            <span
                                                class="d-flex"
                                                [matTooltip]="
                                                    ledgerTxnBalance?.closingBalance?.type === 'DEBIT'
                                                        ? lc.ledgerUnderStandingObj.balanceText.dr
                                                        : lc.ledgerUnderStandingObj.balanceText.cr
                                                "
                                                matTooltipClass="tooltip-black"
                                            >
                                                <amount-field
                                                    [amount]="ledgerTxnBalance?.convertedClosingBalance?.amount"
                                                    [currencySymbol]="ledgerTxnBalance?.convertedCurrencySymbol"
                                                    [currencyCode]="ledgerTxnBalance?.convertedCurrencyCode"
                                                >
                                                </amount-field>
                                                &nbsp;
                                                {{
                                                    ledgerTxnBalance?.convertedClosingBalance?.amount > 0
                                                        ? ledgerTxnBalance?.convertedClosingBalance?.type === "DEBIT"
                                                            ? localeData?.dr
                                                            : localeData?.cr
                                                        : ""
                                                }}
                                            </span>
                                        </h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <div class="show-if-ledger-open" *ngIf="isMoreDetailsOpened"></div>

            <!-- modal sections -->
            <div *ngIf="isShowLedgerColumnarReportTable">
                <div class="back-btn text-right pr-1 mt-1 mr-b1">
                    <button mat-stroked-button class="bdr" (click)="isShowLedgerColumnarReportTable = false">
                        {{ commonLocaleData?.app_back }}
                    </button>
                </div>
                <ledger-columnar-report-table
                    [columnarReportExportRequest]="columnarReportExportRequest"
                    [accountUniquename]="accountUniquename"
                    (backClick)="isShowLedgerColumnarReportTable = false"
                >
                </ledger-columnar-report-table>
            </div>
            <!-- aside menu section -->
            <!-- <div class="aside-overlay" *ngIf="asideMenuState === 'in'"></div> -->
            <ng-template #ledgerAsidePane >
                <ledger-aside-pane
                    [class]="asideMenuState"
                    [@slideInOut]="asideMenuState"
                    [keyboardShortcut]="'esc'"
                    [localeData]="localeData"
                    [commonLocaleData]="commonLocaleData"
                    (onShortcutPress)="toggleAsidePane()"
                    (closeAsideEvent)="toggleAsidePane()"
                >
                </ledger-aside-pane>
            </ng-template>
            <!-- aside menu section -->
            <div class="aside-overlay" *ngIf="asideMenuStateForOtherTaxes === 'in'"></div>
            <app-aside-menu-sales-other-taxes
                *ngIf="asideMenuStateForOtherTaxes === 'in'"
                [class]="asideMenuStateForOtherTaxes"
                [taxes]="companyTaxesList"
                [otherTaxesModal]="updateLedgerModalVm?.selectedLedger?.otherTaxModal"
                [commonLocaleData]="commonLocaleData"
                [@slideInOut]="asideMenuStateForOtherTaxes"
                (closeModal)="toggleOtherTaxesAsidePane(null)"
                (applyTaxes)="calculateOtherTaxes($event); toggleOtherTaxesAsidePane(null)"
            >
            </app-aside-menu-sales-other-taxes>
            <!-- update ledger entry popup -->
            <ng-template #updateLedgerModal>
                <update-ledger-entry-panel
                    [defaultSuggestions]="defaultSuggestions"
                    [tcsOrTds]="tcsOrTds"
                    [searchResultsPaginationPage]="defaultResultsPaginationData.page"
                    [searchResultsPaginationTotalPages]="defaultResultsPaginationData.totalPages"
                    [activeCompany]="activeCompany"
                    [entrySide]="entrySide"
                    (toggleOtherTaxesAsideMenu)="toggleOtherTaxesAsidePane($event)"
                    (closeUpdateLedgerModal)="hideUpdateLedgerModal()"
                    (showQuickAccountModalFromUpdateLedger)="toggleAsidePane()"
                ></update-ledger-entry-panel>
            </ng-template>
            <!-- update ledger entry popup -->
            <ng-template #advanceSearchModal>
                <advance-search-model
                    [advanceSearchRequest]="advanceSearchRequest"
                    (closeModelEvent)="closeAdvanceSearchPopup($event)"
                ></advance-search-model>
            </ng-template>
            <!-- endregion -->
            <ng-template #datepickerTemplate>
                <div class="datepicker-modal">
                    <div class="modal-body">
                        <app-datepicker-wrapper
                            [inputStartDate]="selectedDateRange?.startDate"
                            [inputEndDate]="selectedDateRange?.endDate"
                            [alwaysShowCalendars]="true"
                            [ranges]="datePickerRanges"
                            [selectedRangeLabel]="selectedRangeLabel"
                            [showCustomRangeLabel]="true"
                            [showClearButton]="false"
                            [showCancel]="true"
                            [linkedCalendars]="true"
                            [showDropdowns]="true"
                            (rangeClicked)="dateSelectedCallback($event)"
                            (datesUpdated)="dateSelectedCallback($event)"
                            [keepCalendarOpeningWithRange]="false"
                            [showRangeLabelOnInput]="false"
                            [dateFieldPosition]="dateFieldPosition"
                        ></app-datepicker-wrapper>
                    </div>
                </div>
            </ng-template>

            <ng-template #entryConfirmModal>
                <div class="modal-dialog modal-md">
                    <div class="modal-content">
                        <confirm-modal
                            [title]="commonLocaleData?.app_confirm"
                            [body]="duplicateEntryConfirmationMessage"
                            [permanentlyDeleteMessage]="' '"
                            (cancelCallBack)="cancelMergeEntry()"
                            (successCallBack)="confirmMergeEntry()"
                        >
                        </confirm-modal>
                    </div>
                </div>
            </ng-template>

            <ng-template #attachments>
                <attachments [selectedItem]="selectedItem"></attachments>
            </ng-template>
        </ng-container>
    </div>
</ng-container>
