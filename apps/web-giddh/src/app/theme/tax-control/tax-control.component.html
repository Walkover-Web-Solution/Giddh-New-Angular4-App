<span class="pr tax-control-cmp" (clickOutside)="showTaxPopup = false; taxInputBlur($event)"
    (click)="$event.stopPropagation()">
    <label *ngIf="showHeading">{{ customHeading ? customHeading : 'Tax' }} <sup class="mandatory-asterisk" *ngIf="isMandatory">*</sup></label>

    <a id="tax" class="clearfix">

        <div class="multi-select adjust" id="tax-control-multi-select">

            <input #taxInputElement type="text" readonly name="sum" *ngIf="!maskInput"
                class="form-control cursor-pointer text-right taxInput" [(ngModel)]="taxTotalAmount"
                (focus)="handleInputFocus()" style="padding-right:28px !important;" (blur)="taxInputBlur($event)" />

            <input #taxInputElement type="text" readonly name="sum" *ngIf="maskInput"
                class="form-control cursor-pointer text-right taxInput" [(ngModel)]="taxTotalAmount" [mask]="maskInput"
                [prefix]="prefixInput" [suffix]="suffixInput" (focus)="handleInputFocus()" (blur)="taxInputBlur($event)"
                style="padding-right:24px !important;" />

            <!-- <span class="caret cp no-select" (click)="showTaxPopup = !showTaxPopup"></span> -->

        </div>
    </a>

    <div class="pr">
        <ul class="dropdown-menu pd" (focusout)="taxInputBlur($event)"
            [ngStyle]="{'display': showTaxPopup ? 'block': 'none'}" (click)="$event.stopPropagation()"
            [style.max-height.px]="102" [style.min-height.px]="40" style="left: unset;top: 0px;">
            <li *ngIf="taxRenderData.length === 0">
                <p class="lead pd">No Taxes Found</p>
            </li>

            <li class="relative" *ngFor="let tax of taxRenderData;trackBy: trackByFn; let idx = index">
                <label class="checkbox oh width100 bdrB pdB customItem" placement="bottom"
                    *ngIf="(taxRenderData.length - 1) !== idx" [tooltip]="tax.name" (click)="$event.stopPropagation()"
                    [ngClass]="{'fake-disabled-label': tax.isDisabled}">
                    <input class="pull-left" name="tax_{{idx}}" type="checkbox" [(ngModel)]="tax.isChecked"
                        (change)="change()" (click)="$event.stopPropagation()" [disabled]="tax.isDisabled" />
                    <span class="pull-left ellp">{{tax.name}}</span>
                </label>
                <label class="checkbox oh width100 bdrB pdB customItem" placement="top"
                    *ngIf="(taxRenderData.length - 1) === idx" [tooltip]="tax.name" (click)="$event.stopPropagation()"
                    [ngClass]="{'fake-disabled-label': tax.isDisabled}">
                    <input class="pull-left" name="tax_{{idx}}" type="checkbox" [(ngModel)]="tax.isChecked"
                        (change)="change()" (click)="$event.stopPropagation()" [disabled]="tax.isDisabled" />
                    <span class="pull-left ellp">{{tax.name}}</span>
                </label>
            </li>
        </ul>
    </div>

    <div tabindex="0" (focus)="onFocusLastDiv($event)"></div>
</span>
