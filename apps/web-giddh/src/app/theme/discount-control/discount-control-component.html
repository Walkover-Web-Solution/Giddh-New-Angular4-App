<div (click)="$event.stopPropagation()" class="position-relative">
    <label *ngIf="showHeaderText">{{commonLocaleData?.app_discount}}</label>

    <a id="discount">
        <div class="multi-select adjust" [matMenuTriggerFor]="discountDropdown">
            <input
                matInput
                type="text"
                decimalDigitsDirective
                name="discountSum"
                class="form-control text-right cursor-pointer pd-r2"
                (focus)="discountMenu = true;hideOtherPopups.emit(true)"
                [(ngModel)]="discountSum"
                [mask]="inputMaskFormat"
                [prefix]="prefixInput"
                [suffix]="suffixInput"
                readonly
            />
        </div>
    </a>

    <mat-menu class="my-dropdown-menu pd-1" #discountDropdown="matMenu">
        <div mat-menu-item disableRipple (click)="$event.stopPropagation()" class="discount-dropdown-upper-part">
            <div class="d-flex mr-b1 justify-content-between">
                <label class="mr-1 align-items-center d-flex width-50">{{commonLocaleData?.app_percent}}</label>

                <div class="position-relative">
                    <input
                        matInput
                        type="text"
                        class="form-control text-right cursor-pointer percentage-width"
                        [disabled]="!discountFromPer"
                        decimalDigitsDirective
                        [(ngModel)]="discountPercentageModal"
                        (input)="discountFromInput('PERCENTAGE', $event)"
                        [mask]="inputMaskFormat"
                    />
                    <i class="fa fa-percent position-absolute"></i>
                </div>
            </div>

            <div class="d-flex mr-b1 justify-content-between">
                <label class="mr-1 align-items-center d-flex width-50">{{commonLocaleData?.app_value}}</label>
                <input
                    matInput
                    type="text"
                    class="form-control text-right cursor-pointer value-width"
                    [disabled]="!discountFromVal"
                    decimalDigitsDirective
                    [(ngModel)]="discountFixedValueModal"
                    (input)="discountFromInput('FIX_AMOUNT', $event)"
                    [mask]="inputMaskFormat"
                />
            </div>
        </div>

        <div
            class="d-flex flex-col justify-content-center"
            (click)="$event.stopPropagation()"
            *ngIf="discountAccountsDetails.length > 1"
        >
            <span class="or-line">{{commonLocaleData?.app_and}}</span>
        </div>

        <div *ngIf="discountAccountsDetails.length > 1">
            <ul class="discount-name-ul" (click)="$event.stopPropagation()">
                <ng-container *ngFor="let discount of discountAccountsDetails;trackBy: trackByFn; let idx = index">
                    <li
                        mat-menu-item
                        disableRipple
                        *ngIf="discount && discount.discountUniqueName && discount.name"
                        class="custom-item pd mr-b05"
                    >
                        <label class="overflow-hidden width-100 cp d-flex align-items-center discount-number-label">
                            <mat-checkbox
                                color="primary"
                                class="pull-left"
                                id="{{'discount-control-' + idx}}"
                                name="tax_{{idx}}"
                                [(ngModel)]="discount.isActive"
                                (change)="change(discount, $event)"
                                (click)="$event.stopPropagation()"
                            >
                                {{discount.name}}
                            </mat-checkbox>
                        </label>
                    </li>
                </ng-container>
            </ul>
        </div>
    </mat-menu>
    <div tabindex="0" (focus)="onFocusLastDiv($event)"></div>
</div>
