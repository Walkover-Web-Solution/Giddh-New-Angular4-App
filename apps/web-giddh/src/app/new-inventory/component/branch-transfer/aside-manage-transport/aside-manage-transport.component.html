<ng-container
    appTranslate
    [file]="'inventory/branch-transfer'"
    (commonLocaleData)="commonLocaleData = $event"
    (localeData)="localeData = $event"
>
    <hamburger-menu class="hamburger-menu"></hamburger-menu>
    <div class="aside-pane">
        <div class="header-create-unit">
            <div class="form-header">
                <h3 mat-dialog-title>Manage Transporter</h3>
                <button id="close" mat-dialog-close (closeAsideEvent)="closeAsidePane()">
                    <i class="icon-cross"></i>
                </button>
            </div>
        </div>
        <mat-dialog-content class="w-100">
            <div class="aside-body create-group-aside-body">
                <div class="aside-pane-form">
                    <form
                        class="row form-gap"
                        autocomplete="off"
                        novalidate
                        name="transportedCreateEditForm"
                        [formGroup]="transportedCreateEditForm"
                    >
                        <div class="col-lg-12">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control mat-field-border'"
                                [placeholder]="'Transporter Name'"
                                [name]="'transporterName'"
                                formControlName="transporterName"
                                [showError]="!isValidForm && !transportedCreateEditForm?.get('transporterName')?.value"
                                [required]="true"
                                [minlength]="5"
                                [pattern]="'[a-zA-Z0-9^ .&]{5,100}'"
                            >
                            </text-field>
                            <small
                                *ngIf="transportedCreateEditForm.get('transporterName').hasError('minlength')"
                                class="text-danger"
                                >Transporter name should contain atleast 5 characters and should not contain any special
                                character.</small
                            >
                        </div>
                        <div class="col-lg-12">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control mat-field-border'"
                                [placeholder]="'Transporter Id'"
                                [name]="'transporterId'"
                                formControlName="transporterId"
                                [showError]="!isValidForm && !transportedCreateEditForm?.get('transporterId')?.value"
                                [required]="true"
                                [pattern]="'[0-9]{2}[0-9|A-Z]{13}'"
                                [maxlength]="15"
                                [minlength]="15"
                            >
                            </text-field>
                            <small
                                *ngIf="transportedCreateEditForm.get('transporterId').hasError('minlength')"
                                class="text-danger"
                                >Transporter ID should contain atleast 15 characters.
                            </small>
                        </div>
                        <div class="col-lg-12">
                            <div class="d-flex column-gap1">
                                <button
                                    *ngIf="!transportEditMode"
                                    mat-stroked-button
                                    color="primary"
                                    (click)="generateTransporter(transportedCreateEditForm.value)"
                                >
                                    Save
                                </button>
                                <button
                                    mat-stroked-button
                                    color="primary"
                                    *ngIf="transportEditMode"
                                    (click)="updateTransporter(transportedCreateEditForm.value)"
                                >
                                    Update
                                </button>
                                <button mat-stroked-button (click)="clearTransportForm()">Clear</button>
                            </div>
                        </div>
                    </form>
                    <div *ngIf="isLoading">
                        <giddh-page-loader></giddh-page-loader>
                    </div>
                    <div class="table-responsive manage-table" *ngIf="!isLoading">
                        <table mat-table [dataSource]="transporterListDetails" class="mat-elevation-z8">
                            <!--- Note that these columns can be defined in any order.
                        The actual rendered columns are set as a property on the row definition" -->
                            <!-- Name Column -->
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef class="mat-table-name">Name</th>
                                <td mat-cell *matCellDef="let element">{{ element.transporterName }}</td>
                            </ng-container>
                            <!-- Weight Column -->
                            <ng-container matColumnDef="transporterId">
                                <th mat-header-cell *matHeaderCellDef class="mat-table-id">Transporter ID</th>
                                <td mat-cell *matCellDef="let element">{{ element.transporterId }}</td>
                            </ng-container>
                            <!-- Symbol Column -->
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef class="text-right mat-table-action">Actions</th>
                                <td mat-cell *matCellDef="let element">
                                    <div class="d-flex column-gap5 justify-content-end edit-delete-btn">
                                        <button mat-stroked-button (click)="editTransporter(element)">
                                            <i class="icon-edit"></i>
                                        </button>
                                        <button mat-stroked-button (click)="deleteTransporter(element)">
                                            <i class="icon-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                        </table>
                    </div>
                    <div
                        class="pagination-wrapper"
                        *ngIf="transporterObj?.totalItems > transporterObj.count && !isLoading"
                    >
                        <pagination
                            [totalItems]="transporterObj?.totalItems"
                            [(ngModel)]="transporterObj.page"
                            [maxSize]="5"
                            class="pagination-sm"
                            [boundaryLinks]="true"
                            [itemsPerPage]="transporterObj.count"
                            [rotate]="false"
                            (pageChanged)="pageChanged($event)"
                            [firstText]="'First'"
                            [previousText]="'Previous'"
                            [nextText]="'Next'"
                            [lastText]="'Last'"
                        ></pagination>
                    </div>
                </div>
            </div>
        </mat-dialog-content>
    </div>
</ng-container>
