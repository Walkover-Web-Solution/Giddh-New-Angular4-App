<div
    class="relative"
    appTranslate
    [file]="'inventory'"
    (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event"
>
    <!-- <hamburger-menu [pageHeading]="'Create Group'"></hamburger-menu>
    <div class="new-inventory-page-header">
        <label class="page-title-inventory"> Create Stock group </label>

        <div class="inventory-header-right">
            <button mat-icon-button class="ml-3" style="font-size: 25px" >
            </button>
        </div>
    </div> -->

    <form autocomplete="off" novalidate name="groupForm" [formGroup]="groupForm" (ngSubmit)="saveGroup()">
        <div class="container-fluid">
            <div class="create-group-page">
                <div class="row">
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="create-group-form">
                            <!-- <p class="mr-b15 text-gray font-14">
                                Lorem Ipsum dummy text will come here about create stock.
                            </p> -->
                        </div>
                        <div class="row mr-b15">
                            <div class="col-sm-6">
                                <label>Group Name <span class="red-text">*</span></label>
                            </div>
                            <div class="col-sm-6">
                                <text-field
                                    [cssClass]="'form-control'"
                                    name="name"
                                    id="name"
                                    placeholder="Enter Group Name"
                                    formControlName="name"
                                    (change)="generateUniqueName()"
                                ></text-field>
                            </div>
                        </div>
                        <div class="row mr-b15">
                            <div class="col-sm-6">
                                <label>Unique Name <span class="red-text">*</span></label>
                            </div>
                            <div class="col-sm-6">
                                <text-field
                                    [cssClass]="'form-control'"
                                    name="unique-name"
                                    id="unique-name"
                                    placeholder="Unique Name"
                                    formControlName="uniqueName"
                                    (blur)="validateUniqueName()"
                                ></text-field>
                            </div>
                        </div>

                        <div class="row mr-b15">
                            <div class="col-sm-6">
                                <mat-radio-group
                                    aria-label="Select an option"
                                    class="d-flex"
                                    formControlName="showCodeType"
                                >
                                    <mat-radio-button
                                        color="primary"
                                        name="showCodeType"
                                        id="hsnCodeType"
                                        value="hsn"
                                        (change)="changeCodeType()"
                                        class="font-size-14 mr-3"
                                        >HSN Code
                                    </mat-radio-button>
                                    <mat-radio-button
                                        color="primary"
                                        name="showCodeType"
                                        id="sacCodeType"
                                        value="sac"
                                        class="font-size-14"
                                        (change)="changeCodeType()"
                                        >SAC Code
                                    </mat-radio-button>
                                </mat-radio-group>
                            </div>
                            <div class="col-sm-6">
                                <div *ngIf="groupForm.get('showCodeType')?.value === 'hsn'">
                                    <text-field
                                        [cssClass]="'form-control'"
                                        name="hsn-code"
                                        id="hsn-code"
                                        placeholder="Enter HSN Code"
                                        formControlName="hsnNumber"
                                        decimalDigitsDirective
                                        maxlength="10"
                                    ></text-field>
                                </div>
                                <div *ngIf="groupForm.get('showCodeType')?.value === 'sac'">
                                    <text-field
                                        [cssClass]="'form-control'"
                                        name="sac-code"
                                        id="sac-code"
                                        placeholder="Enter SAC Code"
                                        formControlName="sacNumber"
                                        decimalDigitsDirective
                                        maxlength="10"
                                    ></text-field>
                                </div>
                            </div>
                        </div>

                        <div class="row mr-t15">
                            <div class="col-sm-6">
                                <label>&nbsp;</label>
                            </div>
                            <div class="col-sm-6">
                                <mat-checkbox
                                    color="primary"
                                    formControlName="isSubGroup"
                                    name="sub-group"
                                    id="sub-group"
                                    >Is it Sub-group?
                                </mat-checkbox>
                            </div>
                        </div>
                        <div class="row mr-t15">
                            <div class="col-sm-6">
                                <label>Parent Group</label>
                            </div>
                            <div class="col-sm-6">
                                <sh-select
                                    [options]="groups$ | async"
                                    formControlName="parentStockGroupUniqueName"
                                    [disabled]="!groupForm.get('isSubGroup')?.value"
                                    [placeholder]="'Select Parent Group'"
                                    [multiple]="false"
                                    [ItemHeight]="33"
                                    [forceClearReactive]="forceClear$ | async"
                                    [isRequired]="true"
                                ></sh-select>
                            </div>
                        </div>
                        <div class="row mr-t15">
                            <div class="col-sm-6">
                                <label>Tax</label>
                            </div>
                            <div class="col-sm-6">
                                <!-- [(value)]="groupForm.get('taxes').taxes" -->
                                <mat-select name="taxes" class="form-control" placeholder="Select Tax" multiple>
                                    <mat-option
                                        *ngFor="let tax of taxes"
                                        [value]="tax?.uniqueName"
                                        [disabled]="tax.isDisabled"
                                        [selected]="tax.isChecked"
                                        (onSelectionChange)="!tax.isDisabled ? selectTax(tax) : ''"
                                        >{{ tax.name }}</mat-option
                                    >
                                </mat-select>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-7 col-lg-6 col-md-6">
                        <div class="image-group relative">
                            <div class="group-vector">
                                <img src="{{ imgPath }}create-group-vector.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="create-group-footer sticky-footer">
            <div class="footer-wrapper">
                <div class="button-group">
                    <button
                        *ngIf="!groupUniqueName"
                        id="clear-btn"
                        type="button"
                        mat-raised-button
                        class="btn-primary btn-left-right-round min-width-100"
                        (click)="resetGroupForm()"
                    >
                        Clear
                    </button>
                    <button
                        *ngIf="groupUniqueName"
                        id="clear-btn"
                        mat-raised-button
                        type="button"
                        class="btn-primary btn-left-right-round min-width-100"
                        [routerLink]="'/pages/new-inventory/stock-group/list'"
                    >
                        Cancel
                    </button>
                    <button
                        mat-raised-button
                        id="create-group-btn"
                        [disabled]="groupForm?.invalid || isFileUploading"
                        class="btn-success btn-left-right-round"
                    >
                        {{ groupUniqueName ? "Update Group" : "Create Group" }}
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>
