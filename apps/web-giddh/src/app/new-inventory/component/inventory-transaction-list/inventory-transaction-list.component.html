<!--new inventory header-->
<div class="transaction-report-wrapper">
    <div class="inventory-filter-bar top-main-bar">
        <div class="custom-datepicker-wrapper">
            <div class="custom-datepicker" (click)="showGiddhDatepicker($event)">
                <i class="icon-calender calendar-addon"></i>
                <input
                    type="text"
                    name="selectedDateRange"
                    [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                    class="giddh-datepicker date-range-picker"
                />
            </div>
        </div>
        <div class="pl-1 filter-dropdown-branch" *ngIf="isCompany && allBranches?.length > 1">
            <mat-select
                name="selectedBranch"
                [multiple]="true"
                [(ngModel)]="selectedBranch"
                class="stock-mat-salect"
                [placeholder]="'Select Branch'"
            >
                <mat-option class="balance-options">
                    <ngx-mat-select-search
                        [noEntriesFoundLabel]="'No Result Found'"
                        [formControl]="branchesDropdown"
                        [placeholderLabel]="'Select Branch'"
                        class="mat-select-search-inventory"
                    >
                        <i class="icon-cross" ngxMatSelectSearchClear></i>
                    </ngx-mat-select-search>
                </mat-option>

                <mat-option
                    class="balance-options"
                    *ngFor="let branch of branches"
                    (click)="getBranches()"
                    [value]="branch?.uniqueName"
                >
                    {{ branch?.alias ?? "-" }}
                </mat-option>
            </mat-select>
        </div>
        <div class="pl-1 filter-dropdown-warehouse" *ngIf="allWarehouses?.length > 1">
            <mat-select
                name="selectedWarehouse"
                [multiple]="true"
                [(ngModel)]="selectedWarehouse"
                class="stock-mat-salect"
                [placeholder]="'Select Warehouse'"
            >
                <mat-option class="balance-options">
                    <ngx-mat-select-search
                        noEntriesFoundLabel="No Result Found"
                        [formControl]="warehousesDropdown"
                        [placeholderLabel]="'Select Warehouse'"
                        class="mat-select-search-inventory"
                    >
                        <i class="icon-cross" ngxMatSelectSearchClear></i>
                    </ngx-mat-select-search>
                </mat-option>
                <mat-option
                    class="balance-options"
                    *ngFor="let warehouse of warehouses"
                    [value]="warehouse?.uniqueName"
                    (click)="getWarehouses()"
                >
                    {{ warehouse?.name ?? "-" }}
                </mat-option>
            </mat-select>
        </div>
        <div class="clear-filter d-flex" *ngIf="showClearFilter">
            <button mat-raised-button class="create-btn-inventory ml-3 mr-0" color="primary" (click)="resetFilter()">
                <span class="icon-cross"></span> Clear
            </button>
        </div>
    </div>
    <div class="inventory-filter-bar">
        <div class="search-control">
            <i class="icon-search search-icon" *ngIf="!filtersChipList?.length"></i>
            <mat-form-field
                floatLabel="never"
                class="select-multiple-chiplist-inventory"
                [ngClass]="{ 'searching-bar-chiplist': filtersChipList?.length }"
            >
                <mat-chip-list #matChipList>
                    <mat-chip
                        *ngFor="let chip of filtersChipList; let indx = index"
                        [selectable]="true"
                        [removable]="true"
                        (removed)="removeOption(chip, indx)"
                    >
                        {{ chip?.name }}
                        <i class="icon-cross" matChipRemove></i>
                    </mat-chip>
                    <input
                        type="text"
                        matInput
                        [formControl]="searchFilters"
                        [placeholder]="'Search stock group, stock, variant'"
                        [matAutocomplete]="auto"
                        [matChipInputFor]="matChipList"
                        #trigger="matAutocompleteTrigger"
                        [name]="'q'"
                        #selectField
                        autocomplete="off"
                        matAutocompletePosition="auto"
                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    />
                </mat-chip-list>
                <mat-autocomplete
                    class="inventory-autocomplete"
                    #auto="matAutocomplete"
                    (optionSelected)="selectChiplistValue($event); selectField.value = ''"
                >
                    <ng-container *ngIf="fieldFilteredOptions?.length <= 5; else searchedData">
                        <mat-option *ngFor="let option of fieldFilteredOptions" [value]="option">
                            {{ option?.name }} ( {{ option?.type }} )
                        </mat-option>
                        <mat-option disabled *ngIf="fieldFilteredOptions?.length === 0">No results found</mat-option>
                    </ng-container>
                    <ng-template #searchedData>
                        <app-cdk-scroll
                            (fetchNextPage)="searchStockTransactionReport(true)"
                            [scrollableElementId]="'stock-transaction'"
                        >
                            <cdk-virtual-scroll-viewport
                                class="virtual-group-list overflow-x-hidden"
                                [itemSize]="33"
                                [id]="'stock-transaction'"
                            >
                                <mat-option
                                    class="item-height"
                                    *ngFor="let option of fieldFilteredOptions"
                                    [value]="option"
                                >
                                    {{ option?.name }} ( {{ option?.type }} )
                                </mat-option>
                                <mat-option class="item-height" disabled *ngIf="fieldFilteredOptions?.length === 0"
                                    >No results found</mat-option
                                >
                            </cdk-virtual-scroll-viewport>
                        </app-cdk-scroll>
                    </ng-template>
                </mat-autocomplete>
            </mat-form-field>
            <div class="menu-btn-control">
                <button mat-button (click)="openModal()" class="advance-filter-button">
                    <i class="icon-advance-filter mr-2"></i>
                    Advance Filter
                </button>
                <button
                    mat-button
                    [matMenuTriggerFor]="customise"
                    aria-label="Customise"
                    class="customise-filter-button"
                >
                    <i class="icon-options mr-2"> </i>
                    Customise
                </button>
                <mat-menu #customise="matMenu" class="columns-wrapper">
                    <button
                        class="menu-buttons"
                        mat-menu-item
                        (click)="$event?.stopPropagation()"
                        (keydown.enter)="
                            $event?.stopPropagation();
                            selectAllCheckbox.checked = !selectAllCheckbox?.checked;
                            selectAllColumns(selectAllCheckbox?.checked)
                        "
                    >
                        <mat-checkbox
                            class="inventory-checkbox"
                            #selectAllCheckbox
                            color="primary"
                            name="selectAll"
                            (change)="selectAllColumns($event?.checked)"
                            [checked]="displayedColumns?.length === customiseColumns?.length"
                        >
                            Select All
                        </mat-checkbox>
                    </button>
                    <ng-container *ngFor="let item of customiseColumns">
                        <button
                            class="menu-buttons"
                            mat-menu-item
                            (click)="$event?.stopPropagation()"
                            (keydown.enter)="$event?.stopPropagation(); item.checked = !item?.checked; saveColumns()"
                        >
                            <mat-checkbox
                                class="inventory-checkbox"
                                color="primary"
                                name="{{ item?.value }}"
                                (ngModelChange)="saveColumns()"
                                [(ngModel)]="item.checked"
                                (click)="$event?.stopPropagation()"
                            >
                                {{ item?.label }}</mat-checkbox
                            >
                        </button>
                    </ng-container>
                </mat-menu>
            </div>
        </div>
        <!-- <div class="d-flex transactional-filter-section">
            <button
            mat-mini-fab
            class="transactional-wise-common-btn d-flex align-items-center justify-content-center mr-l1"  [matMenuTriggerFor]="importExport" aria-label="Customise"
        >
            <span class="icon-download-circle strong"></span>
        </button>
        <mat-menu #importExport="matMenu">
            <div class="menu-selector">
                <button mat-menu-item>
                    <span>CSV</span>
                </button>
                <button mat-menu-item>
                    <span>XLS</span>
                </button>
            </div>
        </mat-menu>
    </div> -->
    </div>
    <div class="inventory-transaction-list" *ngIf="!isLoading">
        <div *ngIf="isDataAvailable">
            <div class="row">
                <div class="col-12">
                    <div class="top-content">
                        <div class="d-flex w-100 justify-content-between overflow-x-auto">
                            <div class="total-details-box mr-r05 count-box">
                                <h5>
                                    Transaction Count
                                    <div class="mt-2">
                                        <span class="d-inline-flex number-total"
                                            >{{ stockReportRequest?.totalItems ?? "-" }}
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box mr-r05 border-none opening-box">
                                <h5>
                                    Profit/Loss
                                    <div class="mt-2">
                                        <span
                                            class="d-inline-flex number-total w-100"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.profit
                                                    ? activeCompany.baseCurrencySymbol +
                                                      ' ' +
                                                      giddhRoundOff(
                                                          stockTransactionReportBalance?.profit,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : activeCompany.baseCurrencySymbol + 0
                                            "
                                        >
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.profit
                                                        ? stockTransactionReportBalance?.profit
                                                        : 0
                                                "
                                                [currencySymbol]="activeCompany.baseCurrencySymbol"
                                                [currencyCode]="activeCompany?.baseCurrency"
                                            >
                                            </amount-field>
                                        </span>
                                        <span class="d-inline-flex mt-1"> ({{ selectedDateRangeUi }}) </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box mr-r05 border-none sales-purchase">
                                <h5>
                                    Opening
                                    <div class="mt-2">
                                        <span
                                            class="d-inline-flex number-total w-100"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                activeCompany.baseCurrencySymbol +
                                                ' ' +
                                                stockTransactionReportBalance?.opening?.amount
                                                    ? giddhRoundOff(
                                                          stockTransactionReportBalance?.opening?.amount,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : activeCompany.baseCurrencySymbol + ' ' + 0
                                            "
                                        >
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.opening?.amount
                                                        ? stockTransactionReportBalance?.opening?.amount
                                                        : 0
                                                "
                                                [currencySymbol]="activeCompany.baseCurrencySymbol"
                                                [currencyCode]="activeCompany?.baseCurrency"
                                            >
                                            </amount-field>
                                        </span>
                                        <span
                                            class="d-inline-flex mt-1"
                                            *ngIf="stockTransactionReportBalance?.opening?.quantity"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.opening?.quantity
                                                    ? giddhRoundOff(
                                                          stockTransactionReportBalance?.opening?.quantity,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : '-'
                                            "
                                        >
                                            (
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.opening?.quantity
                                                        ? stockTransactionReportBalance?.opening?.quantity
                                                        : '-'
                                                "
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >)
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box mr-r05 border-none payment-receipt">
                                <h5>
                                    Inward
                                    <div class="mt-2">
                                        <span
                                            class="d-inline-flex number-total w-100"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.inwards?.amount
                                                    ? activeCompany.baseCurrencySymbol +
                                                      ' ' +
                                                      giddhRoundOff(
                                                          stockTransactionReportBalance?.inwards?.amount,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : activeCompany.baseCurrencySymbol + ' ' + 0
                                            "
                                        >
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.inwards?.amount
                                                        ? stockTransactionReportBalance?.inwards?.amount
                                                        : 0
                                                "
                                                [currencySymbol]="activeCompany.baseCurrencySymbol"
                                                [currencyCode]="activeCompany?.baseCurrency"
                                            >
                                            </amount-field>
                                        </span>
                                        <span
                                            class="d-inline-flex mt-1"
                                            *ngIf="stockTransactionReportBalance?.inwards?.quantity"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.inwards?.quantity
                                                    ? giddhRoundOff(
                                                          stockTransactionReportBalance?.inwards?.quantity,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : '-'
                                            "
                                        >
                                            (
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.inwards?.quantity
                                                        ? stockTransactionReportBalance?.inwards?.quantity
                                                        : '-'
                                                "
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >)
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box mr-r05 border-none due-box">
                                <h5>
                                    Outward
                                    <div class="mt-2">
                                        <span
                                            class="d-inline-flex number-total w-100"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.outwards?.amount
                                                    ? activeCompany.baseCurrencySymbol +
                                                      ' ' +
                                                      giddhRoundOff(
                                                          stockTransactionReportBalance?.outwards?.amount,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : activeCompany.baseCurrencySymbol + ' ' + 0
                                            "
                                        >
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.outwards?.amount
                                                        ? stockTransactionReportBalance?.outwards?.amount
                                                        : 0
                                                "
                                                [currencySymbol]="activeCompany.baseCurrencySymbol"
                                                [currencyCode]="activeCompany?.baseCurrency"
                                            >
                                            </amount-field>
                                        </span>
                                        <span
                                            class="d-inline-flex mt-1"
                                            *ngIf="stockTransactionReportBalance?.outwards?.quantity"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.outwards?.quantity
                                                    ? giddhRoundOff(
                                                          stockTransactionReportBalance?.outwards?.quantity,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : '-'
                                            "
                                        >
                                            (
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.outwards?.quantity
                                                        ? stockTransactionReportBalance?.outwards?.quantity
                                                        : '-'
                                                "
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >)
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box border-none closing-box">
                                <h5>
                                    Closing
                                    <div class="mt-2">
                                        <span
                                            class="d-inline-flex number-total w-100"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.closing?.amount
                                                    ? activeCompany.baseCurrencySymbol +
                                                      ' ' +
                                                      giddhRoundOff(
                                                          stockTransactionReportBalance?.closing?.amount,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : activeCompany.baseCurrencySymbol + ' ' + 0
                                            "
                                        >
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.closing?.amount
                                                        ? stockTransactionReportBalance?.closing?.amount
                                                        : 0
                                                "
                                                [currencySymbol]="activeCompany.baseCurrencySymbol"
                                                [currencyCode]="activeCompany?.baseCurrency"
                                            >
                                            </amount-field>
                                        </span>
                                        <span
                                            class="d-inline-flex mt-1"
                                            *ngIf="stockTransactionReportBalance?.closing?.quantity"
                                            [matTooltipPosition]="'above'"
                                            [matTooltip]="
                                                stockTransactionReportBalance?.closing?.quantity
                                                    ? giddhRoundOff(
                                                          stockTransactionReportBalance?.closing?.quantity,
                                                          giddhBalanceDecimalPlaces
                                                      )
                                                    : '-'
                                            "
                                        >
                                            (
                                            <amount-field
                                                [amount]="
                                                    stockTransactionReportBalance?.closing?.quantity
                                                        ? stockTransactionReportBalance?.closing?.quantity
                                                        : '-'
                                                "
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >)
                                        </span>
                                    </div>
                                </h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" *ngIf="isDataAvailable">
            <div class="col-12 horizontal-padding">
                <div class="table-responsive inventory-report-table" *ngIf="displayedColumns?.length">
                    <table
                        mat-table
                        [dataSource]="dataSource"
                        matSort
                        (matSortChange)="sortChange($event)"
                        [matSortActive]="stockReportRequest?.sortBy"
                        [matSortDirection]="stockReportRequest?.sort"
                        class="table giddh-table on-mobile-view"
                    >
                        <ng-container matColumnDef="entry_date">
                            <th class="date-column" mat-header-cell *matHeaderCellDef mat-sort-header>Date</th>
                            <td data-title="Date" mat-cell *matCellDef="let element">
                                {{ element?.entryDate ?? "-" }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="voucherType">
                            <th mat-header-cell *matHeaderCellDef [matMenuTriggerFor]="voucherTypesMenu">
                                Voucher Type
                                <i
                                    class="fa fa-ellipsis-v ml-1 text-light-2 mt-1 cursor-pointer"
                                    aria-hidden="true"
                                ></i>
                                <mat-menu
                                    #voucherTypesMenu="matMenu"
                                    class="columns-wrapper"
                                    (closed)="filterByVoucherTypes()"
                                >
                                    <ng-container *ngFor="let item of voucherTypes; let idx = index">
                                        <button
                                            class="menu-buttons"
                                            mat-menu-item
                                            (click)="$event?.stopPropagation()"
                                            (keydown.enter)="item.checked = !item?.checked"
                                        >
                                            <mat-checkbox
                                                class="inventory-checkbox"
                                                color="primary"
                                                name="{{ item?.value }}"
                                                [(ngModel)]="item.checked"
                                                (click)="$event?.stopPropagation()"
                                            >
                                                {{ item?.label }}</mat-checkbox
                                            >
                                        </button>
                                    </ng-container>
                                </mat-menu>
                            </th>
                            <td date-title="Voucher Type" mat-cell *matCellDef="let element">
                                {{ element?.voucherType }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="accountName">
                            <th
                                class="td-search-box text-left word-wrap"
                                mat-header-cell
                                #searchCustomerContainer
                                *matHeaderCellDef
                                (clickOutside)="handleClickOutside($event, searchCustomerContainer, 'name')"
                            >
                                <ng-container
                                    *ngTemplateOutlet="
                                        searchTemplate;
                                        context: {
                                            $implicit: showAccountSearchInput,
                                            fieldName: 'name',
                                            formControl: searchAccountName,
                                            title: 'Account Name'
                                        }
                                    "
                                ></ng-container>
                            </th>
                            <td
                                data-title="Account Name"
                                class="text-left account-name-column"
                                mat-cell
                                *matCellDef="let element"
                            >
                                {{ element?.account?.name ?? "-" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="stockName">
                            <th class="text-left" mat-header-cell *matHeaderCellDef>Stock Name</th>
                            <td data-title="Stock Name" class="text-left word-wrap" mat-cell *matCellDef="let element">
                                {{ element?.stock?.name ?? "-" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="variantName">
                            <th class="text-left" mat-header-cell *matHeaderCellDef>Variant Name</th>
                            <td
                                data-title="Variant Name"
                                class="text-left word-wrap"
                                mat-cell
                                *matCellDef="let element"
                            >
                                {{ element?.variant?.name ?? "-" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="inward_quantity">
                            <th class="text-right" mat-header-cell *matHeaderCellDef mat-sort-header>Inwards</th>
                            <td
                                data-title="Inwards"
                                class="text-right"
                                mat-cell
                                *matCellDef="let element"
                                [matTooltipPosition]="'above'"
                                [matTooltip]="
                                    element?.type === 'dr'
                                        ? giddhRoundOff(element?.quantity, giddhBalanceDecimalPlaces)
                                        : ''
                                "
                            >
                                <span class="d-inline-flex" *ngIf="element?.type === 'dr'">
                                    <amount-field
                                        [amount]="element?.quantity ? element?.quantity : '-'"
                                        [currencySymbol]="false"
                                        [currencyCode]="false"
                                    >
                                    </amount-field>
                                    <span class="ml-1 unit-badge"> {{ element?.stockUnit?.code }}</span>
                                </span>
                                <span *ngIf="element?.type === 'cr'">-</span>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="outward_quantity">
                            <th class="text-right" mat-header-cell *matHeaderCellDef mat-sort-header>Outwards</th>
                            <td
                                data-title="Outwards"
                                class="text-right"
                                mat-cell
                                *matCellDef="let element"
                                [matTooltipPosition]="'above'"
                                [matTooltip]="
                                    element?.type === 'cr'
                                        ? giddhRoundOff(element?.quantity, giddhBalanceDecimalPlaces)
                                        : ''
                                "
                            >
                                <span class="d-inline-flex" *ngIf="element.type === 'cr'">
                                    <amount-field
                                        [amount]="element?.quantity ? element?.quantity : '-'"
                                        [currencySymbol]="false"
                                        [currencyCode]="false"
                                    >
                                    </amount-field>
                                    <span class="ml-1 unit-badge"> {{ element?.stockUnit?.code }}</span>
                                </span>
                                <span *ngIf="element?.type === 'dr'">-</span>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="rate">
                            <th class="text-right" mat-header-cell *matHeaderCellDef mat-sort-header>Rate</th>
                            <td
                                data-title="Rate"
                                class="text-right"
                                mat-cell
                                *matCellDef="let element"
                                [matTooltipPosition]="'above'"
                                [matTooltip]="
                                    element?.rate
                                        ? activeCompany.baseCurrencySymbol +
                                          ' ' +
                                          giddhRoundOff(element?.rate, giddhBalanceDecimalPlaces)
                                        : activeCompany.baseCurrencySymbol + ' ' + 0
                                "
                            >
                                <span class="d-inline-flex">
                                    <amount-field
                                        [amount]="element?.rate ? element?.rate : 0"
                                        [currencySymbol]="activeCompany.baseCurrencySymbol"
                                        [currencyCode]="activeCompany?.baseCurrency"
                                    >
                                    </amount-field>
                                </span>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="transaction_val">
                            <th class="text-right" mat-header-cell *matHeaderCellDef mat-sort-header>Value</th>
                            <td
                                data-title="Value"
                                class="text-right"
                                mat-cell
                                *matCellDef="let element"
                                [matTooltipPosition]="'above'"
                                [matTooltip]="
                                    element?.amount
                                        ? activeCompany.baseCurrencySymbol +
                                          ' ' +
                                          giddhRoundOff(element?.amount, giddhBalanceDecimalPlaces)
                                        : activeCompany.baseCurrencySymbol + ' ' + 0
                                "
                            >
                                <span class="d-inline-flex">
                                    <amount-field
                                        [amount]="element?.amount ? element?.amount : 0"
                                        [currencySymbol]="activeCompany.baseCurrencySymbol"
                                        [currencyCode]="activeCompany?.baseCurrency"
                                    >
                                    </amount-field>
                                </span>
                            </td>
                        </ng-container>
                        <!-- <ng-container matColumnDef="qty">
                        <th class="text-right" mat-header-cell *matHeaderCellDef>qty</th>
                        <td data-title="Qty" class="text-right" mat-cell *matCellDef="let element">
                            {{ element.qty }}
                        </td>
                    </ng-container> -->
                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                    </table>
                </div>
                <div class="pagination-wrapper">
                    <pagination
                        *ngIf="
                            stockReportRequest?.totalItems > stockReportRequest?.count &&
                            !isLoading &&
                            displayedColumns?.length
                        "
                        [totalItems]="stockReportRequest?.totalItems"
                        [(ngModel)]="stockReportRequest.page"
                        [maxSize]="5"
                        class="pagination-sm"
                        [boundaryLinks]="true"
                        [itemsPerPage]="stockReportRequest?.count"
                        [rotate]="false"
                        (pageChanged)="pageChanged($event)"
                        [firstText]="commonLocaleData?.app_first"
                        [previousText]="commonLocaleData?.app_previous"
                        [nextText]="commonLocaleData?.app_next"
                        [lastText]="commonLocaleData?.app_last"
                    ></pagination>
                </div>
            </div>
        </div>
    </div>
    <div class="no-data-inventory" *ngIf="!isLoading && !dataSource?.length">
        <h1>No entries found within given criteria.</h1>
        <h1>Do search with some other dates</h1>
    </div>

    <div class="no-data" *ngIf="isLoading">
        <giddh-page-loader></giddh-page-loader>
    </div>
    <ng-template #datepickerTemplate>
        <div class="datepicker-modal">
            <div class="modal-body">
                <app-datepicker-wrapper
                    [inputStartDate]="selectedDateRange?.startDate"
                    [inputEndDate]="selectedDateRange?.endDate"
                    [alwaysShowCalendars]="true"
                    [ranges]="datePickerOptions"
                    [selectedRangeLabel]="selectedRangeLabel"
                    [showCustomRangeLabel]="true"
                    [showClearButton]="false"
                    [showCancel]="true"
                    [linkedCalendars]="true"
                    [showDropdowns]="true"
                    [locale]="{ applyLabel: commonLocaleData?.app_done }"
                    (rangeClicked)="dateSelectedCallback($event)"
                    (datesUpdated)="dateSelectedCallback($event)"
                    [keepCalendarOpeningWithRange]="false"
                    [showRangeLabelOnInput]="false"
                    [dateFieldPosition]="dateFieldPosition"
                ></app-datepicker-wrapper>
            </div>
        </div>
    </ng-template>
    <ng-template
        #searchTemplate
        let-show
        let-title="title"
        let-placeholder="placeholder"
        let-fieldName="fieldName"
        let-formControl="formControl"
    >
        <div class="align-items-center d-flex" [hidden]="show">
            <span>{{ title }}</span>
            <button mat-icon-button (click)="toggleSearch(fieldName)">
                <span class="icon-search"></span>
            </button>
        </div>
        <div [hidden]="!show">
            <text-field
                [type]="'text'"
                [placeholder]="getSearchFieldText(fieldName)"
                [cssClass]="'form-control search-table mat-field-border'"
                [formControl]="formControl"
                [autoFocus]="show"
            ></text-field>
        </div>
    </ng-template>
</div>
