<ng-container appTranslate [file]="'inventory'" (commonLocaleData)="commonLocaleData = $event"
    (localeData)="localeData = $event">
    <div class="bulk-stock pd-15 pb-0">
        <div class="bulk-stock-warpper">
            <div class="bulk-stock-header">
                <div class="pull-right">
                    <button mat-icon-button [matMenuTriggerFor]="filterMenu" matTooltip='Filter'
                        matTooltipPosition="left">
                        <i class="icon-options select-multiple-icon-options"> </i>
                    </button>
                    <mat-menu #filterMenu="matMenu" class="columns-wrapper">
                        <ng-container *ngFor="let item of customiseColumns">
                            <button class="menu-buttons" mat-menu-item (click)="$event?.stopPropagation()"
                                (keydown.enter)="$event?.stopPropagation(); onKeydownEnter(item)">
                                <mat-checkbox class="inventory-checkbox" color="primary" [name]="item.value"
                                    (ngModelChange)="saveSelectedColumns()" [(ngModel)]="item.checked"
                                    (click)="$event?.stopPropagation()">
                                    {{ item.label }}</mat-checkbox>
                            </button>
                        </ng-container>
                    </mat-menu>

                </div>
            </div>
            <div class="bulk-stock-body">
                <div class="bulk-stock-table d-flex flex-column">
                    <ng-container *ngIf="isLoading">                      
                            <div>
                                <giddh-page-loader></giddh-page-loader>
                            </div>                        
                    </ng-container>
                    <ng-container *ngIf="!isLoading">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr (clickOutside)="hideTableHeadInput()">
                                          <!-- Variant Name -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('variantName'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.variantName">Variant Name</h3>
                                            <div *ngIf="tableHeadInput.variantName" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.variantName }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'variantName'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!-- Variant UN -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('variantUniqueName'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.variantUniqueName">Variant UN</h3>
                                            <div *ngIf="tableHeadInput.variantUniqueName" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.variantUniqueName }">
                                                <text-field [type]="'text'" [autoFocus]="true"
                                                    [id]="'variantUniqueName'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!--  Stock Name -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('stockName'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.stockName">Stock Name</h3>
                                            <div *ngIf="tableHeadInput.stockName" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.stockName }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'stockName'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!--  Stock UN -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('stockUniqueName'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.stockUniqueName">Stock UN</h3>
                                            <div *ngIf="tableHeadInput.stockUniqueName" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.stockUniqueName }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'Uniquename'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!--  Stock Group Name -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('stockGroupName'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.stockGroupName">Stock Group Name</h3>
                                            <div *ngIf="tableHeadInput.stockGroupName" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.stockGroupName }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'stockGroupName'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!--  Stock Unit Group -->
                                        <th>
                                            <h3>Stock Unit Group</h3>
                                        </th>
                                        <!--  Stock Base Unit -->
                                        <th>
                                            <h3>Stock Base Unit</h3>
                                        </th>
                                         <!-- Taxes -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('tax'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.tax">Tax</h3>
                                            <div *ngIf="tableHeadInput.tax" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.tax }">
                                                <select-field [name]="'fields'" [options]="dropdownData"
                                                    (selectedOption)="selectField($event)"
                                                    [placeholder]="commonLocaleData?.app_select">
                                                </select-field>
                                            </div>
                                        </th>
                                         <!-- HSN -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('hsn'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.hsn">HSN</h3>
                                            <div *ngIf="tableHeadInput.hsn" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.hsn }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'hsn'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!-- SAC -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('sac'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.sac">SAC</h3>
                                            <div *ngIf="tableHeadInput.sac" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.sac }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'sac'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!-- SKU Code -->
                                        <th class="cursor-pointer"
                                            (click)="toggleInput('skuCode'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.skuCode">SKU Code
                                            </h3>
                                            <div *ngIf="tableHeadInput.skuCode" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.skuCode }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'skuCode'">
                                                </text-field>
                                            </div>
                                        </th>
                                        <!--  Purchases Account Name -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Purchases Account Name</h3>
                                        </th>
                                        <!--  Purchases Account UN -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Purchase Account UN</h3>
                                        </th>
                                        <!--  Purchases Rate -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Purchase Rate</h3>
                                        </th>
                                         <!--  Purchases Unit  (Array)-->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'" class="cursor-pointer"
                                            (click)="toggleInput('purchaseUnit'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.purchaseUnit">Purchase Unit</h3>
                                            <div *ngIf="tableHeadInput.purchaseUnit" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.purchaseUnit }">
                                                <select-field [name]="'fields'" [options]="dropdownData"
                                                    (selectedOption)="selectField($event)"
                                                    [placeholder]="commonLocaleData?.app_select">
                                                </select-field>
                                            </div>
                                        </th>                                        
                                        <!-- Purchase Inclusive -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Purchase Inclusive</h3>
                                        </th>
                                        <!--  Sales Account Name -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Sales Account Name</h3>
                                        </th>
                                         <!--  Sales Account UN -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Sales Account UN</h3>
                                        </th>                                      
                                        <!--  Sales Rate -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'" (click)="toggleInput('salesUnit'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.salesUnit">Sales Rate</h3>
                                            <div *ngIf="tableHeadInput.salesUnit" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.salesUnit }">
                                                <text-field [type]="'text'" [autoFocus]="true" [id]="'salesRate'">
                                                </text-field>
                                            </div>
                                        </th>
                                         <!--  Sales Unit (Array)-->
                                         <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'" (click)="toggleInput('salesUnit'); $event.stopPropagation();">
                                            <h3 *ngIf="!tableHeadInput.salesUnit">Sales Unit</h3>
                                            <div *ngIf="tableHeadInput.salesUnit" class="border-line"
                                                [ngClass]="{'active': tableHeadInput.salesUnit }">
                                                <select-field [name]="'fields'" [options]="dropdownData"
                                                    (selectedOption)="selectField($event)"
                                                    [placeholder]="commonLocaleData?.app_select">
                                                </select-field>
                                            </div>
                                        </th>
                                        <!-- Sales Inclusive -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Sales Inclusive</h3>
                                        </th>
                                        <!-- Fixed Asset Units -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>Fixed Asset Units</h3>
                                        </th>
                                        <!-- Fixed Asset AN -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>Fixed Asset AN</h3>
                                        </th>
                                        <!-- Fixed Asset Account UN -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>Fixed Asset Account UN</h3>
                                        </th>
                                        <!-- Fixed Asset Unit -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>Fixed Asset Unit</h3>
                                        </th>
                                        <!-- Fixed Asset AN -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>Fixed Asset AN</h3>
                                        </th>
                                        <!-- Fixed Asset Account UN -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>Fixed Asset Account UN</h3>
                                        </th>
                                        <!-- Archive -->
                                        <th>
                                            <h3>Archive</h3>
                                        </th>
                                        <!-- Tax UN -->
                                        <th>
                                            <h3>Tax UN</h3>
                                        </th>
                                        <!-- Sales Tax Inclusive -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Sales Tax Inclusive</h3>
                                        </th>
                                        <!-- Purchase Tax Inclusive -->
                                        <th *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <h3>Purchase Tax Inclusive</h3>
                                        </th>
                                        <!-- FixedAsset Tax Inclusive -->
                                        <th *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <h3>FixedAsset Tax Inclusive</h3>
                                        </th>                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let x of bulkStockList; let i = index; let l = last">
                                        <!-- Variant Name -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [ngModel]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Variant UN -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [(ngModel)]="x.variantUniqueName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!--  Stock Name -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [(ngModel)]="x.stockName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Stock UN -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [(ngModel)]="x.stockUniqueName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Stock Group Name -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [(ngModel)]="x.stockGroupName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!--  Stock Unit Group -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Stock Base Unit -->
                                        <td>
                                            <div class="border-line">
                                                <select-field 
                                                    [cssClass]="x?.taxes?.length ? null : 'text-center'"
                                                    [name]="'fields'"
                                                    [options]="x?.taxes"
                                                    [placeholder]="x?.taxes?.length ? '' : 'N/A'"  
                                                    (selectedOption)="selectField($event)"
                                                    >
                                                </select-field>
                                            </div>
                                        </td>
                                        <!-- Taxes -->
                                        <td>
                                            <div class="border-line">
                                                <select-field [name]="'fields'" [options]="dropdownData"
                                                    (selectedOption)="selectField($event)">
                                                </select-field>
                                            </div>
                                        </td>
                                         <!-- HSN -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.hsnNo">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!-- SAC -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.sacNo">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!-- SKU Code -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.skuCode">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!--  Purchases Account Name -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.purchaseAccountName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Purchases Account UN -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.purchaseAccountUniqueName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!--  Purchases Rate -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!--  Purchases Rate Unit  -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Purchase Inclusive -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!--  Sales Account Name -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.salesAccountName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Sales Account UN -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.salesAccountUniqueName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Sales Rate -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!--  Sales Unit (Array) -->
                                         <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <select-field 
                                                    [cssClass]="x?.salesUnits?.length ? null : 'text-center'"
                                                    [name]="'fields'"
                                                    [options]="x?.salesUnits"
                                                    [placeholder]="x?.salesUnits?.length ? '' : 'N/A'"  
                                                    (selectedOption)="selectField($event)"
                                                >
                                                </select-field>
                                            </div>
                                        </td>
                                        <!-- Sales Inclusive -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Fixed Asset Units (Array)-->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Fixed Asset AN -->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Fixed Asset Account UN -->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Fixed Asset Unit -->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Fixed Asset AN -->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Fixed Asset Account UN -->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Archive -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.archive">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Tax UN  -->
                                        <td>
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.variantName">
                                                </text-field>
                                            </div>
                                        </td>
                                         <!-- Sales Tax Inclusive -->
                                         <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.salesTaxInclusive">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- Purchase Tax Inclusive -->
                                        <td *ngIf="inventoryType === 'SERVICE' || inventoryType === 'PRODUCT'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.purchaseTaxInclusive">
                                                </text-field>
                                            </div>
                                        </td>
                                        <!-- FixedAsset Tax Inclusive -->
                                        <td *ngIf="inventoryType === 'FIXED_ASSETS'">
                                            <div class="border-line">
                                                <text-field [type]="'text'" [value]="" [(ngModel)]="x.fixedAssetTaxInclusive">
                                                </text-field>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="pagination-wrapper mt-auto">
                            <pagination *ngIf="pagination" class="pagination-sm" [totalItems]="pagination.totalItems"
                                [maxSize]="5" [boundaryLinks]="true" [itemsPerPage]="pagination.itemsPerPage"
                                [rotate]="false" (pageChanged)="pageChanged($event)"
                                [firstText]="commonLocaleData?.app_first"
                                [previousText]="commonLocaleData?.app_previous" [nextText]="commonLocaleData?.app_next"
                                [lastText]="commonLocaleData?.app_last"></pagination>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>

</ng-container>