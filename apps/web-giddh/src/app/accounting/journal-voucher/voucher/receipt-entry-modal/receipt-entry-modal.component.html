<div class="modal-header">
    <h4 class="modal-title pull-left">Receipt Entry</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="closePopup()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="receipt-entry-content">
        <div class="receipt-entry-top-detail">
            <h5 class="mb-05">Bill wise Details for: {{transaction?.selectedAccount?.name}}</h5>
            <p>Upto: {{transaction?.amount | giddhCurrency}} Cr</p>
        </div>
        <div class="receipt-entry-form">
            <div class="form-fields" *ngFor="let entry of receiptEntries; let i = index;">
                <div class="single-field relative">
                    <label *ngIf="i === 0">Type</label>
                    <sh-select #adjustmentTypesField [options]="entry.allowedTypes" placeholder="Type" name="type" [(ngModel)]="entry.type"
                        class="receipt-type" (selected)="onSelectAdjustmentType($event, entry)"></sh-select>
                    <i class="icon-arrow-down" (click)="adjustmentTypesField.show($event)"></i>
                </div>
                <!-- <div class="single-field" *ngIf="entry.type !== 'againstReference'">
                    <label *ngIf="i === 0">Note</label>
                    <input type="text" class="form-control" placeholder="Notes" name="notes" [(ngModel)]="entry.note">
                </div> -->
                <div class="single-field relative" *ngIf="entry.type !== 'againstReference'">
                    <label *ngIf="i === 0">Tax (Optional) </label>
                    <sh-select [options]="taxListSource$ | async" placeholder="Select Tax" name="tax"
                        [(ngModel)]="entry.tax.uniqueName" [forceClearReactive]="forceClear$ | async" [disabled]="entry.type === 'receipt'"
                        (selected)="onSelectTax($event, entry)" class="select-tax"></sh-select>
                    <i class="icon-arrow-down"></i>
                </div>
                <!-- [ngClass]="{'set-width': entry.type === 'againstReference'}"  it will used on version -2  -->
                <div class="single-field relative" *ngIf="entry.type === 'againstReference'">
                    <label *ngIf="i === 0">Inv No., Date, Amount</label>
                    <sh-select class="about-invoice-detail" [options]="pendingInvoiceListSource$ | async"
                        name="invoiceNo" placeholder="Inv No., Date, Amount" [(ngModel)]="entry.invoice.uniqueName"
                        (selected)="onSelectInvoice($event, entry)"></sh-select>
                    <i class="icon-arrow-down"></i>
                </div>
                <div class="single-field relative">
                    <label *ngIf="i === 0">Amount</label>
                    <input type="tel" class="form-control" placeholder="Enter Amount" name="amount"
                        [(ngModel)]="entry.amount" (keydown)="validateAmount($event, entry)"
                        (blur)="validateEntry(entry)" decimalDigitsDirective [DecimalPlaces]="2"
                        (ngModelChange)="formatAmount(entry)">
                </div>
                <div class="single-field to-cr-field">
                    <p>
                        <label class="d-block">&nbsp;</label>
                        To/Cr
                    </p>
                </div>
                <div class="single-field delete-row" *ngIf="receiptEntries.length > 1">
                    <p>
                        <label class="d-block">&nbsp;</label>
                        <a href="javascript:;" (click)="removeReceiptEntry(i)"><i class="icon-cross"></i></a>
                    </p>
                </div>

            </div>
            <div class="mt-4">
                <button class="btn btn-success" [disabled]="!isValidForm" (click)="emitEntries()">Save</button>
            </div>
        </div>
    </div>
</div>
