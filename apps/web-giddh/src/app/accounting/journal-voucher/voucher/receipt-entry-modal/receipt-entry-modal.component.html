<div class="modal-header">
    <h4 class="modal-title pull-left">Receipt Entry</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="receipt-entry-content">
        <div class="receipt-entry-top-detail">
            <h5 class="mb-05">Bill wise Details for: {{transaction?.selectedAccount?.name}}</h5>
            <p>Upto: {{transaction?.amount | giddhCurrency}} Cr</p>
        </div>
        <div class="receipt-entry-form">
            <div class="form-fields" *ngFor="let entry of receiptEntries; let i = index;">
                <div class="single-field relative">
                    <label *ngIf="i === 0">Type</label>
                    <sh-select [options]="adjustmentTypes" #referenceType placeholder="Type" name="type" [(ngModel)]="entry.type"></sh-select>
                    <i class="icon-arrow-down"></i>
                </div>
                <div class="single-field" *ngIf="entry.type !== 'againstReference'">
                    <label *ngIf="i === 0">Note</label>
                    <input type="text" class="form-control" placeholder="Notes" name="notes" [(ngModel)]="entry.note">
                </div>
                <div class="single-field relative" *ngIf="entry.type !== 'againstReference'">
                    <label *ngIf="i === 0">Tax (Optional) </label>
                    <sh-select [options]="taxListSource$ | async" placeholder="Select Tax" name="tax" [(ngModel)]="entry.tax.uniqueName" [disabled]="entry.type === 'receipt'" (selected)="onSelectTax($event, entry)"></sh-select>
                    <i class="icon-arrow-down"></i>
                </div>
                <div class="single-field relative" *ngIf="entry.type === 'againstReference'" [ngClass]="{'set-width': entry.type === 'againstReference'}">
                    <label *ngIf="i === 0">Inv No., Date, Amount</label>
                    <sh-select [options]="pendingInvoiceListSource$ | async" name="invoiceNo" placeholder="Inv No., Date, Amount" [(ngModel)]="entry.invoiceNo"></sh-select>
                    <i class="icon-arrow-down"></i>
                </div>
                <div class="single-field">
                    <label *ngIf="i === 0">Amount</label>
                    <input type="tel" class="form-control" placeholder="Enter Amount" name="amount" [(ngModel)]="entry.amount" (keydown)="validateAmount($event, entry)" (blur)="validateEntry(entry)">
                </div>
                <div class="single-field">
                    <p>
                        <label class="d-block">&nbsp;</label>
                        To/Cr
                    </p>
                </div>
            </div>
            <div class="mt-4">
                <button class="btn btn-success" [disabled]="!isValidForm" (click)="emitEntries()">Save</button>
            </div>
        </div>
    </div>
</div>