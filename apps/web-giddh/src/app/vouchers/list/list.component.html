<ng-container 
    appTranslate
    [file]="'vouchers/preview'"
    (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event"
>
    <hamburger-menu class="hamburger-menu"></hamburger-menu>
    <div class="position-relative invoice-list">
        <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" [selectedIndex]="selectedTabIndex" (selectedIndexChange)="tabChanged($event)">
            
            <!-- estimate-content-start -->
            <mat-tab label="Estimates (Beta)" *ngIf="activeTabGroup === 0">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" [routerLink]="['/pages/vouchers/estimates/create']">
                                <span>{{ localeData?.new_estimate }}</span>
                            </button>
                            <div class="custom-datepicker-wrapper">
                                <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                    <input
                                        type="text"
                                        name="selectedDateRange"
                                        [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                        class="giddh-datepicker date-range-picker border-radius-2"
                                    />
                                </div>
                            </div>
                        </div>
                        <button mat-stroked-button (click)="setInitialAdvanceFilter()" class="mx-auto" *ngIf="advanceFiltersApplied">
                            <span class="icon-cross icon-font-14"></span> {{ commonLocaleData?.app_clear_filter }}
                        </button>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" [matMenuTriggerFor]="moreEstimate" *ngIf="selectedVouchers?.length === 1">
                                <span>{{ commonLocaleData?.app_more }}</span>
                                <i class="icon-arrow-down icon-font-11 ml-2"></i>
                            </button>
                            <mat-menu #moreEstimate="matMenu">
                                <button mat-menu-item (click)="deleteVoucherDialog()">{{ commonLocaleData?.app_delete }}</button>
                            </mat-menu>
                            <button mat-stroked-button color="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort (matSortChange)="sortChange($event)" class="w-100">
                            <ng-container matColumnDef="index">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [value]="true"
                                            [checked]="allVouchersSelected"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="estimate">
                                <th mat-header-cell *matHeaderCellDef #invoiceNo (clickOutside)="handleClickOutside($event, invoiceNo, 'estimateNumber')">
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'estimateNumber',
                                                    voucherType: 'estimate',
                                                    formControl: voucherNumberInput,
                                                    title: localeData?.estimate_no
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <a href="javascript:;" class="btn-link-2">{{ element.voucherNumber ? element.voucherNumber : commonLocaleData?.app_not_available }}</a>
                                    <span class="d-block" *ngIf="element.expiredDays !== null">
                                        <small class="text-danger" *ngIf="element.expiredDays === 0">
                                            {{ localeData?.expired_by_today }}
                                        </small>
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="customer">
                                <th mat-header-cell *matHeaderCellDef #accountUniqueName (clickOutside)="handleClickOutside($event, accountUniqueName, 'accountUniqueName')"> 
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'estimate',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_customer
                                                }
                                            "
                                        ></ng-container>
                                    </div>    
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    <div class="cursor-pointer" (dblclick)="element.showAccountDetails = true">{{ (element.account?.customerName || element?.account?.name) | titlecase }}</div>
                                    <mat-card class="outline-card account-detail-wrapper" *ngIf="element.showAccountDetails" (clickOutside)="element.showAccountDetails = false">
                                        <div class="d-flex align-items-center justify-content-between column-gap15 p-3 border-bottom account-header">
                                            <h3>{{ element?.customerName | titlecase }}</h3>
                                            <span class="cursor-pointer" (click)="editAccount(element)">
                                                <img src="./assets/images/path.svg" />
                                            </span>
                                        </div>
                                        <mat-card-content class="pt-3">
                                            <ul class="list-unstyled">
                                                <li class="text-left"><a href="javascript:;" class="default-color" (click)="goToLedger(element)">{{ commonLocaleData?.app_goto_ledger }}</a></li>
                                                <li class="text-left mr-t05"><a href="javascript:;" class="default-color" (click)="generateVoucher(element)">{{ commonLocaleData?.app_generate_invoice }}</a></li>
                                            </ul>
                                        </mat-card-content>
                                    </mat-card>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="proformaDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Estimate Date
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element.voucherDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ localeData?.total_amt }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.grandTotalTooltipText"
                                matTooltipPosition="above"> 
                                    <amount-field
                                        [amount]="element.amount?.amountForAccount"
                                        [currencySymbol]="element?.amount?.currencyForAccount?.symbol"
                                        [currencyCode]="element?.amount?.currencyForAccount?.code"
                                    >
                                    </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="dueDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Expiry Date
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element.expiryDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element.status }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef>
                                    Action
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element.action | titlecase  }}</p>
                                        <ng-container *ngIf="element.action !== 'invoiced'">
                                            <span [matMenuTriggerFor]="menu" class="cursor-pointer" *ngIf="!isCompany">
                                                <i class="icon-dots-three-vertical"></i>
                                            </span>
                                            <mat-menu #menu="matMenu">
                                                <button mat-menu-item (click)="actionEstimateProforma(element, 'accepted')">{{ localeData?.accepted }}</button>
                                                <button mat-menu-item (click)="actionEstimateProforma(element, 'decline')">{{ localeData?.declined }}</button>
                                                <button mat-menu-item (click)="convertToProforma(element)">{{ localeData?.convert_proforma }}</button>
                                                <button mat-menu-item (click)="convertToInvoice(element)">{{ localeData?.convert_invoice }}</button>
                                                <button mat-menu-item (click)="actionEstimateProforma(element, 'expired')">{{ localeData?.expired }}</button>
                                            </mat-menu>
                                        </ng-container>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumnEstimate"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnEstimate;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                            *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                                class="mt-3"
                                (page)="handlePageChange($event)"
                                [length]="totalResults"
                                [pageSize]="advanceFilters.count"
                                [showFirstLastButtons]="true"
                                [pageSizeOptions]="pageSizeOptions"
                                [hidePageSize]="false"
                                [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- estimate-content-end -->

            <!-- proforma-content-start -->
            <mat-tab label="Proformas" *ngIf="activeTabGroup === 0">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" [routerLink]="['/pages/vouchers/proformas/create']">
                                <span>{{ localeData?.new_proforma }}</span>
                            </button>
                            <div class="custom-datepicker-wrapper">
                                <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                    <input
                                        type="text"
                                        name="selectedDateRange"
                                        [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                        class="giddh-datepicker date-range-picker border-radius-2"
                                    />
                                </div>
                            </div>
                        </div>
                        <button mat-stroked-button (click)="setInitialAdvanceFilter()" class="mx-auto" *ngIf="advanceFiltersApplied">
                            <span class="icon-cross icon-font-14"></span> {{ commonLocaleData?.app_clear_filter }}
                        </button>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" [matMenuTriggerFor]="moreProforma" *ngIf="selectedVouchers?.length">
                                <span>{{ commonLocaleData?.app_more }}</span>
                                <i class="icon-arrow-down icon-font-11 ml-2"></i>
                            </button>
                            <mat-menu #moreProforma="matMenu">
                                <button mat-menu-item (click)="deleteVoucherDialog()">{{ commonLocaleData?.app_delete }}</button>
                            </mat-menu>
                            <button mat-stroked-button colo="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort (matSortChange)="sortChange($event)" class="w-100">
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [value]="true"
                                            [checked]="allVouchersSelected"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="proforma">
                                <th mat-header-cell *matHeaderCellDef (clickOutside)="handleClickOutside($event, accountUniqueName, 'proformaNumber')">
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'proformaNumber',
                                                    voucherType: 'proforma',
                                                    formControl: voucherNumberInput,
                                                    title: 'Proforma No.'
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                 </th>
                                <td mat-cell *matCellDef="let element">
                                    <a href="javascript:;" class="btn-link-2">
                                        {{ element.proformaNumber }}
                                    </a>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="customer">
                                <th mat-header-cell *matHeaderCellDef (clickOutside)="handleClickOutside($event, accountUniqueName, 'accountUniqueName')"> 
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'proforma',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_customer
                                                }
                                            "
                                        ></ng-container>
                                    </div>    
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    <div class="cursor-pointer" (dblclick)="element.showAccountDetails = true">{{ (element.account?.customerName || element?.account?.name) | titlecase }}</div>
                                    <mat-card class="outline-card account-detail-wrapper" *ngIf="element.showAccountDetails" (clickOutside)="element.showAccountDetails = false">
                                        <div class="d-flex align-items-center justify-content-between column-gap15 p-3 border-bottom account-header">
                                            <h3>{{ element?.account?.customerName || element?.account?.name }}</h3>
                                            <span class="cursor-pointer" (click)="editAccount(element)">
                                                <img src="./assets/images/path.svg" />
                                            </span>
                                        </div>
                                        <mat-card-content class="pt-3">
                                            <ul class="list-unstyled">
                                                <li class="text-left"><a href="javascript:;" class="default-color" (click)="goToLedger(element)">{{ commonLocaleData?.app_goto_ledger }}</a></li>
                                                <li class="text-left mr-t05"><a href="javascript:;" class="default-color" (click)="generateVoucher(element)">{{ commonLocaleData?.app_generate_invoice }}</a></li>
                                            </ul>
                                        </mat-card-content>
                                    </mat-card>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="proformaDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ localeData?.proforma_date }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element.proformaDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ localeData?.total_amt }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.grandTotalTooltipText"
                                matTooltipPosition="above"> 
                                    {{ grandTotal }}
                                    <amount-field
                                        [amount]="element.grandTotal"
                                        [currencySymbol]="element?.amount?.currencyForAccount?.symbol"
                                        [currencyCode]="element?.amount?.currencyForAccount?.code"
                                    >
                                    </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="dueDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ localeData?.expiry_date }}
                                </th>
                                <td mat-cell *matCellDef="let element" matTooltip="In INR: 1.239 (Conversion Rate: 0.005)"
                                matTooltipPosition="above"> 
                                    {{element.expirydate}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <div [matTooltip]="element.eInvoiceStatusTooltip" [matTooltipPosition]="'above'">
                                        {{ element.status }}
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_action }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element?.action | titlecase }}</p>
                                        <span [matMenuTriggerFor]="menu" class="cursor-pointer">
                                            <i class="icon-dots-three-vertical"></i>
                                        </span>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item (click)="actionEstimateProforma(element, 'accepted')">{{ localeData?.accepted }}</button>
                                            <button mat-menu-item (click)="actionEstimateProforma(element, 'decline')">{{ localeData?.declined }}</button>
                                            <button mat-menu-item (click)="convertToInvoice(element)">{{ localeData?.convert_invoice }}</button>
                                            <button mat-menu-item (click)="actionEstimateProforma(element, 'expired')">{{ localeData?.expired }}</button>
                                        </mat-menu>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumnProforma"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnProforma;" class="checkbox-show"></tr>
                        </table>
                         <mat-paginator
                            *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                            class="mt-3"
                            (page)="handlePageChange($event)"
                            [length]="totalResults"
                            [pageSize]="advanceFilters.count"
                            [showFirstLastButtons]="true"
                            [pageSizeOptions]="pageSizeOptions"
                            [hidePageSize]="false"
                            [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- proforma-content-end -->
            
            <!-- invoice-content-start -->
            <mat-tab label="Invoices" *ngIf="activeTabGroup === 0">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15 flex-wrap row-gap1">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" [matMenuTriggerFor]="createNewVoucher">
                                <span>{{ localeData?.new_invoice }}</span>
                                <i class="icon-arrow-down icon-font-11 ml-2"></i>
                            </button>
                            <mat-menu #createNewVoucher="matMenu">
                                <button mat-menu-item [routerLink]="['/pages/vouchers/cash/create']">{{ localeData?.cash_invoice }}</button>
                                <button mat-menu-item [routerLink]="['/pages/vouchers/sales/create']">{{ localeData?.sales_invoice }}</button>
                            </mat-menu>
                            <div class="custom-datepicker-wrapper">
                                <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                    <input
                                        type="text"
                                        name="selectedDateRange"
                                        [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                        class="giddh-datepicker date-range-picker border-radius-2"
                                    />
                                </div>
                            </div>
                        </div>
                        <button mat-stroked-button (click)="setInitialAdvanceFilter()" class="mx-auto" *ngIf="advanceFiltersApplied">
                            <span class="icon-cross icon-font-14"></span> {{ commonLocaleData?.app_clear_filter }}
                        </button>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" [matTooltip]="commonLocaleData?.app_export"
                            [matTooltipPosition]="'above'" *ngIf="csvSupportVoucherType.includes(voucherType) && selectedVouchers?.length" [tooltip]="commonLocaleData?.app_export" (click)="exportCsvDownload()">
                                <i class="icon-export-icon"></i>
                            </button>
                            <button mat-stroked-button color="primary" [matMenuTriggerFor]="moreInvoice" *ngIf="selectedVouchers?.length">
                                <span>{{ commonLocaleData?.app_more }}</span>
                                <i class="icon-arrow-down icon-font-11 ml-2"></i>
                            </button>
                            <mat-menu #moreInvoice="matMenu">
                                <button mat-menu-item (click)="bulkUpdateDialog()">{{ localeData?.bulk_update }}</button>
                                <button mat-menu-item *ngIf="selectedVouchers?.length === 1" (click)="showEwayBillDialog()">{{ localeData?.generate_eway_bill }}</button>
                                <button mat-menu-item *ngIf="isEInvoiceEnabled && (voucherType === 'credit note' || voucherType === 'debit note' || voucherType === 'sales')" (click)="generateEInvoice()">{{ localeData?.create_e_invoice }}</button>
                                <button mat-menu-item (click)="deleteVoucherDialog()">{{ commonLocaleData?.app_delete }}</button>
                            </mat-menu>
                            <button mat-stroked-button color="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                            <button mat-stroked-button color="primary" (click)="showBulkExportDialog()">{{ commonLocaleData?.app_export }}</button>
                        </div>
                    </div>
                    <div class="total-wrapper d-flex column-gap5 w-100">
                        <div class="total-sale opening-box pd-1 w-50">
                            <p class="font-12">{{ localeData?.total_sale }}</p>
                            <span class="font-16">
                                <amount-field
                                    [amount]="voucherBalances.grandTotal"
                                    [currencySymbol]="company.baseCurrencySymbol"
                                    [currencyCode]="company.baseCurrency"
                                >
                                </amount-field>
                            </span>
                        </div>
                        <div class="total-sale due-box pd-1 w-50">
                            <p class="font-12">{{ commonLocaleData?.app_total_due }}:</p>
                            <span class="font-16">
                                <amount-field
                                    [amount]="voucherBalances.totalDue"
                                    [currencySymbol]="company.baseCurrencySymbol"
                                    [currencyCode]="company.baseCurrency"
                                >
                                </amount-field>
                            </span>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort (matSortChange)="sortChange($event)" class="w-100">
                            <ng-container matColumnDef="index">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [value]="true"
                                            [checked]="allVouchersSelected"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="invoice">
                                <th mat-header-cell *matHeaderCellDef #invoiceNo (clickOutside)="handleClickOutside($event, invoiceNo, 'invoiceNumber')">
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'invoiceNumber',
                                                    voucherType: 'sales',
                                                    formControl: voucherNumberInput,
                                                    title: 'commonLocaleData?.app_invoice_no'
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <a href="javascript:;" class="btn-link-2">{{ element.voucherNumber ? element.voucherNumber : commonLocaleData?.app_not_available }}</a>
                                    <small class="text-danger d-block" *ngIf="element.overdueDays">
                                        {{ element.overdueDays }}
                                    </small>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="customer">
                                <th mat-header-cell *matHeaderCellDef #accountUniqueName (clickOutside)="handleClickOutside($event, accountUniqueName, 'accountUniqueName')"> 
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'sales',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_customer
                                                }
                                            "
                                        ></ng-container>
                                    </div>    
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    <div class="cursor-pointer" (dblclick)="element.showAccountDetails = true">{{ (element.account?.customerName || element?.account?.name) | titlecase }}</div>
                                    <mat-card class="outline-card account-detail-wrapper" *ngIf="element.showAccountDetails" (clickOutside)="element.showAccountDetails = false">
                                        <div class="d-flex align-items-center justify-content-between column-gap15 p-3 border-bottom account-header">
                                            <h3>{{ element?.account?.customerName || element?.account?.name }}</h3>
                                            <span class="cursor-pointer" (click)="editAccount(element)">
                                                <img src="./assets/images/path.svg" />
                                            </span>
                                        </div>
                                        <mat-card-content class="pt-3">
                                            <ul class="list-unstyled">
                                                <li class="text-left"><a href="javascript:;" class="default-color" (click)="goToLedger(element)">{{ commonLocaleData?.app_goto_ledger }}</a></li>
                                                <li class="text-left mr-t05"><a href="javascript:;" class="default-color" (click)="generateVoucher(element)">{{ commonLocaleData?.app_generate_invoice }}</a></li>
                                            </ul>
                                        </mat-card-content>
                                    </mat-card>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="voucherDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ commonLocaleData?.app_invoice_date }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element.voucherDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ commonLocaleData?.app_amount }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.grandTotalTooltipText"
                                matTooltipPosition="above"> 
                                    <amount-field
                                        [amount]="element.grandTotal?.amountForAccount"
                                        [currencySymbol]="element.account?.currency?.symbol"
                                        [currencyCode]="element.account?.currency?.code"
                                    >
                                    </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="balanceDue">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ localeData?.balance_due }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.balanceDueTooltipText"
                                matTooltipPosition="above"> 
                                    <amount-field
                                        [amount]="element.totalBalance?.amountForAccount"
                                        [currencySymbol]="element.account?.currency?.symbol"
                                        [currencyCode]="element.account?.currency?.code"
                                    >
                                    </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="dueDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ localeData?.due_date }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element.dueDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="einvoicestatus">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ localeData?.e_invoice_status }}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <div [matTooltip]="element.eInvoiceStatusTooltip" [matTooltipPosition]="'above'">
                                        {{ element.status }}
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element.balanceStatus }}</p>
                                        <span [matMenuTriggerFor]="menu" class="cursor-pointer" *ngIf="element.balanceStatus !== 'cancel'">
                                            <i class="icon-dots-three-vertical"></i>
                                        </span>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item (click)="showPaymentDialog(element)">{{ commonLocaleData?.app_payment_status?.paid }}</button>
                                            <button mat-menu-item (click)="showAdjustmentDialog(element)">{{ commonLocaleData?.app_payment_status?.adjust_amount }}</button>
                                            <button mat-menu-item (click)="actionVoucher(element, 'unpaid')">{{ commonLocaleData?.app_payment_status?.unpaid }}</button>
                                            <button mat-menu-item (click)="actionVoucher(element, 'hold')">{{ commonLocaleData?.app_payment_status?.hold }}</button>
                                            <button mat-menu-item (click)="actionVoucher(element, 'cancel')">{{ commonLocaleData?.app_payment_status?.cancel }}</button>
                                            <button mat-menu-item (click)="showEwayBillDialog(element)">{{ localeData?.generate_eway_bill }}</button>
                                        </mat-menu>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                                *ngIf="!(getVouchersInProgress$ | async) && dataSource?.length && totalResults > pageSizeOptions[0]"
                            class="mt-3"
                            (page)="handlePageChange($event)"
                            [length]="totalResults"
                            [pageSize]="advanceFilters.count"
                            [showFirstLastButtons]="true"
                            [pageSizeOptions]="pageSizeOptions"
                            [hidePageSize]="false"
                            [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- invoice-content-end -->

            <!-- debit-note-content-start -->
            <mat-tab label="Debit Note" *ngIf="activeTabGroup === 1">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" [routerLink]="['/pages/vouchers/debit-note/create']">
                                <span>{{ localeData?.new_dr_note }}</span>
                            </button>
                            <div class="custom-datepicker-wrapper">
                                <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                    <input
                                        type="text"
                                        name="selectedDateRange"
                                        [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                        class="giddh-datepicker date-range-picker border-radius-2"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                            <button *ngIf="dataSource?.length" mat-stroked-button color="primary" (click)="showBulkExportDialog()">{{ commonLocaleData?.app_export }}</button>
                        </div>
                    </div>
                    <div class="total-wrapper d-flex column-gap5 w-100">
                        <div class="total-sale opening-box pd-1 w-100">
                            <p class="font-12">{{ localeData?.total_sale }}</p>
                            <span class="font-16">
                                <amount-field
                                    [amount]="voucherBalances.grandTotal"
                                    [currencySymbol]="company.baseCurrencySymbol"
                                    [currencyCode]="company.baseCurrency"
                                >
                                </amount-field>
                            </span>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort (matSortChange)="sortChange($event)" class="w-100">
                            <ng-container matColumnDef="index">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [checked]="allVouchersSelected"
                                            [value]="true"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="credit">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'debitNoteNumber',
                                                    voucherType: 'debit-note',
                                                    formControl: voucherNumberInput,
                                                    title: localeData?.dr_note_no
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <a href="javascript:;" class="btn-link-2">{{ element?.voucherNumber }}</a>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="customer">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'debit-note',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_customer
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    <div class="cursor-pointer" (dblclick)="element.showAccountDetails = true">{{ (element.account?.customerName || element?.account?.name) | titlecase }}</div>
                                    <mat-card class="outline-card account-detail-wrapper" *ngIf="element.showAccountDetails" (clickOutside)="element.showAccountDetails = false">
                                        <div class="d-flex align-items-center justify-content-between column-gap15 p-3 border-bottom account-header">
                                            <h3>{{ element?.account?.customerName || element?.account?.name }}</h3>
                                            <span class="cursor-pointer" (click)="editAccount(element)">
                                                <img src="./assets/images/path.svg" />
                                            </span>
                                        </div>
                                        <mat-card-content class="pt-3">
                                            <ul class="list-unstyled">
                                                <li class="text-left"><a href="javascript:;" class="default-color" (click)="goToLedger(element)">{{ commonLocaleData?.app_goto_ledger }}</a></li>
                                                <li class="text-left mr-t05"><a href="javascript:;" class="default-color" (click)="generateVoucher(element)">{{ commonLocaleData?.app_generate_invoice }}</a></li>
                                            </ul>
                                        </mat-card-content>
                                    </mat-card>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="voucherDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ commonLocaleData?.app_date }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element?.voucherDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="linked">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ localeData?.linked_invoice }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element?.referenceVoucher?.number ?? ''}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ commonLocaleData?.app_total_amount }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.balanceDueTooltipText"
                                matTooltipPosition="above"> 
                                <amount-field
                                    [amount]="element.grandTotal?.amountForAccount"
                                    [currencySymbol]="element.account?.currency?.symbol"
                                    [currencyCode]="element.account?.currency?.code"
                                >
                                </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element?.balanceStatus | titlecase }}</p>
                                        <span [matMenuTriggerFor]="menu" class="cursor-pointer">
                                            <i class="icon-dots-three-vertical"></i>
                                        </span>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item (click)="showPaymentDialog(element)">{{ commonLocaleData?.app_payment_status?.paid }}</button>
                                            <button mat-menu-item (click)="actionVoucher(element, 'cancel')">{{ commonLocaleData?.app_payment_status?.cancel }}</button>
                                        </mat-menu>
                                    </div>
                                </td>
                            </ng-container>
                            
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsCredit"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsCredit;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                            *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                            class="mt-3"
                            (page)="handlePageChange($event)"
                            [length]="totalResults"
                            [pageSize]="advanceFilters.count"
                            [showFirstLastButtons]="true"
                            [pageSizeOptions]="pageSizeOptions"
                            [hidePageSize]="false"
                            [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- debit-note-content-end -->

            <!-- credit-note-content-start -->
            <mat-tab label="Credit Note" *ngIf="activeTabGroup === 1">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" class="w-100" [routerLink]="['/pages/vouchers/credit-note/create']">
                                <span>{{ localeData?.new_cr_note }}</span>
                            </button>
                            <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                <input
                                    type="text"
                                    name="selectedDateRange"
                                    [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                    class="giddh-datepicker date-range-picker border-radius-2"
                                />
                            </div>
                        </div>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                            <button mat-stroked-button color="primary" (click)="showBulkExportDialog()">{{ commonLocaleData?.app_export }}</button>
                        </div>
                    </div>
                    <div class="total-wrapper d-flex column-gap5 w-100">
                        <div class="total-sale opening-box pd-1 w-100">
                            <p class="font-12">{{ localeData?.total_sale }}</p>
                            <span class="font-16">
                                <amount-field
                                    [amount]="voucherBalances.grandTotal"
                                    [currencySymbol]="company.baseCurrencySymbol"
                                    [currencyCode]="company.baseCurrency"
                                >
                                </amount-field>
                            </span>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort (matSortChange)="sortChange($event)" class="w-100">
                            <ng-container matColumnDef="index">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [value]="true"
                                            [checked]="allVouchersSelected"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="credit">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'creditNoteNumber',
                                                    voucherType: 'credit-note',
                                                    formControl: voucherNumberInput,
                                                    title: localeData?.cr_note_no
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <a href="javascript:;" class="btn-link-2">{{ element?.voucherNumber }}</a>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="customer">
                                <th mat-header-cell *matHeaderCellDef> 
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'credit-note',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_customer
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    <div class="cursor-pointer" (dblclick)="element.showAccountDetails = true">{{ (element.account?.customerName || element?.account?.name) | titlecase }}</div>
                                    <mat-card class="outline-card account-detail-wrapper" *ngIf="element.showAccountDetails" (clickOutside)="element.showAccountDetails = false">
                                        <div class="d-flex align-items-center justify-content-between column-gap15 p-3 border-bottom account-header">
                                            <h3>{{ element?.customerName | titlecase }}</h3>
                                            <span class="cursor-pointer" (click)="editAccount(element)">
                                                <img src="./assets/images/path.svg" />
                                            </span>
                                        </div>
                                        <mat-card-content class="pt-3">
                                            <ul class="list-unstyled">
                                                <li class="text-left"><a href="javascript:;" class="default-color" (click)="goToLedger(element)">{{ commonLocaleData?.app_goto_ledger }}</a></li>
                                                <li class="text-left mr-t05"><a href="javascript:;" class="default-color" (click)="generateVoucher(element)">{{ commonLocaleData?.app_generate_invoice }}</a></li>
                                            </ul>
                                        </mat-card-content>
                                    </mat-card>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="voucherDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ commonLocaleData?.app_date }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element?.voucherDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="linked">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ localeData?.linked_invoice }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element?.referenceVoucher?.number ?? ''}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ commonLocaleData?.app_total_amount }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.balanceDueTooltipText"
                                matTooltipPosition="above"> 
                                <amount-field
                                    [amount]="element.grandTotal?.amountForAccount"
                                    [currencySymbol]="element.account?.currency?.symbol"
                                    [currencyCode]="element.account?.currency?.code"
                                >
                                </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element?.balanceStatus | titlecase }}</p>
                                        <span [matMenuTriggerFor]="menu" class="cursor-pointer">
                                            <i class="icon-dots-three-vertical"></i>
                                        </span>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item (click)="showPaymentDialog(element)">{{ commonLocaleData?.app_payment_status?.paid }}</button>
                                            <button mat-menu-item (click)="actionVoucher(element, 'cancel')">{{ commonLocaleData?.app_payment_status?.cancel }}</button>
                                        </mat-menu>
                                    </div>
                                </td>
                            </ng-container>
                            
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsCredit"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsCredit;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                            *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                                class="mt-3"
                                (page)="handlePageChange($event)"
                                [length]="totalResults"
                                [pageSize]="advanceFilters.count"
                                [showFirstLastButtons]="true"
                                [pageSizeOptions]="pageSizeOptions"
                                [hidePageSize]="false"
                                [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- credit-note-content-end -->

            <!-- pending-content-start -->
            <mat-tab label="Pending" *ngIf="activeTabGroup === 0 || activeTabGroup === 1">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <div class="custom-datepicker-wrapper">
                                <div class="custom-datepicker">
                                    <input type="text" name="selectedDateRange"
                                        class="giddh-datepicker date-range-picker" />
                                </div>
                            </div>
                            <button mat-stroked-button color="primary">Generate Multiple</button>
                            <button mat-stroked-button color="primary">Generate Compound</button>
                            <button mat-stroked-button color="primary">Preview & Generate</button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table mat-table [dataSource]="dataSourcePending" matSort class="w-100">
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> # 
                                    <!-- <span>
                                        <mat-checkbox
                                            color="primary"
                                        ></mat-checkbox>
                                    </span> -->
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number">
                                            {{element.position}}
                                        </div>
                                        <div class="checkbox-hide">
                                            <mat-checkbox
                                                color="primary"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="date">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_date }}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.date}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="particular">
                                <th mat-header-cell *matHeaderCellDef> 
                                    Particular
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    {{element.particular}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="amount">
                                <th mat-header-cell *matHeaderCellDef class="text-right">
                                    {{ commonLocaleData?.app_amount }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right"> 
                                    $ 10.00
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="account">
                                <th mat-header-cell *matHeaderCellDef>
                                    Account
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="cursor-pointer">
                                        {{element.account}}
                                    </div>
                                    <!-- account-detail-double-click -->
                                    <!-- <mat-card class="outline-card account-detail-wrapper">
                                        <div class="p-3 border-bottom account-header">
                                            <div class="d-flex align-items-center justify-content-between column-gap15 ">
                                                <h3>USA debtor</h3>
                                                <span class="cursor-pointer">
                                                    <img src="./assets/images/path.svg" />
                                                </span>
                                            </div>
                                        </div>
                                        <mat-card-content class="pt-3">
                                            <ul class="list-unstyled">
                                                <li class="text-left"><a href="javascript:;" class="default-color">{{ commonLocaleData?.app_goto_ledger }}</a></li>
                                                <li class="text-left mr-t05"><a href="javascript:;" class="default-color">{{ commonLocaleData?.app_generate_invoice }}</a></li>
                                            </ul>
                                        </mat-card-content>
                                    </mat-card> -->
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="total">
                                <th mat-header-cell *matHeaderCellDef class="text-right">
                                    Total
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right">
                                    <div [matTooltip]="element.balanceDueTooltipText" [matTooltipPosition]="'above'">
                                        {{element.total}}
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="description">
                                <th mat-header-cell *matHeaderCellDef>
                                    Description
                                </th>
                                <td mat-cell *matCellDef="let element">-</td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumnPending"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnPending;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                                *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                                    class="mt-3"
                                    (page)="handlePageChange($event)"
                                    [length]="totalResults"
                                    [pageSize]="advanceFilters.count"
                                    [showFirstLastButtons]="true"
                                    [pageSizeOptions]="pageSizeOptions"
                                    [hidePageSize]="false"
                                    [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- pending-content-end -->
            
            <!-- purchase-order-start -->
            <mat-tab label="Purchase Order" *ngIf="activeTabGroup === 2">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" [routerLink]="['/pages/vouchers/purchase-order/create']">
                                <span>{{ localeData?.new_order }}</span>
                            </button>
                            <div class="custom-datepicker-wrapper">
                                <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                    <input
                                        type="text"
                                        name="selectedDateRange"
                                        [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                        class="giddh-datepicker date-range-picker border-radius-2"
                                    />
                                </div>
                            </div>
                        </div>
                        <button mat-stroked-button (click)="setInitialAdvanceFilter()" class="mx-auto" *ngIf="advanceFiltersApplied">
                            <span class="icon-cross icon-font-14"></span> {{ commonLocaleData?.app_clear_filter }}
                        </button>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" [matMenuTriggerFor]="morepurchase"  *ngIf="selectedVouchers?.length">
                                <span>{{ commonLocaleData?.app_more }}</span>
                                <i class="icon-arrow-down icon-font-11 ml-2"></i>
                            </button>
                            <mat-menu #morepurchase="matMenu">
                                <button mat-menu-item (click)="bulkUpdateDialog(true)">{{ localeData?.bulk_update }}</button>
                                <button mat-menu-item (click)="convertBillDialog()">{{ localeData?.convert_to_bill }}</button>
                                <button mat-menu-item (click)="poBulkAction('expire')">{{ localeData?.expired }}</button>
                                <button mat-menu-item (click)="deleteVoucherDialog()">{{ commonLocaleData?.app_delete }}</button>
                            </mat-menu>
                            <button mat-stroked-button color="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                        </div>
                    </div>
                    <div class="table-responsive"> 
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort (matSortChange)="sortChange($event)" class="w-100 purchase-table">
                            <ng-container matColumnDef="index">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [checked]="allVouchersSelected"
                                            [value]="true"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="date">
                                <th mat-header-cell *matHeaderCellDef> 
                                    {{ commonLocaleData?.app_date }}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element?.voucherDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="purchase">
                                <th mat-header-cell *matHeaderCellDef #purchaseOrderNumber (clickOutside)="handleClickOutside($event, purchaseOrderNumber, 'purchaseOrderNumber')">
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'poNumber',
                                                    voucherType: 'purchase-order',
                                                    formControl: voucherNumberInput,
                                                    title: localeData?.po_number + ' #'
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element" class="no-dbl-click-select">
                                    <a href="javascript:;" [routerLink]="['/pages/purchase-management/purchase-orders/preview/'+ element.uniqueName]" class="btn-link-2">{{element.voucherNumber}}</a>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="vendorname">
                                <th mat-header-cell *matHeaderCellDef #accountUniqueName (clickOutside)="handleClickOutside($event, accountUniqueName, 'accountUniqueName')"> 
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'purchase-order',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_vendor_name
                                                }
                                            "
                                        ></ng-container>
                                    </div>    
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element?.vendor?.name }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ localeData?.total_amt }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.grandTotalTooltipText"
                                matTooltipPosition="above">
                                    <amount-field
                                        [amount]="element?.grandTotal?.amountForAccount"
                                        [currencySymbol]="element?.grandTotal?.currencyForAccount?.symbol"
                                        [currencyCode]="false"
                                    >
                                    </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="dueDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ localeData?.expected_delivery }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <span [ngClass]="{ 'ontime-delivery': element?.dueDays > 0, 'text-danger': element?.dueDays < 0 }"
                                        *ngIf="element?.dueDays && element?.dueDays <= 7">
                                        {{ getDeliveryDaysText(element.dueDays) }}
                                    </span
                                >
                                <span *ngIf="element?.dueDays && element?.dueDays > 7">{{ element?.dueDate }}</span>
                                <span class="ontime-delivery" *ngIf="element?.dueDays === 0">{{ commonLocaleData?.app_today }}</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element?.status | titlecase }}</p>
                                        <div class="d-flex action-btn column-gap5">
                                            <button *ngIf="element?.status === 'open'" mat-stroked-button color="primary" class="mat-icon-sm-btn icon-font-11" [matTooltip]="localeData?.convert_to_bill"
                                                [matTooltipPosition]="'above'" (click)="convertBillDialog(element, 'create_purchase_bill')">
                                                <i class="icon-tick"></i>
                                            </button>
                                            <button mat-stroked-button color="primary" class="mat-icon-sm-btn icon-font-11" [matTooltip]="commonLocaleData?.app_send_email"
                                                [matTooltipPosition]="'above'" (click)="openEmailSendDialog(element)">
                                                <i class="icon-envelope"></i>
                                            </button>
                                            <button mat-stroked-button color="primary" class="mat-icon-sm-btn" [matTooltip]="commonLocaleData?.app_copy" [matTooltipPosition]="'above'" 
                                                [routerLink]="['/pages/purchase-management/purchase-order/new/' + element.uniqueName]">
                                                <i class="icon-copy-small"></i>
                                            </button>
                                            <button mat-stroked-button color="primary" class="mat-icon-sm-btn" [matTooltip]="commonLocaleData?.app_delete"
                                                [matTooltipPosition]="'above'" (click)="deleteVoucherDialog(element)">
                                                <i class="icon-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumnPurchase"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnPurchase;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                            *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                            class="mt-3"
                            (page)="handlePageChange($event)"
                            [length]="totalResults"
                            [pageSize]="advanceFilters.count"
                            [showFirstLastButtons]="true"
                            [pageSizeOptions]="pageSizeOptions"
                            [hidePageSize]="false"
                            [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- purchase-order-end -->

            <!-- bill-content-start -->
            <mat-tab label="Bill" *ngIf="activeTabGroup === 2">
                <div class="vouchers-wrapper pt-3 px-4">
                    <div class="invoice-header d-flex align-items-center justify-content-between mr-b15">
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-raised-button color="primary" [routerLink]="['/pages/vouchers/purchase/create']">
                                <span>{{ localeData?.new_bill }}</span>
                            </button>
                            <div class="custom-datepicker-wrapper">
                                <div class="input-group custom-datepicker" (click)="showGiddhDatepicker($event)">
                                    <input
                                        type="text"
                                        name="selectedDateRange"
                                        [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                        class="giddh-datepicker date-range-picker border-radius-2"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="d-flex align-items-center column-gap1">
                            <button mat-stroked-button color="primary" (click)="advanceSearchDialog()">
                                {{ commonLocaleData?.app_filter }}
                                <i class="icon-advance-filter"></i>
                            </button>
                            <button mat-stroked-button color="primary" (click)="showBulkExportDialog()">{{ commonLocaleData?.app_export }}</button>
                        </div>
                    </div>
                    <div class="total-wrapper d-flex column-gap5 w-100">
                        <div class="total-sale opening-box pd-1 w-100">
                            <p class="font-12">{{ localeData?.total_purchases }}</p>
                            <span class="font-16">
                                <amount-field
                                    [amount]="voucherBalances.grandTotal"
                                    [currencySymbol]="company.baseCurrencySymbol"
                                    [currencyCode]="company.baseCurrency"
                                >
                                </amount-field>
                            </span>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <giddh-page-loader *ngIf="getVouchersInProgress$ | async"></giddh-page-loader>
                        <table mat-table [hidden]="(getVouchersInProgress$ | async) || !(dataSource?.length || isSearching)" [dataSource]="dataSource" matSort class="w-100">
                            <ng-container matColumnDef="index">
                                <th mat-header-cell *matHeaderCellDef width="50px"> 
                                    <ng-container *ngIf="!selectedVouchers?.length">#</ng-container>
                                    <span *ngIf="selectedVouchers?.length">
                                        <mat-checkbox
                                            color="primary"
                                            [checked]="allVouchersSelected"
                                            [value]="true"
                                            (change)="selectAllVouchers($event)"
                                        ></mat-checkbox>
                                    </span>
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div class="d-flex align-items-center">
                                        <div class="invoice-number" *ngIf="!selectedVouchers?.length">
                                            {{ i+1 }}
                                        </div>
                                        <div [ngClass]="{'checkbox-hide': !selectedVouchers?.length }">
                                            <mat-checkbox
                                                color="primary"
                                                [checked]="isVoucherSelected(element)"
                                                [value]="element.uniqueName"
                                                (change)="selectVoucher($event, element)"
                                            ></mat-checkbox>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="bill">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showInvoiceNoSearch,
                                                    fieldName: 'billNumber',
                                                    voucherType: 'purchase',
                                                    formControl: voucherNumberInput,
                                                    title: localeData?.bill_no
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                    </th>
                                <td mat-cell *matCellDef="let element">
                                    <a href="javascript:;" class="btn-link-2">{{ element.voucherNumber ? element.voucherNumber : commonLocaleData?.app_not_available }}</a>
                                    <div *ngIf="element.dueDays !== null">
                                        <small class="text-danger" *ngIf="element.dueDays > 0">
                                            {{ getOverdueDaysText(element.dueDays) }}
                                        </small>
                                        <small class="text-danger" *ngIf="element.dueDays === 0">
                                            {{ localeData?.overdue_today }}
                                        </small>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="vendor">
                                <th mat-header-cell *matHeaderCellDef> 
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'purchase',
                                                    formControl: accountUniqueNameInput,
                                                    title: commonLocaleData?.app_vendor
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                   {{ element?.account?.customerName | titlecase }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="voucherDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ localeData?.bill_date }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    {{ element?.voucherDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="order">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="d-flex align-items-center column-gap5">
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showCustomerSearch,
                                                    fieldName: 'accountUniqueName',
                                                    voucherType: 'purchase',
                                                    formControl: accountUniqueNameInput,
                                                    title: localeData?.po_number + ' #'
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.voucherNumber}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="grandTotal">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">
                                    {{ commonLocaleData?.app_amount }}
                                </th>
                                <td mat-cell *matCellDef="let element" class="text-right" [matTooltip]="element.balanceDueTooltipText"
                                matTooltipPosition="above"> 
                                    <amount-field
                                        [amount]="element.grandTotal?.amountForAccount"
                                        [currencySymbol]="element.account?.currency?.symbol"
                                        [currencyCode]="element.account?.currency?.code"
                                    >
                                    </amount-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="dueDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ localeData?.due_date}}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                   {{ element?.dueDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef>
                                    {{ commonLocaleData?.app_status }}
                                </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <div class="d-flex justify-content-between align-items-center column-gap5">
                                        <p>{{ element?.balanceStatus | titlecase }}</p>
                                        <span [matMenuTriggerFor]="menu" class="cursor-pointer">
                                            <i class="icon-dots-three-vertical"></i>
                                        </span>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item (click)="showPaymentDialog(element)">{{ commonLocaleData?.app_payment_status?.paid }}</button>
                                            <button mat-menu-item (click)="actionVoucher(element, 'cancel')">{{ commonLocaleData?.app_send_email }}</button>
                                            <button mat-menu-item 
                                                aria-label="copy icon"
                                                *ngIf="!isCompany"
                                                [routerLink]="['/pages/proforma-invoice/invoice/purchase/' + element.account?.uniqueName + '/' 
                                                + element?.uniqueName + '/copy']"
                                            >
                                            {{ commonLocaleData?.app_copy }}
                                            </button>
                                            <button mat-menu-item (click)="deleteVoucherDialog(element)">{{ commonLocaleData?.app_delete }}</button>
                                        </mat-menu>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsBill"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsBill;" class="checkbox-show"></tr>
                        </table>
                        <mat-paginator
                            *ngIf="!(getVouchersInProgress$ | async) && totalResults > pageSizeOptions[0]"
                            class="mt-3"
                            (page)="handlePageChange($event)"
                            [length]="totalResults"
                            [pageSize]="advanceFilters.count"
                            [showFirstLastButtons]="true"
                            [pageSizeOptions]="pageSizeOptions"
                            [hidePageSize]="false"
                            [pageIndex]="advanceFilters.page - 1"
                        ></mat-paginator>
                        <ng-container 
                            *ngTemplateOutlet="noDataFoundMessage;
                            context: { $implicit: !dataSource?.length}"
                        ></ng-container>
                    </div>
                </div>
            </mat-tab>
            <!-- bill-content-end -->

            <!-- setting-content-start -->
            <mat-tab label="Settings" class="setting-svg">
                <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" class="tabs-box-wrap pt-3 px-4">
                    <mat-tab *ngIf="activeTabGroup === 0">
                      <ng-template mat-tab-label>
                        <i class="icon-chat2"></i>
                        General
                      </ng-template>
                      <div class="tabs-box-content py-3">
                        <h4 class="font-16 border-bottom pb-2 mb-3">General <span class="text-gray font-12">(These settings will be applicable on Estimates, Proforma and Invoices)</span></h4>
                        <mat-slide-toggle
                            name="enableNarrationOnInvAndVoucher"
                            class="disable-toggle slide-toggle"
                            color="primary"
                        >
                            Show Narration on Ledger
                        </mat-slide-toggle>
                        <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                      </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 0">
                      <ng-template mat-tab-label>
                        <i class="icon-mail"></i>
                        Email
                      </ng-template>
                      <div class="tabs-box-content py-3">
                        <h4 class="font-16 border-bottom pb-2 mb-3">Email/SMS <span class="text-gray font-12">(These settings will be applicable on Estimates, Proforma and Invoices)</span> </h4>
                        <div class="d-flex column-gap1 align-items-center mb-3">
                            <input-field
                                [name]="'name'"
                                [label]="'From Email'"
                                [placeholder]="'ravinder@walkover.in'"
                                [type]="'text'"
                                class="settings-field"
                            ></input-field>
                            <span class="text-success">Verified</span>
                            <button mat-stroked-button class="mat-icon-md-btn">
                                <i class="icon-trash"></i>
                            </button>
                        </div>
                        <mat-slide-toggle
                            name=""
                            class="disable-toggle slide-toggle"
                            color="primary"
                        >
                            Send email through Gmail
                        </mat-slide-toggle>
                        <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                      </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 0">
                        <ng-template mat-tab-label>
                            <i class="icon-estimate1"></i>
                            Estimate
                        </ng-template>
                        <div class="tabs-box-content py-3">
                            <h4 class="font-16 border-bottom pb-2 mb-3">Estimate/Quotation</h4>
                            <div class="d-flex column-gap1 mb-3">
                                <input-field
                                    [name]="'name'"
                                    [label]="'Heading Name'"
                                    [placeholder]="'ESTIMATE'"
                                    [type]="'text'"
                                    class="settings-field d-block"
                                ></input-field>
                                <input-field
                                    [name]="'name'"
                                    [label]="'Default expiry days'"
                                    [placeholder]="'00'"
                                    [type]="'text'"
                                    class="settings-field d-block"
                                    [matSuffix]="'days'"
                                ></input-field>
                            </div>
                            <label for="">Next step to Estimate</label>
                            <mat-radio-group aria-label="Select an option" class="mt-2 mb-3">
                                <mat-radio-button value="1" color="primary">Proforma</mat-radio-button>
                                <mat-radio-button value="2" color="primary">Invoice</mat-radio-button>
                            </mat-radio-group>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Auto change status (on expiry)
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block"
                                color="primary"
                            >
                                Auto mail when generated
                            </mat-slide-toggle>
                            <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 0">
                        <ng-template mat-tab-label>
                            <i class="icon-sales-order"></i>
                            Proforma
                        </ng-template>
                        <div class="tabs-box-content py-3">
                            <h4 class="font-16 border-bottom pb-2 mb-3">Proforma Invoice</h4>
                            <div class="d-flex column-gap1 mb-3">
                                <input-field
                                    [name]="'name'"
                                    [label]="'Heading Name'"
                                    [placeholder]="'PROFORMA'"
                                    [type]="'text'"
                                    class="settings-field d-block"
                                ></input-field>
                                <input-field
                                    [name]="'name'"
                                    [label]="'Default expiry days'"
                                    [placeholder]="'00'"
                                    [type]="'text'"
                                    class="settings-field d-block"
                                    [matSuffix]="'days'"
                                ></input-field>
                            </div>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Auto change status (on expiry)
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block"
                                color="primary"
                            >
                                Auto mail when generated
                            </mat-slide-toggle>
                            <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 0">
                        <ng-template mat-tab-label>
                            <div class="voucher-svg">
                                <svg width="32" height="32" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16.2426 4.00113L16.2497 2.00002H21.8924L21.8995 7.6498L19.8984 7.65687L19.8913 5.41534L15.5285 9.77819L14.1142 8.36398L18.4771 4.00113H16.2426Z" />
                                    <path d="M19 19.1787V9.17865H21V19.1787C21 20.2787 20.1 21.1787 19 21.1787H5C3.9 21.1787 3 20.2787 3 19.1787V5.17865C3 4.07865 3.9 3.17865 5 3.17865H15V5.17865H5V19.1787H19Z" />
                                    <path d="M7 17.1787H14V15.1787H7V17.1787Z" />
                                    <path d="M7 13.1787H17V11.1787H7V13.1787Z" />
                                </svg>
                            </div>
                            Invoice
                        </ng-template>
                        <div class="tabs-box-content py-3">
                            <h4 class="font-16 border-bottom pb-2 mb-3">Invoice</h4>
                            <div class="d-flex column-gap1 mb-3">
                                <input-field
                                    [name]="'name'"
                                    [label]="'Default expiry days'"
                                    [placeholder]="'00'"
                                    [type]="'text'"
                                    class="settings-field d-block mb-3"
                                    [matSuffix]="'days'"
                                ></input-field>
                                <giddh-datepicker type="text" (keydown.enter)="$event.preventDefault()" [label]="'Invoice Lock Date'"
                                    [placeholder]="'DD-MM-YYYY'" name="voucherDate" [showToggleIcon]="false" [appearance]="'outline'" class="settings-field d-block">
                                </giddh-datepicker>
                            </div>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block my-3"
                                color="primary"
                                checked
                            >
                                Show seal according to status of payment
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Auto mail when updated
                            </mat-slide-toggle>
                            <div class="mb-3 d-flex align-items-center column-gap15">
                                <mat-slide-toggle
                                    name=""
                                    class="disable-toggle slide-toggle d-block"
                                    color="primary"
                                >
                                    Custom Invoice#
                                </mat-slide-toggle>
                                <input-field
                                    [name]="'branch'"
                                    [label]="'Branch Prefix'"
                                    [placeholder]="'Branch Prefix'"
                                    [type]="'text'"
                                ></input-field>
                                <input-field
                                    [name]="'sub'"
                                    [label]="'Sub Prefix'"
                                    [placeholder]="'Sub Prefix'"
                                    [type]="'text'"
                                ></input-field>
                                <input-field
                                    [name]="'no'"
                                    [label]="'Initial No.'"
                                    [placeholder]="'00'"
                                    [type]="'tel'"
                                ></input-field>
                            </div>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Auto Delete entries when deleting their invoice
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Apply round off on sales/cash voucher
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Run Auto-paid for all the accounts
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Automatically generate voucher for the entries present in the ledger
                            </mat-slide-toggle>
                            <div class="mb-3 d-flex align-items-center column-gap15">
                                <mat-slide-toggle
                                    name=""
                                    class="disable-toggle slide-toggle d-block"
                                    color="primary"
                                >
                                    E-invoicing Authentication
                                </mat-slide-toggle>
                                <input-field
                                    [name]="'name'"
                                    [label]="'Username'"
                                    [placeholder]="'Username'"
                                    [type]="'text'"
                                ></input-field>
                                <input-field
                                    [name]="'password'"
                                    [label]="'Password'"
                                    [placeholder]="'Password'"
                                    [type]="'password'"
                                ></input-field>
                                <input-field
                                    [name]="'password'"
                                    [label]="'GSTIN'"
                                    [placeholder]="'GSTIN'"
                                    [type]="'text'"
                                ></input-field>
                            </div>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block"
                                color="primary"
                            >
                                Enable confirmation pop-up to create E-Invoice
                            </mat-slide-toggle>
                            <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 1">
                        <ng-template mat-tab-label>
                            <div class="voucher-svg">
                                <svg width="32" height="32" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.415 8.085L13.995 9.495L10.005 5.505L13.995 1.505L15.415 2.915L13.835 4.505L19 4.505V4.5H21V14H7V12H19V6.505L13.835 6.505L15.415 8.085Z" />
                                    <path d="M19 16H21V20C21 21.1 20.1 22 19 22H5C3.9 22 3 21.1 3 20V6C3 4.9 3.9 4 5 4H9V6H5V20H19V16Z" />
                                    <path d="M7 18H14V16H7V18Z" />
                                </svg>
                            </div>
                            Debit Note
                        </ng-template>
                        <div class="tabs-box-content py-3">
                          <h4 class="font-16 border-bottom pb-2 mb-3">Debit Note</h4>
                            <div class="mb-3 d-flex align-items-center column-gap15">
                                <mat-slide-toggle
                                    name=""
                                    class="disable-toggle slide-toggle d-block"
                                    color="primary"
                                >
                                    Custom Invoice#
                                </mat-slide-toggle>
                                <input-field
                                    [name]="'branch'"
                                    [label]="'Branch Prefix'"
                                    [placeholder]="'Branch Prefix'"
                                    [type]="'text'"
                                    class=""
                                ></input-field>
                                <input-field
                                    [name]="'sub'"
                                    [label]="'Sub Prefix'"
                                    [placeholder]="'Sub Prefix'"
                                    [type]="'text'"
                                    class=""
                                ></input-field>
                                <input-field
                                    [name]="'no'"
                                    [label]="'Initial No.'"
                                    [placeholder]="'00'"
                                    [type]="'tel'"
                                    class=""
                                ></input-field>
                            </div>
                            <mat-slide-toggle
                                name="voucher"
                                class="disable-toggle slide-toggle d-block"
                                color="primary"
                            >
                                Apply round off on credit note voucher
                            </mat-slide-toggle>
                          <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 1">
                        <ng-template mat-tab-label>
                            <div class="voucher-svg">
                                <svg width="32" height="32" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.415 8.085L13.995 9.495L10.005 5.505L13.995 1.505L15.415 2.915L13.835 4.505L19 4.505V4.5H21V14H7V12H19V6.505L13.835 6.505L15.415 8.085Z" />
                                    <path d="M19 16H21V20C21 21.1 20.1 22 19 22H5C3.9 22 3 21.1 3 20V6C3 4.9 3.9 4 5 4H9V6H5V20H19V16Z" />
                                    <path d="M7 18H14V16H7V18Z" />
                                </svg>
                            </div>
                            Credit Note
                        </ng-template>
                        <div class="tabs-box-content py-3">
                          <h4 class="font-16 border-bottom pb-2 mb-3">Credit Note</h4>
                            <div class="mb-3 d-flex align-items-center column-gap15">
                                <mat-slide-toggle
                                    name=""
                                    class="disable-toggle slide-toggle d-block"
                                    color="primary"
                                >
                                    Custom Invoice#
                                </mat-slide-toggle>
                                <input-field
                                    [name]="'branch'"
                                    [label]="'Branch Prefix'"
                                    [placeholder]="'Branch Prefix'"
                                    [type]="'text'"
                                ></input-field>
                                <input-field
                                    [name]="'sub'"
                                    [label]="'Sub Prefix'"
                                    [placeholder]="'Sub Prefix'"
                                    [type]="'text'"
                                ></input-field>
                                <input-field
                                    [name]="'no'"
                                    [label]="'Initial No.'"
                                    [placeholder]="'00'"
                                    [type]="'tel'"
                                ></input-field>
                            </div>
                            <mat-slide-toggle
                                name="voucher"
                                class="disable-toggle slide-toggle d-block"
                                color="primary"
                            >
                                Apply round off on credit note voucher
                            </mat-slide-toggle>
                          <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 2">
                        <ng-template mat-tab-label>
                          <i class="icon-mail"></i>
                          Integration
                        </ng-template>
                        <div class="tabs-box-content py-3">
                          <h4 class="font-16 border-bottom pb-2 mb-3">Integration <span class="text-gray font-12">(These settings will be applicable on Purchase Order and Bill)</span></h4>
                          <div class="d-flex column-gap1 align-items-center mb-3">
                            <input-field
                                [name]="'name'"
                                [label]="'From Email'"
                                [placeholder]="'ravinder@walkover.in'"
                                [type]="'text'"
                                class="settings-field"
                                ></input-field>
                                <span class="text-success">Verified</span>
                                <button mat-stroked-button class="mat-icon-md-btn">
                                    <i class="icon-trash"></i>
                                </button>
                            </div>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle"
                                color="primary"
                            >
                                Send email through Gmail
                            </mat-slide-toggle>
                            <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 2">
                        <ng-template mat-tab-label>
                            <i class="icon-sales-order"></i>
                            Pur.Order
                        </ng-template>
                        <div class="tabs-box-content py-3">
                            <h4 class="font-16 border-bottom pb-2 mb-3">Purchase Order</h4>
                            <div class="d-flex column-gap1 mb-3">
                                <input-field
                                    [name]="'name'"
                                    [label]="'Default expiry days'"
                                    [placeholder]="'00'"
                                    [type]="'text'"
                                    class="settings-field d-block"
                                    [matSuffix]="'days'"
                                ></input-field>
                            </div>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Auto change status (on expiry)
                            </mat-slide-toggle>
                            <div class="mb-3 d-flex align-items-center column-gap15">
                                <mat-slide-toggle
                                    name=""
                                    class="disable-toggle slide-toggle d-block"
                                    color="primary"
                                >
                                    Custom Purchase Order#
                                </mat-slide-toggle>
                                <input-field
                                    [name]="'branch'"
                                    [label]="'Initial No.'"
                                    [placeholder]="'Branch Prefix'"
                                    [type]="'text'"
                                    class="text-right"
                                ></input-field>
                                <input-field
                                    [name]="'sub'"
                                    [label]="'Prefix'"
                                    [type]="'text'"
                                ></input-field>
                            </div>
                            <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                    <mat-tab *ngIf="activeTabGroup === 2">
                        <ng-template mat-tab-label>
                            <div class="voucher-svg">
                                <svg width="32" height="32" viewBox="0 0 25 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17.0463 13C17.7963 13 18.4563 12.59 18.7963 11.97L22.3763 5.48C22.7463 4.82 22.2663 4 21.5063 4H6.70634L5.76634 2H2.49634V4H4.49634L8.09634 11.59L6.74634 14.03C6.01634 15.37 6.97634 17 8.49634 17H20.4963V15H8.49634L9.59634 13H17.0463ZM7.65634 6H19.8063L17.0463 11H10.0263L7.65634 6ZM8.49634 18C7.39634 18 6.50634 18.9 6.50634 20C6.50634 21.1 7.39634 22 8.49634 22C9.59634 22 10.4963 21.1 10.4963 20C10.4963 18.9 9.59634 18 8.49634 18ZM18.4963 18C17.3963 18 16.5063 18.9 16.5063 20C16.5063 21.1 17.3963 22 18.4963 22C19.5963 22 20.4963 21.1 20.4963 20C20.4963 18.9 19.5963 18 18.4963 18Z" />
                                </svg>
                            </div>
                            Pur. Bill
                        </ng-template>
                        <div class="tabs-box-content py-3">
                            <h4 class="font-16 border-bottom pb-2 mb-3">Purchase Bill</h4>
                                <giddh-datepicker type="text" (keydown.enter)="$event.preventDefault()" [label]="'Bill Lock Date'"
                                    [placeholder]="'DD-MM-YYYY'" name="voucherDate" [showToggleIcon]="false" [appearance]="'outline'" class="settings-field d-block mb-3">
                                </giddh-datepicker>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Show narration to ledger
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Enable Voucher Download
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block mb-3"
                                color="primary"
                            >
                                Apply round off on purchase voucher
                            </mat-slide-toggle>
                            <mat-slide-toggle
                                name=""
                                class="disable-toggle slide-toggle d-block"
                                color="primary"
                            >
                                Allow system generated number for Bill and Debit note
                            </mat-slide-toggle>
                            <ng-container *ngTemplateOutlet="actionButtons"></ng-container>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </mat-tab>
            <!-- setting-content-end -->

            <!-- template-content-start -->
            <mat-tab label="Templates" *ngIf="activeTabGroup === 0 || activeTabGroup === 1">
                <div class="vouchers-wrapper pt-3 px-4">
                    <dropdown-field
                        [name]="'design'"
                        [label]="'Select Design for'"
                        [placeholder]="'Select'"
                        class="w-50 template-design d-block"
                    >
                    </dropdown-field>
                    <div class="template-wrapper mt-3">
                        <mat-card class="outline-card add-template-wrapper">
                            <mat-card-content class="pt-3">
                                <h3 class="fonr-16">Design Template</h3>
                                <p class="my-3">Click to add a template from our gallery. You can customize the template title, columns,and headers in line item table.</p>
                                <button mat-stroked-button color="primary" (click)="templateEdit()">Add New</button>
                            </mat-card-content>
                        </mat-card>
                        <mat-card class="outline-card add-template-wrapper text-center">
                            <mat-card-content class="pt-3 d-flex flex-column align-items-center template-box-gap">
                                <h3 class="fonr-16">Kriti - 28Sep</h3>
                                <span class="default-wrap font-12 p-2 cursor-pointer">
                                    <i class="icon-favorite-selected"></i>
                                    Set as Default
                                </span>
                                <div class="d-flex column-gap1 justify-content-center">
                                    <button mat-stroked-button color="primary" class="mat-icon-md-btn" matTooltip="Preview"
                                        matTooltipPosition="above" (click)="templateDialog()">
                                        <i class="icon-eye"></i>
                                    </button>
                                    <button mat-stroked-button color="primary" class="mat-icon-md-btn" matTooltip="Edit Template"
                                        matTooltipPosition="above" (click)="templateEdit()">
                                        <i class="icon-edit-pencil"></i>
                                    </button>
                                    <button mat-stroked-button color="primary" class="mat-icon-md-btn" matTooltip="Delete"
                                        matTooltipPosition="above" (click)="deleteVoucherDialog()">
                                        <i class="icon-trash"></i>
                                    </button>
                                </div>
                                <p class="text-ellipsis d-inline-block template-content">Created by: Dilpreet Singh Dang</p>
                            </mat-card-content>
                        </mat-card>
                        <mat-card class="outline-card add-template-wrapper text-center">
                            <mat-card-content class="pt-3 d-flex flex-column align-items-center template-box-gap">
                                <h3 class="fonr-16">Kriti - 28Sep</h3>
                                <span class="default-wrap font-12 p-2 cursor-pointer active">
                                    <i class="icon-favorite-selected"></i>
                                    Set as Default
                                </span>
                                <div class="d-flex column-gap1 justify-content-center">
                                    <button mat-stroked-button color="primary" class="mat-icon-md-btn" matTooltip="Preview"
                                        matTooltipPosition="above" (click)="templateDialog()">
                                        <i class="icon-eye"></i>
                                    </button>
                                    <button mat-stroked-button color="primary" class="mat-icon-md-btn" matTooltip="Edit Template"
                                        matTooltipPosition="above" (click)="templateEdit()">
                                        <i class="icon-edit-pencil"></i>
                                    </button>
                                    <button mat-stroked-button color="primary" class="mat-icon-md-btn" matTooltip="Delete"
                                        matTooltipPosition="above" (click)="deleteVoucherDialog()">
                                        <i class="icon-trash"></i>
                                    </button>
                                </div>
                                <p class="text-ellipsis d-inline-block template-content">Created by: Dilpreet Singh Dang</p>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
            </mat-tab>
            <!-- template-content-end -->

        </mat-tab-group>
        <div class="video-link position-absolute" *ngIf="activeTabGroup === 0 && selectedTabIndex === 2">
            <watch-video [cssClass]="'text-blue'" [moduleName]="'SALES_PREVIEW'"></watch-video>
        </div>
    </div>
    <!-- table-search -->
    <ng-template #searchTemplate let-show let-title="title" let-fieldName="fieldName" let-voucherType="voucherType" let-formControl="formControl">
        <div class="d-flex align-items-center column-gap1" [hidden]="show">
            <span (click)="toggleSearch($event, fieldName, voucherType)">
                <i class="icon-search icon-font-16"></i>
            </span>
            <span>{{ title }}</span>
        </div>
        <div [hidden]="!show">
            <text-field
                [type]="'text'"
                [placeholder]="'Search'"
                [cssClass]="'form-control search-table mat-field-border'"
                [autoFocus]="show"
                [formControl]="formControl"
            ></text-field>
        </div>
    </ng-template>
    <!-- Universal Datepicker  -->
    <ng-template #datepickerTemplate>
        <div class="datepicker-modal">
            <div class="modal-body">
                <app-datepicker-wrapper 
                    [inputStartDate]="selectedDateRange?.startDate"
                    [inputEndDate]="selectedDateRange?.endDate" 
                    [alwaysShowCalendars]="true" 
                    [ranges]="datePickerOption"
                    [selectedRangeLabel]="selectedRangeLabel" 
                    [showCustomRangeLabel]="true" 
                    [showClearButton]="false"
                    [showCancel]="true" 
                    [linkedCalendars]="true" 
                    [showDropdowns]="true"
                    (rangeClicked)="dateSelectedCallback($event)" 
                    (datesUpdated)="dateSelectedCallback($event)"
                    [keepCalendarOpeningWithRange]="false" 
                    [showRangeLabelOnInput]="false"
                    [dateFieldPosition]="dateFieldPosition">
                </app-datepicker-wrapper>
            </div>
        </div>
    </ng-template>
    
    <!-- advance-search-dialog -->
    <ng-template #advanceSearch>
        <app-advance-search
            [type]="
            voucherType === 'debit note' || voucherType === 'credit note' 
                ? 'drcr' 
                : voucherType === 'purchase' 
                    ? 'purchase' 
                    : (voucherType === 'estimates' || voucherType === 'proformas') 
                        ? 'proforma' 
                        : voucherType === 'purchase-order' 
                            ?  'purchase-order'
                            : 'invoice'
            "

            [request]="advanceFilters"
            [localeData]="localeData"
            [commonLocaleData]="commonLocaleData"
            [isEInvoiceEnabled]="isEInvoiceEnabled"
            [advanceFilters]="advanceFilters"
            (applyFilterEvent)="applyAdvanceSearch($event)"
            (closeModelEvent)="closeAdvanceSearchDialog(true)"
        ></app-advance-search>
    </ng-template>
        
    <!-- export-dialog -->
    <ng-template #bulkExport>
        <app-bulk-export></app-bulk-export>
    </ng-template>

    <!-- payment-dialog -->
    <ng-template #paymentDialog>
        <app-payment-dialog
            [voucherDetails]="voucherDetails"
            [localeData]="localeData"
            [commonLocaleData]="commonLocaleData"
            (paymentSubmitted)="paymentSubmitted($event)"
        ></app-payment-dialog>
    </ng-template>

    <!-- adjust-payment-dialog -->
    <ng-template #adjustPaymentDialog>
        <voucher-adjustments
            [isUpdateMode]="isUpdateMode"
            [depositAmount]="depositAmount"
            [account]="voucherDetails?.account"
            [voucherDetails]="voucherDetails"
            [voucherTotals]="voucherTotals"
            [advanceReceiptAdjustmentUpdatedData]="advanceReceiptAdjustmentData"
            (closeModelEvent)="closeAdvanceReceiptDialog()"
            (submitClicked)="getAdvanceReceiptAdjustData($event)"
            [voucherForAdjustment]="null"
            [adjustedVoucherType]="voucherType"
        >
        </voucher-adjustments>
    </ng-template>
    
    <!-- e-way-bill-dialog -->
    <ng-template #eWayBill>
        <app-e-waybill-dialog></app-e-waybill-dialog>
    </ng-template>

    <!-- setting-tab-btn -->
    <ng-template #actionButtons>
        <div class="d-flex column-gap1 mt-4">
            <button mat-stroked-button color="primary">Save</button>
            <button mat-stroked-button>{{ commonLocaleData?.app_payment_status?.paid }}</button>
        </div>
    </ng-template>

    <!-- convert-bill-dialog -->
    <ng-template #convertBill>
        <app-convert-bill-dialog  
            [localeData]="localeData"
            [commonLocaleData]="commonLocaleData"
            (convertToBill)="poBulkAction('create_purchase_bill', $event)"
        ></app-convert-bill-dialog>
    </ng-template>
    
    <ng-template #ewayBill>
        <app-generate-ewaybill-modal
            [localeData]="localeData"
            [commonLocaleData]="commonLocaleData"
            (closeModelEvent)="ewayBillDialogRef?.close()"
            (createEWayBillEvent)="createEwayBill()"
        >
        </app-generate-ewaybill-modal>
    </ng-template>

    <ng-template #accountAsideMenu>
        <generic-aside-menu-account (closeAsideEvent)="accountAsideMenuRef.close()" [class]="'in'"
            [selectedGrpUniqueName]="accountParentGroup"
            [keyboardShortcut]="'esc'"
            [selectedAccountUniqueName]="voucherDetails?.account?.uniqueName"
            (onShortcutPress)="accountAsideMenuRef.close()"
            (updateEvent)="updateAccount($event)">
        </generic-aside-menu-account>
    </ng-template>
</ng-container>

<!-- No Date Found Message Template  START-->
<ng-template #noDataFoundMessage let-show>
    <no-data 
        *ngIf="!(getVouchersInProgress$ | async) && !dataSource?.length" 
        [primaryMessage]="commonLocaleData?.app_no_data_found" 
        [primaryMessageClass]="'font-24 text-center mr-t100'"
        [secondaryMessage]="' '"
    ></no-data>
</ng-template>
<!-- No Date Found Message Template  END-->

<ng-template #sendEmailModal>
    <app-email-send-dialog 
        [voucherType]="'purchase-order'" 
        (cancelEvent)="sendEmailModalDialogRef.close()"
        (successEvent)="sendEmail($event)"
    >
    </app-email-send-dialog>
</ng-template>