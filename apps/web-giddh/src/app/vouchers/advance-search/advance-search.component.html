<div class="dialog-header">
    <span mat-dialog-title class="font-16">{{ commonLocaleData?.app_advance_search }}</span>
    <i mat-dialog-close class="icon-cross icon-font-16"></i>
</div>
<div mat-dialog-content class="dialog-body" [formGroup]="searchForm">
    <!-- invoice-search-start -->
    <ng-container *ngIf="type === 'invoice'">
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'invoice_date_range'" [label]="localeData?.invoice_date_range" [placeholder]="commonLocaleData?.app_select_action"
                [options]="dateOptions" class="w-50" (selectedOption)="dateChanged($event, 'invoice')" formControlName="invoiceDateRange" [labelValue]="fieldLabelValues.invoiceDateRange">
            </reactive-dropdown-field>
            <giddh-datepicker (keydown.enter)="$event.preventDefault()" [label]="commonLocaleData?.app_select_date"
                [placeholder]="commonLocaleData?.app_select_date" name="voucherDate" [showToggleIcon]="false" [appearance]="'outline'"
                class="w-50" formControlName="voucherDate">
            </giddh-datepicker>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'invoice_total_amount'" [label]="localeData?.invoice_total_amount" [placeholder]="commonLocaleData?.app_select"
                [options]="filtersForEntryTotal" class="w-50" (selectedOption)="invoiceTotalRangeChanged($event)" formControlName="invoiceTotalAmount" [labelValue]="fieldLabelValues.invoiceTotalAmount">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" class="w-50" name="total" formControlName="total"></input-field>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'due_date_range'" [label]="localeData?.due_date_range" [placeholder]="commonLocaleData?.app_select_action"
                [options]="dateOptions" class="w-50" (selectedOption)="dateChanged($event, 'due')" formControlName="dueDateRange" [labelValue]="fieldLabelValues.dueDateRange">
            </reactive-dropdown-field>
            <giddh-datepicker (keydown.enter)="$event.preventDefault()" [label]="commonLocaleData?.app_select_date"
                [placeholder]="commonLocaleData?.app_select_date" name="dueDateRange" [showToggleIcon]="false" [appearance]="'outline'"
                class="w-50" formControlName="dueDate">
            </giddh-datepicker>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'app_due_amount'" [label]="commonLocaleData?.app_due_amount" [placeholder]="commonLocaleData?.app_select"
                [options]="filtersForEntryTotal" class="w-50" (selectedOption)="dueTotalRangeChanged($event)" formControlName="dueAmount" [labelValue]="fieldLabelValues.dueAmount">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" [label]="commonLocaleData?.app_amount" class="w-50" name="balanceDue" formControlName="balanceDue">
            </input-field>
        </div>
        <mat-form-field appearance="outline" class="w-100 mr-b15">
            <mat-label>{{ commonLocaleData?.app_status }}</mat-label>
            <mat-select multiple [placeholder]="commonLocaleData?.app_select_action" formControlName="balanceStatus">
                <mat-option value="paid">{{ commonLocaleData?.app_payment_status?.paid }}</mat-option>
                <mat-option value="partial-paid">{{ commonLocaleData?.app_payment_status?.partially_paid }}</mat-option>
                <mat-option value="unpaid">{{ commonLocaleData?.app_payment_status?.unpaid }}</mat-option>
                <mat-option value="hold">{{ commonLocaleData?.app_payment_status?.hold }}</mat-option>
                <mat-option value="cancel">{{ commonLocaleData?.app_payment_status?.cancel }}</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100 mr-b15" *ngIf="isEInvoiceEnabled">
            <mat-label>{{ localeData?.e_invoice_status }}</mat-label>
            <mat-select multiple [placeholder]="commonLocaleData?.app_select_action" formControlName="eInvoiceStatus">
                <mat-option [value]="localeData?.e_invoice_statuses_label?.yet_to_be_pushed">{{ localeData?.e_invoice_statuses_label?.yet_to_be_pushed }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.pushed">{{ localeData?.e_invoice_statuses_label?.pushed }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.push_initiated">{{ localeData?.e_invoice_statuses_label?.push_initiated }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.cancelled">{{ localeData?.e_invoice_statuses_label?.cancelled }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.mark_as_cancelled">{{ localeData?.e_invoice_statuses_label?.mark_as_cancelled }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.failed">{{ localeData?.e_invoice_statuses_label?.failed }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.na">{{ localeData?.e_invoice_statuses_label?.na }}</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
            <mat-label>{{ commonLocaleData?.app_description }}</mat-label>
            <textarea matInput rows="2" [placeholder]="commonLocaleData?.app_description" formControlName="description"></textarea>
        </mat-form-field>
    </ng-container>
    <!-- invoice-search-end -->

    <ng-container *ngIf="type === 'drcr'">
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'app_date_range'" [label]="commonLocaleData?.app_date_range" [placeholder]="commonLocaleData?.app_select_action"
                [options]="dateOptions" class="w-50" (selectedOption)="dateChanged($event, 'invoice')" formControlName="dateRange" [labelValue]="fieldLabelValues.dateRange">
            </reactive-dropdown-field>
            <giddh-datepicker (keydown.enter)="$event.preventDefault()" [label]="commonLocaleData?.app_select_date"
                [placeholder]="commonLocaleData?.app_select_date" name="voucherDate" [showToggleIcon]="false" [appearance]="'outline'"
                class="w-50" formControlName="voucherDate">
            </giddh-datepicker>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'invoice_total_amount'" [label]="localeData?.invoice_total_amount" [placeholder]="commonLocaleData?.app_select"
                [options]="filtersForEntryTotal" class="w-50" (selectedOption)="invoiceTotalRangeChanged($event)" formControlName="invoiceTotalAmount" [labelValue]="fieldLabelValues.invoiceTotalAmount">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" class="w-50" name="total" formControlName="total"></input-field>
        </div>
        <mat-form-field appearance="outline" class="w-100 mr-b15" *ngIf="isEInvoiceEnabled">
            <mat-label>{{ localeData?.e_invoice_status }}</mat-label>
            <mat-select multiple [placeholder]="commonLocaleData?.app_select_action" formControlName="eInvoiceStatus">
                <mat-option [value]="localeData?.e_invoice_statuses_label?.yet_to_be_pushed">{{ localeData?.e_invoice_statuses_label?.yet_to_be_pushed }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.pushed">{{ localeData?.e_invoice_statuses_label?.pushed }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.push_initiated">{{ localeData?.e_invoice_statuses_label?.push_initiated }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.cancelled">{{ localeData?.e_invoice_statuses_label?.cancelled }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.mark_as_cancelled">{{ localeData?.e_invoice_statuses_label?.mark_as_cancelled }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.failed">{{ localeData?.e_invoice_statuses_label?.failed }}</mat-option>
                <mat-option [value]="localeData?.e_invoice_statuses_label?.na">{{ localeData?.e_invoice_statuses_label?.na }}</mat-option>
            </mat-select>
        </mat-form-field>
    </ng-container>

    <ng-container *ngIf="type === 'receipt'">
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'adjustment_voucher'" [label]="localeData?.adjustment_voucher_label" [placeholder]="commonLocaleData?.app_select"
                [options]="adjustmentVoucherOptions" class="w-50" (selectedOption)="adjustmentVoucherChanged($event)" formControlName="dateRange" [labelValue]="fieldLabelValues.dateRange">
            </reactive-dropdown-field>
        </div>
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'total_amt'" [label]="localeData?.total_amt" [placeholder]="commonLocaleData?.app_select_range"
            [options]="filtersForAmount" class="w-50" (selectedOption)="amountRangeChanged($event)" formControlName="amountFieldSelector" [labelValue]="fieldLabelValues.amountFieldSelector">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" class="w-50" name="total" formControlName="total"></input-field>
        </div>
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'total_amt'" [label]="localeData?.total_amt" [placeholder]="commonLocaleData?.app_select_range"
            [options]="filtersForAmount" class="w-50" (selectedOption)="amountRangeChanged($event)" formControlName="amountFieldSelector" [labelValue]="fieldLabelValues.amountFieldSelector">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" class="w-50" name="total" formControlName="total"></input-field>
        </div>
    </ng-container>

    <ng-container *ngIf="type === 'proforma'">
        <div class="mt-3">
            <div class="d-flex column-gap1">
                <div class="custom-mat-form-field">
                    <div class="date-range-wrapper">
                        <mat-form-field
                            [matDatepickerToggleIcon]="false"
                            appearance="outline"
                            (click)="picker?.open()"
                            class="w-100"                                                     
                        >
                            <mat-label>{{ localeData?.expiry_date }}</mat-label>
                            <mat-date-range-input [rangePicker]="picker">
                                <input
                                    matStartDate
                                    [placeholder]="commonLocaleData?.app_start_date"
                                    formControlName="expireFrom"
                                    (dateChange)="expiryDateChanges()"
                                />
                                <input
                                    matEndDate
                                    [placeholder]="commonLocaleData?.app_end_date"
                                    formControlName="expireTo"
                                    (dateChange)="expiryDateChanges()"
                                />
                            </mat-date-range-input>
                            <mat-date-range-picker #picker></mat-date-range-picker>
                        </mat-form-field>
                    </div>
                </div>
                <reactive-dropdown-field [name]="'total_amt'" [label]="localeData?.total_amt" [placeholder]="commonLocaleData?.app_select_range"
                    [options]="filtersForAmount" class="w-50" (selectedOption)="amountRangeChanged($event)" formControlName="amountFieldSelector" [labelValue]="fieldLabelValues.amountFieldSelector">
                </reactive-dropdown-field>
                <input-field [type]="'tel'" [placeholder]="'00'" [label]="commonLocaleData?.app_amount" class="w-50" name="amount" formControlName="amount"></input-field>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="type === 'purchase'">
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'app_date_range'" [label]="commonLocaleData?.app_date_range" [placeholder]="commonLocaleData?.app_select_action"
                [options]="dateOptions" class="w-50" (selectedOption)="dateChanged($event, 'invoice')" formControlName="dateRange" [labelValue]="fieldLabelValues.dateRange">
            </reactive-dropdown-field>
            <giddh-datepicker (keydown.enter)="$event.preventDefault()" [label]="commonLocaleData?.app_select_date"
                [placeholder]="commonLocaleData?.app_select_date" name="voucherDate" [showToggleIcon]="false" [appearance]="'outline'"
                class="w-50" formControlName="voucherDate">
            </giddh-datepicker>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'invoice_total_amount'" [label]="localeData?.invoice_total_amount" [placeholder]="commonLocaleData?.app_select"
                [options]="filtersForEntryTotal" class="w-50" (selectedOption)="invoiceTotalRangeChanged($event)" formControlName="invoiceTotalAmount" [labelValue]="fieldLabelValues.invoiceTotalAmount">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" class="w-50" name="total" formControlName="total"></input-field>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'due_date_range'" [label]="localeData?.due_date_range" [placeholder]="commonLocaleData?.app_select_action"
                [options]="dateOptions" class="w-50" (selectedOption)="dateChanged($event, 'due')" formControlName="dueDateRange" [labelValue]="fieldLabelValues.dueDateRange">
            </reactive-dropdown-field>
            <giddh-datepicker (keydown.enter)="$event.preventDefault()" [label]="commonLocaleData?.app_select_date"
                [placeholder]="commonLocaleData?.app_select_date" name="dueDateRange" [showToggleIcon]="false" [appearance]="'outline'"
                class="w-50" formControlName="dueDate">
            </giddh-datepicker>
        </div>
    </ng-container>

    <ng-container *ngIf="type === 'purchase-order'">
        <div class="d-flex d-flex column-gap1 mr-b15 w-100">
            <div class="custom-mat-form-field w-50">
                <div class="date-range-wrapper">
                    <mat-form-field
                        [matDatepickerToggleIcon]="false"
                        appearance="outline"
                        (click)="picker?.open()"
                        class="w-100"                                                     
                    >
                        <mat-label>{{ localeData?.expected_delivery_date }}</mat-label>
                        <mat-date-range-input [rangePicker]="picker">
                            <input
                                matStartDate
                                [placeholder]="commonLocaleData?.app_start_date"
                                formControlName="dueFrom"
                                (dateChange)="expiryDateChanges()"
                            />
                            <input
                                matEndDate
                                [placeholder]="commonLocaleData?.app_end_date"
                                formControlName="dueTo"
                                (dateChange)="expiryDateChanges()"
                            />
                        </mat-date-range-input>
                        <mat-date-range-picker #picker></mat-date-range-picker>
                    </mat-form-field>
                </div>
            </div>
            <div class="custom-mat-form-field w-50">
                <mat-form-field appearance="outline" class="w-100 mr-b15">
                    <mat-label>{{ commonLocaleData?.app_status }}</mat-label>
                    <mat-select multiple [placeholder]="commonLocaleData?.app_select_action" formControlName="statuses">
                        <mat-option value="open">{{ commonLocaleData?.app_payment_status?.open }}</mat-option>
                        <mat-option value="converted">{{ commonLocaleData?.app_payment_status?.converted }}</mat-option>
                        <mat-option value="partially-converted">{{ commonLocaleData?.app_payment_status?.partially_converted }}</mat-option>
                        <mat-option value="expired">{{ commonLocaleData?.app_payment_status?.expired }}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="d-flex column-gap1 mr-b15 w-100">
            <reactive-dropdown-field [name]="'grandTotalOperation'" [label]="commonLocaleData?.app_total_amount" [placeholder]="commonLocaleData?.app_select"
                [options]="filtersForEntryTotal" class="w-50" (selectedOption)="dueTotalRangeChanged($event)" formControlName="grandTotalOperation" [labelValue]="fieldLabelValues.dueAmount">
            </reactive-dropdown-field>
            <input-field [type]="'tel'" [placeholder]="'00'" [label]="commonLocaleData?.app_amount" class="w-50" name="grandTotal" formControlName="grandTotal">
            </input-field>
        </div>
    </ng-container>

    <div class="d-flex justify-content-end column-gap1 mt-3">
        <button mat-stroked-button color="primary" (click)="search()">{{ commonLocaleData?.app_search }}</button>
        <button mat-stroked-button (click)="onCancel()">{{ commonLocaleData?.app_cancel }}</button>
    </div>
</div>