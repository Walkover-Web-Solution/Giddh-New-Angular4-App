<ng-container>
    <div
        class="panel-group"
        id="accordion"
        role="tablist"
        aria-multiselectable="true"
    >
        <div class="no-data" *ngIf="!progressData?.length">
            <h1>No entries found</h1>
        </div>

        <div *ngIf="progressData?.length">
            <div class="panel panel-default" *ngFor="let row of progressData">
                <div class="panel-heading">
                    <span class="m-r-15">{{ row.company.name }}</span>
                    <small class="m-r-15"
                        >Last Import on {{ row.dateString }}</small
                    >
                    <small class="running"
                        ><i class="fa fa-circle"></i> {{ row.status }}</small
                    >
                </div>
                <div class="panel-body">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <div class="clearfix">
                                <div class="col-sm-2 col-xs-12">
                                    <img
                                        src="{{imgPath}}folder.svg"
                                        height="20"
                                        class="m-r-10"
                                    />
                                    <span>Groups</span>
                                </div>
                                <div class="col-sm-6 col-xs-8">
                                    <small
                                        ><em
                                            >{{ row.totalSavedGroups }}/{{
                                                row.totalTallyGroups
                                            }}</em
                                        ></small
                                    >
                                    <div class="progress">
                                        <div
                                            class="progress-bar"
                                            role="progressbar"
                                            aria-valuenow="row.totalSavedGroups"
                                            aria-valuemin="0"
                                            aria-valuemax="100"
                                            [ngStyle]="{
                                                width: row.groupsPercent
                                            }"
                                        >
                                            >
                                            <span class="sr-only"
                                                >{{
                                                    row.groupsPercent
                                                }}
                                                Complete</span
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-4 text-success">
                                    <div class="status">
                                        <small class="m-r-10"
                                            ><i class="fa fa-check"></i
                                            >{{
                                                row.groupsPercent
                                            }}
                                            Complete</small
                                        >
                                        <small
                                            class="text-danger"
                                            *ngIf="row.tallyErrorGroups > 0"
                                            >{{ row.groupsErrorPercent }} error
                                            occured</small
                                        >
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="clearfix">
                                <div class="col-sm-2 col-xs-12">
                                    <img
                                        src="{{imgPath}}folder.svg"
                                        height="20"
                                        class="m-r-10"
                                    />
                                    <span>Accounts</span>
                                </div>
                                <div class="col-sm-6 col-xs-8">
                                    <small
                                        ><em
                                            >{{ row.totalSavedAccounts }}/{{
                                                row.totalTallyAccounts
                                            }}</em
                                        ></small
                                    >
                                    <div class="progress">
                                        <div
                                            class="progress-bar"
                                            role="progressbar"
                                            aria-valuenow="row.totalSavedAccounts"
                                            aria-valuemin="0"
                                            aria-valuemax="100"
                                            [ngStyle]="{
                                                width: row.accountsPercent
                                            }"
                                        >
                                            <span class="sr-only"
                                                >{{
                                                    row.accountsPercent
                                                }}
                                                Complete</span
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-4 text-success">
                                    <div class="status">
                                        <small class="m-r-10"
                                            ><i class="fa fa-check"></i
                                            >{{
                                                row.accountsPercent
                                            }}
                                            Complete</small
                                        >
                                        <small
                                            class="text-danger"
                                            *ngIf="row.tallyErrorAccounts > 0"
                                            >{{
                                                row.accountsErrorPercent
                                            }}
                                            error occured</small
                                        >
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="clearfix">
                                <div class="col-sm-2 col-xs-12">
                                    <img
                                        src="{{imgPath}}folder.svg"
                                        height="20"
                                        class="m-r-10"
                                    />
                                    <span>Entries</span>
                                </div>
                                <div class="col-sm-6 col-xs-8">
                                    <small
                                        ><em
                                            >{{ row.totalSavedEntries }}/{{
                                                row.totalTallyEntries
                                            }}</em
                                        ></small
                                    >
                                    <div class="progress">
                                        <div
                                            class="progress-bar"
                                            role="progressbar"
                                            aria-valuenow="row.totalSavedEntries"
                                            aria-valuemin="0"
                                            aria-valuemax="100"
                                            [ngStyle]="{
                                                width: row.entriesPercent
                                            }"
                                        >
                                            <span class="sr-only"
                                                >{{
                                                    row.entriesPercent
                                                }}
                                                Complete</span
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-4 text-success">
                                    <div class="status">
                                        <small class="m-r-10"
                                            ><i class="fa fa-check"></i
                                            >{{
                                                row.entriesPercent
                                            }}
                                            Complete</small
                                        >
                                        <small
                                            class="text-danger"
                                            *ngIf="row.tallyErrorEntries > 0"
                                            >{{ row.entriesErrorPercent }} error
                                            occured</small
                                        >
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div
                    class="panel-footer"
                    *ngIf="
                        row.tallyErrorEntries > 0 ||
                        row.tallyErrorAccounts > 0 ||
                        row.tallyErrorGroups > 0
                    "
                >
                    <span class="m-r-15">Error Report:</span>
                    <a class="running" (click)="downloadLog(row)"
                        >{{ row.company.name }}-error-log.csv</a
                    >
                </div>
            </div>
        </div>
    </div>
</ng-container>
