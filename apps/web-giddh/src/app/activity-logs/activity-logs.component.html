<div *ngIf="isLoading">
    <giddh-page-loader></giddh-page-loader>
</div>
<ng-container appTranslate [file]="'activity-logs'" (localeData)="localeData = $event">
    <div class="activity-container">
        <div class="table-content" *ngIf="!isLoading">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 giddh-table table">
                <!-- UserName Column -->
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>{{ localeData?.name }}</th>
                    <td mat-cell *matCellDef="let element">
                        <span [matTooltip]="element.user.email">{{ element.user.name }}</span>
                    </td>
                </ng-container>

                <!-- Date Column -->
                <ng-container matColumnDef="time">
                    <th mat-header-cell *matHeaderCellDef>{{ localeData?.date }}</th>
                    <td mat-cell *matCellDef="let element">
                        <span [matTooltip]="element.timeonly"> {{ element.time }}</span>
                    </td>
                </ng-container>

                <!-- IP Column -->
                <ng-container matColumnDef="ip">
                    <th mat-header-cell *matHeaderCellDef>{{ localeData?.ip }}</th>
                    <td mat-cell *matCellDef="let element">{{ element.ip }}</td>
                </ng-container>

                <!-- Entity Column -->
                <ng-container matColumnDef="entity">
                    <th mat-header-cell *matHeaderCellDef>{{ localeData?.entity }}</th>
                    <td mat-cell *matCellDef="let element">{{ element.entity }}</td>
                </ng-container>

                <!-- Operation Column -->
                <ng-container matColumnDef="operation">
                    <th mat-header-cell *matHeaderCellDef>{{ localeData?.operation }}</th>
                    <td mat-cell *matCellDef="let element">{{ element.operation }}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                    class="cursor-pointer"
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                    (click)="openDialog(row)"
                ></tr>
            </table>
        </div>
        <div class="pagination-wrapper" *ngIf="activityObj?.totalItems > activityObj.count">
            <pagination
                [totalItems]="activityObj?.totalItems"
                [(ngModel)]="activityObj.page"
                [maxSize]="5"
                class="pagination-sm"
                [boundaryLinks]="true"
                [itemsPerPage]="activityObj.count"
                [rotate]="false"
                (pageChanged)="pageChanged($event)"
                [firstText]="commonLocaleData?.app_first"
                [previousText]="commonLocaleData?.app_previous"
                [nextText]="commonLocaleData?.app_next"
                [lastText]="commonLocaleData?.app_last"
            ></pagination>
        </div>
    </div>
</ng-container>
<div class="no-data" *ngIf="!dataSource?.length && !isLoading">
    <no-data></no-data>
</div>
