<ng-container>
  <hamburger-menu></hamburger-menu>
  <div class="buy-plan-wrapper pd-15 w-100">
    <mat-stepper linear #stepper>
      <mat-step [stepControl]="firstStepForm">
        <form name="firstStepForm" autocomplete="off" class="mt-5" novalidate>
          <div class="plan-summary d-flex">
            <div class="plan-width">
              <ng-template matStepLabel>Plans</ng-template>
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 class="font-16 strong">Choose Your Plan</h4>
                <div class="d-flex column-gap15">
                  <button mat-stroked-button color="primary" class="w-100" (click)="activateDialog()">Activate Via
                    Key</button>
                  <div class="custom-tab w-100 d-flex">
                    <button mat-button class="active">
                      Monthly
                    </button>
                    <button mat-button>
                      Yearly
                    </button>
                  </div>
                </div>
              </div>
              <div class="new-plan">
                <!-- material-table -->
                <div class="plan-table-wrapper">
                  <table mat-table [dataSource]="dataSource" class="plan-table">

                    <!-- Name Column -->
                    <ng-container matColumnDef="name" sticky>
                      <th mat-header-cell *matHeaderCellDef></th>
                      <td mat-cell *matCellDef="let element">
                        <div class="d-flex align-items-center justify-content-between column-gap2 ">
                          <span>Reconcile bank <br /> transactions</span>
                          <i class="icon-info cp"
                            [matTooltip]="'Reconcile transactions to keep them in sync using Giddh software or the app.'"
                            [matTooltipPosition]="'above'"></i>
                        </div>
                      </td>
                    </ng-container>
                
                    <!-- Premium Column -->
                    <ng-container matColumnDef="premium">
                      <th mat-header-cell *matHeaderCellDef> 
                        <div class="new-plan-wrapper">
                          <div class="popular-txt">
                          </div>
                          <div class="plan-content">
                            <h2 class="font-20 strong">Premium</h2>
                            <p class="font-12 my-3 feature-txt">Streamlined accounting tools plus <br /> multi-currency
                              for employing <br />
                              businesses</p>
                            <p class="mb-3"><span class="strong">$62</span> /month</p>
                            <button mat-stroked-button color="primary" class="w-100">Select Plan</button>
                            <!-- <button mat-stroked-button color="primary" class="w-100">Selected</button> -->
                          </div>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        <i class="icon-tick icon-font-11 text"></i>
                      </td>
                    </ng-container>
                
                    <!-- Popular Column -->
                    <ng-container matColumnDef="popular">
                      <th mat-header-cell *matHeaderCellDef class="active"> 
                        <div class="new-plan-wrapper">
                          <div class="popular-txt">
                            <span class="text-center d-block font-12">Most Popular</span>
                          </div>
                          <div class="plan-content">
                            <h2 class="font-20 strong">Standard</h2>
                            <p class="font-12 my-3 feature-txt">Streamlined accounting tools to <br /> help automate admin
                            </p>
                            <p class="mb-3"><span class="strong">$62</span> /month</p>
                            <button mat-stroked-button color="primary" class="w-100">Select Plan</button>
                            <!-- <button mat-stroked-button color="primary" class="w-100">Selected</button> -->
                          </div>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let element" class="text-center active"> 
                        <i class="icon-tick icon-font-11 text"></i>
                      </td>
                    </ng-container>
                
                    <!-- Symbol Column -->
                    <ng-container matColumnDef="starter">
                      <th mat-header-cell *matHeaderCellDef> 
                        <div class="new-plan-wrapper">
                          <div class="popular-txt">
                          </div>
                          <div class="plan-content">
                            <h2 class="font-20 strong">Starter</h2>
                            <p class="font-12 my-3 feature-txt">Basic accounting tools for the self-<br />employed to help
                              simplify admin</p>
                            <p class="mb-3"><span class="strong">$62</span> /month</p>
                            <button mat-stroked-button color="primary" class="w-100">Select Plan</button>
                            <!-- <button mat-stroked-button color="primary" class="w-100">Selected</button> -->
                          </div>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let element" class="text-center"> 
                        <div class="d-flex column-gap15 align-items-center justify-content-center">
                          <span>20 invoices</span>
                          <i class="icon-info cp"
                            [matTooltip]="'Upgrade your plan at any time to send more than 20 invoices'"
                            [matTooltipPosition]="'above'"></i>
                        </div>  
                      </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  </table>
                </div>
              </div>
            </div>
            <ng-container *ngTemplateOutlet="planSummary"></ng-container>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="secondStepForm" name="secondStepForm">
        <form autocomplete="off" class="mt-5" novalidate>
          <div class="plan-summary d-flex">
            <div class="plan-width">
              <ng-template matStepLabel>Select billing account</ng-template>
              <h4 class="font-16 strong d-flex align-items-center mb-3">Create a new billing account</h4>
              <!-- remove back btn & max-width padding from change-billing component -->
              <change-billing></change-billing>
            </div>
            <ng-container *ngTemplateOutlet="planSummary"></ng-container>
          </div>
        </form>
      </mat-step>

      <mat-step [stepControl]="thirdStepForm">
        <form name="thirdStepForm" autocomplete="off" class="mt-5" novalidate>
          <div class="plan-summary d-flex">
            <div class="plan-width">
              <ng-template matStepLabel>Review and pay</ng-template>
              <h4 class="font-16 mb-3 strong d-flex align-items-center">Payment details</h4>
              <div class="new-plan">
                <mat-card class="outline-card">
                  <mat-card-content>
                    <h5 class="font-16 strong mb-3">Bill to</h5>
                    <div class="payment-header border-bottom pb-3">
                      <span class="light-gray font-14 strong d-block">trial</span>
                      <p class="light-gray font-14">nisha@walkover.in</p>
                      <p class="light-gray font-14">7225908084</p>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>
            </div>
            <ng-container *ngTemplateOutlet="planSummary"></ng-container>
          </div>
        </form>
      </mat-step>
    </mat-stepper>
  </div>

  <!-- plan-summary -->
  <ng-template #planSummary>
    <div class="summary-wrapper">
      <h4 class="font-16 mb-3 strong d-flex align-items-center">Plan Summary</h4>
      <mat-card class="outline-card">
        <mat-card-content>
          <div class="d-flex justify-content-between border-bottom pb-3">
            <span class="strong">Premium</span>
            <span>62.00</span>
          </div>
          <div class="d-flex justify-content-between border-bottom py-3">
            <p>Subtotal</p>
            <span>62.00</span>
          </div>
          <div class="d-flex justify-content-between py-3">
            <span class="strong">Monthly total</span>
            <span class="strong">USD 62.00</span>
          </div>
          <div class="position-relative">
            <input-field [name]="'code'" [placeholder]="'Promo code'"></input-field>
            <button mat-button color="primary" class="apply-btn position-absolute">Apply</button>
          </div>
          <div class="mt-3">
            <button mat-stroked-button color="primary" class="w-100">Continue to billing account</button>
            <button mat-stroked-button color="primary" class="w-100">Continue to review & pay account</button>
            <button mat-stroked-button color="primary" class="w-100">Confirm Purchase</button>
            <button mat-stroked-button class="w-100 mt-2">Back to Plan</button>
            <button mat-stroked-button class="w-100 mt-2">Back to billing account</button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-template>
</ng-container>