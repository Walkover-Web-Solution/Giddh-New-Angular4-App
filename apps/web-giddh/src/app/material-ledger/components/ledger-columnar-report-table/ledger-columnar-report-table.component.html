<ng-container appTranslate [file]="'ledger/columnar-report-table'" (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event">
    <div class="reverse-table-report" *ngIf="!isLoading">
        <div class="container-fluid">
            <div class="invoice-preview table-responsive">
                <table mat-table [dataSource]="reportResponseResult" class="table basic giddh-table on-mobile-view">
                    <ng-container matColumnDef="sno">
                        <th mat-header-cell *matHeaderCellDef class="text-center">#</th>
                        <td mat-cell *matCellDef="let item; let i = index">{{i + 1}}</td>
                    </ng-container>
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_date}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_date"
                            class="text-center">{{ item.date }}</td>
                    </ng-container>
                    <ng-container matColumnDef="particular">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_particulars}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_particulars"
                            class="text-center">{{
                            item.baseAccount }}</td>
                    </ng-container>
                    <ng-container matColumnDef="address">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_address}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_address"
                            class="text-center">{{ item.address }}</td>
                    </ng-container>
                    <ng-container matColumnDef="voucher_type">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_voucher_type}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_voucher_type"
                            class="text-center">{{
                            item.voucherType }}</td>
                    </ng-container>
                    <ng-container matColumnDef="voucher_number">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_voucher_number}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_voucher_number"
                            class="text-center">{{
                            item.voucherNumber }}</td>
                    </ng-container>
                    <ng-container matColumnDef="voucher_refno">
                        <th mat-header-cell *matHeaderCellDef>{{localeData?.voucher_refno}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="localeData?.voucher_refno"
                            class="text-center">{{ item.voucherRefNo
                            }}</td>
                    </ng-container>
                    <ng-container matColumnDef="voucher_refdate">
                        <th mat-header-cell *matHeaderCellDef>{{localeData?.voucher_refdate}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="localeData?.voucher_refdate"
                            class="text-center">{{
                            item.voucherRefDate }}</td>
                    </ng-container>
                    <ng-container matColumnDef="tax_number">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_tax_number}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_tax_number"
                            class="text-center">{{
                            item.taxNumber }}</td>
                    </ng-container>
                    <ng-container matColumnDef="narration">
                        <th mat-header-cell *matHeaderCellDef>{{localeData?.narration}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="localeData?.narration"
                            class="text-center">{{ item.narration }}</td>
                    </ng-container>
                    <ng-container matColumnDef="stock_name">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_stock_name}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_stock_name"
                            class="text-center">{{
                            item.stockName }}</td>
                    </ng-container>
                    <ng-container matColumnDef="quantity">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_quantity}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_quantity"
                            class="text-center">{{ item.quantity
                            }}</td>
                    </ng-container>
                    <ng-container matColumnDef="unit">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_unit}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_unit"
                            class="text-center">{{ item.stockUnitCode
                            }}</td>
                    </ng-container>
                    <ng-container matColumnDef="rate">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_rate}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_rate"
                            class="text-center">
                            <span class="d-inline-flex">
                                <amount-field [amount]="item.rate" [currencySymbol]="false" [currencyCode]="false">
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="value">
                        <th mat-header-cell *matHeaderCellDef>{{commonLocaleData?.app_value}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="commonLocaleData?.app_value"
                            class="text-center">
                            <span class="d-inline-flex">
                                <amount-field [amount]="item.value" [currencySymbol]="false" [currencyCode]="false">
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="gross_total">
                        <th mat-header-cell *matHeaderCellDef>{{localeData?.gross_total}}</th>
                        <td mat-cell *matCellDef="let item" [attr.data-title]="localeData?.gross_total"
                            class="text-center">
                            <span class="d-inline-flex">
                                <amount-field [amount]="item.grossTotal" [currencySymbol]="false"
                                    [currencyCode]="false"></amount-field>
                            </span>
                        </td>
                    </ng-container>
                    <ng-container *ngFor="let key of columnarTableColumn;">
                        <ng-container [matColumnDef]="key">
                            <th mat-header-cell *matHeaderCellDef>{{key}}</th>
                            <td mat-cell *matCellDef="let item">{{item.accountNameAndBalanceMap[key]}}</td>
                        </ng-container>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="tableHeadingColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: tableHeadingColumns;"></tr>
                </table>
            </div>
            <div class="pagination-wrapper" *ngIf="reportResponse && reportResponse?.totalPages > 1">
                <pagination [totalItems]="reportResponse.totalItems" [(ngModel)]="reportResponse.page" [maxSize]="5"
                    class="pagination-sm" [boundaryLinks]="true" [itemsPerPage]="paginationLimit" [rotate]="false"
                    (pageChanged)="pageChanged($event)" [firstText]="commonLocaleData?.app_first"
                    [previousText]="commonLocaleData?.app_previous" [nextText]="commonLocaleData?.app_next"
                    [lastText]="commonLocaleData?.app_last"></pagination>
            </div>
            <div class="no-data" *ngIf="reportResponse && reportResponse?.totalItems === 0">
                <no-data [secondaryMessageClass]="'p-0'"></no-data>
            </div>
        </div>
    </div>
    <div *ngIf="isLoading">
        <giddh-page-loader></giddh-page-loader>
    </div>
</ng-container>