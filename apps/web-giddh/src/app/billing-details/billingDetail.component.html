<div *ngIf="!isCreateAndSwitchCompanyInProcess" id="main" class="welcome-outer">

    <div class="welcome-header">
        <h2>Welcome To Giddh! </h2>
    </div>
    <hr />
    <div class="welcome-msg">
        <div class="row">
            <div class="col-sm-10">
                <div class="">
                    <p>Hi {{logedInuser?.name}} !</p>
                    <p>Please ensure that all the details entered below are accurate. They cannot be modified after the
                        purchase has been completed.</p>
                </div>
            </div>
            <div class="col-sm-2">
                <!-- <div class="back-btn" *ngIf="!this.fromSubscription">
                    <button class="btn btn-default" routerLink="/select-plan">Back</button>
                </div> -->
                <div class="back-btn">
                    <button class="btn btn-default" (click)="backToSubscriptions();">Back</button>
                </div>
            </div>
        </div>
    </div>
    <div class="billing-details">
        <div class="row">
            <div class="col-sm-6 col-xs-12">
                <div class="billing-wrapper">
                    <h3>Billing Details</h3>
                    <form name="form" #billingForm="ngForm" novalidate="" autocomplete="off">
                        <div class="form-group">
                            <label>Billing Name <span class="red-text">*</span></label>
                            <input type="text" required class="form-control" id="name" name="name"
                                [(ngModel)]="billingDetailsObj.name">
                        </div>
                        <div class="form-group">
                            <label>Email ID <span class="red-text">*</span></label>
                            <input type="email" required name="email" id="email" [(ngModel)]="billingDetailsObj.email"
                                class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Mobile Number</label>
                            <input type="text" id="contactNo" class="form-control" name="contactNo"
                                [(ngModel)]="billingDetailsObj.contactNo" #mobileNoEl>
                        </div>

                        <div class="form-group" *ngIf="formFields['taxName'] !== undefined">
                            <label>{{formFields['taxName'].label}}</label>
                            <input type="text" class="form-control" name="gstin" id="gstin" autocomplete="false"
                                maxlength="15" [(ngModel)]="billingDetailsObj.gstin" #gstinNumberField
                                (keyup)="getStateCode(gstinNumberField, states); checkGstNumValidation(gstinNumberField);">
                        </div>
                        <div class="form-group">
                            <label>State <span class="red-text">*</span></label>
                            <sh-select #states [options]="statesSource$ | async" required [isRequired]="true"
                                [isFilterEnabled]="true" [disabled]="disableState" [defaultValue]="selectedState"
                                class="w-100" [(ngModel)]="billingDetailsObj.stateCode" id="stateCode" name="stateCode">
                            </sh-select>
                        </div>
                        <!-- static pincode start -->
                        <div class="form-group">
                            <label for="pinCodeNum">Pincode <span class="red-text">*</span></label>
                            <input type="text" class="form-control" autocomplete="false" name="pinCodeNum" />
                        </div>
                        <!-- static pincode end -->
                        <div class="form-group">
                            <label>Address</label>
                            <textarea class="form-control" name="address" id="address"
                                [(ngModel)]="billingDetailsObj.address" placeholder="Address" rows="5"
                                cols="12"></textarea>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" (click)="autoRenewSelected($event)" id="autorenew" name="autorenew"
                                [(ngModel)]="billingDetailsObj.autorenew"><label class="mr-l1">Renew subscription
                                automatically</label>
                        </div>
                        <div class="form-group">
                            <button type="button" id="rzp-button1" (click)="payWithRazor(billingForm)"
                                [disabled]="billingForm.invalid || !isMobileNumberValid" class="btn btn-success">Pay
                                Now</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-sm-6 col-xs-12">
                <div class="professional-plan">
                    <p class="plan-title"> {{selectedPlans?.planDetails?.name}} <span class="grey-text"> (Current Plan)
                        </span></p>

                    <div class="your-account">


                        <!--  -->
                        <div class="row">
                            <div class="col-6">
                                <span>
                                    Subscription Price
                                </span>
                            </div>
                            <div class="col-6">
                                <p>
                                    {{selectedPlans?.planDetails?.amount | number}}
                                </p>
                            </div>
                        </div>
                        <!--  -->

                        <div class="row">
                            <div class="col-6">
                                <span>
                                    Total Companies
                                </span>
                            </div>
                            <div class="col-6">
                                <p>
                                    {{selectedPlans?.planDetails?.companiesLimit | number}}
                                </p>
                            </div>
                        </div>
                        <!--  -->
                        <div class="row">
                            <div class="col-6">
                                <span>
                                    Transactions Limit
                                </span>
                            </div>
                            <div class="col-6">
                                <p>
                                    {{selectedPlans?.planDetails?.transactionLimit | number}}
                                </p>
                            </div>
                        </div>
                        <!--  -->
                        <div class="row">
                            <div class="col-6">
                                <span>
                                    Subscription Renewal
                                </span>
                            </div>
                            <div class="col-6">
                                <p>
                                    {{selectedPlans?.planDetails?.duration}}
                                    {{selectedPlans?.planDetails?.durationUnit}}(s)
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isCreateAndSwitchCompanyInProcess">
    <giddh-page-loader></giddh-page-loader>
</div>