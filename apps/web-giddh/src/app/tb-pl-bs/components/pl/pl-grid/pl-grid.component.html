<!-- no data start -->
<div class="no-data" *ngIf="noData">
    <h1>Sorry, No Data Found!</h1>
    <img src="/assets/images/no-data.png" alt="">
</div>
<!-- nodata end -->

<div>
    <div *ngIf="!noData" class="tb-wrapper">
        <div class="mr-t2 clearfix">
            <!--top heading  labels-->


            <!--Main Grid-->
            <div class="table-container">

                <div class="income">
                    <div class="clearfix profitLoss">

                        <table class="table basic pl-table-grid">
                            <thead>
                                <tr>
                                    <th class="pd-0" width="60%">
                                        <div #searchContainer (clickOutside)="clickedOutside($event, searchContainer)">

                                            <div [ngStyle]="{'display': showClearSearch ? 'none' : 'flex'}" class="align-items-center">
                                                <span class="ml-15 mr-1">Account</span>
                                                <i class="icon-search2" (click)="toggleSearch()" ></i>
                                            </div>

                                            <div [hidden]="!showClearSearch">
                                                <input type="search" #searchInputEl
                                                    class="form-control" placeholder="Search"
                                                    aria-describedby="sizing-addon3" id="w-398px"
                                                    [formControl]="plSearchControl">
                                                <!--<i class="icon-search2" (click)="showClearSearch = false;"-->
                                                <!--style="position: relative;top: -11px;left:97%;z-index: 1; font-size: 13px;color: #A6A6A6;cursor: pointer;"></i>-->
                                            </div>

                                        </div>
                                    </th>
                                    <!-- <th class="col-3 ">Note</th> -->
                                    <th class="text-right" width="40%">
                                        As Of
                                        <span
                                            *ngIf="plData && plData.dates && plData.dates.to && plData.dates.to!=='Invalid date'">
                                            {{ moment(plData?.dates?.to, giddhDateFormat).toString() | date:'dd MMMM yyyy' }}</span>
                                    </th>
                                    <!-- commented due to new response
                <th class="col-2 text-right">
                    As Of
                    <span *ngIf="plData && plData.dates && plData.dates.from && plData.dates.from!=='Invalid date'"> {{ moment(plData?.dates?.from, giddhDateFormat).add(-1,'days').toString() | date:'dd MMMM yyyy' }}</span>
                </th> -->
                                </tr>
                            </thead>
                        </table>

                        <div *ngIf="plData && plData.incArr">

                            <!--Grid-->
                            <ng-template #groupDetails let-list let-padding="padding">
                                <section class="row-1" *ngFor="let grp of list" [hidden]="!grp.isVisible" pl-grid-row
                                    [groupDetail]="grp" [padding]="padding" [search]="search" [from]="from" [to]="to"
                                    [incomeStatement]="plData?.incomeStatment">
                                    <ng-container
                                        *ngTemplateOutlet="groupDetails; context:{ $implicit: grp.childGroups,padding: padding + 10  }">
                                    </ng-container>
                                </section>
                            </ng-template>

                            <ng-container
                                *ngTemplateOutlet="groupDetails; context:{ $implicit: plData.incArr | tbsearch: search, padding: 10 }">
                            </ng-container>

                            <ng-container
                                *ngTemplateOutlet="groupDetails; context:{ $implicit: [cogsData] | tbsearch: search, padding: 10 }">
                            </ng-container>

                            <section class="row-1">
                                <div class="pl-grid-row row">
                                    <div class="col-8  group" style="padding-left: 10px;">Total Cost of Goods Sold
                                    </div>
                                    <div class="col-4  bd-rl group text-right pull-right">
                                        <span> {{ cogsData?.closingBalance.amount | giddhCurrency }} </span>
                                    </div>
                                </div>
                            </section>
                            <!--/Grid-->

                        </div>

                        <div class="account clearfix row" *ngIf="plData && plData.incomeStatment">
                            <div class="col-8  group pd-1">
                                <strong>Gross Profit</strong>
                            </div>
                            <div class="col-4  group text-right pull-right bd-rl pd-1">
                                <strong>{{ plData?.incomeStatment.grossProfit.amount | giddhCurrency }}</strong>
                            </div>
                            <!-- commented due to new response
              <div class="col-2  group text-right">
                    <strong>{{ plData?.incomeTotalEnd | number:'1.2-2' }}</strong>
                </div>
               -->
                        </div>
                        <!-- <hr class="bd-rt" /> -->
                    </div>
                </div>

                <div class="expenses">
                    <div class="clearfix profitLoss table-responsive">

                        <div *ngIf="plData && plData.expArr">
                            <!--Grid-->
                            <ng-template #groupDetails let-list let-padding="padding">
                                <ng-container *ngFor="let grp of list">
                                    <!-- *ngIf="grp.isVisible || grp.isCreated" -->
                                    <section class="row-1" [hidden]="!grp.isVisible" pl-grid-row [groupDetail]="grp"
                                        [padding]="padding" [search]="search" [padding]="padding" [from]="from"
                                        [to]="to">
                                        <ng-container
                                            *ngTemplateOutlet="groupDetails; context:{ $implicit: grp.childGroups,padding: padding + 10  }">
                                        </ng-container>
                                    </section>


                                    <section class="row-1" *ngIf="grp.groupName && grp.uniqueName === 'revenue'">
                                        <div class="pl-grid-row row">
                                            <div class="col-8  group" style="padding-left: 10px;">Total Revenue</div>
                                            <div class="col-4  bd-rl group text-right pull-right">
                                                <span> {{ plData?.incomeStatment.revenue.amount | giddhCurrency }}
                                                </span>
                                            </div>
                                        </div>
                                    </section>

                                    <div class="group clearfix row"
                                        *ngIf="grp.groupName && grp.uniqueName === 'operatingcost'">
                                        <div class="col-8  group pd-1">
                                            Total Operating Expenses
                                        </div>
                                        <div class="col-4  group text-right pull-right bd-rl pd-1">
                                            {{ plData?.incomeStatment.operatingExpenses.amount | giddhCurrency }}
                                        </div>
                                    </div>

                                    <div class="account clearfix font-16 row"
                                        *ngIf="grp.groupName && grp.uniqueName === 'operatingcost'">
                                        <div class="col-8  group pd-1">
                                            <strong class="font-16">Operating Profit/Loss (EBIT)</strong>
                                        </div>
                                        <div class="col-4  group text-right pull-right bd-rl pd-1">
                                            <strong
                                                class="font-16">{{ plData?.incomeStatment.operatingProfit.amount | giddhCurrency }}</strong>
                                        </div>
                                    </div>

                                    <section class="row-1" *ngIf="grp.groupName && grp.uniqueName === 'otherexpenses'">
                                        <div class="pl-grid-row row">
                                            <div class="col-8  group" style="padding-left: 10px;">Total Other
                                                Expenses</div>
                                            <div class="col-4  bd-rl group text-right pull-right">
                                                <span> {{ plData?.incomeStatment.otherExpenses.amount | giddhCurrency }}
                                                </span>
                                            </div>
                                        </div>
                                    </section>

                                    <!-- <div class="group clearfix" *ngIf="grp.groupName && grp.uniqueName === 'otherexpenses'">
                      <div class="col-4  group pd-1" style="padding-left: 10px;">Total </div>
                      <div class="col-3  bd-rl group text-right pull-right bd-rl pd-1">
                          <span> {{ plData?.incomeStatment.otherExpenses.amount | giddhCurrency }} </span>
                      </div>
                  </div> -->

                                </ng-container>
                            </ng-template>
                            <ng-container
                                *ngTemplateOutlet="groupDetails; context:{ $implicit: plData.expArr | tbsearch: search, padding: 10 }">
                            </ng-container>
                            <!--/Grid-->
                        </div>

                    </div>
                </div>

                <div class="account clearfix row" *ngIf="plData && plData?.incomeStatment">
                    <div class="col-8  group pd-1">
                        <strong>Income Before Taxes (EBT)</strong>
                    </div>
                    <div class="col-4  group text-right pull-right bd-rl pd-1">
                        <strong>
                            <span
                                *ngIf="plData?.incomeStatment.incomeBeforeTaxes.type === 'DEBIT' && plData?.incomeStatment.incomeBeforeTaxes.amount !== 0">-</span>
                            {{ plData?.incomeStatment.incomeBeforeTaxes.amount | giddhCurrency }}
                        </strong>
                    </div>
                </div>

                <ng-template
                    *ngIf="plData && plData?.incomeStatment && plData?.incomeStatment.incomeBeforeTaxes.type === 'CREDIT'">
                    <div class="group clearfix font-14 row">
                        <div class="col-8  group pd-1">
                            Taxes (30%)
                        </div>
                        <div class="col-4  group text-right pull-right bd-rl pd-1">
                            {{ plData?.incomeStatment.appliedTax | giddhCurrency }}
                        </div>
                    </div>
                </ng-template>

                <!-- end of expenses -->
            </div>
            <!-- end row -->

        </div>
    </div>
</div>
