<div>
    <div class="modal-header">
        <h3 class="modal-title bg" id="modal-title">Bulk Update</h3>
        <span class="close" aria-hidden="true" (click)="onCancel()">×</span>
    </div>
    <form #bulkUpdateForm="ngForm" autocomplete="off" (ngSubmit)="updateBulkInvoice();">
        <div class="modal-body pdL2 pdR2 clearfix" id="export-body">

            <small>Choose a field from the dropdown and update with new information.</small>
            <div class="row mb-1 mt-2">
                <div class="col-md-6 col-sm-6">
                    <div class="form-group">
                        <sh-select placeholder="Select" [options]="fieldOptions" [isFilterEnabled]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedField" [forceClearReactive]="forceClear$ | async" [ItemHeight]="33" (selected)="onSelectEntryField($event)"></sh-select>
                    </div>
                </div>

                <div class="col-md-6 col-sm-6">
                    <div class="form-group" *ngIf="selectedField === 'pdfTemplate'">
                        <sh-select placeholder="Select" [options]="allTemplatesOptions" autocomplete="off" required [isFilterEnabled]="true" [ItemHeight]="33" name="templateUniqueName" [(ngModel)]="updateTemplatesRequest.templateUniqueName"></sh-select>
                    </div>

                    <div class="form-group" *ngIf="selectedField === 'notes'">
                        <!-- TODO : this note is come from sales module -->
                        <!-- <span> Note </span>
                        <textarea class="form-control" [(ngModel)]="updateNotesRequest.message1" name="message1"></textarea> -->
                        <!--  this note is come from template -->
                        <textarea class="form-control" [(ngModel)]="updateNotesRequest.message2" name="message2"></textarea>
                    </div>

                    <div class="form-group" *ngIf="selectedField === 'signature'">
                        <sh-select placeholder="Select option" [options]="templateSignaturesOptions" autocomplete="off" required [isFilterEnabled]="true" name="signatureOptions" [(ngModel)]="signatureOptions" [ItemHeight]="33"></sh-select>
                    </div>

                    <div class="relative form-group" *ngIf="selectedField === 'dueDate'">
                        <input name="lastInvoiceDate" required placeholder="Select Date" type="text" autocomplete="off" [bsConfig]="{dateInputFormat: giddhDateFormat}" [(ngModel)]="updateDueDatesRequest.dueDate" class="form-control" bsDatepicker required>
                        <i class="fa fa-calendar text-light-2 inpute-date"></i>
                    </div>
                </div>
            </div>

            <div class="width-100">
                <div *ngIf="selectedField === 'signature' && signatureOptions === 'image'" class="uplode-logo">
                    <div class="form-group">
                        <label [hidden]="isSignatureAttached">
                            <input type="file" style="display: none;" name="bulkUploadfileInput"
                                id="bulkUploadfileInput" [options]="fileUploadOptions" ngFileSelect
                                [uploadInput]="uploadInput" (uploadOutput)="onUploadOutput($event)">
                            <label class="cp fs16 text-gray font-14" for="bulkUploadfileInput">
                                Upload your logo
                            </label>
                        </label>

                        <label class="logo-preview" [hidden]="!isSignatureAttached">
                            <div class="signature-image"><img alt="" required id="signatureImage"
                                    [src]="signatureSrc" />
                            </div>
                            <div class="d-flex mt-1 justify-content-center"> <button class="btn btn-danger" type="button"
                                    (click)="clearImage()">clear</button></div>
                        </label>
                    </div>
                </div>
                <div *ngIf="selectedField === 'signature' && signatureOptions === 'slogan'">
                    <textarea class="form-control" required [(ngModel)]="updateSloganRequest.slogan" name="slogan"></textarea>
                </div>

                <!-- TODO: under discussion -->
                <div *ngIf="selectedField === 'shippingDetails'">

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="GST Number">
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="relative form-group">
                                <sh-select placeholder="State" [options]="allTemplatesOptions" autocomplete="off" required [isFilterEnabled]="true" [ItemHeight]="33" name="templateUniqueName">
                                </sh-select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <textarea name="" class="textarea form-control" placeholder="Address" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="selectedField === 'customFields'" class="row mb-2">
                    <div class="col-md-4">
                        <div class="relative form-group">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Custom Field 1" name="customField1" [(ngModel)]="updateCustomfieldsRequest.customField1">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Custom Field 2" name="customField2" [(ngModel)]="updateCustomfieldsRequest.customField2">
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Custom Field 3" name="customField3" [(ngModel)]="updateCustomfieldsRequest.customField3">
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <small>Note: All the selected invoices will be updated with new information and you cannot undo this.</small>
            </div>
        </div>
        <div class="modal-footer d-flex" style="justify-content: flex-start">
            <button class="btn btn-success" (click)="updateBulkInvoice();" [ladda]="updateInProcess" [disabled]="bulkUpdateForm.invalid">Update</button>
            <button class="btn btn-danger" (click)="onCancel()">Cancel</button>
        </div>
    </form>

</div>

<!--InfoModel-->
<div bsModal #bulkUpdateImageSlogan="bs-modal" class="modal fade" role="dialog" [config]="modalConfig" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div>
                <div class="modal-header clearfix">
                    <h3 class="modal-title bg" id="modal-title">Confirmation</h3>
                    <span aria-hidden="true" class="close" data-dismiss="modal" (click)="onCancelBulkUpdateImageSloganModal()">×</span>
                </div>
                <div class="model-body clearfix pd2">
                    <h3>The image / slogan will show only if the 'image / slogan' option is enabled from the invoice templates.
                    </h3>
                    <h4 class="mr-t2"><b> Do you want to proceed?</b></h4>
                    <div class="text-left mr-t2 clearfix">
                        <button type="submit" class="btn btn-sm btn-success" (click)="onConfirmationUpdateImageSlogan()">Yes</button>
                        <button type="submit" class="btn btn-sm btn-danger" (click)="onCancelBulkUpdateImageSloganModal()">No</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>