<div
    id="contentTab"
    class="design-tab-content mr-t2 template-editor"
    *ngIf="customTemplate?.uniqueName"
    [hidden]="!(content && customTemplate && customTemplate.sections)"
>
    <!-- start header -->
    <form #contentForm="ngForm" novalidate>
        <div id="headerDiv" [hidden]="!templateUISectionVisibility.header">
            <h2>Header</h2>
            <div class="scroll-auto">
                <div class="clearfix">
                    <div
                        *ngIf="
                            fieldsAndVisibility.header.companyName &&
                            customTemplate?.templateType !== 'gst_template_b' &&
                            customTemplate?.templateType !== 'gst_template_d'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="companyNameCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['companyName'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Company Name
                        </mat-checkbox>
                    </div>
                    <div class="form-group" *ngIf="customTemplate?.templateType === 'gst_template_e'">
                        <mat-checkbox
                            color="primary"
                            name="titleCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['formNameTaxInvoice'].display"
                            (change)="changeInvoiceHeader($event); onChangeFieldVisibility(null, null, null)"
                        >
                            Document Title: This is your
                        </mat-checkbox>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['title']?.errors?.maxlength"
                                [maxlength]="15"
                                [name]="'title'"
                                [(ngModel)]="customTemplate.sections['header'].data['formNameInvoice'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['formNameInvoice'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="formNameInvoice?.isFocused || contentForm?.controls['title']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["formNameInvoice"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['taxTitle']?.errors?.maxlength"
                                [maxlength]="15"
                                [name]="'taxTitle'"
                                [(ngModel)]="customTemplate.sections['header'].data['formNameTaxInvoice'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['formNameTaxInvoice'].display"
                            ></text-field>

                            <ng-container
                                *ngIf="
                                    formNameTaxInvoice?.isFocused ||
                                    contentForm?.controls['taxTitle']?.errors?.maxlength
                                "
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["formNameTaxInvoice"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <div
                        class="form-group"
                        *ngIf="
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e') &&
                            showGstComposition &&
                            customTemplate.sections['header'].data['showIrnNumber']
                        "
                    >
                        <mat-checkbox
                            color="primary"
                            name="irnCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['showIrnNumber'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Show IRN number
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="
                            showGstComposition &&
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e') &&
                            customTemplate.sections['header'].data['showQrCode']
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="showQrCodeCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['showQrCode'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Show QR code
                        </mat-checkbox>
                    </div>
                    <div
                        class="form-group"
                        *ngIf="
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e' ||
                                customTemplate?.templateType === 'thermal_template') &&
                            voucherType === 'sales' &&
                            customTemplate.sections['header'].data['showCompanyAddress']
                        "
                    >
                        <mat-checkbox
                            color="primary"
                            name="companyAddressCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['showCompanyAddress'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Company Address
                        </mat-checkbox>
                    </div>
                    <div
                        class="form-group"
                        *ngIf="
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e') &&
                            voucherType === 'sales' &&
                            customTemplate.sections['header'].data['warehouseAddress']
                        "
                    >
                        <mat-checkbox
                            color="primary"
                            name="warehouseAddressCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['warehouseAddress'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Warehouse Address
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="fieldsAndVisibility.header.gstin && customTemplate?.templateType !== 'gst_template_e'"
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="gstinCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['gstin'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            GSTIN
                        </mat-checkbox>
                    </div>
                    <div
                        class="form-group clearfix d-flex align-self-start"
                        *ngIf="
                            showGstComposition === true &&
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e') &&
                            voucherType === 'sales'
                        "
                    >
                        <mat-checkbox
                            class="mt-1 mr-2 demo"
                            color="primary"
                            name="gstCompositionLabel"
                            [(ngModel)]="customTemplate.sections['header'].data['gstComposition'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                        </mat-checkbox>
                        <span class="flex-fill">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['gstComposition']?.errors?.maxlength"
                                [maxlength]="70"
                                [name]="'gstComposition'"
                                [placeholder]="'Registered under Composition Scheme'"
                                [(ngModel)]="customTemplate.sections['header'].data['gstComposition'].label"
                                (change)="onFieldChange(null, null, null)"
                            ></text-field>
                            <ng-container
                                *ngIf="
                                    gstComposition?.isFocused ||
                                    contentForm?.controls['gstComposition']?.errors?.maxlength
                                "
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    70 - customTemplate.sections["header"].data["gstComposition"].label?.length
                                }}</span>
                            </ng-container>
                        </span>
                    </div>
                    <!-- <div *ngIf="fieldsAndVisibility.header.pan" class="form-group"><input type="checkbox" [(ngModel)]="customTemplate.sections[0].content[2].display" (ngModelChange)="onChangeFieldVisibility(null, null, null)" checked/> PAN</div> -->
                    <div *ngIf="voucherType === 'sales' || voucherType === ''">
                        <div *ngIf="fieldsAndVisibility.header.invoiceDate" class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="invoiceDateCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['invoiceDate'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Invoice Date
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['invoiceDate']?.errors?.maxlength"
                                    [maxlength]="customTemplate.templateType === 'thermal_template' ? 12 : 15"
                                    [name]="'invoiceDate'"
                                    [(ngModel)]="customTemplate.sections['header'].data['invoiceDate'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['invoiceDate'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        invoiceDate?.isFocused ||
                                        contentForm?.controls['invoiceDate']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        customTemplate.templateType === "thermal_template"
                                            ? 12 - customTemplate.sections["header"].data["invoiceDate"].label?.length
                                            : 15 - customTemplate.sections["header"].data["invoiceDate"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                        <div *ngIf="fieldsAndVisibility.header.invoiceNumber" class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="invoiceNumberCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['invoiceNumber'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Invoice Number
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['invoiceNo']?.errors?.maxlength"
                                    [maxlength]="customTemplate.templateType === 'thermal_template' ? 14 : 15"
                                    [name]="'invoiceNo'"
                                    [(ngModel)]="customTemplate.sections['header'].data['invoiceNumber'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['invoiceNumber'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        invoiceNo?.isFocused || contentForm?.controls['invoiceNo']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        customTemplate.templateType === "thermal_template"
                                            ? 14 - customTemplate.sections["header"].data["invoiceNumber"].label?.length
                                            : 15 - customTemplate.sections["header"].data["invoiceNumber"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                    <!--   .....this is for other voucher type -->
                    <ng-container *ngIf="voucherType != 'sales'">
                        <div *ngIf="fieldsAndVisibility.header.voucherDate" class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="voucherDateCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['voucherDate'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Voucher Date
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['invoiceDate']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'invoiceDate'"
                                    [(ngModel)]="customTemplate.sections['header'].data['voucherDate'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['voucherDate'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        invoiceDate?.isFocused ||
                                        contentForm?.controls['invoiceDate']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["voucherDate"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                        <div *ngIf="fieldsAndVisibility.header.voucherNumber" class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="voucherNumberCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['voucherNumber'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Voucher Number
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['voucherNo']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'voucherNo'"
                                    [(ngModel)]="customTemplate.sections['header'].data['voucherNumber'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['voucherNumber'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        voucherNo?.isFocused || contentForm?.controls['voucherNo']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["voucherNumber"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                    </ng-container>
                    <div
                        *ngIf="
                            fieldsAndVisibility.header.dueDate && customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="dueDateCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['dueDate'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Due Date
                        </mat-checkbox>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['dueDate1']?.errors?.maxlength"
                                [maxlength]="15"
                                [name]="'dueDate1'"
                                [(ngModel)]="customTemplate.sections['header'].data['dueDate'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['dueDate'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="dueDate?.isFocused || contentForm?.controls['dueDate1']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["dueDate"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div
                    class="clearfix"
                    *ngIf="
                        customTemplate?.templateType !== 'gst_template_d' &&
                        customTemplate?.templateType !== 'gst_template_e'
                    "
                >
                    <h3>Form</h3>
                    <!-- *ngIf="fieldsAndVisibility.header.formNameTaxInvoice" -->
                    <div class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="documentTitleCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['formNameTaxInvoice'].display"
                            (change)="changeInvoiceHeader($event); onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Document Title
                        </mat-checkbox>
                        <!-- <div class="ml-3 mr-t1">Invoice
                <input type="text" maxlength="15" class="form-control" name="tl" [(ngModel)]='customTemplate.sections[0].content[22].label'
                    (ngModelChange)='onFieldChange(null, null, null)' [disabled]="!customTemplate.sections[0].content[23].display"
                />
            </div> -->

                        <div class="ml-3" *ngIf="customTemplate.templateType !== 'thermal_template'">
                            Invoice
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['title']?.errors?.maxlength"
                                [maxlength]="15"
                                [name]="'title'"
                                [(ngModel)]="customTemplate.sections['header'].data['formNameInvoice'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['formNameInvoice'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="formNameInvoice?.isFocused || contentForm?.controls['title']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["formNameInvoice"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                        <div class="ml-3">
                            Tax Invoice
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['taxTitle']?.errors?.maxlength"
                                [maxlength]="15"
                                [name]="'taxTitle'"
                                [(ngModel)]="customTemplate.sections['header'].data['formNameTaxInvoice'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['formNameTaxInvoice'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="
                                    formNameTaxInvoice?.isFocused ||
                                    contentForm?.controls['taxTitle']?.errors?.maxlength
                                "
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["formNameTaxInvoice"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="clearfix">
                    <h3>Customer Details</h3>
                    <div
                        *ngIf="
                            fieldsAndVisibility.header.customerName &&
                            customTemplate?.templateType !== 'gst_template_e' &&
                            customTemplate?.templateType !== 'gst_template_d' &&
                            customTemplate?.templateType !== 'gst_template_b'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="customerNameCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['customerName'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Customer Name
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="
                            fieldsAndVisibility.header.attentionTo &&
                            customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="attentionToCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['attentionTo'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Attention To
                        </mat-checkbox>
                    </div>

                    <div
                        *ngIf="
                            fieldsAndVisibility.header.customerEmail &&
                            customTemplate?.templateType !== 'gst_template_b' &&
                            customTemplate?.templateType !== 'gst_template_d' &&
                            customTemplate?.templateType !== 'gst_template_e' &&
                            customTemplate?.templateType !== 'gst_template_i' &&
                            customTemplate?.templateType !== 'gst_template_h' &&
                            customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="emailIdCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['customerEmail'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Email ID
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="
                            fieldsAndVisibility.header.customerMobileNumber &&
                            customTemplate?.templateType !== 'gst_template_b' &&
                            customTemplate?.templateType !== 'gst_template_d' &&
                            customTemplate?.templateType !== 'gst_template_e' &&
                            customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="mobileNumberCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['customerMobileNumber'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Mobile Number
                        </mat-checkbox>
                    </div>
                </div>
                <div class="clearfix" *ngIf="customTemplate?.templateType !== 'gst_template_d'">
                    <h3>Billing Details</h3>
                    <div *ngIf="fieldsAndVisibility.header.billingAddress" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="billingAddressCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['billingAddress'].display"
                            (change)="onChangeFieldVisibility(null, null, null); changeDisableBilling()"
                        >
                            Billing Address
                        </mat-checkbox>
                        <div class="ml-3" *ngIf="customTemplate?.templateType !== 'thermal_template'">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['bill']?.errors?.maxlength"
                                [maxlength]="18"
                                [name]="'bill'"
                                [(ngModel)]="customTemplate.sections['header'].data['billingAddress'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['billingAddress'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="billingAddress?.isFocused || contentForm?.controls['bill']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    18 - customTemplate.sections["header"].data["billingAddress"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <div *ngIf="fieldsAndVisibility.header.billingState" class="form-group" [hidden]="true">
                        <mat-checkbox
                            color="primary"
                            name="billingStateCheckbox"
                            [disabled]="!customTemplate.sections['header'].data['billingAddress'].display"
                            [(ngModel)]="customTemplate.sections['header'].data['billingState'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            State
                        </mat-checkbox>
                    </div>
                    <div *ngIf="fieldsAndVisibility.header.billingGstin" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="billingGstinCheckbox"
                            [disabled]="!customTemplate.sections['header'].data['billingAddress'].display"
                            [(ngModel)]="customTemplate.sections['header'].data['billingGstin'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            GSTIN
                        </mat-checkbox>
                        <div class="ml-3" *ngIf="customTemplate?.templateType !== 'thermal_template'">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['billingGstin']?.errors?.maxlength"
                                [maxlength]="15"
                                [name]="'billingGstin'"
                                [(ngModel)]="customTemplate.sections['header'].data['billingGstin'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="
                                    !customTemplate.sections['header'].data['billingAddress'].display ||
                                    !customTemplate.sections['header'].data['billingGstin'].display
                                "
                            ></text-field>
                            <ng-container
                                *ngIf="
                                    billingGstin?.isFocused || contentForm?.controls['billingGstin']?.errors?.maxlength
                                "
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["billingGstin"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                </div>

                <div
                    class="clearfix"
                    *ngIf="
                        customTemplate?.templateType !== 'gst_template_b' &&
                        customTemplate?.templateType !== 'gst_template_d' &&
                        customTemplate?.templateType !== 'gst_template_h' &&
                        customTemplate?.templateType !== 'thermal_template'
                    "
                >
                    <h3>Shipping Details</h3>
                    <div *ngIf="fieldsAndVisibility.header.shippingAddress" class="form-group">
                        <mat-checkbox
                            color="primary"
                            [checked]="true"
                            name="shippingAddressCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['shippingAddress'].display"
                            (change)="onChangeFieldVisibility(null, null, null); changeDisableShipping()"
                        >
                            Shipping Address
                        </mat-checkbox>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['shpAd']?.errors?.maxlength"
                                [maxlength]="18"
                                [name]="'shpAd'"
                                [(ngModel)]="customTemplate.sections['header'].data['shippingAddress'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['header'].data['shippingAddress'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="shippingAddress?.isFocused || contentForm?.controls['shpAd']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    18 - customTemplate.sections["header"].data["shippingAddress"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <div *ngIf="fieldsAndVisibility.header.shippingState" class="form-group" [hidden]="true">
                        <mat-checkbox
                            color="primary"
                            name="shippingStateCheckbox"
                            [disabled]="!customTemplate.sections['header'].data['shippingAddress'].display"
                            [(ngModel)]="customTemplate.sections['header'].data['shippingState'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            State
                        </mat-checkbox>
                    </div>
                    <div *ngIf="fieldsAndVisibility.header.shippingGstin" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="shippingGstinCheckbox"
                            [disabled]="!customTemplate.sections['header'].data['shippingAddress'].display"
                            [(ngModel)]="customTemplate.sections['header'].data['shippingGstin'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            GSTIN
                        </mat-checkbox>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [name]="'shippingGstin'"
                                [class.error-box]="contentForm?.controls['shippingGstin']?.errors?.maxlength"
                                [maxlength]="15"
                                [(ngModel)]="customTemplate.sections['header'].data['shippingGstin'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="
                                    !customTemplate.sections['header'].data['shippingAddress'].display ||
                                    !customTemplate.sections['header'].data['shippingGstin'].display
                                "
                            ></text-field>
                            <ng-container
                                *ngIf="
                                    shippingGstin?.isFocused ||
                                    contentForm?.controls['shippingGstin']?.errors?.maxlength
                                "
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span>
                                <span class="max-character-value">{{
                                    15 - customTemplate.sections["header"].data["shippingGstin"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div
                    class="clearfix"
                    *ngIf="
                        customTemplate?.templateType !== 'gst_template_d' &&
                        customTemplate?.templateType !== 'gst_template_h' &&
                        customTemplate?.templateType !== 'thermal_template'
                    "
                >
                    <h3>
                        <i
                            class="cp collapse-icons"
                            aria-hidden="true"
                            (click)="showTransportField = !showTransportField"
                            [ngClass]="{ 'icon-minus': showTransportField, 'icon-plus': !showTransportField }"
                        ></i>
                        Transport Details
                    </h3>
                    <div class="clearfix" [collapse]="!showTransportField">
                        <div class="form-group" *ngIf="fieldsAndVisibility.header.shippingDate">
                            <mat-checkbox
                                color="primary"
                                name="transportDetailsCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['shippingDate'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                            >
                                Ship Date
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['shippingDate']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'shippingDate'"
                                    [(ngModel)]="customTemplate.sections['header'].data['shippingDate'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['shippingDate'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        shippingDate?.isFocused ||
                                        contentForm?.controls['shippingDate']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["shippingDate"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                        <div class="form-group" *ngIf="fieldsAndVisibility.header.shippedVia">
                            <mat-checkbox
                                color="primary"
                                name="shipViaCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['shippedVia'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Ship Via
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['shippedVia']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'shippedVia'"
                                    [(ngModel)]="customTemplate.sections['header'].data['shippedVia'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['shippedVia'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        shippedVia?.isFocused || contentForm?.controls['shippedVia']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["shippedVia"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                        <div
                            class="form-group"
                            *ngIf="
                                fieldsAndVisibility.header.trackingNumber &&
                                customTemplate?.templateType !== 'thermal_template'
                            "
                        >
                            <mat-checkbox
                                color="primary"
                                name="trackingNumberCheckbox"
                                [(ngModel)]="customTemplate.sections['header'].data['trackingNumber'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Tracking No.
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['trackingNumber']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'trackingNumber'"
                                    [(ngModel)]="customTemplate.sections['header'].data['trackingNumber'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['trackingNumber'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        trackingNumber?.isFocused ||
                                        contentForm?.controls['trackingNumber']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["trackingNumber"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
                <div
                    class="clearfix mr-b2"
                    *ngIf="
                        customTemplate?.templateType !== 'gst_template_b' &&
                        customTemplate?.templateType !== 'gst_template_d' &&
                        customTemplate?.templateType !== 'thermal_template'
                    "
                >
                    <h3>
                        <i
                            class="cp collapse-icons"
                            aria-hidden="true"
                            (click)="showCustomField = !showCustomField"
                            [ngClass]="{ 'icon-minus': showCustomField, 'icon-plus': !showCustomField }"
                        ></i>
                        Custom Field
                    </h3>
                    <div class="clearfix" [collapse]="!showCustomField">
                        <div
                            *ngIf="fieldsAndVisibility.header.customField1"
                            class="form-group clearfix d-flex align-self-start"
                        >
                            <mat-checkbox
                                class="mt-1 mr-2"
                                color="primary"
                                name="customField1Checkbox"
                                [(ngModel)]="customTemplate.sections['header'].data['customField1'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                            </mat-checkbox>
                            <span class="flex-fill">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['customField1']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'customField1'"
                                    [(ngModel)]="customTemplate.sections['header'].data['customField1'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['customField1'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        customField1?.isFocused ||
                                        contentForm?.controls['customField1']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["customField1"].label?.length
                                    }}</span>
                                </ng-container>
                            </span>
                        </div>
                        <div
                            *ngIf="fieldsAndVisibility.header.customField2"
                            class="form-group clearfix d-flex align-self-start"
                        >
                            <mat-checkbox
                                class="mt-1 mr-2"
                                color="primary"
                                name="customField2Checkbox"
                                [(ngModel)]="customTemplate.sections['header'].data['customField2'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                            </mat-checkbox>
                            <span class="flex-fill">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['customField2']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'customField2'"
                                    [(ngModel)]="customTemplate.sections['header'].data['customField2'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['customField2'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        customField2?.isFocused ||
                                        contentForm?.controls['customField2']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["customField2"].label?.length
                                    }}</span>
                                </ng-container>
                            </span>
                        </div>
                        <div
                            *ngIf="fieldsAndVisibility.header.customField3"
                            class="form-group clearfix d-flex align-self-start"
                        >
                            <mat-checkbox
                                class="mt-1 mr-2"
                                color="primary"
                                name="customField3Checkbox"
                                [(ngModel)]="customTemplate.sections['header'].data['customField3'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                            </mat-checkbox>
                            <span class="flex-fill">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [class.error-box]="contentForm?.controls['customField3']?.errors?.maxlength"
                                    [maxlength]="15"
                                    [name]="'customField3'"
                                    [(ngModel)]="customTemplate.sections['header'].data['customField3'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['header'].data['customField3'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        customField3?.isFocused ||
                                        contentForm?.controls['customField3']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span>
                                    <span class="max-character-value">{{
                                        15 - customTemplate.sections["header"].data["customField3"].label?.length
                                    }}</span>
                                </ng-container>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tableDiv" [hidden]="!templateUISectionVisibility.table">
            <h2>Table</h2>

            <div class="clearfix scroll-auto">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Table</th>
                            <th *ngIf="customTemplate.templateType !== 'thermal_template'">Label</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="customTemplate.sections['table']">
                        <tr
                            *ngIf="
                                fieldsAndVisibility.table.sNo &&
                                customTemplate?.templateType !== 'gst_template_c' &&
                                customTemplate?.templateType !== 'gst_template_f' &&
                                customTemplate?.templateType !== 'gst_template_g' &&
                                customTemplate?.templateType !== 'thermal_template'
                            "
                        >
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="sN"
                                    [(ngModel)]="customTemplate.sections['table'].data['sNo'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Number
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="10"
                                    [class.error-box]="contentForm?.controls['ss']?.errors?.maxlength"
                                    [name]="'ss'"
                                    [(ngModel)]="customTemplate.sections['table'].data['sNo'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['sNo'].display"
                                ></text-field>
                                <ng-container *ngIf="sNo?.isFocused || contentForm?.controls['ss']?.errors?.maxlength">
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["table"].data["sNo"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                customTemplate.templateType !== 'thermal_template' && fieldsAndVisibility?.table.date
                            "
                        >
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="dt"
                                    [(ngModel)]="customTemplate.sections['table'].data['date'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Date
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="10"
                                    [class.error-box]="contentForm?.controls['dt1']?.errors?.maxlength"
                                    [name]="'dt1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['date'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['date'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="date?.isFocused || contentForm?.controls['dt1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["table"].data["date"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr *ngIf="fieldsAndVisibility.table.item">
                            <td *ngIf="customTemplate.templateType !== 'thermal_template'">
                                <mat-checkbox
                                    color="primary"
                                    name="it"
                                    [(ngModel)]="customTemplate.sections['table'].data['item'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Date
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="customTemplate.templateType === 'thermal_template' ? 8 : 12"
                                    [class.error-box]="contentForm?.controls['it1']?.errors?.maxlength"
                                    [name]="'it1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['item'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['item'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="item?.isFocused || contentForm?.controls['it1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        customTemplate.templateType === "thermal_template"
                                            ? 8 - customTemplate.sections["table"].data["item"].label?.length
                                            : 12 - customTemplate.sections["table"].data["item"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                customTemplate.sections['table'].data['item'].display &&
                                customTemplate.sections['table'].data['showDescriptionInRows'] &&
                                customTemplate.templateType !== 'thermal_template'
                            "
                        >
                            <td class="pb-3" colspan="2">
                                <mat-checkbox
                                    color="primary"
                                    name="showDescriptionInRows"
                                    [(ngModel)]="customTemplate.sections['table'].data['showDescriptionInRows'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                >
                                    Show description as a new row
                                </mat-checkbox>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                fieldsAndVisibility.table.hsnSac && customTemplate.templateType !== 'thermal_template'
                            "
                        >
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="hsn"
                                    [(ngModel)]="customTemplate.sections['table'].data['hsnSac'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    HSN/SAC
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="8"
                                    [class.error-box]="contentForm?.controls['hsn1']?.errors?.maxlength"
                                    [name]="'hsn1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['hsnSac'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['hsnSac'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="hsnSac?.isFocused || contentForm?.controls['hsn1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        8 - customTemplate.sections["table"].data["hsnSac"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr *ngIf="fieldsAndVisibility.table.quantity">
                            <td *ngIf="customTemplate.templateType !== 'thermal_template'">
                                <mat-checkbox
                                    color="primary"
                                    name="qt"
                                    [(ngModel)]="customTemplate.sections['table'].data['quantity'].display"
                                    (change)="onChangeFieldVisibility(null, null, null); changeDisableQuantity()"
                                    [checked]="true"
                                >
                                    Quantity
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="6"
                                    [class.error-box]="contentForm?.controls['qt1']?.errors?.maxlength"
                                    [name]="'qt1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['quantity'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['quantity'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="quantity?.isFocused || contentForm?.controls['qt1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        6 - customTemplate.sections["table"].data["quantity"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <!-- <div class="form-group">
                            <div class="form-group">
                                <input type="checkbox" checked /> Tax Bifurcation
                            </div>
                            <div class="ml-3">
                                <div class="clearfix mr-b05">
                                    <input type="radio" class="radio-theme" name="tax-rate" /> Tax Rate
                                </div>

                                <div class="clearfix">
                                    <input type="radio" class="radio-theme point" name="tax-rate" /> HSN/SAC
                                </div>
                            </div>
                        </div> -->
                        <tr [hidden]="true">
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="dsc"
                                    [(ngModel)]="customTemplate.sections['table'].data['description'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Description
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="10"
                                    [class.error-box]="contentForm?.controls['dsc1']?.errors?.maxlength"
                                    [name]="'dsc1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['description'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['description'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="description?.isFocused || contentForm?.controls['dsc1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["table"].data["description"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr *ngIf="fieldsAndVisibility.table.rate">
                            <td *ngIf="customTemplate.templateType !== 'thermal_template'">
                                <mat-checkbox
                                    color="primary"
                                    name="rt"
                                    [(ngModel)]="customTemplate.sections['table'].data['rate'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Rate/Item
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="customTemplate.templateType === 'thermal_template' ? 9 : 10"
                                    [class.error-box]="contentForm?.controls['rt1']?.errors?.maxlength"
                                    [name]="'rt1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['rate'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['rate'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="rate?.isFocused || contentForm?.controls['rt1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        customTemplate.templateType === "thermal_template"
                                            ? 9 - customTemplate.sections["table"].data["rate"].label?.length
                                            : 10 - customTemplate.sections["table"].data["rate"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                fieldsAndVisibility.table.discount && customTemplate.templateType !== 'thermal_template'
                            "
                        >
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="ds"
                                    [(ngModel)]="customTemplate.sections['table'].data['discount'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Discount/Item
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="10"
                                    [class.error-box]="contentForm?.controls['ds1']?.errors?.maxlength"
                                    [name]="'ds1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['discount'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['discount'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="discount?.isFocused || contentForm?.controls['ds1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["table"].data["discount"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                fieldsAndVisibility.table.taxableValue &&
                                customTemplate.templateType !== 'thermal_template'
                            "
                        >
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="tv"
                                    [(ngModel)]="customTemplate.sections['table'].data['taxableValue'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Taxable Value
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="14"
                                    [class.error-box]="contentForm?.controls['tv1']?.errors?.maxlength"
                                    [name]="'tv1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['taxableValue'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['taxableValue'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="taxableValue?.isFocused || contentForm?.controls['tv1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        14 - customTemplate.sections["table"].data["taxableValue"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr *ngIf="fieldsAndVisibility.table.tax">
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="ta"
                                    [(ngModel)]="customTemplate.sections['table'].data['tax'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Tax
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="10"
                                    [class.error-box]="contentForm?.controls['t1']?.errors?.maxlength"
                                    [name]="'t1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['tax'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['tax'].display"
                                ></text-field>
                                <ng-container *ngIf="tax?.isFocused || contentForm?.controls['t1']?.errors?.maxlength">
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["table"].data["tax"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr *ngIf="fieldsAndVisibility.table.total">
                            <td *ngIf="customTemplate.templateType !== 'thermal_template'">
                                <mat-checkbox
                                    color="primary"
                                    name="tot"
                                    [(ngModel)]="customTemplate.sections['table'].data['total'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Total
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="customTemplate.templateType === 'thermal_template' ? 5 : 6"
                                    [class.error-box]="contentForm?.controls['tot1']?.errors?.maxlength"
                                    [name]="'tot1'"
                                    [(ngModel)]="customTemplate.sections['table'].data['total'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['total'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="total?.isFocused || contentForm?.controls['tot1']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        customTemplate.templateType === "thermal_template"
                                            ? 5 - customTemplate.sections["table"].data["total"].label?.length
                                            : 6 - customTemplate.sections["table"].data["total"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                fieldsAndVisibility.table.previousDue &&
                                customTemplate.templateType !== 'thermal_template' &&
                                voucherType === 'sales'
                            "
                        >
                            <td>
                                <mat-checkbox
                                    color="primary"
                                    name="preDue"
                                    [(ngModel)]="customTemplate.sections['table'].data['previousDue'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Previous Due
                                </mat-checkbox>
                            </td>
                            <td>
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [maxlength]="14"
                                    [class.error-box]="contentForm?.controls['previousDue']?.errors?.maxlength"
                                    [name]="'previousDue'"
                                    [(ngModel)]="customTemplate.sections['table'].data['previousDue'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['table'].data['previousDue'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="
                                        previousDue?.isFocused ||
                                        contentForm?.controls['previousDue']?.errors?.maxlength
                                    "
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        14 - customTemplate.sections["table"].data["previousDue"].label?.length
                                    }}</span>
                                </ng-container>
                            </td>
                        </tr>
                        <!--<tr *ngIf="fieldsAndVisibility.table.otherTaxBifurcation">
            <td>
                <label>
                <input type="checkbox" name="otherTaxBifurcation"
                        [(ngModel)]="customTemplate.sections['table'].data['otherTaxBifurcation'].display"
                        (ngModelChange)="onChangeFieldVisibility(null, null, null)"
                        checked/> Other Tax Bifurcation</label>
            </td>
            <td>
                <input type="text" maxlength="12" class="form-control" name="tot1"
                    [(ngModel)]="customTemplate.sections['table'].data['otherTaxBifurcation'].label"
                    (ngModelChange)='onFieldChange(null, null, null)'
                    [disabled]="!customTemplate.sections['table'].data['otherTaxBifurcation'].display"
                />
            </td>
            </tr>-->
                        <ng-container
                            *ngIf="
                                templateUISectionVisibility.table &&
                                customTemplate?.templateType === 'gst_template_e' &&
                                voucherType === 'sales'
                            "
                        >
                            <tr *ngIf="isTcsTdsApplicable">
                                <td>
                                    <mat-checkbox
                                        color="primary"
                                        name="tcsCheckbox"
                                        [(ngModel)]="customTemplate.sections['table'].data['tcs'].display"
                                        (change)="onChangeFieldVisibility(null, null, null)"
                                        [checked]="true"
                                    >
                                        TCS
                                    </mat-checkbox>
                                </td>
                                <td>
                                    <text-field
                                        [type]="'text'"
                                        [cssClass]="'form-control'"
                                        [maxlength]="10"
                                        [class.error-box]="contentForm?.controls['tcs']?.errors?.maxlength"
                                        [name]="'tcs'"
                                        [value]="'TCS'"
                                        [(ngModel)]="customTemplate.sections['table'].data['tcs'].label"
                                        (change)="onFieldChange(null, null, null)"
                                        [disabled]="!customTemplate.sections['table'].data['tcs'].display"
                                    ></text-field>
                                    <ng-container
                                        *ngIf="tcs?.isFocused || contentForm?.controls['tcs']?.errors?.maxlength"
                                    >
                                        <span class="max-character-label">Characters left:&nbsp;</span
                                        ><span class="max-character-value">{{
                                            10 - customTemplate.sections["table"].data["tcs"].label?.length
                                        }}</span>
                                    </ng-container>
                                </td>
                            </tr>
                            <tr *ngIf="isTcsTdsApplicable">
                                <td>
                                    <mat-checkbox
                                        color="primary"
                                        name="tdsCheckbox"
                                        [(ngModel)]="customTemplate.sections['table'].data['tds'].display"
                                        (change)="onChangeFieldVisibility(null, null, null)"
                                        [checked]="true"
                                    >
                                        TDS
                                    </mat-checkbox>
                                </td>
                                <td>
                                    <text-field
                                        [type]="'text'"
                                        [cssClass]="'form-control'"
                                        [value]="'TDS'"
                                        [name]="'tds'"
                                        [maxlength]="10"
                                        [class.error-box]="contentForm?.controls['tds']?.errors?.maxlength"
                                        [(ngModel)]="customTemplate.sections['table'].data['tds'].label"
                                        (change)="onFieldChange(null, null, null)"
                                        [disabled]="!customTemplate.sections['table'].data['tds'].display"
                                    ></text-field>
                                    <ng-container
                                        *ngIf="tds?.isFocused || contentForm?.controls['tds']?.errors?.maxlength"
                                    >
                                        <span class="max-character-label">Characters left:&nbsp;</span
                                        ><span class="max-character-value">{{
                                            10 - customTemplate.sections["table"].data["tds"].label?.length
                                        }}</span>
                                    </ng-container>
                                </td>
                            </tr>
                            <tr *ngIf="customTemplate?.templateType !== 'thermal_template'">
                                <td>
                                    <mat-checkbox
                                        color="primary"
                                        name="totalDueCheckbox"
                                        [(ngModel)]="customTemplate.sections['table'].data['totalDue'].display"
                                        (change)="onChangeFieldVisibility(null, null, null)"
                                        [checked]="true"
                                    >
                                        Total Due
                                    </mat-checkbox>
                                </td>
                                <td>
                                    <text-field
                                        [type]="'text'"
                                        [cssClass]="'form-control'"
                                        [value]="'Total Due'"
                                        [name]="'totalDue'"
                                        [maxlength]="40"
                                        [class.error-box]="contentForm?.controls['totalDue']?.errors?.maxlength"
                                        [(ngModel)]="customTemplate.sections['table'].data['totalDue'].label"
                                        (change)="onFieldChange(null, null, null)"
                                        [disabled]="!customTemplate.sections['table'].data['totalDue'].display"
                                    ></text-field>
                                    <ng-container
                                        *ngIf="
                                            totalDue?.isFocused || contentForm?.controls['totalDue']?.errors?.maxlength
                                        "
                                    >
                                        <span class="max-character-label">Characters left:&nbsp;</span
                                        ><span class="max-character-value">{{
                                            40 - customTemplate.sections["table"].data["totalDue"].label?.length
                                        }}</span>
                                    </ng-container>
                                </td>
                            </tr>
                        </ng-container>
                        <tr
                            *ngIf="
                                fieldsAndVisibility.footer.totalInWords &&
                                customTemplate?.templateType !== 'gst_template_a' &&
                                customTemplate?.templateType !== 'gst_template_c' &&
                                customTemplate?.templateType !== 'gst_template_f' &&
                                customTemplate?.templateType !== 'gst_template_g' &&
                                customTemplate?.templateType !== 'thermal_template'
                            "
                        >
                            <td class="pb-3">
                                <mat-checkbox
                                    color="primary"
                                    name="inword"
                                    [(ngModel)]="customTemplate.sections['footer'].data['totalInWords'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Invoice Total(in words)
                                </mat-checkbox>
                            </td>
                        </tr>
                        <tr
                            *ngIf="
                                (customTemplate?.templateType === 'gst_template_a' ||
                                    customTemplate?.templateType === 'gst_template_e') &&
                                voucherType === 'sales' &&
                                customTemplate.sections['table'].data['totalQuantity']
                            "
                        >
                            <td class="pb-3">
                                <mat-checkbox
                                    color="primary"
                                    name="totalQuantity"
                                    [(ngModel)]="customTemplate.sections['table'].data['totalQuantity'].display"
                                    [disabled]="!customTemplate.sections['table'].data['quantity'].display"
                                    (change)="onChangeFieldVisibility(null, null, null)"
                                    [checked]="true"
                                >
                                    Total Quantity
                                </mat-checkbox>
                            </td>
                        </tr>
                        <div
                            class="form-group"
                            *ngIf="customTemplate?.templateType === 'gst_template_e' && voucherType === 'sales'"
                        >
                            <div class="form-group font-16">
                                <mat-checkbox
                                    color="primary"
                                    name="taxBifurcationCheckbox"
                                    [(ngModel)]="customTemplate.sections['table'].data['taxBifurcation'].display"
                                    (change)="
                                        onChangeFieldVisibility(null, null, null);
                                        checkedTaxBifurcation('taxRateBifurcation', 'table')
                                    "
                                >
                                    Tax Bifurcation
                                </mat-checkbox>
                            </div>
                            <div class="ml-3" *ngIf="customTemplate.sections['table'].data['taxBifurcation'].display">
                                <div class="clearfix mr-b05">
                                    <mat-radio-group
                                        class="d-flex mb-2"
                                        (change)="onFieldChange(null, null, null)"
                                        name="tax-rate"
                                    >
                                        <mat-radio-button
                                            color="primary"
                                            [value]="'taxRateBifurcation'"
                                            (change)="checkedTaxBifurcation('taxRateBifurcation', 'table')"
                                            [checked]="
                                                customTemplate.sections['table'].data['taxBifurcation'].label ===
                                                'taxRateBifurcation'
                                            "
                                            [disabled]="
                                                !customTemplate.sections['table'].data['taxBifurcation'].display
                                            "
                                        >
                                            Tax Rate
                                        </mat-radio-button>
                                        <mat-radio-button
                                            color="primary"
                                            [value]="'hsnSac'"
                                            (change)="checkedTaxBifurcation('hsnSac', 'table')"
                                            [checked]="
                                                customTemplate.sections['table'].data['taxBifurcation'].label ===
                                                'hsnSac'
                                            "
                                            [disabled]="
                                                !customTemplate.sections['table'].data['taxBifurcation'].display
                                            "
                                        >
                                            HSN/SAC
                                        </mat-radio-button>
                                    </mat-radio-group>
                                </div>
                            </div>
                        </div>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="footerDiv" [hidden]="!templateUISectionVisibility.footer">
            <div class="clearfix">
                <h2>Footer</h2>
                <div class="clearfix bd-rb scroll-auto">
                    <ng-container
                        *ngIf="
                            customTemplate?.templateType === 'gst_template_a' &&
                            voucherType === 'sales' &&
                            customTemplate.sections['footer'].data['tcs']
                        "
                    >
                        <div *ngIf="isTcsTdsApplicable" class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="tcsCheckbox"
                                [(ngModel)]="customTemplate.sections['footer'].data['tcs'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                TCS
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [value]="'TCS'"
                                    [name]="'tcs'"
                                    [class.error-box]="contentForm?.controls['tcs']?.errors?.maxlength"
                                    [maxlength]="10"
                                    [(ngModel)]="customTemplate.sections['footer'].data['tcs'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['footer'].data['tcs'].display"
                                ></text-field>
                                <ng-container *ngIf="tcs?.isFocused || contentForm?.controls['tcs']?.errors?.maxlength">
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["footer"].data["tcs"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                        <div *ngIf="isTcsTdsApplicable" class="form-group">
                            <mat-checkbox
                                color="primary"
                                [value]="true"
                                name="tdsCheckbox"
                                [(ngModel)]="customTemplate.sections['footer'].data['tds'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                TDS
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [value]="'TDS'"
                                    [name]="'tds'"
                                    [class.error-box]="contentForm?.controls['tds']?.errors?.maxlength"
                                    [maxlength]="10"
                                    [(ngModel)]="customTemplate.sections['footer'].data['tds'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['footer'].data['tds'].display"
                                ></text-field>
                                <ng-container *ngIf="tds?.isFocused || contentForm?.controls['tds']?.errors?.maxlength">
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        10 - customTemplate.sections["footer"].data["tds"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                        <div *ngIf="customTemplate.sections['footer'].data['totalDue']" class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="totalDues"
                                [(ngModel)]="customTemplate.sections['footer'].data['totalDue'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Total Due
                            </mat-checkbox>
                            <div class="ml-3">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control'"
                                    [value]="'Total Due (in INR)'"
                                    [name]="'totalDue'"
                                    [class.error-box]="contentForm?.controls['totalDue']?.errors?.maxlength"
                                    [maxlength]="40"
                                    [(ngModel)]="customTemplate.sections['footer'].data['totalDue'].label"
                                    (change)="onFieldChange(null, null, null)"
                                    [disabled]="!customTemplate.sections['footer'].data['totalDue'].display"
                                ></text-field>
                                <ng-container
                                    *ngIf="totalDue?.isFocused || contentForm?.controls['totalDue']?.errors?.maxlength"
                                >
                                    <span class="max-character-label">Characters left:&nbsp;</span
                                    ><span class="max-character-value">{{
                                        40 - customTemplate.sections["footer"].data["totalDue"].label?.length
                                    }}</span>
                                </ng-container>
                            </div>
                        </div>
                    </ng-container>
                    <div
                        *ngIf="
                            fieldsAndVisibility.footer.companyName &&
                            customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="footerCompanyNameCheckbox"
                            [(ngModel)]="customTemplate.sections['footer'].data['companyName'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Company Name
                        </mat-checkbox>
                    </div>
                    <div *ngIf="customTemplate?.templateType === 'thermal_template'" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="showQrCodeCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['showQrCode'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Show QR code
                        </mat-checkbox>
                    </div>

                    <div
                        *ngIf="fieldsAndVisibility.header.gstin && customTemplate?.templateType === 'gst_template_e'"
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="footerGstinCheckbox"
                            [(ngModel)]="customTemplate.sections['header'].data['gstin'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            GSTIN
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="
                            fieldsAndVisibility.footer.companyAddress &&
                            customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="cad"
                            [(ngModel)]="customTemplate.sections['footer'].data['companyAddress'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Company Address
                        </mat-checkbox>
                        <div class="ml-3">
                            <textarea
                                matInput
                                class="form-control"
                                rows="3"
                                [class.error-box]="contentForm?.controls['cmpAdd']?.errors?.maxlength"
                                maxlength="124"
                                placeholder="Company Address"
                                [(ngModel)]="customTemplate.sections['footer'].data['companyAddress'].label"
                                name="cmpAdd"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['footer'].data['companyAddress'].display"
                            ></textarea>
                            <ng-container
                                *ngIf="companyAddress?.isFocused || contentForm?.controls['cmpAdd']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    124 - customTemplate.sections["footer"].data["companyAddress"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <!-- *ngIf="customTemplate?.templateType !== 'gst_template_c' && customTemplate?.templateType !== 'gst_template_f' && customTemplate?.templateType !== 'gst_template_g'" -->
                    <div
                        *ngIf="
                            fieldsAndVisibility.footer.taxableAmount &&
                            customTemplate?.templateType !== 'gst_template_b' &&
                            customTemplate?.templateType !== 'gst_template_d' &&
                            customTemplate?.templateType !== 'gst_template_e' &&
                            customTemplate?.templateType !== 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="tam"
                            [(ngModel)]="customTemplate.sections['footer'].data['taxableAmount'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Taxable Amount
                        </mat-checkbox>
                    </div>
                    <div *ngIf="fieldsAndVisibility.footer.totalTax" class="form-group" [hidden]="true">
                        <mat-checkbox
                            color="primary"
                            name="ttx"
                            [(ngModel)]="customTemplate.sections['footer'].data['totalTax'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Total Tax
                        </mat-checkbox>
                    </div>
                    <!--<div class="form-group">
                <input type="checkbox" name="ded" [(ngModel)]="customTemplate.sections[2].content[2].display" (ngModelChange)="onChangeFieldVisibility(null, null, null)" /> Other Deduction/Additions
            </div>-->
                    <div *ngIf="fieldsAndVisibility.footer.total" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="itot"
                            [(ngModel)]="customTemplate.sections['footer'].data['total'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Invoice Total
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="
                            customTemplate?.templateType === 'thermal_template' &&
                            voucherType === 'sales' &&
                            customTemplate.sections['table'].data['totalQuantity']
                        "
                        class="clearfix mr-t2"
                    >
                        <div class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="totalQuantityCheck"
                                [(ngModel)]="customTemplate.sections['table'].data['totalQuantity'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Total Quantity
                            </mat-checkbox>
                        </div>
                        <div class="form-group">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control thanks-input-inline'"
                                [class.error-box]="contentForm?.controls['totalQuantity']?.errors?.maxlength"
                                [disabled]="!fieldsAndVisibility.table.totalQuantity?.display"
                                (keyup)="onFieldChange(null, null, null)"
                                [(ngModel)]="customTemplate.sections['table'].data['totalQuantity'].label"
                                [placeholder]="'Total Quantity'"
                                [maxlength]="13"
                                [name]="'totalQuantity'"
                            ></text-field>
                        </div>
                        <div
                            class="form-group"
                            *ngIf="
                                totalQuantity?.isFocused || contentForm?.controls['totalQuantity']?.errors?.maxlength
                            "
                        >
                            <span class="max-character-label">Characters left:&nbsp;</span
                            ><span class="max-character-value">{{
                                13 - customTemplate.sections["table"].data["totalQuantity"].label?.length
                            }}</span>
                        </div>
                    </div>
                    <div *ngIf="customTemplate.templateType === 'thermal_template'" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="totalDueCheckbox"
                            [(ngModel)]="customTemplate.sections['footer'].data['totalDue'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Invoice Total
                        </mat-checkbox>
                        <div class="ml-3">
                            <ng-container
                                *ngIf="totalDue?.isFocused || contentForm?.controls['totalDue']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    15 - customTemplate.sections["footer"].data["totalDue"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <div
                        *ngIf="
                            fieldsAndVisibility.table.discount && customTemplate?.templateType === 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="ds"
                            [(ngModel)]="customTemplate.sections['table'].data['discount'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Discount
                        </mat-checkbox>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [maxlength]="10"
                                [class.error-box]="contentForm?.controls['ds1']?.errors?.maxlength"
                                [name]="'ds1'"
                                [(ngModel)]="customTemplate.sections['table'].data['discount'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['table'].data['discount'].display"
                            ></text-field>
                            <ng-container
                                *ngIf="discount?.isFocused || contentForm?.controls['ds1']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    10 - customTemplate.sections["table"].data["discount"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <div *ngIf="fieldsAndVisibility.footer.taxableAmount" class="form-group">
                        <mat-checkbox
                            color="primary"
                            name="tam"
                            [(ngModel)]="customTemplate.sections['footer'].data['taxableAmount'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Taxable Amount
                        </mat-checkbox>
                        <div class="ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [maxlength]="14"
                                [class.error-box]="contentForm?.controls['tv1']?.errors?.maxlength"
                                [name]="'tv1'"
                                [(ngModel)]="customTemplate.sections['table'].data['taxableValue'].label"
                                (change)="onFieldChange(null, null, null)"
                                [disabled]="!customTemplate.sections['table'].data['taxableValue'].display"
                            ></text-field>
                            <ng-container
                                class="form-group ml-3 clearfix"
                                *ngIf="taxableValue?.isFocused || contentForm?.controls['tv1']?.errors?.maxlength"
                            >
                                <span class="max-character-label">Characters left:&nbsp;</span
                                ><span class="max-character-value">{{
                                    14 - customTemplate.sections["table"].data["taxableValue"].label?.length
                                }}</span>
                            </ng-container>
                        </div>
                    </div>
                    <div
                        *ngIf="
                            fieldsAndVisibility.footer.totalInWords &&
                            customTemplate?.templateType !== 'gst_template_b' &&
                            customTemplate?.templateType !== 'gst_template_d' &&
                            customTemplate?.templateType !== 'gst_template_e'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="itiw"
                            [(ngModel)]="customTemplate.sections['footer'].data['totalInWords'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                        >
                            Invoice Total(in words)
                        </mat-checkbox>
                    </div>
                    <div
                        class="form-group"
                        *ngIf="
                            customTemplate?.templateType === 'gst_template_a' &&
                            voucherType === 'sales' &&
                            customTemplate.sections['footer'].data['taxBifurcation']
                        "
                    >
                        <div class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="taxBifurcationCheckbox"
                                [(ngModel)]="customTemplate.sections['footer'].data['taxBifurcation'].display"
                                (change)="
                                    onChangeFieldVisibility(null, null, null);
                                    checkedTaxBifurcation('taxRateBifurcation', 'footer')
                                "
                            >
                                Tax Bifurcation
                            </mat-checkbox>
                        </div>
                        <div class="ml-3" *ngIf="customTemplate.sections['footer'].data['taxBifurcation'].display">
                            <div class="clearfix mr-b05">
                                <mat-radio-group
                                    class="d-flex mb-2"
                                    (change)="onFieldChange(null, null, null)"
                                    name="tax-rate"
                                >
                                    <mat-radio-button
                                        color="primary"
                                        [value]="'taxRateBifurcation'"
                                        (change)="checkedTaxBifurcation('taxRateBifurcation', 'footer')"
                                        [checked]="
                                            customTemplate.sections['footer'].data['taxBifurcation'].label ===
                                            'taxRateBifurcation'
                                        "
                                        [disabled]="!customTemplate.sections['footer'].data['taxBifurcation'].display"
                                    >
                                        Tax Rate
                                    </mat-radio-button>
                                    <mat-radio-button
                                        color="primary"
                                        [value]="'hsnSac'"
                                        (change)="checkedTaxBifurcation('hsnSac', 'footer')"
                                        [checked]="
                                            customTemplate.sections['footer'].data['taxBifurcation'].label === 'hsnSac'
                                        "
                                        [disabled]="!customTemplate.sections['footer'].data['taxBifurcation'].display"
                                    >
                                        HSN/SAC
                                    </mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>
                    </div>
                    <div
                        class="clearfix mr-t1 form-group"
                        *ngIf="
                            customTemplate?.type === 'invoice' &&
                            customTemplate?.templateType !== 'thermal_template' &&
                            customTemplate.sections['footer'].data['showNotesAtLastPage']
                        "
                    >
                        <div>
                            <mat-checkbox
                                color="primary"
                                name="showNotesAtLastPage"
                                [checked]="customTemplate.sections['footer'].data['showNotesAtLastPage']?.display"
                                [(ngModel)]="customTemplate.sections['footer'].data['showNotesAtLastPage'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                            >
                                Show notes at the last page
                            </mat-checkbox>
                        </div>
                    </div>
                    <div
                        class="form-group"
                        *ngIf="
                            customTemplate?.templateType === 'thermal_template' &&
                            voucherType === 'sales' &&
                            customTemplate.sections['footer'].data['taxBifurcation']
                        "
                    >
                        <div class="form-group">
                            <mat-checkbox
                                color="primary"
                                name="taxBifurcationCheckbox"
                                [(ngModel)]="customTemplate.sections['footer'].data['taxBifurcation'].display"
                                (change)="
                                    onChangeFieldVisibility(null, null, null);
                                    checkedTaxBifurcation('taxRateBifurcation', 'footer')
                                "
                            >
                                Tax Bifurcation
                            </mat-checkbox>
                        </div>
                        <div class="ml-3" *ngIf="customTemplate.sections['footer'].data['taxBifurcation'].display">
                            <div class="clearfix mr-b05">
                                <mat-radio-group
                                    class="d-flex mb-2"
                                    (change)="onFieldChange(null, null, null)"
                                    name="tax-rate"
                                >
                                    <mat-radio-button
                                        color="primary"
                                        [value]="'taxRateBifurcation'"
                                        (change)="checkedTaxBifurcation('taxRateBifurcation', 'footer')"
                                        [checked]="
                                            customTemplate.sections['footer'].data['taxBifurcation'].label ===
                                            'taxRateBifurcation'
                                        "
                                        [disabled]="!customTemplate.sections['footer'].data['taxBifurcation'].display"
                                    >
                                        Tax Rate
                                    </mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix mr-t1 form-group">
                        <div *ngIf="fieldsAndVisibility.footer.message1">
                            <mat-checkbox
                                color="primary"
                                name="msg1"
                                [(ngModel)]="customTemplate.sections['footer'].data['message1'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                                Note 1
                            </mat-checkbox>
                        </div>
                        <div *ngIf="fieldsAndVisibility.footer.message1" class="form-group ml-3 mb-0 clearfix">
                            <div class="row">
                                <div class="col-12">
                                    <!-- No limit on characters in Notes 1 & 2 if user has opted to show notes at last page -->
                                    <textarea
                                        matInput
                                        class="form-control"
                                        rows="3"
                                        [class.error-box]="contentForm?.controls['msg11']?.errors?.maxlength"
                                        [maxlength]="
                                            customTemplate.sections['footer'].data['showNotesAtLastPage']?.display
                                                ? null
                                                : 200
                                        "
                                        placeholder="Enter any other text you would like in the footer. "
                                        [(ngModel)]="customTemplate.sections['footer'].data['message1'].label"
                                        name="msg11"
                                        (ngModelChange)="onFieldChange(null, null, null)"
                                        [disabled]="!customTemplate.sections['footer'].data['message1'].display"
                                    ></textarea>
                                    <ng-container
                                        *ngIf="
                                            (message1?.isFocused ||
                                                contentForm?.controls['msg11']?.errors?.maxlength) &&
                                            !customTemplate.sections['footer'].data['showNotesAtLastPage']?.display
                                        "
                                    >
                                        <span class="max-character-label">Characters left:&nbsp;</span
                                        ><span class="max-character-value">{{
                                            200 - customTemplate.sections["footer"].data["message1"].label?.length
                                        }}</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div
                        *ngIf="
                            customTemplate?.type === 'invoice' &&
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e') &&
                            customTemplate.sections['footer'].data['showMessage2']
                        "
                        class="clearfix mr-t1 form-group"
                    >
                        <div>
                            <mat-checkbox
                                name="message2"
                                color="primary"
                                [checked]="customTemplate.sections.footer.data.showMessage2?.display"
                                [(ngModel)]="customTemplate.sections['footer'].data['showMessage2'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                            >
                                Note 2
                            </mat-checkbox>
                        </div>
                    </div>
                    <div *ngIf="fieldsAndVisibility.footer.thanks" class="clearfix mr-t2">
                        <div class="mb-0 form-group thanks-input-group">
                            <mat-checkbox
                                color="primary"
                                class="mt-1 mr-2"
                                name="ty"
                                [(ngModel)]="customTemplate.sections['footer'].data['thanks'].display"
                                (change)="onChangeFieldVisibility(null, null, null)"
                                [checked]="true"
                            >
                            </mat-checkbox>
                            <span class="flex-fill">
                                <text-field
                                    [type]="'text'"
                                    [cssClass]="'form-control thanks-input-inline'"
                                    [class.error-box]="contentForm?.controls['thanks']?.errors?.maxlength"
                                    [disabled]="!fieldsAndVisibility.footer.thanks?.display"
                                    (keyup)="onFieldChange(null, null, null)"
                                    [(ngModel)]="customTemplate.sections['footer'].data['thanks'].label"
                                    [placeholder]="'Thank You for your business'"
                                    [maxlength]="30"
                                    [name]="'thanks'"
                                ></text-field>
                            </span>
                        </div>
                        <div
                            class="form-group ml-3 clearfix"
                            *ngIf="thanks?.isFocused || contentForm?.controls['thanks']?.errors?.maxlength"
                        >
                            <span class="max-character-label">Characters left:&nbsp;</span
                            ><span class="max-character-value">{{
                                30 - customTemplate.sections["footer"].data["thanks"].label?.length
                            }}</span>
                        </div>
                    </div>
                    <div
                        *ngIf="
                            fieldsAndVisibility.footer.companyName &&
                            customTemplate?.templateType === 'thermal_template'
                        "
                        class="form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="footerCompanyNameCheckbox"
                            [(ngModel)]="customTemplate.sections['footer'].data['companyName'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Company Name
                        </mat-checkbox>
                    </div>
                    <div
                        *ngIf="
                            customTemplate?.type === 'invoice' &&
                            (customTemplate?.templateType === 'gst_template_a' ||
                                customTemplate?.templateType === 'gst_template_e') &&
                            customTemplate.sections['footer'].data['textUnderSlogan']
                        "
                        class="clearfix mr-t1 form-group"
                    >
                        <mat-checkbox
                            color="primary"
                            name="textUnderSloganCheckbox"
                            [(ngModel)]="customTemplate.sections['footer'].data['textUnderSlogan'].display"
                            (change)="onChangeFieldVisibility(null, null, null)"
                            [checked]="true"
                        >
                            Text under Image Signature / Slogan
                        </mat-checkbox>
                        <div class="mb-0 form-group ml-3">
                            <text-field
                                [type]="'text'"
                                [cssClass]="'form-control'"
                                [class.error-box]="contentForm?.controls['textUnderSlogan']?.errors?.maxlength"
                                [disabled]="!fieldsAndVisibility.footer.textUnderSlogan?.display"
                                (keyup)="onFieldChange(null, null, null)"
                                [(ngModel)]="customTemplate.sections['footer'].data['textUnderSlogan'].label"
                                [placeholder]="'Text under slogan'"
                                [maxlength]="50"
                                [name]="'textUnderSlogan'"
                            ></text-field>
                        </div>
                        <div
                            class="form-group ml-3 clearfix"
                            *ngIf="
                                textUnderSlogan?.isFocused ||
                                contentForm?.controls['textUnderSlogan']?.errors?.maxlength
                            "
                        >
                            <span class="max-character-label">Characters left:&nbsp;</span
                            ><span class="max-character-value">{{
                                50 - customTemplate.sections["footer"].data["textUnderSlogan"].label?.length
                            }}</span>
                        </div>
                    </div>
                    <!-- <div *ngIf="fieldsAndVisibility.footer.slogan" class="clearfix">
                <div>
                    <input type="checkbox" name="msg2" [(ngModel)]="customTemplate.sections['footer'].data['slogan'].display" (ngModelChange)="onChangeFieldVisibility(null, null, null)" checked/> Signature
                </div>
                <div class="form-group ml-3 clearfix">
                    <div class="col-xs-12">
                        <div class="row">
                            <textarea class="form-control" name="mdg22" [(ngModel)]="customTemplate.sections['footer'].data['slogan'].label" (ngModelChange)='onFieldChange(null, null, null)' [disabled]="!customTemplate.sections['footer'].data['slogan'].display">Note:Contact us for queries on these questions</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
                    <div *ngIf="customTemplate?.templateType !== 'thermal_template'" class="clearfix mr-t1 row">
                        <mat-radio-group
                            class="d-flex mb-2"
                            (change)="onFieldChange(null, null, null)"
                            name="signatureType"
                        >
                            <div class="clearfix" class="col-lg-6 col-md-12">
                                <div class="mb-4px">
                                    <!-- <input
                                    type="radio"
                                    class="radio-theme ml-0"
                                    name="signatureType"
                                    (change)="chooseSigntureType('image')"
                                    (ngModelChange)="onFieldChange(null, null, null)"
                                    [checked]="customTemplate.sections.footer.data.imageSignature.display"
                                /> 
                                Image Signature-->
                                    <mat-radio-button
                                        color="primary"
                                        [value]="'image'"
                                        (change)="chooseSigntureType('image')"
                                        [checked]="customTemplate.sections.footer.data.imageSignature.display"
                                    >
                                        Image Signature
                                    </mat-radio-button>
                                </div>
                                <div class="form-group mr-l05 clearfix">
                                    <span class="clearfix">
                                        <label
                                            class="upload-button"
                                            for="signatureImg-edit"
                                            [hidden]="signatureImgAttached"
                                        >
                                            <!--  -->
                                            <!--   -->
                                            <input
                                                type="file"
                                                [disabled]="customTemplate.sections.footer.data.slogan.display"
                                                accept="image/png, image/jpeg"
                                                id="signatureImg-edit"
                                                ngFileSelect
                                                (uploadOutput)="onUploadFileOutput($event)"
                                                [options]="fileUploadOptions"
                                                [uploadInput]="uploadInput"
                                            />
                                            <small>Upload Signature</small>
                                        </label>
                                        <label
                                            for="signatureImg-edit"
                                            class="logo-preview"
                                            [hidden]="!signatureImgAttached"
                                        >
                                            <img
                                                [src]="signatureSrc"
                                                alt=""
                                                id="signatureImage"
                                                (ngModelChange)="onFieldChange(null, null, null)"
                                            />
                                        </label>
                                        <label
                                            *ngIf="isSignatureUploadInProgress"
                                            class="logo-preview"
                                            [hidden]="!signatureImgAttached"
                                        >
                                            <span><b>Uploading...</b></span>
                                        </label>
                                    </span>
                                    <button
                                        mat-button
                                        *ngIf="signatureImgAttached"
                                        (click)="removeFile()"
                                        type="button"
                                        class="mt-2 start-upload-btn btn btn-danger"
                                        matTooltip="Clicking on this, will delete image from server"
                                    >
                                        Delete
                                    </button>
                                </div>
                            </div>
                            <div class="clearfix" class="col-lg-6 col-md-12">
                                <div>
                                    <!-- <input
                                    type="radio"
                                    class="radio-theme"
                                    name="signatureType"
                                    (change)="chooseSigntureType('slogan')"
                                    (ngModelChange)="onFieldChange(null, null, null)"
                                    [checked]="customTemplate.sections.footer.data.slogan.display"
                                />
                                Slogan -->
                                    <mat-radio-button
                                        color="primary"
                                        [value]="'slogan'"
                                        (change)="chooseSigntureType('slogan')"
                                        [checked]="customTemplate.sections.footer.data.slogan.display"
                                    >
                                        Slogan
                                    </mat-radio-button>
                                </div>
                                <div class="form-group ml-3 clearfix">
                                    <div>
                                        <div>
                                            <textarea
                                                matInput
                                                class="form-control"
                                                [class.error-box]="contentForm?.controls['slogan']?.errors?.maxlength"
                                                maxlength="30"
                                                [disabled]="customTemplate.sections.footer.data.imageSignature.display"
                                                name="slogan"
                                                [(ngModel)]="customTemplate.sections['footer'].data['slogan'].label"
                                                (ngModelChange)="onFieldChange(null, null, null)"
                                            >
                                            Note:Contact us for queries on these questions
                                        </textarea
                                            >
                                            <ng-container
                                                *ngIf="
                                                    slogan?.isFocused ||
                                                    contentForm?.controls['slogan']?.errors?.maxlength
                                                "
                                            >
                                                <span class="max-character-label">Characters left:&nbsp;</span
                                                ><span class="max-character-value">{{
                                                    30 - customTemplate.sections["footer"].data["slogan"].label?.length
                                                }}</span>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-radio-group>
                    </div>
                </div>
            </div>
            <!-- <div class="clearfix">
                <div>
                    <input type="checkbox" name="msg2" [(ngModel)]="customTemplate.sections[2].content[6].display" (ngModelChange)="onChangeFieldVisibility(null, null, null)"  checked/> Note 2
                </div>
                <div class="form-group ml-3 clearfix">
                    <div class="col-xs-12">
                        <div class="row">
                            <textarea class="form-control" name="mdg22" [(ngModel)]='customTemplate.sections[2].content[6].label' (ngModelChange)='onFieldChange(null, null, null)' [disabled]="!customTemplate.sections[2].content[6].display">Note:Contact us for queries on these questions</textarea>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </form>
</div>
