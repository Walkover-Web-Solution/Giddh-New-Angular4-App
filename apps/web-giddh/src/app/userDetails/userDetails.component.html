<div class="help-support-aside setting-sidebar-wrapper" *ngIf="asideSettingMenuState === 'in'">
    <aside-setting class="setting-sidebar" (closeAsideEvent)="toggleSettingPane($event)"></aside-setting>
</div>

<div class="setting-page user-detail-page relative" id="setting-tab" *ngIf="!isCreateAndSwitchCompanyInProcess">
    <hamburger-menu></hamburger-menu>
    <!-- start of tab set -->
    <tabset #staticTabs>

        <!-- start auth tab tab -->
        <tab heading="Auth Key" [active]="activeTab == 'auth-key'" (selectTab)="onTabChanged('auth-key')"
        [id]="(activeTab == 'auth-key') ? 'giddh-page-heading': ''" >
            <div class="wrap-tab-content-pd-15" *ngIf="activeTab == 'auth-key'">
                <div class="box clearfix mt-1">
                    <h1 class="section-head pt-0">Main Auth-key</h1>
                    <form name="authKeyForm" #authKeyForm="ngForm" novalidate role="form">
                        <div class="form-group row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6">
                                <input id="authKey" class="form-control" name="userAuthKey" [(ngModel)]="userAuthKey" [readonly]="true" />
                            </div>
                        </div>
                        <div class="form-group clearfix mb-0">
                            <button class="btn btn-default" (click)="regenerateKey()">Regenerate Auth Key</button>
                            <a class="btn btn-link" href="{{apiPostmanDocUrl}}" target="_blank">Documentation</a>
                        </div>
                    </form>
                </div>
            </div>
        </tab>
        <!-- end of auth tab tab -->
        <tab heading="Mobile Number" [active]="activeTab == 'mobile-number'" (selectTab)="onTabChanged('mobile-number');"
        [id]="(activeTab == 'mobile-number') ? 'giddh-page-heading': ''">
            <div class="wrap-tab-content-pd-15" *ngIf="activeTab == 'mobile-number'">
                <div class="box clearfix mt-1">
                    <form name="mobileForm" novalidate>
                        <h1 class="section-head">Add/Edit Mobile Number</h1>
                        <div class="mr-t05">
                            <!-- ng-minlength="10" pattern="/^[0-9]{1,10}$/"  -->
                            <input decimalDigitsDirective maxlength="10" class="form-control max-width-350 pull-left " type="text" ng-required="true" placeholder="9998899988" name="mobileForm.phoneNumber" [(ngModel)]="phoneNumber" />
                            <button class="btn btn-success btn-sm mr-l1" [ladda]="isAddNewMobileNoInProcess$ | async" (click)="addNumber(phoneNumber)">Add
                            </button>
                        </div>
                        <p class="mr-t1">
                            <b>Note: </b>Format should be like 9898989898</p>
                    </form>

                    <div class="clearfix p-0" *ngIf="showVerificationBox">
                        <hr>
                        <h1 class="mr-t2 max-width-350">
                            <span>Enter verification Code</span>
                            <!--<button class="btn-link pull-right pr-0">Resend</button>-->
                        </h1>
                        <div class="mr-t05">
                            <input class="form-control max-width-350 pull-left" type="text" placeholder="Verification Code" [(ngModel)]="oneTimePassword" />
                            <button class="btn btn-success mr-l1" [ladda]="isVerifyAddNewMobileNoInProcess$ | async" (click)="verifyNumber()">Verify
                            </button>
                        </div>
                    </div>
                    <section class="row">
                        <div class="col-md-12 adjust-width pull-left">
                            <div class="row">
                                <div class="col-sm-12 mr-t1">
                                    <button class="btn btn-link btn-xs" (click)="expandLongCode = !expandLongCode">
                                        <i class="icon-plus" [ngClass]="{'icon-minus':expandLongCode}"></i> Long Code
                                        Hints
                                        (Long code no. :
                                        9229224424)
                                    </button>
                                    <div class="long-code-details" *ngIf="expandLongCode">
                                        <figure>
                                            <h1 class="section-head">Accounts</h1>
                                            <ul>
                                                <li>
                                                    <h2>Case 1:</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword accountName/uniqueName</p>
                                                        <p>Example : Giddh1 federal bank</p>
                                                        <p>This will return balance details of particular account. With last five transactions.</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <h2>Case 2:</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword accountName/uniqueName all</p>
                                                        <p>Example : Giddh1 federal all</p>
                                                        <p>This will return balance of all matched accounts.</p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </figure>
                                        <figure>
                                            <h1 class="section-head">Groups</h1>
                                            <ul>
                                                <li>
                                                    <h2>Case 1:</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword group groupName/uniqueName</p>
                                                        <p>Example : Giddh1 group sundry_debtors</p>
                                                        <p>This will return balance details of all matched group. And closing balance of all subgroups (with closing balance only).
                                                        </p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </figure>
                                        <figure>
                                            <h1 class="section-head">Net worth</h1>
                                            <ul>
                                                <li>
                                                    <h2>Case 1</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword networth</p>
                                                        <p>Example : Giddh1 networth</p>
                                                        <p>This will return net worth of last six months.</p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </figure>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <div class="mr-t2">
                        <!--two way auth-->
                        <h1 class="section-head"><input type="checkbox" (change)="changeTwoWayAuth()" [(ngModel)]="twoWayAuth" /> Two Way Authentication</h1>
                        <p class="grey" *ngIf="twoWayAuth">You will need to enter verification code at the time of login.
                        </p>
                    </div>
                </div>
            </div>
        </tab>
        <!-- end of Mobile Number tab tab -->

        <!-- start session tab tab -->
        <tab heading="Session" [active]="activeTab == 'session'" (selectTab)="onTabChanged('session')"
        [id]="(activeTab == 'session') ? 'giddh-page-heading': ''">
            <div class="wrap-tab-content-pd-15" *ngIf="activeTab == 'session'">
                <div class="box clearfix mt-1">
                    <div class="max900 d-flex pd-b1  activity-title">
                        <h1 class="section-head pt-0">Activity History</h1>
                        <button class="btn btn-primary mr-0" (click)="clearAllSession()">Delete All</button>
                    </div>
                    <p class="grey-color max900">Access and manage your activity history details from anywhere at anytime. This will help you to monitor all your account access.</p>
                    <div class="max900 mr-t15 table-responsive">
                        <table class="table table-bordered session-table basic on-mobile-view">
                            <thead>
                                <tr>
                                    <th>IP Address</th>
                                    <th>Signin Date</th>
                                    <th>Signin Time</th>
                                    <th>Duration (DD/HH/MM/SS)</th>
                                    <th>Browser Agent</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody *ngIf="userSessionList.length">
                                <tr *ngFor="let session of userSessionList; index as sessionIndex">
                                    <td data-title="IP Address">{{ session.ipAddress }}</td>
                                    <td data-title="Signin Date">{{ moment(session.createdAt).format('DD/MM/YYYY') }}</td>
                                    <td data-title="Signin Time">{{ moment(session.createdAt).format('LTS') }}</td>
                                    <td data-title="Duration (DD/HH/MM/SS)">{{moment().diff(session.createdAt, 'days')}}/{{moment(session.createdAt).subtract(moment()).format('HH/mm/ss')}}</td>
                                    <td data-title="Browser Agent"> {{ session.userAgent }}</td>
                                    <td data-title="Action" class="ico-btn text-center">
                                        <span *ngIf="userSessionId === session.sessionId">Current</span>
                                        <button type="button" class="btn btn-xs" (click)="deleteSession(session.sessionId, sessionIndex)" *ngIf="userSessionId !== session.sessionId">
                                            <i class="icon-trash" aria-hidden="true" tooltip="Delete"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="!userSessionList.length">
                                <tr>
                                    <td colspan="6" class="text-center empty-table">
                                        <h1>No Record Found !!</h1>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Subscription" [active]="activeTab == 'subscription'" (selectTab)="onTabChanged('subscription')"
        [id]="(activeTab == 'subscription') ? 'giddh-page-heading': ''">
            <div class="wrap-tab-content-pd-15">
                <subscriptions [activeTab]="activeTab"></subscriptions>
            </div>
        </tab>

        <!-- <tab heading="Company" [active]="activeTab == 'company'" (selectTab)="onTabChanged('company')">
            <user-detail-company></user-detail-company>
        </tab> -->
        <!-- end of session tab -->

    </tabset>
    <!-- end of tab set -->
</div>

<div *ngIf="isCreateAndSwitchCompanyInProcess">
    <giddh-page-loader></giddh-page-loader>
</div>
