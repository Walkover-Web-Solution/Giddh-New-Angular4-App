<hamburger-menu></hamburger-menu>
<div id="setting-tab" class="custom-tabs" *ngIf="!isCreateAndSwitchCompanyInProcess">
    <!-- start of tab set -->
    <tabset #staticTabs>

        <!-- start auth tab tab -->
        <tab heading="Auth Key" [active]="activeTab == 'auth-key'" (select)="onTabChanged('auth-key')">
            <div class="wrap-tab-content-pd-15">
                <div class="box clearfix mrT2">
                    <h1 class="section_head pdT0">Main Auth-key</h1>
                    <form name="authKeyForm" #authKeyForm="ngForm" novalidate role="form">
                        <div class="form-group col-xs-6">
                            <div class="row">
                                <input id="authKey" class="form-control" name="userAuthKey" [(ngModel)]="userAuthKey" [readonly]="true" />
                            </div>
                        </div>
                        <div class="form-group clearfix mrB0">
                            <button class="btn btn-default" (click)="regenerateKey()">Regenerate Auth Key</button>
                            <a class="btn btn-link" href="{{apiPostmanDocUrl}}" target="_blank">Documentation</a>
                        </div>
                    </form>
                </div>
            </div>
        </tab>
        <!-- end of auth tab tab -->
        <tab heading="Mobile Number" [active]="activeTab == 'mobile-number'" select="getUserDetails()" (select)="onTabChanged('mobile-number')">
            <div class="wrap-tab-content-pd-15">
                <div class="box clearfix mrT2">
                    <form class="" name="mobileForm" novalidate>
                        <h1 class="section_head">Add/Edit Mobile Number</h1>
                        <div class="mrT">
                            <!-- ng-minlength="10" pattern="/^[0-9]{1,10}$/"  -->
                            <input decimalDigitsDirective maxlength="10" class="form-control max350 pull-left " type="text" ng-required="true" placeholder="9998899988" name="mobileForm.phoneNumber" [(ngModel)]="phoneNumber" />
                            <button class="btn btn-success btn-sm mrL1" [ladda]="isAddNewMobileNoInProcess$ | async" (click)="addNumber(phoneNumber)">Add
                            </button>
                        </div>
                        <p class="mrT1">
                            <b>Note: </b>Format should be like 9898989898</p>
                    </form>

                    <div class="pd2 clearfix" *ngIf="showVerificationBox" style="padding-top:0;">
                        <hr>
                        <h1 class="mrT2">Enter verification Code</h1>
                        <div class="max350 mrT">
                            <input class="form-control" type="text" placeholder="Verification Code" [(ngModel)]="oneTimePassword" />
                        </div>
                        <button class="btn btn-success mrT" [ladda]="isVerifyAddNewMobileNoInProcess$ | async" (click)="verifyNumber()">Verify
                        </button>
                    </div>
                    <section class="row">
                        <div class="container adjust-width pull-left">
                            <div class="row">
                                <div class="col-sm-12 mrT1">
                                    <button class="btn btn-link btn-xs" (click)="expandLongCode = !expandLongCode">
                                        <i class="icon-plus" [ngClass]="{'icon-minus':expandLongCode}"></i> Long Code
                                        Hints
                                        (Long code no. :
                                        9229224424)
                                    </button>
                                    <div class="longcode-details" *ngIf="expandLongCode">
                                        <figure>
                                            <h1 class="section_head">Accounts</h1>
                                            <ul>
                                                <li>
                                                    <h2>Case 1:</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword accountName/uniqueName</p>
                                                        <p>Example : Giddh1 federal bank</p>
                                                        <p>This will return balance details of particular account. With last five transactions.</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <h2>Case 2:</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword accountName/uniqueName all</p>
                                                        <p>Example : Giddh1 federal all</p>
                                                        <p>This will return balance of all matched accounts.</p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </figure>
                                        <figure>
                                            <h1 class="section_head">Groups</h1>
                                            <ul>
                                                <li>
                                                    <h2>Case 1:</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword group groupName/uniqueName</p>
                                                        <p>Example : Giddh1 group sundry_debtors</p>
                                                        <p>This will return balance details of all matched group. And closing balance of all subgroups (with closing balance only).
                                                        </p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </figure>
                                        <figure>
                                            <h1 class="section_head">Net worth</h1>
                                            <ul>
                                                <li>
                                                    <h2>Case 1</h2>
                                                    <div class="cases">
                                                        <p>SMS format : Keyword networth</p>
                                                        <p>Example : Giddh1 networth</p>
                                                        <p>This will return net worth of last six months.</p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </figure>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <div class="mrT2">
                        <!--two way auth-->
                        <h1 class="section_head"><input type="checkbox" (change)="changeTwoWayAuth()" [(ngModel)]="twoWayAuth" /> Two Way Authentication</h1>
                        <p class="grey" *ngIf="twoWayAuth">You will need to enter verification code at the time of login.
                        </p>
                    </div>
                </div>
            </div>
        </tab>
        <!-- end of Mobile Number tab tab -->

        <!-- start session tab tab -->
        <tab heading="Session" [active]="activeTab == 'session'" (select)="onTabChanged('session')">
            <div class="wrap-tab-content-pd-15">
                <div class="box clearfix mrT2">
                    <div class="max900 d-flex pdB1  activity-title">
                        <h1 class="section_head pdT0">Activity History</h1>
                        <button class="btn btn-primary " (click)="clearAllSession()">Delete All</button>
                    </div>
                    <p class="grey_clr max900 ">Access and manage your activity history details from anywhere at anytime. This will help you to monitor all your account access.</p>
                    <div class="max900  mrT1">
                        <table class="table-bordered basic table">
                            <thead>
                                <tr>
                                    <th>IP Address</th>
                                    <th>Signin Date</th>
                                    <th>Signin Time</th>
                                    <th>Duration (DD/HH/MM/SS)</th>
                                    <th>Browser Agent</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody *ngIf="userSessionList.length">
                                <!-- <tr>
                <td>111.118.250.236</td>
                <td>02/04/2018</td>
                <td>11:22:00</td>
                <td>0d:01:55:02</td>
                <td>Chrome</td>
                <td class="ico-btn text-center">
                </td>
            </tr> -->
                                <tr *ngFor="let session of userSessionList">
                                    <td>{{ session.ipAddress }}</td>
                                    <td>{{ moment(session.createdAt).format('DD/MM/YYYY') }}</td>
                                    <td>{{ moment(session.createdAt).format('LTS') }}</td>
                                    <td>{{moment(session.createdAt).subtract(moment(), 'days')}}</td>
                                    <td> {{ session.userAgent }}</td>
                                    <td class="ico-btn text-center">
                                        <span *ngIf="userSessionId === session.sessionId">Current</span>
                                        <button type="button" class="btn btn-xs" (click)="deleteSession(session.sessionId)" *ngIf="userSessionId !== session.sessionId">
                                            <i class="icon-trash" aria-hidden="true" tooltip="Delete"></i>

                                        </button>
                                    </td>
                                </tr>

                            </tbody>
                            <tbody *ngIf="!userSessionList.length">
                                <tr>
                                    <td colspan="6" class="text-center empty_table">
                                        <h1>No Record Found !!</h1>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Subscription" [active]="activeTab == 'subscription'" (select)="onTabChanged('subscription')">
            <div class="wrap-tab-content-pd-15">
                <subscriptions></subscriptions>
            </div>
        </tab>

        <tab heading="Company" [active]="activeTab == 'company'" (select)="onTabChanged('company')">
            <user-detail-company></user-detail-company>
        </tab>
        <!-- end of session tab -->

    </tabset>
    <!-- end of tab set -->
</div>

<div *ngIf="isCreateAndSwitchCompanyInProcess">
    <div class="no-data mrT2 loader-main">
        <!-- <div class="giddh-spinner vertical-center-spinner"></div> -->
        <div class="spinner2">
            <div class="cube1"></div>
            <div class="cube2"></div>
        </div>
    </div>
</div>