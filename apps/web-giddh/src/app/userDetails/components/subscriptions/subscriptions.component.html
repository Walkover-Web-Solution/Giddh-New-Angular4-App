<div class="clearfix mrT2">
    <div class="row">
        <div class="col-md-3 col-sm-6">
            <div class="form-group">
                <label class="d-block mb-1">Select Subscribed Plan</label>
                <div class="btn-group d-block subscription-dropdown mb-2" dropdown>
                    <button id="button-basic" dropdownToggle type="button" class="btn dropdown-toggle"
                            aria-controls="dropdown-basic">
                        Button dropdown <span class="caret"></span>
                    </button>
                    <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu"
                        role="menu" aria-labelledby="button-basic">
                        <li role="menuitem">
                            <a href="javascript:void(0)">
                                <div class="clearfix">
                                    <p>Trial Plan </p>
                                    <p>Subscribed on 01/05/19</p>
                                    <p>Companies: 4 out of 10</p>
                                </div>
                                <span class="text-danger">Expired</span>
                            </a>
                        </li>
                        <li role="menuitem">
                            <a href="javascript:void(0)">
                                <div class="clearfix">
                                    <p>Trial Plan </p>
                                    <p>Subscribed on 01/05/19</p>
                                    <p>Companies: 4 out of 10</p>
                                </div>
                                <span class="text-danger">Expired</span>
                            </a>
                        </li>

                        <li role="menuitem">
                            <a href="javascript:void(0)">
                                <div class="clearfix">
                                    <p>Trial Plan </p>
                                    <p>Subscribed on 01/05/19</p>
                                    <p>Companies: 4 out of 10</p>
                                </div>
                                <span class="text-success">Expired</span>
                            </a>
                        </li>

                        <li role="menuitem">
                            <a href="javascript:void(0)">
                                <div class="clearfix">
                                    <p>Trial Plan </p>
                                    <p>Subscribed on 01/05/19</p>
                                    <p>Companies: 4 out of 10</p>
                                </div>
                                <span class="text-success">Expired</span>
                            </a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-sm-6 text-right xs-left">
            <button type="button" class="btn btn-green mt-2">Buy New Plan</button>
        </div>
    </div>


    <div class="row">
        <div class="col-md-3">
            <div class="table-responsive">
                <table class="table table-no-border mb-0">
                    <tr>
                        <th>Subscription ID</th>
                        <td>8978</td>
                    </tr>
                    <tr>
                        <th> Subscription Price</th>
                        <td>4000/- pa</td>
                    </tr>
                    <tr>
                        <th>Total Companies</th>
                        <td>2 out of 10</td>
                    </tr>
                    <tr>
                        <th>Transactions Limit</th>
                        <td>40,000</td>
                    </tr>
                    <tr>
                        <th>Validity</th>
                        <td>Yearly</td>
                    </tr>
                </table>
            </div>

            <div class="clearfix mb-2">
                <button type="button" class="btn btn-primary">Change Plan</button>
                <button type="button" class="btn btn-blue">Payment Log</button>
                
            </div>
        </div>
    </div>
</div>

<div class="clearfix mrT2 relative">
    <div class="transection-popup mb-1">
        <p>You have crossed transactions limit of your </p>
        <p><strong>Professional Plan subscribed on 01/09/2018!</strong></p>
        <p><small>Please renew your plan or pay now to continue subscription.</small></p>
    </div>

    <h2 class="subscription-title" *ngIf="subscriptions">Professional Plan ({{ subscriptions[0].subscribedOn }})</h2>
    <div class="row">
        <div class="col-sm-7 transaction-list">
            <div class="box clearfix mrT2 no-padding">
                <div class="table-responsive">
                    <table class="table basic mr0 subscription-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Transactions <span class="text-light-2">(previous+current)</span></th>
                                <th>Balance</th>
                                <th>Additional Charges</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="transactions">
                            <tr *ngFor="let transaction of transactions">
                                <td class="professional-name">{{ moment(transaction.from, 'DD-MM-YYYY').format('MMM - YY')}}</td>
                                <td>{{ transaction.totalTransactionCount }} <span class="text-light ml-05">({{transaction.previousTransactionCount}}+{{transaction.currentTransactionCount}})</span></td>
                                <td>{{ transaction.transactionBalance }}</td>
                                <td>{{ transaction.additionalCharges }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mrT2">
                <p><small>* Additional charges on transactions above 40,000 @ 0.10 Rs. per transaction</small></p>
                <p><small>* Each month includes previous month's transactions</small></p>
            </div>
        </div>


        <div class="col-sm-5 transaction-list">
            <div class="box2 clearfix mrT2">
                <div class="head-title">
                    <h3>Companies Name + Total Transactions (till today)</h3>
                </div>
                <div class="clearfix">
                    <div class="mt-1 mb-1 mr-2 ml-2">
                        <input type="search" class="form-control" placeholder="Search Company">
                    </div>
                    <div class="campanien-list" *ngIf="subscriptions">
                        <ul>
                            <li *ngFor="let company of companies "><a href="javascript:void(0)" (click)="openModal(template, company, subscriptions[0])">{{company.name}}<span>{{company.transactionCount}}</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Modal start -->
 <ng-template #template>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
    <span aria-hidden="true">&times;</span>
  </button>

    <div class="modal-body">
        <div class="modal-list mrB1">
            <ul>
                <li>
                    <h3 class="">Company Name:</h3> {{ modalRef.content.company.name }}
                </li>
                <li>
                    <h3 class="">Plan:</h3> {{ modalRef.content.subscription.plan.planName }} ({{ modalRef.content.subscription.subscribedOn }})
                </li>
                <li>
                    <h3 class="">Status:</h3> <a href="javascript:void(0)" class="text-green">{{ subscriptionStatus[modalRef.content.subscription.status] }}</a>
                </li>
            </ul>
        </div>

        <div class="table-responsive">
            <table class="table basic mr0 ">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Company's Transactions <span class="d-block text-light-2">(previous+current)</span></th>
                        <th>Plan's Transactions<span class="d-block text-light-2">(previous+current)</span></th>
                    </tr>

                    <tr *ngFor="let companyTransaction of companyTransactions">
                        <td>{{ moment(companyTransaction.from, 'DD-MM-YYYY').format('MMM') }}</td>
                        <td>{{ companyTransaction.totalTransactionCount }} ({{companyTransaction.previousTransactionCount}}+{{companyTransaction.currentTransactionCount}})</td>
                        <td>{{ companyTransaction.totalPlanTransactionCount }} ({{companyTransaction.previousPlanTransactionCount}}+{{companyTransaction.currentPlanTransactionCount}})</td>
                    </tr>

                </thead>
            </table>
        </div>

    </div>
</ng-template>
<!-- Modal end -->



<!-- <subscriptions-plans></subscriptions-plans> -->