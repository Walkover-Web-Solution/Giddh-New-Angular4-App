<div class="aside-pane">

    <div class="form_header">
        <div>
            <h3 class=""><span>Account Details</span></h3>
        </div>
    </div>

    <button id="close" class="" (click)="closeAsidePane($event)"><i class="icon-cross"></i></button>

    <div class="aside-pane-conatainer">
        <form name="addAccountForm" [formGroup]="addAccountForm" (ngSubmit)="submit()">
            <div class="aside-pane-form">
                <div class="upper-form">
                    <div class="row ">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Select Group<span class="red-text">*</span> </label>
                                <sh-select [options]="selectAccount">
                                </sh-select>
                            </div>
                        </div>
                        <div class="col-sm-8">
                            <div class="form-group">
                                <label>Account Name </label>
                                <input type="text" class="form-control" #autoFocus formControlName="name" name="accountName" placeholder="Account Name">
                            </div>
                        </div>
                    </div>
                    <div class="row ">
                        <div class="col-sm-4">
                            <div class="form-group" formGroupName="country">
                                <label>Country </label>
                                <sh-select [options]="countrySource" [isFilterEnabled]="true" formControlName="countryCode" (selected)="selectCountry($event)"></sh-select>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Currency (account) </label>
                                <input type="text" value="INR" disabled class="form-control">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group cr-dr-account">
                                <label>Opening Balance </label>
                                <!-- <input type="text" value="INR" class="form-control">
                            <span class="dr-label active">DR</span>
                            <span class="cr-label">CR</span> -->
                                <input type="text" min="0" class="form-control text-right" (click)="openingBalanceClick()" decimalDigitsDirective formControlName="openingBalance" placeholder="00.00" />
                                <div class="input-group-addon" (click)="openingBalanceTypeChnaged('DEBIT')" [ngClass]="
                 {'active-toggle-btn': addAccountForm.get('openingBalanceType').value === 'DEBIT' && addAccountForm.get('openingBalance').value > 0,
                  'cp': addAccountForm.get('openingBalance').value > 0}" *ngIf="addAccountForm.get('openingBalance').value > 0">DR.
                                </div>
                                <div class="input-group-addon" (click)="openingBalanceTypeChnaged('CREDIT')" [ngClass]="
                 {'active-toggle-btn': addAccountForm.get('openingBalanceType').value === 'CREDIT' && addAccountForm.get('openingBalance').value > 0,
                  'cp': addAccountForm.get('openingBalance').value > 0}" *ngIf="addAccountForm.get('openingBalance').value > 0">CR.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <tabset #staticTabs class="custom-tabs " id="asidePaneFormTabs">
                <tab heading="GSTIN/Address" class="gstinAddress">
                    <ng-container>
                        <div class="gstinForm" formArrayName="addresses">
                            <ng-container *ngFor="let gst of addAccountForm.get('addresses')['controls'] | slice: 0:gstDetailsLength;let i = index;let f = first; let l = last" [formGroupName]="i">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="add-address-default">
                                            <h3>Address {{i+1}}</h3>
                                            <div class="inputRadio">
                                                <input type="checkbox" name="defaultGst_{{i}}" formControlName="isDefault" (change)="isDefaultAddressSelected(gst.get('isDefault').value, i)" tooltip="DEFAULT GST" placement="bottom">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Street</label>
                                            <!-- <textarea class="form-control" rows="4" cols="5"></textarea> -->
                                            <textarea name="gstAddr_{{i}}" formControlName="address" rows="4" cols="5" maxlength="120" class="form-control"></textarea>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label>State</label>
                                            <div class="custom-select">
                                                <sh-select #states [options]="statesSource$ | async" [isFilterEnabled]="true" [forceClearReactive]="forceClear$ | async" formControlName="stateCode" style="width:100%">
                                                </sh-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label>City</label>
                                            <input type="text" disabled class="form-control" placeholder="City Name">
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label>Zip Code</label>
                                            <input type="text" disabled class="form-control" placeholder="Enter Code">
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label>GSTIN</label>
                                            <input type="text" class="form-control" autocomplete="false" maxlength="15" formControlName="gstNumber" (keyup)="getStateCode(gst, states)" name="gst_{{i}}" placeholder="" />
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label>Party Type<span class="red-text">*</span></label>
                                            <div class="custom-select pos-rel">
                                                <sh-select [options]="partyTypeSource" formControlName="partyType" [isFilterEnabled]="true"></sh-select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </div>
                    </ng-container>
                    <div class="row" *ngIf="l">
                        <a class="text-right col-xs-12 btn-link" href="javascript:void(0);" (click)="addGstDetailsForm(gst.get('gstNumber').value)">
                            <i class="fa fa-plus"></i> + Add Address
                        </a>
                    </div>
                    <!-- <div class="row">
                        <div class="col-sm-12"> <button class="btn btn-primary mrT2" (click)="addAddress = !addAddress">+ Add
                Address</button></div>
                    </div> -->
                    <div class="row">
                        <div class="col-sm-12 mrT3">
                            <div class="button-group">
                                <button class="btn btn-cancel">Cancel</button>
                                <button type="submit" class="btn btn-success" [ladda]="createAccountInProcess$ | async" [disabled]="addAccountForm.invalid">Save</button>
                            </div>
                        </div>
                    </div>


                </tab>
                <tab heading="Contact" class="ContactFromWrap">
                    <div class="contactForm">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Attention to (will be used in Invoice)</label>
                                    <input type="text" class="form-control" formControlName="attentionTo" name="attention" />
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Mobile Number</label>
                                    <div class="d-flex">
                                        <sh-select [placeholder]="'+91'" [options]="countryPhoneCode" formControlName="mobileCode" style="width: 60px; margin-right: 10px;"></sh-select>
                                        <input type="text" type="text" class="form-control" formControlName="mobileNo" digitsOnlyDirective name="mobileno." placeholder="98XXXXXXXX">
                                        <small class="clearfix error-msg" *ngIf="addAccountForm.get('mobileNo').value && !addAccountForm.get('mobileCode').value">Phone code
                                      required
                                     </small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Email Id</label>
                                    <input type="email" class="form-control" formControlName="email" name="emailId" />
                                    <span class="error-msg" *ngIf="addAccountForm.get('email').dirty && addAccountForm.get('email').errors">*Invalid Email
                               address</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>PAN</label>
                                    <input type="text" disabled class="form-control" placeholder="PAN Number">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Other Details</label>
                                    <input type="text" disabled class="form-control" placeholder="Other">
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 mrT3">
                            <div class="button-group">
                                <button class="btn btn-cancel">Cancel</button>
                                <button class="btn btn-success">Save</button>
                            </div>
                        </div>
                    </div>
                </tab>


                <!-- bank details visible when sundry credtiors selected , right now is hide -->
                <tab heading="Bank Details" class="bankDetialsForm" *ngIf="bankDetails">
                    <div *ngIf="showBankDetail">
                        <div formArrayName="accountBankDetails">
                            <div class="" *ngFor="let bank of addAccountForm.get('accountBankDetails')['controls'];let i = index;let f = first; let l = last" [formGroupName]="i">
                                <div class="form-group col-xs-5">
                                    <label for="">Bank Name</label>
                                    <input type="text" class="form-control" name="bankName_{{i}}" formControlName="bankName" />
                                </div>
                                <div class="form-group col-xs-4">
                                    <div class="">
                                        <label for="">Account No.</label>
                                        <input type="text" class="form-control" name="accountNum_{{i}}" formControlName="bankAccountNo" />
                                    </div>
                                </div>
                                <div class="form-group col-xs-3">
                                    <label for="">IFSC Code</label>
                                    <input type="text" class="form-control" name="ifsc_{{i}}" formControlName="ifsc" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="bankDetailForm" formArrayName="accountBankDetails">
                        <div class=" row " *ngFor="let bank of addAccountForm.get( 'accountBankDetails')[ 'controls'];let i=i ndex;let f=f irst; let l=l ast " [formGroupName]="i ">
                            <div class="col-sm-5 ">
                                <div class="form-group ">
                                    <label>Bank Name</label>
                                    <input type="text " class="form-control " name="bankName_{{i}} " formControlName="bankName " />
                                </div>
                            </div>
                            <div class="col-sm-4 ">
                                <div class="form-group ">
                                    <label>Account No.</label>
                                    <div class="d-flex ">
                                        <input type="text " class="form-control " name="accountNum_{{i}} " formControlName="bankAccountNo " />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3 ">
                                <div class="form-group ">
                                    <label>IFSC Code</label>
                                    <div class="d-flex ">
                                        <input type="text " class="form-control " name="ifsc_{{i}} " formControlName="ifsc " />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <!-- <div class="row ">
                        <div class="col-sm-12 ">
                            <div class="button-group mrT3 ">
                                <button class="btn btn-cancel ">Cancel</button>
                                <button class="btn btn-success ">Save</button>
                            </div>
                        </div>
                    </div> -->


                </tab>

                <tab heading="Others " class="otherFormWrap ">

                    <div class="otherForm ">
                        <div class="row ">
                            <div class="col-sm-6 ">
                                <div class="form-group ">
                                    <label>Account Unique Name</label>
                                    <input type="text" class="form-control" [control]="addAccountForm.get('uniqueName')" textCaseChangeDirective UniqueNameDirective formControlName="uniqueName" name="accUnqname" />
                                </div>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="">Balance for Trigger</label>
                                <div class="input-group" [ngClass]="{'input-group': addAccountForm.get('closingBalanceTriggerAmount').value > 0}">
                                    <input type="number" min="0" class="form-control text-right" formControlName="closingBalanceTriggerAmount" placeholder="00.00" />
                                    <div class="input-group-addon" (click)="closingBalanceTypeChanged('DEBIT')" [ngClass]="
                {'active-toggle-btn': addAccountForm.get('closingBalanceTriggerAmountType').value === 'DEBIT',
                'cp': addAccountForm.get('closingBalanceTriggerAmount').value > 0}" *ngIf="addAccountForm.get('closingBalanceTriggerAmount').value > 0">DR.
                                    </div>
                                    <div class="input-group-addon" (click)="closingBalanceTypeChanged('CREDIT')" [ngClass]="
                {'active-toggle-btn': addAccountForm.get('closingBalanceTriggerAmountType').value === 'CREDIT',
                'cp': addAccountForm.get('closingBalanceTriggerAmount').value > 0}" *ngIf="addAccountForm.get('closingBalanceTriggerAmount').value > 0">CR.
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="row ">
                            <div class="col-sm-6 ">
                                <div class="form-group ">
                                    <label>Default Discount</label>
                                    <input type="text " class="form-control " placeholder="Select Discount ">
                                </div>
                            </div>
                            <div class="col-sm-6 ">
                                <div class="form-group ">
                                    <label>Default Tax</label>
                                    <input type="text " class="form-control " placeholder="Select Tax ">
                                </div>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-sm-12 ">
                                <div class="form-group ">
                                    <label>Description</label>
                                    <textarea rows="3 " cols=" " name="description " formControlName="description " class="form-control "></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="row ">
                            <div class="col-sm-10 ">
                                <div class="form-group ">
                                    <label>Move to Group</label>
                                    <input type="text " class="form-control " placeholder="Group Name ">
                                </div>
                            </div>
                            <div class="col-sm-2 pdL0 ">
                                <label>&nbsp;</label>
                                <button class="btn btn-pink ">Move</button>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-sm-10 ">
                                <div class="form-group ">
                                    <label>Select account to merge with</label>
                                    <input type="text " class="form-control " placeholder="Select account ">
                                </div>
                            </div>
                            <div class="col-sm-2 pdL0 ">
                                <label>&nbsp;</label>
                                <button class="btn btn-pink ">Merge</button>
                            </div>
                        </div>
                    </div>

                </tab>

            </tabset>
        </form>
    </div>
</div>

<!-- </div> -->
