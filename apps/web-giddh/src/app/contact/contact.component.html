<ng-container
    appTranslate
    [file]="'contact'"
    (localeData)="localeData = $event"
    (commonLocaleData)="commonLocaleData = $event"
    (translationComplete)="translationComplete($event)"
>
    <div class="relative white-bg">
        <hamburger-menu *ngIf="activeTab !== 'vendor'" [pageHeading]="getPageHeading()"></hamburger-menu>
        <hamburger-menu [pageHeading]="localeData?.page_heading" *ngIf="activeTab === 'vendor'"></hamburger-menu>

        <mat-tab-group
            #staticTabs
            class="custom-mat-tabs customer-aging"
            [ngClass]="{ 'hide-header': activeTab === 'vendor' }"
            (selectedTabChange)="tabChange($event)"
            [selectedIndex]="activeTab === 'customer' || activeTab === 'vendor' ? 0 : 1"
            animationDuration="0ms"
        >
            <mat-tab
                [label]="activeTab === 'customer' ? localeData?.customer : localeData?.vendor"
                [id]="activeTab !== 'aging-report' ? 'giddh-page-heading' : ''"
            >
                <div class="container-fluid">
                    <div
                        *ngIf="
                            (activeTab === 'customer' && sundryDebtorsAccounts?.length) ||
                            (activeTab === 'vendor' && sundryCreditorsAccounts?.length)
                        "
                    >
                        <div
                            class="top-bar customer-top-bar clearfix"
                            [ngClass]="{ 'vendor-top-bar': activeTab === 'vendor' }"
                        >
                            <div class="customer-form-inline">
                                <div class="wrap-search-entity d-flex">
                                    <div class="dis mr-r15 pull-left on-desktop-view">
                                        <div class="btn-group pull-right">
                                            <button
                                                mat-raised-button
                                                *ngIf="activeTab == 'customer'"
                                                class="btn-sky-blue mr-0"
                                                (click)="openAddAndManage('customer')"
                                            >
                                                {{ localeData?.new_customer }}
                                            </button>
                                            <button
                                                mat-raised-button
                                                *ngIf="activeTab == 'vendor'"
                                                class="btn-sky-blue mr-0"
                                                (click)="openAddAndManage('vendor')"
                                            >
                                                {{ localeData?.new_vendor }}
                                            </button>
                                        </div>
                                    </div>
                                    <div
                                        class="form-group mr-r15 pull-left linked-entities mb-0"
                                        name="currentBranch"
                                        *ngIf="
                                            currentCompanyBranches?.length > 2 && currentOrganizationType === 'COMPANY'
                                        "
                                    >
                                        <div>
                                            <sh-select
                                                [options]="currentCompanyBranches"
                                                [(ngModel)]="currentBranch.uniqueName"
                                                [showClear]="false"
                                                [ItemHeight]="33"
                                                width="100%"
                                                (selected)="handleBranchChange($event)"
                                                [isFilterEnabled]="true"
                                                [placeholder]="commonLocaleData?.app_select_entity"
                                                [fixedValue]="currentBranch?.alias"
                                            >
                                                <ng-template #optionTemplate let-option="option">
                                                    <ng-container>
                                                        <a href="javascript:void(0)" class="list-item d-flex">
                                                            <span class="entity-icon">
                                                                <i
                                                                    class="icon-branch-icon pull-right"
                                                                    *ngIf="!option.isCompany"
                                                                    tooltip="{{ commonLocaleData?.app_branch }}"
                                                                ></i>
                                                                <i
                                                                    class="icon-company-profile pull-right"
                                                                    *ngIf="option.isCompany"
                                                                    tooltip="{{ commonLocaleData?.app_company }}"
                                                                ></i>
                                                            </span>
                                                            <span class="entity-details">
                                                                <div class="item giddh-limit single-line-clamp">
                                                                    {{ option?.label || "-" }}
                                                                </div>
                                                                <div class="item-unique giddh-limit single-line-clamp">
                                                                    {{ option?.name || "-" }}
                                                                </div>
                                                            </span>
                                                        </a>
                                                    </ng-container>
                                                </ng-template>
                                            </sh-select>
                                        </div>
                                    </div>
                                    <form
                                        *ngIf="sundryCreditorsAccounts?.length || sundryDebtorsAccounts?.length"
                                        #invoiceForm="ngForm"
                                        novalidate
                                        class="form-inline input-grp-date-range-picker position-relative"
                                    >
                                        <div class="form-group mr-r15 d-flex flex-fill">
                                            <div
                                                class="form-group custom-datepicker mr-r15"
                                                (click)="showGiddhDatepicker($event)"
                                            >
                                                <input
                                                    matInput
                                                    type="text"
                                                    name="selectedDateRange"
                                                    [value]="selectedDateRangeUi ? selectedDateRangeUi : ''"
                                                    class="giddh-datepicker form-control date-range-picker"
                                                />
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div
                                    class="
                                        clear-filter
                                        align-items-center
                                        d-flex
                                        justify-content-xl-center justify-content-lg-start
                                        w-50
                                    "
                                    *ngIf="showClearFilter"
                                >
                                    <button class="btn btn-filters mr-0" (click)="resetAdvanceSearch()">
                                        <span class="icon-cross"></span> {{ commonLocaleData?.app_clear_filter }}
                                    </button>
                                </div>
                                <!-- Invoice filter section ends -->
                                <div class="button-content">
                                    <button
                                        mat-raised-button
                                        class="btn btn-group btn-filter desktop-button-filter"
                                        *ngIf="selectedCheckedContacts?.length > 0"
                                        (click)="clearSelectedContacts()"
                                    >
                                        <span class="icon-cross"></span> {{ commonLocaleData?.app_clear_selected }}
                                    </button>
                                </div>

                                <div class="pd-t1-md d-flex justify-content-between">
                                    <!-- On company class will show only if we are on company mode and branches length will be less than equal 2 -->
                                    <div class="d-flex justify-content-between">
                                        <div
                                            class="pull-left header-left d-none"
                                            [ngClass]="{ 'on-company': currentCompanyBranches?.length >= 2 }"
                                        >
                                            <div
                                                class="form-group max-width-250 search-field mb-0"
                                                *ngIf="activeTab !== 'aging'"
                                            >
                                                <text-field
                                                    type="text"
                                                    name="searchStr"
                                                    [placeholder]="localeData?.name_email_mobile"
                                                    [cssClass]="'form-control'"
                                                    [(ngModel)]="searchStr"
                                                    (ngModelChange)="searchStr$.next($event)"
                                                ></text-field>
                                                <span class="input-addon">
                                                    <i class="icon-search"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="customer-footer-box pull-right">
                                            <button
                                                mat-raised-button
                                                class="btn btn-group btn-filter mobile-button-filter"
                                                *ngIf="selectedAccountsList?.length > 0"
                                                (click)="clearSelectedContacts()"
                                            >
                                                <span class="icon-cross"></span>

                                                <span>{{ commonLocaleData?.app_clear }}</span>
                                            </button>
                                        </div>
                                        <div class="mr-0" *ngIf="activeTab !== 'aging'">
                                            <select-table-column
                                                [moduleType]="moduleType"
                                                [customiseColumns]="customiseColumns"
                                                (selectedColumns)="showSelectedHeaderColumns($event)"
                                                [localeData]="localeData"
                                                [commonLocaleData]="commonLocaleData"
                                                [iconClass]="'icon-options select-multiple-icon-options'"
                                                (isLoading)="isLoading = $event"
                                            >
                                            </select-table-column>
                                        </div>
                                    </div>
                                    <div class="btn-group pull-right on-mobile-view mr-t1">
                                        <button
                                            mat-raised-button
                                            *ngIf="activeTab == 'customer' && sundryDebtorsAccounts?.length"
                                            class="btn-sky-blue mr-r05 w-100"
                                            (click)="openAddAndManage('customer')"
                                        >
                                            {{ localeData?.new_customer }}
                                        </button>
                                        <button
                                            mat-raised-button
                                            *ngIf="activeTab == 'vendor' && sundryCreditorsAccounts?.length"
                                            class="btn-sky-blue w-100"
                                            (click)="openAddAndManage('vendor')"
                                        >
                                            {{ localeData?.new_vendor }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="top-content">
                        <div
                            class="d-flex w-100 justify-content-between overflow-x-auto"
                            [hidden]="
                                (activeTab === 'customer' && !sundryDebtorsAccounts?.length) ||
                                (activeTab === 'vendor' && !sundryCreditorsAccounts?.length)
                            "
                        >
                            <div
                                class="
                                    total-details-box
                                    mr-r05
                                    d-flex
                                    justify-content-between
                                    count-box
                                    align-items-end
                                    position-relative
                                    min-width-230
                                "
                            >
                                <h5>
                                    <ng-container *ngIf="!selectedCheckedContacts?.length">{{
                                        activeTab === "customer" ? localeData?.customers : localeData?.vendors
                                    }}</ng-container>
                                    <ng-container *ngIf="selectedCheckedContacts?.length">{{
                                        activeTab === "customer"
                                            ? localeData?.customers_selected
                                            : localeData?.vendors_selected
                                    }}</ng-container>
                                    <div>
                                        <span *ngIf="!selectedCheckedContacts?.length" class="number-total">{{
                                            activeTab === "customer" ? totalCustomers : totalVendors
                                        }}</span>
                                        <span
                                            *ngIf="selectedCheckedContacts?.length > 0"
                                            class="number-total total-customer-vendor-count"
                                            ><strong>{{ selectedCheckedContacts?.length }}</strong
                                            >/{{ activeTab === "customer" ? totalCustomers : totalVendors }}</span
                                        >
                                    </div>
                                </h5>
                                <div class="more-button align-items-center">
                                    <button
                                        mat-icon-button
                                        class="pos-abs arrow-icon"
                                        [matMenuTriggerFor]="downloadCsvEmail"
                                        id="button-basic"
                                    >
                                        <span class="icon-arrow-down"></span>
                                    </button>
                                    <mat-menu #downloadCsvEmail="matMenu">
                                        <button
                                            mat-menu-item
                                            *ngIf="selectedCheckedContacts?.length"
                                            (click)="openEmailDialog()"
                                        >
                                            {{ commonLocaleData?.app_email }}
                                        </button>
                                        <button mat-menu-item (click)="downloadCSV()">
                                            {{ commonLocaleData?.app_download_csv }}
                                        </button>
                                        <!-- <button
                                            mat-menu-item
                                            *ngIf="selectedAccountsList?.length > 0 && activeTab === 'vendor'"
                                            (click)="openBulkPaymentModal()"
                                        >
                                            {{ localeData?.bulk_payment }}
                                        </button> -->
                                    </mat-menu>
                                </div>
                            </div>
                            <div class="total-details-box mr-r05 border-none opening-box min-width-230">
                                <h5>
                                    {{ localeData?.opening }}
                                    <div>
                                        <span
                                            class="d-inline-flex number-total"
                                            *ngIf="
                                                activeTab === 'customer' &&
                                                openingBalance?.type === 'CREDIT' &&
                                                formatAmountInCurrency(openingBalance?.amount) > 0
                                            "
                                            >-</span
                                        >
                                        <span
                                            class="d-inline-flex number-total"
                                            *ngIf="
                                                activeTab === 'vendor' &&
                                                openingBalance?.type === 'DEBIT' &&
                                                formatAmountInCurrency(openingBalance?.amount) > 0
                                            "
                                            >-</span
                                        >
                                        <span class="d-inline-flex number-total">
                                            <amount-field
                                                [amount]="openingBalance?.amount"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            ></amount-field
                                            >/-
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box mr-r05 border-none sales-purchase min-width-230">
                                <h5>
                                    <span *ngIf="activeTab === 'vendor'">{{ commonLocaleData?.app_purchase }}</span>
                                    <span *ngIf="activeTab === 'customer'">{{ commonLocaleData?.app_sales }}</span>
                                    <div>
                                        <span class="d-inline-flex number-total">
                                            <amount-field
                                                [amount]="totalSales"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >/-
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box mr-r05 border-none payment-receipt min-width-230">
                                <h5>
                                    <span *ngIf="activeTab === 'vendor'">{{ commonLocaleData?.app_payment }}</span>
                                    <span *ngIf="activeTab === 'customer'">{{ commonLocaleData?.app_receipt }}</span>
                                    <div>
                                        <span class="d-inline-flex number-total">
                                            <amount-field
                                                [amount]="totalReceipts"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >/-
                                        </span>
                                    </div>
                                </h5>
                            </div>
                            <div class="total-details-box border-none closing-box min-width-230">
                                <h5>
                                    {{ localeData?.closing }}
                                    <div>
                                        <span class="d-inline-flex number-total">
                                            <amount-field
                                                [amount]="closingBalance"
                                                [currencySymbol]="false"
                                                [currencyCode]="false"
                                            >
                                            </amount-field
                                            >/-
                                        </span>
                                    </div>
                                </h5>
                            </div>
                        </div>
                    </div>
                    <div
                        class="text-center top-aging-table-top separate-top-aging pd-1 mr-t1"
                        *ngIf="isMobileScreen && (sundryDebtorsAccounts?.length || sundryCreditorsAccounts?.length)"
                    >
                        <p (click)="showGiddhDatepicker($event)">
                            <strong>{{ commonLocaleData?.app_due_as_on }} </strong>
                            <span *ngIf="selectedDateRangeUi"> {{ selectedDateRangeUi }} </span>
                        </p>
                    </div>
                    <div class="contact-main customer-page on-mobile-view">
                        <div class="pd-b2 mr-b1">
                            <div>
                                <div *ngIf="!isMobileScreen && !isGetAccountsInProcess">
                                    <ng-container *ngTemplateOutlet="mainTable"></ng-container>
                                </div>

                                <giddh-page-loader *ngIf="!isMobileScreen && isGetAccountsInProcess">
                                </giddh-page-loader>

                                <div *ngIf="isMobileScreen">
                                    <ng-container *ngTemplateOutlet="mainTable"></ng-container>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab [label]="localeData?.aging_report" [id]="activeTab === 'aging-report' ? 'giddh-page-heading' : ''">
                <aging-report
                    *ngIf="activeTab === 'aging-report'"
                    [localeData]="localeData"
                    [commonLocaleData]="commonLocaleData"
                    (createNewCustomerEvent)="openAddAndManage('customer')"
                >
                </aging-report>
            </mat-tab>
        </mat-tab-group>
    </div>

    <!-- region Modal for Mail/SMS for vendore-->
    <ng-template #mailModal *ngIf="activeTab === 'vendor'" tabindex="1">
        <div>
            <div class="modal-header theme-bg pd-l2 pd-r2">
                <h3 class="modal-title bg" id="modal-title-mail-vendor">{{ messageBody.header.set }}</h3>
                <button
                    mat-icon-button
                    aria-hidden="true"
                    class="close-btn-in-mat-model"
                    data-dismiss="modal"
                    [attr.aria-label]="commonLocaleData?.app_close"
                    (click)="closeAllDialogs()"
                >
                    ×
                </button>
            </div>
            <div class="modal-body pd-l2 pd-r2 clearfix">
                <h1 class="mr-b1 font-16" *ngIf="messageBody.type == 'Email'">{{ localeData?.enter_subject }}:</h1>
                <text-field
                    *ngIf="messageBody.type == 'Email'"
                    [cssClass]="'form-control mr-b1'"
                    #subject
                    [(ngModel)]="messageBody.subject"
                    type="text"
                    [placeholder]="localeData?.enter_subject_placeholder"
                >
                </text-field>
                <h1 class="mr-b1 font-16">{{ localeData?.type_message_body }}:</h1>
                <textarea
                    matInput
                    #messageBox
                    [(ngModel)]="messageBody.msg"
                    class="form-control resize-none"
                    rows="4"
                    [placeholder]="localeData?.type_message_body_placeholder"
                ></textarea>
                <small class="mr-t05 mr-b05 grey">{{ localeData?.tip }}</small>

                <div class="mt-3">
                    <mat-chip-list class="font-12">
                        <mat-chip *ngFor="let val of dataVariables" (click)="addValueToMsg(val)">{{
                            val.name
                        }}</mat-chip>
                    </mat-chip-list>
                </div>
                <div class="mr-t4">
                    <button
                        mat-raised-button
                        class="btn-sm btn-success pull-right mr-l1 send-email"
                        (click)="send('sundrycreditors')"
                    >
                        {{ messageBody.btn.set }}
                    </button>
                </div>
            </div>
        </div>
    </ng-template>
    <!--endregion-->

    <!--region Modal for Mail/SMS for customer-->
    <ng-template #mailModal *ngIf="activeTab === 'customer'" tabindex="-1" class="email-dialog-box">
        <div>
            <div class="modal-header theme-bg pd-l2 pd-r2">
                <h3 class="modal-title bg" id="modal-title-mail-customer">{{ messageBody.header.set }}</h3>
                <button
                    mat-icon-button
                    class="close-btn-in-mat-model"
                    [attr.aria-label]="commonLocaleData?.app_close"
                    (click)="closeAllDialogs()"
                >
                    ×
                </button>
            </div>

            <div class="modal-body pd-l2 pd-r2 clearfix">
                <h1 class="mr-b1 font-16" *ngIf="messageBody.type == 'Email'">{{ localeData?.enter_subject }}:</h1>
                <text-field
                    *ngIf="messageBody.type == 'Email'"
                    [cssClass]="'form-control mr-b1'"
                    #subject
                    [(ngModel)]="messageBody.subject"
                    type="text"
                    [placeholder]="localeData?.enter_subject_placeholder"
                >
                </text-field>

                <h1 class="mr-b1 font-16">{{ localeData?.type_message_body }}:</h1>
                <textarea
                    matInput
                    #messageBox
                    [(ngModel)]="messageBody.msg"
                    class="form-control resize-none"
                    rows="4"
                    [placeholder]="localeData?.type_message_body_placeholder"
                ></textarea>
                <small class="mr-t05 mr-b05 grey">{{ localeData?.tip }}</small>

                <div class="mt-3">
                    <mat-chip-list class="font-12">
                        <mat-chip *ngFor="let val of dataVariables" (click)="addValueToMsg(val)">{{
                            val.name
                        }}</mat-chip>
                    </mat-chip-list>
                </div>

                <div class="mr-t4">
                    <button
                        mat-raised-button
                        class="btn-sm btn-success pull-right mr-l1 send-email"
                        (click)="send('sundrydebtors')"
                    >
                        {{ messageBody.btn.set }}
                    </button>
                </div>
            </div>
        </div>
    </ng-template>
    <!--endregion-->

    <div class="aside-overlay" *ngIf="accountAsideMenuState === 'in'"></div>

    <div *ngIf="accountAsideMenuState === 'in'">
        <aside-menu-account
            [activeGroupUniqueName]="selectedGroupForCreateAcc"
            [activeAccountDetails]="activeAccountDetails"
            [isUpdateAccount]="isUpdateAccount"
            class="account-aside-menu-state transform-inherit"
            [@slideInOut]="accountAsideMenuState"
            [commonLocaleData]="commonLocaleData"
            (closeAsideEvent)="toggleAccountAsidePane($event)"
            (getUpdateList)="getUpdatedList($event)"
        >
        </aside-menu-account>
    </div>

    <div class="aside-overlay" *ngIf="paymentAsideMenuState === 'in'"></div>
    <div class="vendor-pay-now" *ngIf="paymentAsideMenuState === 'in'">
        <payment-aside
            class="account-aside-menu-state transform-inherit"
            [selectedAccForPayment]="selectedAccForPayment"
            [localeData]="localeData"
            [commonLocaleData]="commonLocaleData"
        >
        </payment-aside>
    </div>

    <ng-template #mainTable>
        <div class="mobile-card-wrapper table-responsive vendor-page all-table">
            <ng-container *ngIf="activeTab === 'customer'">
                <table
                    *ngIf="searchStr || sundryDebtorsAccounts?.length"
                    mat-table
                    [dataSource]="sundryDebtorsAccounts"
                    class="w-100"
                    (mouseenter)="showSelectAll = true"
                    (mouseleave)="showSelectAll = false"
                >
                    <ng-container matColumnDef="customer_name">
                        <th
                            class="mat-customer-name"
                            mat-header-cell
                            *matHeaderCellDef
                            #searchCustomerContainer
                            (clickOutside)="handleClickOutside($event, searchCustomerContainer, 'name')"
                        >
                            <div class="d-flex select-all-checkbox-wrapper">
                                <mat-checkbox
                                    class="pos-abs"
                                    color="primary"
                                    *ngIf="selectedCheckedContacts?.length || showSelectAll"
                                    [(ngModel)]="allSelectionModel"
                                    (ngModelChange)="toggleAllSelection(allSelectionModel)"
                                ></mat-checkbox>
                                <div class="d-flex align-items-center">
                                    <div>
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showNameSearch,
                                                    fieldName: 'name',
                                                    formControl: searchedName,
                                                    title: commonLocaleData?.app_customer_name
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                    <ng-container
                                        *ngTemplateOutlet="
                                            !showNameSearch ? sortingTemplate : '';
                                            context: { $implicit: 'name' }
                                        "
                                    ></ng-container>
                                </div>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            class="position-relative word-wrap"
                            [attr.data-title]="localeData?.customer"
                        >
                            <div class="customer-name-filed cursor-pointer" (dblclick)="trigger?.openMenu()">
                                <div class="select-single-checkbox-wrapper">
                                    <mat-checkbox
                                        color="primary"
                                        class="mr-2 checkbox-left-side-in-table"
                                        [ngClass]="{ 'visible-check-box': selectedCheckedContacts.length }"
                                        type="checkbox"
                                        [(ngModel)]="account.isSelected"
                                        (change)="selectAccount($event, account)"
                                    >
                                    </mat-checkbox>
                                    <span>{{ account.name }}</span>
                                </div>

                                <button
                                    mat-icon-button
                                    id="edit-model-basic"
                                    class="table-menu-first-td"
                                    [matMenuTriggerFor]="editModelBasic"
                                    #trigger="matMenuTrigger"
                                >
                                    <span class="icon-dots-three-vertical"></span>
                                </button>

                                <mat-menu #editModelBasic="matMenu">
                                    <div class="account-detail-custom-header">
                                        <div class="d-flex p-0">
                                            <div class="account-detail-padding flex-fill border-right-0">
                                                <h3 class="account-detail-custom-title word-break">
                                                    <span (click)="updateCustomerAcc('customer', account)">
                                                        {{ account?.name }}
                                                    </span>
                                                </h3>
                                            </div>

                                            <button
                                                mat-icon-button
                                                class="account-detail-padding"
                                                (click)="updateCustomerAcc('customer', account)"
                                            >
                                                <img src="{{ imgPath }}path.svg" />
                                            </button>
                                        </div>
                                        <div class="custom-detail">
                                            <h4>{{ account?.mobileNo }}</h4>
                                            <h4>{{ account?.email }}</h4>
                                            <h4>{{ account?.gstIn }}</h4>
                                        </div>
                                    </div>
                                    <button
                                        mat-menu-item
                                        *ngIf="!isMobileScreen"
                                        class="menu-table-item"
                                        (click)="performActions(1, account)"
                                    >
                                        {{ commonLocaleData?.app_goto_ledger }}
                                    </button>
                                    <button mat-menu-item class="menu-table-item" (click)="performActions(2, account)">
                                        {{ commonLocaleData?.app_generate_invoice }}
                                    </button>
                                    <button
                                        mat-menu-item
                                        class="menu-table-item"
                                        (click)="performActions(4, account, $event)"
                                    >
                                        {{ commonLocaleData?.app_send_email }}
                                    </button>
                                </mat-menu>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="parent_group">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex align-items-center">
                                {{ commonLocaleData?.app_parent_group }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'group' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_parent_group">
                            {{ account?.groupUniqueName }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="opening">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ localeData?.opening }}
                                <ng-container
                                    *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'openingBalance' }"
                                >
                                </ng-container>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            [ngClass]="{
                                'word-wrap text-right': true,
                                'negative-balance':
                                    account.openingBalance?.type === 'CREDIT' &&
                                    formatAmountInCurrency(account.openingBalance?.amount) > 0
                            }"
                            [attr.data-title]="localeData?.opening"
                        >
                            <div class="d-flex justify-content-end">
                                <span
                                    *ngIf="
                                        account.openingBalance?.type === 'CREDIT' &&
                                        formatAmountInCurrency(account.openingBalance?.amount) > 0
                                    "
                                    >-</span
                                >
                                <span>
                                    <amount-field
                                        [amount]="account.openingBalance?.amount"
                                        [currencySymbol]="false"
                                        [currencyCode]="false"
                                    >
                                    </amount-field>
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="sales">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ commonLocaleData?.app_sales }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'debitTotal' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_sales">
                            <span class="d-flex justify-content-end">
                                <amount-field
                                    [amount]="account.debitTotal"
                                    [currencySymbol]="false"
                                    [currencyCode]="false"
                                >
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="receipt">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ commonLocaleData?.app_receipt }}
                                <ng-container
                                    *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'creditTotal' }"
                                >
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_receipt">
                            <span class="d-flex justify-content-end">
                                <amount-field
                                    [amount]="account.creditTotal"
                                    [currencySymbol]="false"
                                    [currencyCode]="false"
                                >
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="closing">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ localeData?.closing }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'amountDue' }">
                                </ng-container>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            class="word-wrap text-right"
                            [attr.data-title]="localeData?.closing"
                            [ngClass]="{
                                'negative-balance':
                                    account.closingBalance?.type === 'CREDIT' &&
                                    formatAmountInCurrency(account.closingBalance?.amount) > 0
                            }"
                        >
                            <div class="d-flex justify-content-end">
                                <span
                                    *ngIf="
                                        account.closingBalance?.type === 'CREDIT' &&
                                        formatAmountInCurrency(account.closingBalance?.amount) > 0
                                    "
                                    >-</span
                                >
                                <span>
                                    <amount-field
                                        [amount]="account.closingBalance?.amount"
                                        [currencySymbol]="false"
                                        [currencyCode]="false"
                                    >
                                    </amount-field>
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="contacts">
                        <th class="contact-header" mat-header-cell *matHeaderCellDef>
                            <div class="d-flex">
                                <div class="flex-fill">
                                    {{ localeData?.contacts }}
                                </div>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="localeData?.contacts" class="font-12">
                            <div>
                                {{ account.email || "-" }}
                            </div>
                            <div>
                                {{ account.mobileNo || "-" }}
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="gstin">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex align-items-center">
                                {{ commonLocaleData?.app_tax_number }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'gstin' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_tax_number">
                            {{ account.gstIn || "-" }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="state">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex align-items-center">
                                {{ commonLocaleData?.app_state }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'state' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_state">
                            {{ account?.state?.name || "-" }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="comment">
                        <th class="comment-header" mat-header-cell *matHeaderCellDef>
                            {{ localeData?.comment }}
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account; let idx = index"
                            [attr.data-title]="localeData?.comment"
                            (click)="updateCommentIdx = idx"
                        >
                            <ng-container *ngIf="updateCommentIdx != idx">
                                {{ account.comment }}
                                <span [class.text-gray]="!account.comment" *ngIf="!account.comment">{{
                                    localeData?.add_comment
                                }}</span>
                            </ng-container>
                            <ng-container *ngIf="updateCommentIdx === idx">
                                <textarea
                                    matInput
                                    class="form-control"
                                    maxlength="100"
                                    autofocus="true"
                                    [placeholder]="localeData?.enter_comment_here"
                                    [(ngModel)]="account.comment"
                                    (blur)="updateComment(account)"
                                ></textarea>
                            </ng-container>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let idx = index"></tr>
                </table>
            </ng-container>

            <ng-container *ngIf="activeTab === 'vendor'" class="sticky-table">
                <table
                    *ngIf="searchStr || sundryCreditorsAccounts?.length"
                    mat-table
                    [dataSource]="sundryCreditorsAccounts"
                    class="w-100"
                    (mouseenter)="showSelectAll = true"
                    (mouseleave)="showSelectAll = false"
                >
                    <ng-container matColumnDef="vendor_name">
                        <th
                            class="mat-vendor-name"
                            mat-header-cell
                            *matHeaderCellDef
                            #searchCustomerContainer
                            (clickOutside)="handleClickOutside($event, searchCustomerContainer, 'name')"
                        >
                            <div class="d-flex select-all-checkbox-wrapper">
                                <mat-checkbox
                                    class="pos-abs"
                                    color="primary"
                                    *ngIf="selectedCheckedContacts?.length || showSelectAll"
                                    [(ngModel)]="allSelectionModel"
                                    (ngModelChange)="toggleAllSelection(allSelectionModel)"
                                ></mat-checkbox>
                                <div class="d-flex align-items-center">
                                    <div>
                                        <ng-container
                                            *ngTemplateOutlet="
                                                searchTemplate;
                                                context: {
                                                    $implicit: showNameSearch,
                                                    fieldName: 'name',
                                                    formControl: searchedName,
                                                    title: commonLocaleData?.app_vendor_name
                                                }
                                            "
                                        ></ng-container>
                                    </div>
                                    <ng-container
                                        *ngTemplateOutlet="
                                            !showNameSearch ? sortingTemplate : '';
                                            context: { $implicit: 'name' }
                                        "
                                    >
                                    </ng-container>
                                </div>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            class="position-relative word-wrap"
                            [attr.data-title]="commonLocaleData?.app_vendor_name"
                        >
                            <div class="vendor-name-field cursor-pointer" (dblclick)="trigger?.openMenu()">
                                <div class="select-single-checkbox-wrapper">
                                    <mat-checkbox
                                        [ngClass]="{ 'visible-check-box': selectedCheckedContacts.length }"
                                        type="checkbox"
                                        color="primary"
                                        class="mr-2 checkbox-left-side-in-table"
                                        (change)="selectAccount($event, account)"
                                        [(ngModel)]="account.isSelected"
                                    >
                                    </mat-checkbox>
                                    <span>{{ account.name }}</span>
                                </div>
                                <button
                                    mat-icon-button
                                    id="edit-model-basic2"
                                    class="table-menu-first-td"
                                    [matMenuTriggerFor]="dropdownBasic2"
                                    #trigger="matMenuTrigger"
                                >
                                    <span class="icon-dots-three-vertical"></span>
                                </button>

                                <mat-menu #dropdownBasic2="matMenu">
                                    <div class="account-detail-custom-header">
                                        <div class="d-flex p-0">
                                            <div class="account-detail-padding flex-fill border-right-0">
                                                <h3 class="account-detail-custom-title word-break">
                                                    <span (click)="updateCustomerAcc('vendor', account)">{{
                                                        account?.name
                                                    }}</span>
                                                </h3>
                                            </div>

                                            <button
                                                mat-icon-button
                                                class="account-detail-padding"
                                                (click)="updateCustomerAcc('vendor', account)"
                                            >
                                                <img src="{{ imgPath }}path.svg" />
                                            </button>
                                        </div>
                                        <div class="custom-detail">
                                            <h4>{{ account?.mobileNo }}</h4>
                                            <h4>{{ account?.email }}</h4>
                                            <h4>{{ account?.gstIn }}</h4>
                                        </div>
                                    </div>
                                    <button
                                        mat-menu-item
                                        *ngIf="!isMobileScreen"
                                        class="menu-table-item"
                                        (click)="performActions(1, account)"
                                    >
                                        {{ commonLocaleData?.app_goto_ledger }}
                                    </button>
                                    <button mat-menu-item class="menu-table-item" (click)="performActions(2, account)">
                                        {{ commonLocaleData?.app_record_bill }}
                                    </button>
                                    <button
                                        mat-menu-item
                                        class="menu-table-item"
                                        (click)="performActions(4, account, $event)"
                                    >
                                        {{ commonLocaleData?.app_send_email }}
                                    </button>
                                </mat-menu>

                                <!--Modal for Mail/SMS-->

                                <ng-template #mailModal>
                                    <div (click)="$event.stopPropagation()">
                                        <div class="modal-header theme-bg pd-l2 pd-r2">
                                            <h3 class="modal-title bg" id="modal-title">
                                                {{ messageBody.header.set }}
                                            </h3>
                                            <button
                                                mat-icon-button
                                                aria-hidden="true"
                                                class="close"
                                                data-dismiss="modal"
                                                [attr.aria-label]="commonLocaleData?.app_close"
                                                (click)="closeAllDialogs()"
                                            >
                                                ×
                                            </button>
                                        </div>

                                        <div class="modal-body pd-l2 pd-r2 clearfix">
                                            <h1 class="mr-b1 mr-t15" *ngIf="messageBody.type == 'Email'">
                                                {{ localeData?.enter_subject }}:
                                            </h1>
                                            <text-field
                                                *ngIf="messageBody.type == 'Email'"
                                                [cssClass]="'form-control mr-b1'"
                                                #subject
                                                [(ngModel)]="messageBody.subject"
                                                type="text"
                                                [placeholder]="localeData?.enter_subject_placeholder"
                                            ></text-field>
                                            <h1 class="mr-b1 mr-t15">{{ localeData?.type_message_body }}:</h1>
                                            <textarea
                                                matInput
                                                #messageBox
                                                [(ngModel)]="messageBody.msg"
                                                class="form-control resize-none"
                                                rows="4"
                                                [placeholder]="localeData?.type_message_body_placeholder"
                                            ></textarea>
                                            <small class="mr-t05 mr-b05 grey mr-t15 d-block">{{
                                                localeData?.tip
                                            }}</small>

                                            <div class="mat-chip-wrapper">
                                                <mat-chip-list class="font-12">
                                                    <mat-chip
                                                        *ngFor="let val of dataVariables"
                                                        (click)="addValueToMsg(val)"
                                                        >{{ val.name }}</mat-chip
                                                    >
                                                </mat-chip-list>
                                            </div>
                                            <div class="mr-t4">
                                                <button
                                                    mat-raised-button
                                                    class="btn-sm btn-success pull-right mr-l1"
                                                    (click)="send('sundrycreditors')"
                                                >
                                                    {{ messageBody.btn.set }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="purchase">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ commonLocaleData?.app_purchase }}
                                <ng-container
                                    *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'creditTotal' }"
                                >
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_purchase">
                            <span class="d-flex justify-content-end">
                                <amount-field
                                    [amount]="account.creditTotal"
                                    [currencySymbol]="false"
                                    [currencyCode]="false"
                                >
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="parent_group">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex align-items-center">
                                {{ commonLocaleData?.app_parent_group }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'group' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_parent_group">
                            <div class="table-email">{{ account?.groupUniqueName }}</div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="opening">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ localeData?.opening }}
                                <ng-container
                                    *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'openingBalance' }"
                                >
                                </ng-container>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            class="word-wrap text-right"
                            [attr.data-title]="localeData?.opening"
                            [ngClass]="{
                                'negative-balance':
                                    account.openingBalance?.type === 'DEBIT' &&
                                    formatAmountInCurrency(account.openingBalance?.amount) > 0
                            }"
                        >
                            <div class="d-flex justify-content-end">
                                <span
                                    *ngIf="
                                        account.openingBalance?.type === 'DEBIT' &&
                                        formatAmountInCurrency(account.openingBalance?.amount) > 0
                                    "
                                    >-</span
                                >
                                <span>
                                    <amount-field
                                        [amount]="account.openingBalance?.amount"
                                        [currencySymbol]="false"
                                        [currencyCode]="false"
                                    >
                                    </amount-field>
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="payment">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ commonLocaleData?.app_payment }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'debitTotal' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_payment">
                            <span class="d-flex justify-content-end">
                                <amount-field
                                    [amount]="account.debitTotal"
                                    [currencySymbol]="false"
                                    [currencyCode]="false"
                                >
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="receipt">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ commonLocaleData?.app_receipt }}
                                <ng-container
                                    *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'creditTotal' }"
                                >
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="account.receipts">
                            <span class="d-flex justify-content-end">
                                <amount-field
                                    [amount]="account.creditTotal"
                                    [currencySymbol]="false"
                                    [currencyCode]="false"
                                >
                                </amount-field>
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="closing">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex justify-content-end align-items-center">
                                {{ localeData?.closing }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'amountDue' }">
                                </ng-container>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            [attr.data-title]="localeData?.closing"
                            [ngClass]="{
                                'word-wrap text-right': true,
                                'negative-balance':
                                    account.closingBalance?.type === 'DEBIT' &&
                                    formatAmountInCurrency(account.closingBalance?.amount) > 0
                            }"
                        >
                            <div class="d-flex justify-content-end">
                                <span
                                    *ngIf="
                                        account.closingBalance?.type === 'DEBIT' &&
                                        formatAmountInCurrency(account.closingBalance?.amount) > 0
                                    "
                                    >-</span
                                >
                                <span>
                                    <amount-field
                                        [amount]="account.closingBalance?.amount"
                                        [currencySymbol]="false"
                                        [currencyCode]="false"
                                    ></amount-field>
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="contacts">
                        <th class="contact-header" mat-header-cell *matHeaderCellDef>
                            <div class="d-flex">
                                <div class="flex-fill">
                                    {{ localeData?.contacts }}
                                </div>
                            </div>
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account"
                            [attr.data-title]="commonLocaleData?.app_email"
                            class="font-12"
                        >
                            <div>
                                {{ account.email || "-" }}
                            </div>
                            <div>
                                {{ account.mobileNo || "-" }}
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="gstin">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex align-items-center">
                                {{ commonLocaleData?.app_tax_number }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'gstin' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_gstin">
                            {{ account.gstIn || "-" }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="state">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="d-flex align-items-center">
                                {{ commonLocaleData?.app_state }}
                                <ng-container *ngTemplateOutlet="sortingTemplate; context: { $implicit: 'state' }">
                                </ng-container>
                            </div>
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_state">
                            {{ account?.state?.name || "-" }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="comment">
                        <th class="comment-header" mat-header-cell *matHeaderCellDef>
                            {{ localeData?.comment }}
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let account; let idx = index"
                            (click)="updateCommentIdx = idx"
                            [attr.data-title]="localeData?.comment"
                        >
                            <ng-container *ngIf="updateCommentIdx != idx">
                                {{ account.comment || "-" }}
                            </ng-container>
                            <ng-container *ngIf="updateCommentIdx === idx">
                                <textarea
                                    matInput
                                    class="form-control"
                                    maxlength="100"
                                    [(ngModel)]="account.comment"
                                    (blur)="updateComment(account)"
                                ></textarea>
                            </ng-container>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef width="200px">
                            {{ commonLocaleData?.app_action }}
                        </th>
                        <td mat-cell *matCellDef="let account" [attr.data-title]="commonLocaleData?.app_action">
                            <button
                                mat-raised-button
                                *ngIf="isGetAllIntegratedBankInProgress"
                                class="btn-small btn-light min-width-137 contact-ipad-responsive"
                            >
                                {{ commonLocaleData?.app_loading }}
                            </button>
                            <button
                                mat-raised-button
                                *ngIf="!isGetAllIntegratedBankInProgress && isIciciAccountPendingForApproval"
                                class="
                                    btn-small btn-light
                                    min-width-137
                                    pending-approval-button
                                    contact-ipad-responsive
                                "
                                (click)="showIntegrationProcess()"
                            >
                                {{ localeData?.pending_approval }}
                            </button>
                            <button
                                mat-raised-button
                                *ngIf="!isICICIIntegrated && !isGetAllIntegratedBankInProgress"
                                class="btn-small btn-light min-width-137 contact-ipad-responsive"
                                [routerLink]="['/pages/settings/integration/payment']"
                            >
                                {{ localeData?.connect_icici_bank }}
                            </button>
                            <ng-container
                                *ngIf="
                                    isICICIIntegrated &&
                                    !isGetAllIntegratedBankInProgress &&
                                    !isIciciAccountPendingForApproval
                                "
                            >
                                <button
                                    mat-raised-button
                                    *ngIf="account?.bankPaymentDetails && account?.country?.code === 'IN'"
                                    class="btn-small btn-success min-width-137 contact-ipad-responsive"
                                    (click)="openBulkPaymentModal(account)"
                                >
                                    {{ commonLocaleData?.app_pay_now }}
                                </button>
                                <button
                                    mat-raised-button
                                    *ngIf="!account?.bankPaymentDetails"
                                    class="btn-small btn-light min-width-137 contact-ipad-responsive"
                                    (click)="updateCustomerAcc('vendor', account)"
                                >
                                    {{ commonLocaleData?.app_add_bank_details }}
                                </button>
                            </ng-container>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                </table>
            </ng-container>
        </div>

        <div colspan="100%" class="xs-pl-0 pagination-wrapper">
            <div
                *ngIf="
                    activeTab === 'customer' &&
                    sundryDebtorsAccountsBackup.results &&
                    sundryDebtorsAccountsBackup.results.length &&
                    totalCustomers >= paginationLimit
                "
            >
                <div class="text-center">
                    <pagination
                        [totalItems]="sundryDebtorsAccountsBackup.totalItems"
                        [(ngModel)]="sundryDebtorsAccountsBackup.page"
                        [maxSize]="5"
                        class="pagination-sm"
                        [boundaryLinks]="true"
                        [itemsPerPage]="sundryDebtorsAccountsBackup.count"
                        [rotate]="false"
                        (pageChanged)="pageChanged($event)"
                        [firstText]="commonLocaleData?.app_first"
                        [previousText]="commonLocaleData?.app_previous"
                        [nextText]="commonLocaleData?.app_next"
                        [lastText]="commonLocaleData?.app_last"
                    >
                    </pagination>
                </div>
            </div>

            <div
                *ngIf="
                    activeTab === 'vendor' &&
                    sundryCreditorsAccountsBackup.results &&
                    sundryCreditorsAccountsBackup.results.length &&
                    totalVendors >= paginationLimit
                "
            >
                <div class="text-center">
                    <pagination
                        [totalItems]="sundryCreditorsAccountsBackup.totalItems"
                        [(ngModel)]="sundryCreditorsAccountsBackup.page"
                        [maxSize]="5"
                        class="pagination-sm"
                        [boundaryLinks]="true"
                        [itemsPerPage]="sundryCreditorsAccountsBackup.count"
                        [rotate]="false"
                        (pageChanged)="pageChanged($event)"
                        [firstText]="commonLocaleData?.app_first"
                        [previousText]="commonLocaleData?.app_previous"
                        [nextText]="commonLocaleData?.app_next"
                        [lastText]="commonLocaleData?.app_last"
                    >
                    </pagination>
                </div>
            </div>
        </div>
        <div
            class="no-data"
            *ngIf="
                (activeTab === 'customer' && !sundryDebtorsAccounts?.length) ||
                (activeTab === 'vendor' && !sundryCreditorsAccounts?.length)
            "
        >
            <div class="align-item-center">
                <img class="customer-img" src="{{ imgPath }}customer-vendor/stock-photo.png" alt="" />
                <div class="btn-group pull-right">
                    <button
                        mat-raised-button
                        *ngIf="activeTab == 'customer'"
                        class="btn-sky-blue mr-0"
                        (click)="openAddAndManage('customer')"
                    >
                        {{ localeData?.new_customer }}
                    </button>
                    <button
                        mat-raised-button
                        *ngIf="activeTab == 'vendor'"
                        class="btn-sky-blue mr-0"
                        (click)="openAddAndManage('vendor')"
                    >
                        {{ localeData?.new_vendor }}
                    </button>
                </div>
            </div>
        </div>
    </ng-template>

    <!-- region sorting template -->
    <ng-template #sortingTemplate let-col>
        <div class="icon-pointer cp">
            <div
                class="icon-sort-asc text-light-2 d-block font-xxs"
                (click)="sort(col, 'asc')"
                *ngIf="key !== col"
                [ngClass]="{ 'active-text-color': key === col && order === 'asc' }"
            ></div>

            <div
                class="icon-sort-asc text-light-2 d-block font-xxs"
                (click)="sort(col, 'desc')"
                *ngIf="key === col && order === 'asc'"
                [ngClass]="{ 'active-text-color': key === col && order === 'asc' }"
            ></div>

            <div
                class="icon-sort-asc text-light-2 d-block font-xxs"
                *ngIf="key === col && order === 'desc'"
                (click)="sort(col, 'asc')"
                [ngClass]="{ 'active-text-color': key === col && order === 'desc' }"
            ></div>
        </div>
    </ng-template>
    <!-- endregion bank integration from by bank name:  ui/bank/integration/form?bankName=ICICI&= -->

    <ng-template #template>
        <payment-aside
            *ngIf="isBulkPaymentShow"
            [selectedAccountsForBulkPayment]="selectedAccountsList"
            [selectedAccForPayment]="selectedAccForPayment"
            [localeData]="localeData"
            [commonLocaleData]="commonLocaleData"
            (closeModelEvent)="closeBulkPaymentModel($event)"
        ></payment-aside>
    </ng-template>
    <!-- endregion -->

    <ng-template #datepickerTemplate>
        <div class="datepicker-modal">
            <div class="modal-body">
                <app-datepicker-wrapper
                    [inputStartDate]="selectedDateRange?.startDate"
                    [inputEndDate]="selectedDateRange?.endDate"
                    [alwaysShowCalendars]="true"
                    [ranges]="datePickerOptions"
                    [selectedRangeLabel]="selectedRangeLabel"
                    [showCustomRangeLabel]="true"
                    [showClearButton]="false"
                    [showCancel]="true"
                    [linkedCalendars]="true"
                    [showDropdowns]="true"
                    (rangeClicked)="selectedDate($event)"
                    (datesUpdated)="selectedDate($event)"
                    [keepCalendarOpeningWithRange]="false"
                    [showRangeLabelOnInput]="false"
                    [dateFieldPosition]="dateFieldPosition"
                ></app-datepicker-wrapper>
            </div>
        </div>
    </ng-template>

    <ng-template
        #searchTemplate
        let-show
        let-title="title"
        let-placeholder="placeholder"
        let-fieldName="fieldName"
        let-formControl="formControl"
    >
        <div class="align-items-center d-flex" [hidden]="show">
            <button mat-icon-button (click)="toggleSearch(fieldName)" class="customer-vendor-name-search-icon">
                <span class="icon-search"></span>
            </button>
            <span> {{ title }}</span>
        </div>
        <div class="align-items-center d-flex pd-l14" [hidden]="!show">
            <text-field
                [type]="'text'"
                [placeholder]="getSearchFieldText(fieldName)"
                [cssClass]="'form-control search-table'"
                [formControl]="formControl"
                [autoFocus]="show"
            ></text-field>
        </div>
    </ng-template>
</ng-container>
